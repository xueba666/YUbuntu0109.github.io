<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ¬¢è¿å‚è§‚å°ç°ç°çš„ç½‘ç«™å“Ÿ ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾ ~</title>
  
  <subtitle>My Personal blog website â€”â€” be founded on March 9, 2019</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-08-15T09:02:05.511Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>é»„å®‡è¾‰</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Javaé¡¹ç›®å¼€å‘ä¸­PO,BO,VO,DTO,POJO,DAOçš„æ¦‚å¿µåŠå…¶ä½œç”¨</title>
    <link href="http://yoursite.com/2019/08/15/Java%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E4%B8%ADPO-BO-VO-DTO-POJO-DAO%E7%9A%84%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%85%B6%E4%BD%9C%E7%94%A8/"/>
    <id>http://yoursite.com/2019/08/15/Javaé¡¹ç›®å¼€å‘ä¸­PO-BO-VO-DTO-POJO-DAOçš„æ¦‚å¿µåŠå…¶ä½œç”¨/</id>
    <published>2019-08-15T07:39:18.000Z</published>
    <updated>2019-08-15T09:02:05.511Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Javaé¡¹ç›®å¼€å‘ä¸­PO-BO-VO-DTO-POJO-DAOçš„æ¦‚å¿µåŠå…¶ä½œç”¨"><a href="#å­¦ä¹ ç¬”è®°-Javaé¡¹ç›®å¼€å‘ä¸­PO-BO-VO-DTO-POJO-DAOçš„æ¦‚å¿µåŠå…¶ä½œç”¨" class="headerlink" title="å­¦ä¹ ç¬”è®° : Javaé¡¹ç›®å¼€å‘ä¸­PO,BO,VO,DTO,POJO,DAOçš„æ¦‚å¿µåŠå…¶ä½œç”¨"></a>å­¦ä¹ ç¬”è®° : Javaé¡¹ç›®å¼€å‘ä¸­PO,BO,VO,DTO,POJO,DAOçš„æ¦‚å¿µåŠå…¶ä½œç”¨</h2><p><em>æœ€è¿‘å‚ä¸äº†GitHubä¸Šçš„ä¸€ä¸ªå¼€æºé¡¹ç›® : <a href="https://github.com/YUbuntu0109/springboot-shiro" target="_blank" rel="noopener">ä¸€ä¸ªç®€æ´ä¼˜ç¾çš„Springbooté›†æˆShiroçš„æƒé™ç®¡ç†ç³»ç»Ÿ</a>, é¡¹ç›®ä¸­æ— è®ºæ˜¯æ¨¡å—çš„åˆ’åˆ†,è¿˜æ˜¯ç»“æ„çš„åˆ†å±‚,éƒ½è®©æˆ‘çœ¼å‰ä¸€äº®! æ—¢è€Œä»£ç çš„åŠŸèƒ½è¢«ç†æ‰€å½“ç„¶åœ°åˆ’åˆ†çš„éå¸¸æœ‰å±‚æ¬¡æ„Ÿ,å¯è§ä½œè€…çš„ç¼–ç¨‹è®¾è®¡æ°´å¹³å®å±å‰å®³å•Š~ ä¸‹é¢æ¥ä¸€èµ·å­¦ä¹ ä¸‹Javaé¡¹ç›®å¼€å‘ä¸­ <code>PO</code>, <code>BO</code>, <code>VO</code>, <code>DTO</code>, <code>POJO</code>, <code>DAO</code> çš„æ¦‚å¿µåŠå…¶ä½œç”¨å§~</em></p><h3 id="PO-beanã€entityç­‰å‘½å"><a href="#PO-beanã€entityç­‰å‘½å" class="headerlink" title="PO(beanã€entityç­‰å‘½å)"></a>PO(beanã€entityç­‰å‘½å)</h3><p><em><code>Persistant Object</code>æŒä¹…å¯¹è±¡ : æ•°æ®åº“è¡¨ä¸­çš„è®°å½•åœ¨Javaå¯¹è±¡ä¸­çš„æ˜¾ç¤ºçŠ¶æ€. æœ€å½¢è±¡çš„ç†è§£å°±æ˜¯ä¸€ä¸ª<code>PO</code>å°±æ˜¯æ•°æ®åº“ä¸­çš„ä¸€æ¡è®°å½•,å¥½å¤„æ˜¯å¯ä»¥æŠŠä¸€æ¡è®°å½•ä½œä¸ºä¸€ä¸ªå¯¹è±¡å¤„ç†,å¯ä»¥æ–¹ä¾¿çš„è½¬ä¸ºå…¶å®ƒå¯¹è±¡</em></p><h3 id="BO-serviceã€managerã€businessç­‰å‘½å"><a href="#BO-serviceã€managerã€businessç­‰å‘½å" class="headerlink" title="BO(serviceã€managerã€businessç­‰å‘½å)"></a>BO(serviceã€managerã€businessç­‰å‘½å)</h3><p><em><code>Business Object</code>ä¸šåŠ¡å¯¹è±¡ : ä¸»è¦ä½œç”¨æ˜¯æŠŠä¸šåŠ¡é€»è¾‘å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡. è¿™ä¸ªå¯¹è±¡å¯ä»¥åŒ…æ‹¬ä¸€ä¸ªæˆ–å¤šä¸ªå…¶å®ƒçš„å¯¹è±¡,å½¢è±¡æè¿°ä¸ºä¸€ä¸ªå¯¹è±¡çš„å½¢ä¸ºå’ŒåŠ¨ä½œ,å½“ç„¶ä¹Ÿæœ‰æ¶‰åŠåˆ°åŸºå®ƒå¯¹è±¡çš„ä¸€äº›å½¢ä¸ºå’ŒåŠ¨ä½œ. æ¯”å¦‚å¤„ç†ä¸€ä¸ªäººçš„ä¸šåŠ¡é€»è¾‘,æœ‰ç¡è§‰,åƒé¥­,å·¥ä½œ,ä¸Šç­ç­‰ç­‰å½¢ä¸º,è¿™æ ·å¤„ç†ä¸šåŠ¡é€»è¾‘æ—¶,æˆ‘ä»¬å°±å¯ä»¥é’ˆå¯¹BOå»å¤„ç†</em></p><h3 id="VO-fromä¹Ÿæœ‰æ­¤å†™æ³•"><a href="#VO-fromä¹Ÿæœ‰æ­¤å†™æ³•" class="headerlink" title="VO(fromä¹Ÿæœ‰æ­¤å†™æ³•)"></a>VO(fromä¹Ÿæœ‰æ­¤å†™æ³•)</h3><p><em><code>Value Object</code>å€¼å¯¹è±¡ : ä¸»è¦ä½“ç°åœ¨è§†å›¾çš„å¯¹è±¡,å¯¹äºä¸€ä¸ª<code>WEB</code>é¡µé¢å°†æ•´ä¸ªé¡µé¢çš„å±æ€§å°è£…æˆä¸€ä¸ªå¯¹è±¡,ç„¶åç”¨ä¸€ä¸ªVOå¯¹è±¡åœ¨æ§åˆ¶å±‚ä¸è§†å›¾å±‚è¿›è¡Œä¼ è¾“äº¤æ¢</em></p><h3 id="DTO-ç»è¿‡å¤„ç†åçš„PO-å¯èƒ½å¢åŠ æˆ–è€…å‡å°‘POçš„å±æ€§"><a href="#DTO-ç»è¿‡å¤„ç†åçš„PO-å¯èƒ½å¢åŠ æˆ–è€…å‡å°‘POçš„å±æ€§" class="headerlink" title="DTO(ç»è¿‡å¤„ç†åçš„PO,å¯èƒ½å¢åŠ æˆ–è€…å‡å°‘POçš„å±æ€§)"></a>DTO(ç»è¿‡å¤„ç†åçš„PO,å¯èƒ½å¢åŠ æˆ–è€…å‡å°‘POçš„å±æ€§)</h3><p><em><code>Data Transfer Object</code>æ•°æ®ä¼ è¾“å¯¹è±¡ : ä¸»è¦ç”¨äºè¿œç¨‹è°ƒç”¨ç­‰éœ€è¦å¤§é‡ä¼ è¾“å¯¹è±¡çš„åœ°æ–¹. æ¯”å¦‚æˆ‘ä»¬ä¸€å¼ è¡¨æœ‰100ä¸ªå­—æ®µ,é‚£ä¹ˆå¯¹åº”çš„POå°±æœ‰100ä¸ªå±æ€§,ä½†æ˜¯æˆ‘ä»¬ç•Œé¢ä¸Šåªè¦æ˜¾ç¤º10ä¸ªå­—æ®µ,å®¢æˆ·ç«¯ç”¨<code>WEB service</code>æ¥è·å–æ•°æ®,æ²¡æœ‰å¿…è¦æŠŠæ•´ä¸ªPOå¯¹è±¡ä¼ é€’åˆ°å®¢æˆ·ç«¯,è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ç”¨åªæœ‰è¿™10ä¸ªå±æ€§çš„DTOæ¥ä¼ é€’ç»“æœåˆ°å®¢æˆ·ç«¯,è¿™æ ·ä¹Ÿä¸ä¼šæš´éœ²æœåŠ¡ç«¯è¡¨ç»“æ„. åˆ°è¾¾å®¢æˆ·ç«¯ä»¥å,å¦‚æœç”¨è¿™ä¸ªå¯¹è±¡æ¥å¯¹åº”ç•Œé¢æ˜¾ç¤º,é‚£æ­¤æ—¶å®ƒçš„èº«ä»½å°±è½¬ä¸ºVO</em></p><h3 id="POJO-POJOæ˜¯ä¸€ç§æ¦‚å¿µæˆ–è€…æ¥å£-èº«ä»½åŠä½œç”¨éšç¯å¢ƒå˜åŒ–è€Œå˜åŒ–"><a href="#POJO-POJOæ˜¯ä¸€ç§æ¦‚å¿µæˆ–è€…æ¥å£-èº«ä»½åŠä½œç”¨éšç¯å¢ƒå˜åŒ–è€Œå˜åŒ–" class="headerlink" title="POJO(POJOæ˜¯ä¸€ç§æ¦‚å¿µæˆ–è€…æ¥å£,èº«ä»½åŠä½œç”¨éšç¯å¢ƒå˜åŒ–è€Œå˜åŒ–)"></a>POJO(POJOæ˜¯ä¸€ç§æ¦‚å¿µæˆ–è€…æ¥å£,èº«ä»½åŠä½œç”¨éšç¯å¢ƒå˜åŒ–è€Œå˜åŒ–)</h3><p><em><code>Plain Ordinary Java Object</code>ç®€å•Javaå¯¹è±¡ : å³POJOæ˜¯ä¸€ä¸ªç®€å•çš„æ™®é€šçš„Javaå¯¹è±¡,å®ƒä¸åŒ…å«ä¸šåŠ¡é€»è¾‘æˆ–æŒä¹…é€»è¾‘ç­‰,ä½†ä¸æ˜¯JavaBeanã€EntityBeanç­‰,ä¸å…·æœ‰ä»»ä½•ç‰¹æ®Šè§’è‰²å’Œä¸ç»§æ‰¿æˆ–ä¸å®ç°ä»»ä½•å…¶å®ƒJavaæ¡†æ¶çš„ç±»æˆ–æ¥å£. POJOæœ‰ä¸€äº›Privateçš„å‚æ•°ä½œä¸ºå¯¹è±¡çš„å±æ€§. ç„¶åé’ˆå¯¹æ¯ä¸ªå‚æ•°å®šä¹‰äº†getå’Œsetæ–¹æ³•ä½œä¸ºè®¿é—®çš„æ¥å£,POJOå¯¹è±¡æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºDataå¯¹è±¡ï¼Œå¤§é‡åº”ç”¨äºè¡¨ç°ç°å®ä¸­çš„å¯¹è±¡. <code>ä¸€ä¸ªPOJOæŒä¹…åŒ–ä»¥åå°±æ˜¯PO. ç›´æ¥ç”¨å®ƒä¼ é€’ã€ä¼ é€’è¿‡ç¨‹ä¸­å°±æ˜¯DTO. ç›´æ¥ç”¨æ¥å¯¹åº”è¡¨ç¤ºå±‚å°±æ˜¯VO</code></em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/15/Javaé¡¹ç›®å¼€å‘ä¸­PO-BO-VO-DTO-POJO-DAOçš„æ¦‚å¿µåŠå…¶ä½œç”¨/Java-POJO-PO-DTO-VO.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="DAO-Data-Access-Objectæ•°æ®è®¿é—®å¯¹è±¡"><a href="#DAO-Data-Access-Objectæ•°æ®è®¿é—®å¯¹è±¡" class="headerlink" title="DAO(Data Access Objectæ•°æ®è®¿é—®å¯¹è±¡)"></a>DAO(Data Access Objectæ•°æ®è®¿é—®å¯¹è±¡)</h3><p><em>è¿™ä¸ªå¤§å®¶æœ€ç†Ÿæ‚‰,å’Œä¸Šé¢å‡ ä¸ªOåŒºåˆ«æœ€å¤§,åŸºæœ¬æ²¡æœ‰äº’ç›¸è½¬åŒ–çš„å¯èƒ½æ€§å’Œå¿…è¦. ä¸»è¦ç”¨æ¥å°è£…å¯¹æ•°æ®åº“çš„è®¿é—®,é€šè¿‡å®ƒå¯ä»¥æŠŠPOJOæŒä¹…åŒ–ä¸ºPO,ç”¨POç»„è£…å‡ºæ¥VOã€DTO</em></p><h3 id="Controller-æ§åˆ¶å±‚"><a href="#Controller-æ§åˆ¶å±‚" class="headerlink" title="Controller(æ§åˆ¶å±‚)"></a>Controller(æ§åˆ¶å±‚)</h3><p><em>æ§åˆ¶å±‚ä¸»è¦ç”±<code>Action / Servlet</code>ç­‰æ„æˆ( ç›®å‰Spring MVCåˆ™æ˜¯é€šè¿‡@Controlleræ ‡ç­¾ä½¿ç”¨ ),æ­¤å±‚ä¸šåŠ¡å±‚ä¸è§†å›¾å±‚æ‰“äº¤é“çš„ä¸­é—´å±‚,è´Ÿè´£ä¼ è¾“VOå¯¹è±¡å’Œè°ƒç”¨BOå±‚çš„ä¸šåŠ¡æ–¹æ³•,è´Ÿè´£è§†å›¾å±‚è¯·æ±‚çš„æ•°æ®å¤„ç†åå“åº”ç»™è§†å›¾å±‚</em></p><h3 id="View-è§†å›¾å±‚"><a href="#View-è§†å›¾å±‚" class="headerlink" title="View(è§†å›¾å±‚)"></a>View(è§†å›¾å±‚)</h3><p><em>ä¸»è¦æ˜¯æŒ‡ç”±JSPã€HTMLç­‰æ–‡ä»¶å½¢æˆçš„æ˜¾ç¤ºå±‚,æ€»ç»“ä¸€ä¸‹è¦ç”¨å…·ä½“çš„X0éœ€è¦çœ‹å…·ä½“ç¯å¢ƒåŠé¡¹ç›®æ¶æ„,åœ¨ä¸åŒçš„å±‚ã€ä¸åŒçš„åº”ç”¨åœºåˆ,å¯¹è±¡çš„èº«ä»½ä¹Ÿä¸ä¸€æ ·,è€Œä¸”å¯¹è±¡èº«ä»½çš„è½¬åŒ–ä¹Ÿæ˜¯å¾ˆè‡ªç„¶çš„. å°±åƒä½ å¯¹è€å©†æ¥è¯´å°±æ˜¯è€å…¬,å¯¹çˆ¶æ¯æ¥è¯´å°±æ˜¯å­å¥³. è®¾è®¡è¿™äº›æ¦‚å¿µçš„åˆè¡·ä¸æ˜¯ä¸ºäº†å”¬äººè€Œæ˜¯ä¸ºäº†æ›´å¥½çš„ç†è§£å’Œå¤„ç†å„ç§é€»è¾‘,è®©å¤§å®¶èƒ½æ›´å¥½çš„å»ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼å¤„ç†é—®é¢˜</em></p><h3 id="ä¸Šè¿°åè¯åœ¨å®é™…é¡¹ç›®çš„åº”ç”¨ä¸¾ä¾‹"><a href="#ä¸Šè¿°åè¯åœ¨å®é™…é¡¹ç›®çš„åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="ä¸Šè¿°åè¯åœ¨å®é™…é¡¹ç›®çš„åº”ç”¨ä¸¾ä¾‹"></a>ä¸Šè¿°åè¯åœ¨å®é™…é¡¹ç›®çš„åº”ç”¨ä¸¾ä¾‹</h3><p><em><code>æ§åˆ¶å±‚</code>( controller-action ),<code>ä¸šåŠ¡å±‚/æœåŠ¡å±‚</code>( bo-manager ),<code>å®ä½“å±‚</code>( po-entity ),<code>æ•°æ®è®¿é—®</code>( dao ),<code>è§†å›¾å¯¹è±¡</code>( Vo-æœ¬é¡¹ç›®çœç•¥ ),<code>è§†å›¾å±‚</code>( view-jsp/html )</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/15/Javaé¡¹ç›®å¼€å‘ä¸­PO-BO-VO-DTO-POJO-DAOçš„æ¦‚å¿µåŠå…¶ä½œç”¨/Javaé¡¹ç›®ä¸­å„ä¸ªå±‚æ¬¡çš„è¯¦ç»†åˆ’åˆ†.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em><code>åœ¨å¹³æ—¶å¼€å‘é¡¹ç›®ä¸­å¤§å®¶è®°å¾—è¦ç²¾ç»†è®¾è®¡å„å±‚,æ—¢è€Œé¿å…åç»­é¡¹ç›®å¼€å‘ä¸­äº§ç”Ÿä¸å¿…è¦çš„å¤§é‡é‡å¤å·¥ä½œ. å¦‚æœä¸æ˜¯å¤§å‹ç³»ç»Ÿå¯ç®€åŒ–ä¸€äº›å±‚,æ¯•ç«ŸæŠ€æœ¯æ˜¯ä¸ºåº”ç”¨æœåŠ¡å“’~</code></em></p><p><em>ğŸ™æ‘˜è‡ª(è·ç›ŠåŒªæµ…,éå¸¸æ„Ÿè°¢) : <a href="https://www.cnblogs.com/EasonJim/p/7967949.html" target="_blank" rel="noopener">https://www.cnblogs.com/EasonJim/p/7967949.html</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Javaé¡¹ç›®å¼€å‘ä¸­PO-BO-VO-DTO-POJO-DAOçš„æ¦‚å¿µåŠå…¶ä½œç”¨&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Javaé¡¹ç›®å¼€å‘ä¸­PO-BO-VO-DTO-POJO-DAOçš„æ¦‚å¿µåŠå…¶ä½œç”¨&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : J
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆFreeMarker</title>
    <link href="http://yoursite.com/2019/08/14/SpringBoot%E6%95%B4%E5%90%88FreeMarker/"/>
    <id>http://yoursite.com/2019/08/14/SpringBootæ•´åˆFreeMarker/</id>
    <published>2019-08-14T01:43:05.000Z</published>
    <updated>2019-08-14T02:18:25.459Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Spring-Bootæ•´åˆFreeMarker"><a href="#å­¦ä¹ ç¬”è®°-Spring-Bootæ•´åˆFreeMarker" class="headerlink" title="å­¦ä¹ ç¬”è®° : Spring Bootæ•´åˆFreeMarker"></a>å­¦ä¹ ç¬”è®° : Spring Bootæ•´åˆFreeMarker</h2><h3 id="FreeMarkerå®˜æ–¹ç®€ä»‹"><a href="#FreeMarkerå®˜æ–¹ç®€ä»‹" class="headerlink" title="FreeMarkerå®˜æ–¹ç®€ä»‹"></a>FreeMarkerå®˜æ–¹ç®€ä»‹</h3><p><em>Apache FreeMarkerâ„¢ is a template engine: a Java library to generate text output (HTML web pages, e-mails, configuration files, source code, etc.) based on templates and changing data. Templates are written in the FreeMarker Template Language (FTL), which is a simple, specialized language (not a full-blown programming language like PHP). Usually, a general-purpose programming language (like Java) is used to prepare the data (issue database queries, do business calculations). Then, Apache FreeMarker displays that prepared data using templates. <code>In the template you are focusing on how to present the data, and outside the template you are focusing on what data to present.</code></em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/14/SpringBootæ•´åˆFreeMarker/FreeMarker-overview.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>This approach is often referred to as the MVC (Model View Controller) pattern, and is particularly popular for dynamic web pages. <code>It helps in separating web page designers (HTML authors) from developers (Java programmers usually). Designers won&#39;t face complicated logic in templates</code>, and can change the appearance of a page without programmers having to change or recompile code.</em></p><h3 id="å¼•å…¥Mavenä¾èµ–"><a href="#å¼•å…¥Mavenä¾èµ–" class="headerlink" title="å¼•å…¥Mavenä¾èµ–"></a>å¼•å…¥Mavenä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Web --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- FreeMark --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™Controller"><a href="#ç¼–å†™Controller" class="headerlink" title="ç¼–å†™Controller"></a>ç¼–å†™Controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.freemark.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot-freemarker</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: SpringBootæ•´åˆFreeMarker</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/14/2019-9:16 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hiFreeMark"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hiFreeMark</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"resource"</span>, <span class="string">"SringBoot is integrated with FreeMarker !"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™FreeMarkeré¡µé¢"><a href="#ç¼–å†™FreeMarkeré¡µé¢" class="headerlink" title="ç¼–å†™FreeMarkeré¡µé¢"></a>ç¼–å†™FreeMarkeré¡µé¢</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">style</span>=<span class="string">"color: blueviolet"</span>&gt;</span>$&#123;resource&#125; Date: $&#123;.now?string("yyyy-MM-dd HH:mm:ss.sss")&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><em>ç¨‹åºè¿è¡Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/14/SpringBootæ•´åˆFreeMarker/Hi-FreeMarker.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Spring-Bootæ•´åˆFreeMarker&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Spring-Bootæ•´åˆFreeMarker&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Spring Bootæ•´åˆFreeMarker&quot;&gt;&lt;/a&gt;
      
    
    </summary>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
      <category term="FreeMarker" scheme="http://yoursite.com/tags/FreeMarker/"/>
    
  </entry>
  
  <entry>
    <title>Lombokç®€ä»‹åŠåŸºæœ¬ä½¿ç”¨</title>
    <link href="http://yoursite.com/2019/08/13/Lombok%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <id>http://yoursite.com/2019/08/13/Lombokç®€ä»‹åŠåŸºæœ¬ä½¿ç”¨/</id>
    <published>2019-08-13T12:46:07.000Z</published>
    <updated>2019-08-13T14:06:47.313Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Lombokç®€ä»‹åŠåŸºæœ¬ä½¿ç”¨"><a href="#å­¦ä¹ ç¬”è®°-Lombokç®€ä»‹åŠåŸºæœ¬ä½¿ç”¨" class="headerlink" title="å­¦ä¹ ç¬”è®° : Lombokç®€ä»‹åŠåŸºæœ¬ä½¿ç”¨"></a>å­¦ä¹ ç¬”è®° : Lombokç®€ä»‹åŠåŸºæœ¬ä½¿ç”¨</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p><em>é—®é¢˜å¼•å…¥ : å¼€å‘ä¸­ç»å¸¸éœ€è¦å†™çš„JavaBean,éƒ½éœ€è¦èŠ±æ—¶é—´å»æ·»åŠ ç›¸åº”çš„getter/setter,ä¹Ÿè®¸è¿˜è¦å»å†™æ„é€ å™¨ã€equalsç­‰æ–¹æ³•,è€Œä¸”éœ€è¦ç»´æŠ¤,å½“å±æ€§å¤šæ—¶ä¼šå‡ºç°å¤§é‡çš„getter/setteræ–¹æ³•,è¿™äº›æ˜¾å¾—å¾ˆå†—é•¿ä¹Ÿæ²¡æœ‰å¤ªå¤šæŠ€æœ¯å«é‡,ä¸€æ—¦ä¿®æ”¹å±æ€§,å°±å®¹æ˜“å‡ºç°å¿˜è®°ä¿®æ”¹å¯¹åº”æ–¹æ³•çš„å¤±è¯¯å“Ÿ~</em></p><p><em>Lombokèƒ½é€šè¿‡æ³¨è§£çš„æ–¹å¼,åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ä¸ºå±æ€§ç”Ÿæˆ<code>æ„é€ å™¨</code>ã€<code>getter/setter</code>ã€<code>equals</code>ã€<code>hashcode</code>ã€<code>toString</code>æ–¹æ³•. å‡ºç°çš„ç¥å¥‡å°±æ˜¯åœ¨æºç ä¸­æ²¡æœ‰getterå’Œsetteræ–¹æ³•,ä½†æ˜¯åœ¨ç¼–è¯‘ç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­æœ‰getterå’Œsetteræ–¹æ³•. è¿™æ ·å°±çœå»äº†æ‰‹åŠ¨é‡å»ºè¿™äº›ä»£ç çš„éº»çƒ¦,æ—¢è€Œè¾¾åˆ°ç®€åŒ–ä»£ç ,æé«˜å¼€å‘äººå‘˜çš„å¼€å‘æ•ˆç‡çš„ç›®çš„</em></p><ul><li>ä¼˜ç‚¹ :<ul><li>èƒ½é€šè¿‡æ³¨è§£çš„å½¢å¼è‡ªåŠ¨ç”Ÿæˆæ„é€ å™¨ã€getter/setterã€equalsã€hashcodeã€toStringç­‰æ–¹æ³•,æé«˜äº†ä¸€å®šçš„å¼€å‘æ•ˆç‡</li><li>è®©ä»£ç å˜å¾—ç®€æ´,ä¸ç”¨è¿‡å¤šçš„å»å…³æ³¨ç›¸åº”çš„æ–¹æ³•</li><li>å±æ€§åšä¿®æ”¹æ—¶,ä¹Ÿç®€åŒ–äº†ç»´æŠ¤ä¸ºè¿™äº›å±æ€§æ‰€ç”Ÿæˆçš„getter/setteræ–¹æ³•ç­‰</li></ul></li><li>ç¼ºç‚¹ :<ul><li>ä¸æ”¯æŒå¤šç§å‚æ•°æ„é€ å™¨çš„é‡è½½</li><li>è™½ç„¶çœå»äº†æ‰‹åŠ¨åˆ›å»ºgetter/setteræ–¹æ³•çš„éº»çƒ¦,ä½†å¤§å¤§é™ä½äº†æºä»£ç çš„å¯è¯»æ€§å’Œå®Œæ•´æ€§,é™ä½äº†é˜…è¯»æºä»£ç çš„èˆ’é€‚åº¦</li></ul></li><li>æ€»ç»“ : <ul><li>Lombokè™½ç„¶æœ‰å¾ˆå¤šä¼˜ç‚¹,ä½†Lombokæ›´ç±»ä¼¼äºä¸€ç§IDEæ’ä»¶,é¡¹ç›®ä¹Ÿéœ€è¦ä¾èµ–ç›¸åº”çš„jaråŒ…. Lombokä¾èµ–jaråŒ…æ˜¯å› ä¸ºç¼–è¯‘æ—¶è¦ç”¨å®ƒçš„æ³¨è§£,ä¸ºä»€ä¹ˆè¯´å®ƒåˆç±»ä¼¼æ’ä»¶ ? å› ä¸ºåœ¨ä½¿ç”¨æ—¶Eclipseæˆ–IntelliJ IDEAéƒ½éœ€è¦å®‰è£…ç›¸åº”çš„æ’ä»¶,<code>åœ¨ç¼–è¯‘å™¨ç¼–è¯‘æ—¶é€šè¿‡æ“ä½œAST( æŠ½è±¡è¯­æ³•æ ‘ )æ”¹å˜å­—èŠ‚ç ç”Ÿæˆ,å˜å‘çš„å°±æ˜¯è¯´å®ƒåœ¨æ”¹å˜Javaè¯­æ³•. å®ƒä¸åƒSpringçš„ä¾èµ–æ³¨å…¥æˆ–è€…MyBatisçš„ORMä¸€æ ·æ˜¯è¿è¡Œæ—¶çš„ç‰¹æ€§,è€Œæ˜¯ç¼–è¯‘æ—¶çš„ç‰¹æ€§</code></li></ul></li></ul><h3 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h3><ol><li><p><em>æ·»åŠ Mavenä¾èµ– :</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>å®‰è£…IDEA(<code>IntelliJ Lombok plugin</code>)æ’ä»¶</em></p></li></ol><h3 id="å¸¸è§å¼‚å¸¸"><a href="#å¸¸è§å¼‚å¸¸" class="headerlink" title="å¸¸è§å¼‚å¸¸"></a>å¸¸è§å¼‚å¸¸</h3><ol><li><p><em>(å·²æ·»åŠ <code>lombok</code>ä¾èµ–æƒ…å†µä¸‹)æŠ›å‡ºæ­¤å¼‚å¸¸,(IDEAç¯å¢ƒ)è§£å†³æ–¹æ¡ˆ:å®‰è£…<code>IntelliJ Lombok plugin</code>å¹¶å¯ç”¨<code>Enable annotation processing</code></em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Warning:(49, 8) java: lombok.javac.apt.LombokProcessor could not be initialized. Lombok will not run during this compilation: java.lang.IllegalArgumentException: com.sun.tools.javac.main.DelegatingJavaFileManager$DelegatingSJFM extends com.sun.tools.javac.main.DelegatingJavaFileManager implements javax.tools.StandardJavaFileManager</span><br><span class="line">  at lombok.javac.apt.LombokFileObjects.getCompiler(LombokFileObjects.java:148)</span><br><span class="line">  at lombok.javac.apt.InterceptingJavaFileManager.&lt;init&gt;(InterceptingJavaFileManager.java:40)</span><br><span class="line">  at lombok.javac.apt.LombokProcessor.placePostCompileAndDontMakeForceRoundDummiesHook(LombokProcessor.java:165)</span><br><span class="line">  at lombok.javac.apt.LombokProcessor.init(LombokProcessor.java:87)</span><br><span class="line">  at lombok.core.AnnotationProcessor$JavacDescriptor.want(AnnotationProcessor.java:87)</span><br><span class="line">  at lombok.core.AnnotationProcessor.init(AnnotationProcessor.java:140)</span><br></pre></td></tr></table></figure></li><li><p><em>JDKç‰ˆæœ¬bug,è§£å†³æ–¹æ¡ˆ:é‡ç½®JDKç‰ˆæœ¬,Project Structureâ€”&gt;Porject settingsâ€”&gt;Project : å°†<code>Project SDK</code>è®¾ç½®ä¸º:<code>9(java version&quot;9.0.4&quot;)</code>, <code>language level</code>è®¾ç½®ä¸º<code>8</code>,è¯¦æƒ…æ“ä½œè¯·å‚è€ƒ : <a href="https://github.com/YUbuntu0109/YUbuntu0109.github.io/blob/ce0545de04d3cfc9b328a1760bb5f3c84d322362/source/_posts/%E8%AF%A6%E8%A7%A3%E5%9C%A8IDEA%E4%B8%AD%E5%A4%9A%E5%A4%84%E8%AE%BE%E7%BD%AEJDK%E5%8F%8A%E5%85%B6%E5%8C%BA%E5%88%AB.md" target="_blank" rel="noopener">IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK,æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ ?</a></em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Warning:(9, 8) java: lombok.javac.apt.LombokProcessor could not be initialized. Lombok will not run during this compilation: java.lang.IllegalArgumentException: com.sun.tools.javac.main.DelegatingJavaFileManager$DelegatingSJFM extends com.sun.tools.javac.main.DelegatingJavaFileManager implements javax.tools.StandardJavaFileManager</span><br><span class="line">  at lombok.javac.apt.LombokFileObjects.getCompiler(LombokFileObjects.java:148)</span><br><span class="line">  at lombok.javac.apt.InterceptingJavaFileManager.&lt;init&gt;(InterceptingJavaFileManager.java:40)</span><br></pre></td></tr></table></figure></li></ol><h3 id="ä½¿ç”¨Lombokå‰åå¯¹æ¯”"><a href="#ä½¿ç”¨Lombokå‰åå¯¹æ¯”" class="headerlink" title="ä½¿ç”¨Lombokå‰åå¯¹æ¯”"></a>ä½¿ç”¨Lombokå‰åå¯¹æ¯”</h3><ol><li><p><em>ä¸€ä¸ªæœªä½¿ç”¨Lombokçš„æ™®é€šJavaBean</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.lombok.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Logger log = Logger.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(Integer id, String name, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", password='"</span> + password + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ä¸€ä¸ªä½¿ç”¨Lombokçš„æ™®é€šJavaBean( ä½¿ç”¨Lombokæ³¨è§£è¾¾åˆ°ä¸ä¸Šè¿°JavaBeanåŒæ ·çš„æ•ˆæœ )~</em></p></li></ol><ul><li><code>@Data</code> : æ³¨è§£åœ¨ç±»ä¸Š,æä¾›ç±»æ‰€æœ‰å±æ€§çš„ getting å’Œ setting æ–¹æ³•,æ­¤å¤–è¿˜æä¾›äº†equalsã€canEqualã€hashCodeã€toStringæ–¹æ³•</li><li><code>@Setter</code> : æ³¨è§£åœ¨å±æ€§ä¸Š,ä¸ºå±æ€§æä¾› setting æ–¹æ³•</li><li><code>@Getter</code> : æ³¨è§£åœ¨å±æ€§ä¸Š,ä¸ºå±æ€§æä¾› getting æ–¹æ³•</li><li><code>@Log4j</code> : æ³¨è§£åœ¨ç±»ä¸Š,ä¸ºç±»æä¾›ä¸€ä¸ªå±æ€§åä¸º log çš„ log4j æ—¥å¿—å¯¹è±¡</li><li><code>@ToString</code> : æ³¨è§£åœ¨ç±»ä¸Š,ä¸ºç±»æä¾›ä¸€ä¸ª toString æ–¹æ³•</li><li><code>@NoArgsConstructor</code> : æ³¨è§£åœ¨ç±»ä¸Š,ä¸ºç±»æä¾›ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•</li><li><code>@AllArgsConstructor</code> : æ³¨è§£åœ¨ç±»ä¸Š,ä¸ºç±»æä¾›ä¸€ä¸ªå…¨å‚çš„æ„é€ æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.lombok.bean;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.ToString;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.log4j.Log4j;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Log</span>4j</span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserWithLombok</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">outLogInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"the message object to log ~"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>å‚è€ƒé“¾æ¥ :</em></p><ul><li><a href="https://github.com/rzwitserloot/lombok" target="_blank" rel="noopener">https://github.com/rzwitserloot/lombok</a></li><li><a href="https://www.cnblogs.com/heyonggang/p/8638374.html" target="_blank" rel="noopener">https://www.cnblogs.com/heyonggang/p/8638374.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Lombokç®€ä»‹åŠåŸºæœ¬ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Lombokç®€ä»‹åŠåŸºæœ¬ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Lombokç®€ä»‹åŠåŸºæœ¬ä½¿ç”¨&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Lombokç®€ä»‹åŠåŸºæœ¬ä½¿ç”¨&lt;/h2&gt;&lt;h3 i
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Lombok" scheme="http://yoursite.com/tags/Lombok/"/>
    
  </entry>
  
  <entry>
    <title>è¯¦è§£åœ¨IDEAä¸­å¤šå¤„è®¾ç½®JDKåŠå…¶åŒºåˆ«</title>
    <link href="http://yoursite.com/2019/08/13/%E8%AF%A6%E8%A7%A3%E5%9C%A8IDEA%E4%B8%AD%E5%A4%9A%E5%A4%84%E8%AE%BE%E7%BD%AEJDK%E5%8F%8A%E5%85%B6%E5%8C%BA%E5%88%AB/"/>
    <id>http://yoursite.com/2019/08/13/è¯¦è§£åœ¨IDEAä¸­å¤šå¤„è®¾ç½®JDKåŠå…¶åŒºåˆ«/</id>
    <published>2019-08-13T01:56:45.000Z</published>
    <updated>2019-08-13T03:08:17.159Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK-æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢"><a href="#å­¦ä¹ ç¬”è®°-IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK-æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢" class="headerlink" title="å­¦ä¹ ç¬”è®° : IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK,æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ ?"></a>å­¦ä¹ ç¬”è®° : IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK,æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ ?</h2><h3 id="è®¾ç½®ç¼–è¯‘å™¨çš„ç‰ˆæœ¬"><a href="#è®¾ç½®ç¼–è¯‘å™¨çš„ç‰ˆæœ¬" class="headerlink" title="è®¾ç½®ç¼–è¯‘å™¨çš„ç‰ˆæœ¬"></a>è®¾ç½®ç¼–è¯‘å™¨çš„ç‰ˆæœ¬</h3><p><em>ç¼–è¯‘å™¨çš„ç‰ˆæœ¬,æ—¢ç”Ÿæˆclassæ–‡ä»¶çš„jdkç‰ˆæœ¬ : Settings &gt; Build,Execution,Deployment &gt; Complier &gt; Java Compiler</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/13/è¯¦è§£åœ¨IDEAä¸­å¤šå¤„è®¾ç½®JDKåŠå…¶åŒºåˆ«/IDEA-JDK-Java-Complie.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h3 id="è®¾ç½®Modulesä¸­çš„SDKå’Œlanguage-levelç‰ˆæœ¬"><a href="#è®¾ç½®Modulesä¸­çš„SDKå’Œlanguage-levelç‰ˆæœ¬" class="headerlink" title="è®¾ç½®Modulesä¸­çš„SDKå’Œlanguage levelç‰ˆæœ¬"></a>è®¾ç½®Modulesä¸­çš„SDKå’Œlanguage levelç‰ˆæœ¬</h3><p><em>è¿™é‡Œé€‰æ‹©Modulesä¸­çš„SDKå’Œlanguage levelçš„é»˜è®¤ç‰ˆæœ¬ : Project Structure &gt; Project Settings &gt; Project</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/13/è¯¦è§£åœ¨IDEAä¸­å¤šå¤„è®¾ç½®JDKåŠå…¶åŒºåˆ«/IDEA-JDK-Modules-SDK_Language-level.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ³¨æ„ : <code>Language Levelä¸ºé™å®šé¡¹ç›®ç¼–è¯‘æ£€æŸ¥æ—¶æœ€ä½è¦æ±‚çš„ JDK ç‰¹æ€§</code></em></p><h3 id="è®¾ç½®é¡¹ç›®å®é™…çš„Language-Levelç‰ˆæœ¬"><a href="#è®¾ç½®é¡¹ç›®å®é™…çš„Language-Levelç‰ˆæœ¬" class="headerlink" title="è®¾ç½®é¡¹ç›®å®é™…çš„Language Levelç‰ˆæœ¬"></a>è®¾ç½®é¡¹ç›®å®é™…çš„Language Levelç‰ˆæœ¬</h3><p><em>Project Structure &gt; Project Settings &gt; Modules &gt; Sources</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/13/è¯¦è§£åœ¨IDEAä¸­å¤šå¤„è®¾ç½®JDKåŠå…¶åŒºåˆ«/IDEA-JDK-Language-level.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h3 id="è®¾ç½®é¡¹ç›®å®é™…çš„SDKç‰ˆæœ¬"><a href="#è®¾ç½®é¡¹ç›®å®é™…çš„SDKç‰ˆæœ¬" class="headerlink" title="è®¾ç½®é¡¹ç›®å®é™…çš„SDKç‰ˆæœ¬"></a>è®¾ç½®é¡¹ç›®å®é™…çš„SDKç‰ˆæœ¬</h3><p><em>ç›¸æ¯”æ•´ä¸ªå·¥ç¨‹è®¾ç½®è¯­è¨€çº§åˆ«å¯ä»¥æ›´åŠ åœ°ç²¾ç¡®æ§åˆ¶ : Project Structure &gt; Project Settings &gt; Modules &gt; Dependencies</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/13/è¯¦è§£åœ¨IDEAä¸­å¤šå¤„è®¾ç½®JDKåŠå…¶åŒºåˆ«/IDEA-JDK-Module-SDK.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h3 id="â“-IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#â“-IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="â“ IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK,æœ‰ä»€ä¹ˆåŒºåˆ« ?"></a>â“ IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK,æœ‰ä»€ä¹ˆåŒºåˆ« ?</h3><p><code>project SDK</code> : è¡¨ç¤ºå¼€å‘ç¯å¢ƒä½¿ç”¨ä»€ä¹ˆJDKæ¥ç¼–è¯‘<br><code>language level</code> :  è¡¨ç¤ºé¡¹ç›®æœ€ä½å¯ä»¥ä½¿ç”¨ä»€ä¹ˆç‰ˆæœ¬çš„JDKé€šè¿‡</p><p><em>è‡³äºè¯´ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«,è®©æˆ‘æ¥ç»™ä½ ä¸¾ä¸ªä¾‹å­ :è‹¥è®¾ç½®<code>project SDK</code>ä¸º1.8,<code>language level</code>è®¾ç½®ä¸º1.7,æ­¤æ—¶è‹¥ä½¿ç”¨lambdaè¡¨è¾¾å¼,IDEAåˆ™ä¼šå¸®ä½ æ ‡çº¢å¹¶æé†’ä½ è‹¥è¿™ä¹ˆå†™,é¡¹ç›®æœªæ¥å¯å°±ä¸èƒ½ä½¿ç”¨1.7ç‰ˆæœ¬çš„JDKç¼–è¯‘å•¦ ( <code>languang levelç”¨æ¥ä¿è¯ä»£ç æœ€ä½å¯ä»¥è¢«ä»€ä¹ˆçº§åˆ«çš„ JDK ç¼–è¯‘</code> ) ,å°½ç®¡ä½ ä½¿ç”¨çš„æ˜¯SDK1.8 Â· Â· Â·</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK-æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK-æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : IDEAä¸ºä½•å¤šå¤„è®¾ç½®JDK,æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ ?&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : 
      
    
    </summary>
    
    
      <category term="IDEA" scheme="http://yoursite.com/tags/IDEA/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹</title>
    <link href="http://yoursite.com/2019/08/11/%E4%B8%80%E4%B8%AA%E5%9F%BA%E7%A1%80%E7%9A%84%E7%9A%84SSM%E6%95%B4%E5%90%88Shiro%E6%A1%88%E4%BE%8B/"/>
    <id>http://yoursite.com/2019/08/11/ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹/</id>
    <published>2019-08-10T23:43:50.000Z</published>
    <updated>2019-08-12T01:20:12.761Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹"><a href="#å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹" class="headerlink" title="å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹"></a>å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹</h2><p><em>å‰äº›æ—¥å­å†™äº†<a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro" target="_blank" rel="noopener">ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹</a>,ç„¶ååˆè¿›é˜¶åœ°å­¦ä¹ äº†SSMæ•´åˆShiroçš„åŸºæœ¬çŸ¥è¯†,ç»§è€Œä»Šå¤©æ€»ç»“ä¸€ä¸‹ : å†™ä¸€ä¸ªåŸºç¡€çš„SSMæ•´åˆShiroæ¡ˆä¾‹(è¯¥æ¡ˆä¾‹ä¸ä¸Šè¿°æ¡ˆä¾‹æ€è·¯ç›¸åŒ)~ è¯¥æ¡ˆä¾‹çš„ä»£ç ä»“åº“ : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/ssm%20project%20with%20shiro" target="_blank" rel="noopener">https://github.com/YUbuntu0109/Shiro-learning/tree/master/ssm%20project%20with%20shiro</a></em></p><h3 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h3><p><em>æ•°æ®åº“ERå›¾å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/11/ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹/shiro-learning-database-er.png" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•°æ®è¡¨ä¸­ç”¨æˆ·åŠå…¶åˆ†é…çš„æƒé™ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤º :</em></p><table><thead><tr><th style="text-align:center">è´¦æˆ·</th><th style="text-align:center">å¯†ç (MD5åŠ å¯†å‰)</th><th style="text-align:center">è§’è‰²</th><th style="text-align:center">æƒé™</th></tr></thead><tbody><tr><td style="text-align:center">admin</td><td style="text-align:center">demo</td><td style="text-align:center">admin</td><td style="text-align:center">*</td></tr><tr><td style="text-align:center">tea</td><td style="text-align:center">demo</td><td style="text-align:center">teacher</td><td style="text-align:center">teaListView:view , stuListView:view , stuListView:add , stuListView:edit</td></tr><tr><td style="text-align:center">stu</td><td style="text-align:center">demo</td><td style="text-align:center">student</td><td style="text-align:center">stuListView:view</td></tr></tbody></table><h3 id="æ¡ˆä¾‹æˆªå±è§£æ"><a href="#æ¡ˆä¾‹æˆªå±è§£æ" class="headerlink" title="æ¡ˆä¾‹æˆªå±è§£æ"></a>æ¡ˆä¾‹æˆªå±è§£æ</h3><p><em>ç”¨æˆ·ç™»å½•é¡µé¢,è®¿é—®èµ„æºå‰å¿…é¡»å…ˆè¿›è¡Œç”¨æˆ·èº«ä»½è®¤è¯,è¯¦æƒ…å‚è€ƒèµ„æºæ‹¦æˆªå™¨ä¸­çš„é…ç½®ä¿¡æ¯å“Ÿ</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/11/ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹/ssm-shiro-ç”¨æˆ·ç™»å½•é¡µé¢.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>è‹¥è¦è®¿é—®æ•™å¸ˆ / å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µé¢,éœ€è¦ç”¨æˆ·æ‹¥æœ‰<code>teaListView:view / stuListView:view</code>æƒé™</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/11/ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹/ssm-shiro-ç”¨æˆ·ä¸»é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç®¡ç†å‘˜( admin )æ‹¥æœ‰è®¿é—®èµ„æºçš„æ‰€æœ‰æƒé™( </em> ),æ‰€ä»¥å¯ä»¥æ“æ§å­¦ç”Ÿä¿¡æ¯é¡µé¢ä¸­çš„ä»»ä½•æ“ä½œ*<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/11/ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹/ssm-shiro-[admin]-å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µé¢.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç®¡ç†å‘˜( admin )æ‹¥æœ‰è®¿é—®èµ„æºçš„æ‰€æœ‰æƒé™( </em> ),æ‰€ä»¥å¯ä»¥æ“æ§æ•™å¸ˆä¿¡æ¯é¡µé¢ä¸­çš„ä»»ä½•æ“ä½œ*<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/11/ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹/ssm-shiro-[admin]-æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µé¢.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•™å¸ˆ( tea )æ‹¥æœ‰å­¦ç”Ÿé¡µé¢é¢çš„<code>stuListView:view , stuListView:add , stuListView:edit</code>æƒé™,æ‰€ä»¥åˆ é™¤ä¿¡æ¯æ“ä½œä¸ºä¸å¯è§</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/11/ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹/ssm-shiro-[tea]-å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µé¢.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•™å¸ˆ( tea )ä»…æ‹¥æœ‰æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µé¢çš„<code>teaListView:view</code>æƒé™,æ‰€ä»¥å¢,åˆ ,æ”¹,æ“ä½œä¸ºä¸å¯è§çŠ¶æ€</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/11/ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹/ssm-shiro-[tea]-æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µé¢.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>å­¦ç”Ÿ( stu )ä»…æ‹¥æœ‰å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µé¢çš„<code>stuListView:view</code>æƒé™,æ‰€ä»¥å¢,åˆ ,æ”¹,æ“ä½œä¸ºä¸å¯è§çŠ¶æ€</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/11/ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹/ssm-shiro-[stu]-å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µé¢.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>å­¦ç”Ÿ( stu )æ²¡æœ‰è®¿é—®æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µé¢çš„æƒé™,æ‰€ä»¥è¢«èµ„æºæ‹¦æˆªå™¨æ‰€æ‹¦æˆªç»§è€Œè¿›å…¥æŒ‡å®šçš„â€™unauthorized.htmlâ€™é¡µé¢é¢</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/11/ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹/ssm-shiro-[stu]-æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µé¢.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„çš„SSMæ•´åˆShiroæ¡ˆä¾‹&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„çš„SS
      
    
    </summary>
    
    
      <category term="SSM" scheme="http://yoursite.com/tags/SSM/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>è¯¦è§£JSPä¸­Shiroæ ‡ç­¾çš„ä½¿ç”¨</title>
    <link href="http://yoursite.com/2019/08/11/%E8%AF%A6%E8%A7%A3JSP%E4%B8%ADShiro%E6%A0%87%E7%AD%BE%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>http://yoursite.com/2019/08/11/è¯¦è§£JSPä¸­Shiroæ ‡ç­¾çš„ä½¿ç”¨/</id>
    <published>2019-08-10T23:42:13.000Z</published>
    <updated>2019-08-11T03:46:42.415Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-è¯¦è§£JSPä¸­Shiroæ ‡ç­¾çš„ä½¿ç”¨"><a href="#å­¦ä¹ ç¬”è®°-è¯¦è§£JSPä¸­Shiroæ ‡ç­¾çš„ä½¿ç”¨" class="headerlink" title="å­¦ä¹ ç¬”è®° : è¯¦è§£JSPä¸­Shiroæ ‡ç­¾çš„ä½¿ç”¨"></a>å­¦ä¹ ç¬”è®° : è¯¦è§£JSPä¸­Shiroæ ‡ç­¾çš„ä½¿ç”¨</h2><p><em>Apache Shiro provides a Subject-aware JSP/GSP tag library that allows you to control your JSP, JSTL or GSP page output based on the current Subjectâ€™s state. This is quite useful for personalizing views based on the identity and authorization state of the current user viewing the web page. For more information, please refer to : <a href="http://shiro.apache.org/web.html#Web-taglibrary" target="_blank" rel="noopener">http://shiro.apache.org/web.html#Web-taglibrary</a></em></p><h3 id="Tag-Library-Configuration"><a href="#Tag-Library-Configuration" class="headerlink" title="Tag Library Configuration"></a>Tag Library Configuration</h3><p><em>The Tag Library Descriptor (TLD) file is bundled in shiro-web.jar in the <code>META-INF/shiro.tld</code> file. To use any of the tags, add the following line to the top of your JSP page (or wherever you define page directives) :</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"shiro"</span> <span class="attr">uri</span>=<span class="string">"http://shiro.apache.org/tags"</span> %&gt;</span></span><br></pre></td></tr></table></figure></p><ul><li>Weâ€™ve used the shiro prefix to indicate the shiro tag library namespace, but you can assign whatever name you like.</li></ul><h3 id="shiro-authenicated"><a href="#shiro-authenicated" class="headerlink" title="shiro : authenicated"></a>shiro : authenicated</h3><p><em>è¡¨ç¤ºè®¤è¯å·²é€šè¿‡,ä½†ä¸åŒ…æ‹¬<code>remember me</code>ç™»å½•çš„</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:authenticated</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>ç”¨æˆ·èº«ä»½éªŒè¯å·²é€šè¿‡<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:authenticated</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>è¯´æ˜ : åªæœ‰å·²é€šè¿‡ç”¨æˆ·è®¤è¯,ä½†ä¸æ˜¯é€šè¿‡è®°ä½æˆ‘(<code>remember me</code>)æµè§ˆæ‰ä¼šçœ‹åˆ°æ ‡ç­¾å†…çš„å†…å®¹</em></p><h3 id="shiro-guest"><a href="#shiro-guest" class="headerlink" title="shiro : guest"></a>shiro : guest</h3><p><em>è¡¨ç¤ºæ˜¯æ¸¸å®¢èº«ä»½,æ²¡æœ‰ç™»å½•</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:guest</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>æ‚¨å½“å‰æ˜¯æ¸¸å®¢,<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/login.jsp"</span> &gt;</span>è¯·ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:guest</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>è¯´æ˜ : åªæœ‰æ˜¯æ²¡æœ‰ç™»å½•è¿‡,ä»¥æ¸¸å®¢çš„èº«ä»½æµè§ˆæ‰ä¼šçœ‹åˆ°æ ‡ç­¾å†…çš„å†…å®¹</em></p><h3 id="shiro-hasAnyRoles"><a href="#shiro-hasAnyRoles" class="headerlink" title="shiro : hasAnyRoles"></a>shiro : hasAnyRoles</h3><p><em>è¡¨ç¤ºæ‹¥æœ‰è¿™äº›è§’è‰²ä¸­å…¶ä¸­ä¸€ä¸ª</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:hasAnyRoles</span> <span class="attr">name</span>=<span class="string">"admin,user"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>è¿™æ˜¯æ‹¥æœ‰adminæˆ–è€…æ˜¯userè§’è‰²çš„ç”¨æˆ·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:hasAnyRoles</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>è¯´æ˜ : åªæœ‰æˆåŠŸç™»å½•å,ä¸”å…·æœ‰adminæˆ–è€…userè§’è‰²çš„ç”¨æˆ·æ‰ä¼šçœ‹åˆ°æ ‡ç­¾å†…çš„å†…å®¹. nameå±æ€§ä¸­å¯ä»¥å¡«å†™å¤šä¸ªè§’è‰²åç§°ï¼Œä»¥é€—å·( , )åˆ†éš”</em></p><h3 id="shiro-hasPermission"><a href="#shiro-hasPermission" class="headerlink" title="shiro : hasPermission"></a>shiro : hasPermission</h3><p><em>è¡¨ç¤ºæ‹¥æœ‰æŸä¸€æƒé™</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"admin:add"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>è¿™ä¸ªç”¨æˆ·æ‹¥æœ‰admin:addçš„æƒé™<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>è¯´æ˜ : åªæœ‰æˆåŠŸç™»å½•å,ä¸”å…·æœ‰admin:addæƒé™çš„ç”¨æˆ·æ‰å¯ä»¥çœ‹åˆ°æ ‡ç­¾å†…çš„å†…å®¹,nameå±æ€§ä¸­åªèƒ½å¡«å†™ä¸€ä¸ªæƒé™çš„åç§°</em></p><h3 id="shiro-hashRole"><a href="#shiro-hashRole" class="headerlink" title="shiro : hashRole"></a>shiro : hashRole</h3><p><em>è¡¨ç¤ºæ‹¥æœ‰æŸä¸€è§’è‰²</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:hasRole</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>è¿™ä¸ªç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²æ˜¯admin<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:hasRole</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>è¯´æ˜ : åªæœ‰æˆåŠŸç™»å½•å,ä¸”å…·æœ‰adminè§’è‰²çš„ç”¨æˆ·æ‰å¯ä»¥çœ‹åˆ°æ ‡ç­¾å†…çš„å†…å®¹,nameå±æ€§ä¸­åªèƒ½å¡«å†™ä¸€ä¸ªè§’è‰²çš„åç§°</em></p><h3 id="shiro-lacksPermission"><a href="#shiro-lacksPermission" class="headerlink" title="shiro : lacksPermission"></a>shiro : lacksPermission</h3><p><em>è¡¨ç¤ºä¸æ‹¥æœ‰æŸä¸€è§’è‰²</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:lacksPermission</span> <span class="attr">name</span>=<span class="string">"admin:delete"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>è¿™ä¸ªç”¨æˆ·ä¸æ‹¥æœ‰admin:deleteçš„æƒé™<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:lacksPermission</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>è¯´æ˜ : åªæœ‰æˆåŠŸç™»å½•å,ä¸”ä¸å…·æœ‰admin:deleteæƒé™çš„ç”¨æˆ·æ‰å¯ä»¥çœ‹åˆ°æ ‡ç­¾å†…çš„å†…å®¹,nameå±æ€§ä¸­åªèƒ½å¡«å†™ä¸€ä¸ªæƒé™çš„åç§°</em></p><h3 id="shiro-lacksRole"><a href="#shiro-lacksRole" class="headerlink" title="shiro : lacksRole"></a>shiro : lacksRole</h3><p><em>è¡¨ç¤ºä¸æ‹¥æœ‰æŸä¸€è§’è‰²</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:lacksRole</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>è¿™ä¸ªç”¨æˆ·ä¸æ‹¥æœ‰adminçš„è§’è‰²<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:lacksRole</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>è¯´æ˜ : åªæœ‰æˆåŠŸç™»å½•åï¼Œä¸”ä¸å…·æœ‰adminè§’è‰²çš„ç”¨æˆ·æ‰å¯ä»¥çœ‹åˆ°æ ‡ç­¾å†…çš„å†…å®¹,nameå±æ€§ä¸­åªèƒ½å¡«å†™ä¸€ä¸ªè§’è‰²çš„åç§°</em></p><h3 id="shiro-notAuthenticated"><a href="#shiro-notAuthenticated" class="headerlink" title="shiro : notAuthenticated"></a>shiro : notAuthenticated</h3><p><em>è¡¨ç¤ºæ²¡æœ‰é€šè¿‡éªŒè¯</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:notAuthenticated</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>ç”¨æˆ·èº«ä»½éªŒè¯æ²¡æœ‰é€šè¿‡<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:notAuthenticated</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>è¯´æ˜ : åªæœ‰æ²¡æœ‰é€šè¿‡éªŒè¯çš„æ‰å¯ä»¥çœ‹åˆ°æ ‡ç­¾å†…çš„å†…å®¹,åŒ…æ‹¬é€šè¿‡è®°ä½æˆ‘(<code>remember me</code>)ç™»å½•çš„</em></p><h3 id="shiro-principal"><a href="#shiro-principal" class="headerlink" title="shiro : principal"></a>shiro : principal</h3><p><em>è¡¨ç¤ºç”¨æˆ·çš„èº«ä»½ : å–å€¼å–çš„æ˜¯ä½ ç™»å½•çš„æ—¶å€™,åœ¨Realmå®ç°ç±»ä¸­çš„<code>SimpleAuthenticationInfo(Object principal, Object hashedCredentials, ByteSource credentialsSalt, String realmName)</code>æ”¾çš„ç¬¬ä¸€ä¸ªå‚æ•°å“Ÿ~ ä¾‹å¦‚ :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> SimpleAuthenticationInfo(user, user.getPassword(), ByteSource.Util.bytes(user.getUsername()), <span class="keyword">this</span>.getName());</span><br></pre></td></tr></table></figure></p><ol><li><p><em>å¦‚æœç¬¬ä¸€ä¸ªæ”¾çš„æ˜¯usernameæˆ–è€…æ˜¯ä¸€ä¸ªå€¼,é‚£ä¹ˆå°±å¯ä»¥ç›´æ¥ç”¨</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å–åˆ°username--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:</span> <span class="attr">principal</span>/&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ”¾çš„æ˜¯å¯¹è±¡,æ¯”å¦‚æ”¾Userå¯¹è±¡. é‚£ä¹ˆå¦‚æœè¦å–å…¶ä¸­æŸä¸€ä¸ªå€¼,å¯ä»¥é€šè¿‡propertyå±æ€§æ¥æŒ‡å®š</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--éœ€è¦æŒ‡å®šproperty--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:principal</span> <span class="attr">property</span>=<span class="string">"username"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="shiro-user"><a href="#shiro-user" class="headerlink" title="shiro : user"></a>shiro : user</h3><p><em>è¡¨ç¤ºå·²ç™»å½•</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:user</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>æ¬¢è¿[<span class="tag">&lt;<span class="name">shiro:principal</span>/&gt;</span>],<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/logout.jsp"</span>&gt;</span>é€€å‡º<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:user</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>è¯´æ˜ : åªæœ‰å·²ç»ç™»å½•(åŒ…å«é€šè¿‡è®°ä½æˆ‘(<code>remember me</code>)ç™»å½•çš„)çš„ç”¨æˆ·æ‰å¯ä»¥çœ‹åˆ°æ ‡ç­¾å†…çš„å†…å®¹. ä¸€èˆ¬å’Œæ ‡ç­¾<code>shiro : principal</code>ä¸€èµ·ç”¨,æ¥åšæ˜¾ç¤ºç”¨æˆ·çš„åç§°</em></p><h3 id="æ ‡ç­¾åµŒå¥—"><a href="#æ ‡ç­¾åµŒå¥—" class="headerlink" title="æ ‡ç­¾åµŒå¥—"></a>æ ‡ç­¾åµŒå¥—</h3><p><em>shiroçš„jspæ ‡ç­¾å¯ä»¥åµŒå¥—ä½¿ç”¨,å¯ä»¥æ ¹æ®ä¸šåŠ¡çš„å…·ä½“åœºæ™¯è¿›è¡Œä½¿ç”¨. ä¾‹å¦‚ä¸€ä¸ªæŒ‰é’®éœ€è¦æ’é™¤ä¸æ˜¯adminæˆ–userè§’è‰²çš„ç”¨æˆ·æ‰å¯ä»¥æ˜¾ç¤º,åˆ™å¯ä»¥åƒå¦‚ä¸‹è¿™æ ·å®ç° :</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:lacksRole</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">shiro:lacksRole</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>è¿™ä¸ªç”¨æˆ·ä¸æ‹¥æœ‰adminæˆ–userçš„è§’è‰²<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">shiro:lacksRole</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:lacksRole</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>ğŸ™å‚è€ƒé“¾æ¥(è·ç›ŠåŒªæµ…,éå¸¸æ„Ÿè°¢) :</em></p><ul><li><a href="https://blog.csdn.net/yaodieteng1510/article/details/79992247" target="_blank" rel="noopener">https://blog.csdn.net/yaodieteng1510/article/details/79992247</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-è¯¦è§£JSPä¸­Shiroæ ‡ç­¾çš„ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-è¯¦è§£JSPä¸­Shiroæ ‡ç­¾çš„ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : è¯¦è§£JSPä¸­Shiroæ ‡ç­¾çš„ä½¿ç”¨&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : è¯¦è§£JSPä¸­Shiroæ ‡ç­¾çš„
      
    
    </summary>
    
    
      <category term="JSP" scheme="http://yoursite.com/tags/JSP/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>SSMæ•´åˆShiroçš„åŸºæœ¬é…ç½®</title>
    <link href="http://yoursite.com/2019/08/11/SSM%E6%95%B4%E5%90%88Shiro%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2019/08/11/SSMæ•´åˆShiroçš„åŸºæœ¬é…ç½®/</id>
    <published>2019-08-10T22:55:55.000Z</published>
    <updated>2019-08-11T02:42:51.025Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-SSMæ•´åˆShiroçš„åŸºæœ¬é…ç½®"><a href="#å­¦ä¹ ç¬”è®°-SSMæ•´åˆShiroçš„åŸºæœ¬é…ç½®" class="headerlink" title="å­¦ä¹ ç¬”è®° : SSMæ•´åˆShiroçš„åŸºæœ¬é…ç½®"></a>å­¦ä¹ ç¬”è®° : SSMæ•´åˆShiroçš„åŸºæœ¬é…ç½®</h2><p><em>å­¦ä¹ Spring Bootæ•´åˆShiroçŸ¥è¯†å,å†™äº†<a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•çš„Spring Bootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹</a>,å¯éšååœ¨GitHubä¸Šå‘ç°äº†ä¸€ä¸ª<a href="https://github.com/YUbuntu0109/Permission" target="_blank" rel="noopener">åŸºäºSSMæ¡†æ¶ç®€å•çš„åå°æƒé™ç®¡ç†ç³»ç»Ÿ</a>,å¾ˆå–œæ¬¢è¯¥é¡¹ç›®(æ¯”è¾ƒåˆçº§,é€‚åˆç»ƒæ‰‹),æ‰€ä»¥åˆå¼€å§‹å­¦ä¹ å¦‚ä½•åœ¨SSMä¸­æ•´åˆShiro,Springé›†æˆShiroä¸€èˆ¬é€šè¿‡çš„ xml é…ç½®,ç›¸æ¯”Spring Bootè¾ƒä¸ºç¹çå“Ÿ~ ä»¥ä¸‹åŸºæœ¬é…ç½®ä¿¡æ¯æ‘˜è‡ªæ¡ˆä¾‹ : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/ssm%20project%20with%20shiro" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•çš„SSMæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹</a></em></p><h3 id="Mavenä¾èµ–"><a href="#Mavenä¾èµ–" class="headerlink" title="Mavenä¾èµ–"></a>Mavenä¾èµ–</h3><p><em>Shiro-learning/ssm project with shiro/ssm-shiro/pom.xml</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Shiro --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Ehcache --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="web-xmlé…ç½®"><a href="#web-xmlé…ç½®" class="headerlink" title="web.xmlé…ç½®"></a>web.xmlé…ç½®</h3><p><em>Shiro-learning/ssm project with shiro/ssm-shiro/src/main/webapp/WEB-INF/web.xml</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">é…ç½®Springæ•´åˆShiroçš„è¿‡æ»¤å™¨:å°†æ‹¦æˆªä¸‹æ¥çš„è¯·æ±‚äº¤ç»™Springå®¹å™¨ä¸­åä¸º'shiroFilter'(ä¸filter-nameåŒå)çš„beanå¤„ç†</span></span><br><span class="line"><span class="comment">è¯¦æƒ…ä¿¡æ¯è§:applicationContext-shiro.xml</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>shiroFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.DelegatingFilterProxy<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>shiroFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="Shiroçš„åŸºæœ¬é…ç½®"><a href="#Shiroçš„åŸºæœ¬é…ç½®" class="headerlink" title="Shiroçš„åŸºæœ¬é…ç½®"></a>Shiroçš„åŸºæœ¬é…ç½®</h3><p><em>Shiro-learning/ssm project with shiro/ssm-shiro/src/main/resources/spring-config/applicationContext-shiro.xml</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>configuration informations about Shiro<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®shiroFilter:è¿™é‡Œçš„idå(shiroFilter)è¦å’Œweb.xmlé…ç½®çš„åå­—ä¿æŒä¸€è‡´å“Ÿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"shiroFilter"</span> <span class="attr">class</span>=<span class="string">"org.apache.shiro.spring.web.ShiroFilterFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å…³è”SecurityManage --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"securityManager"</span> <span class="attr">ref</span>=<span class="string">"securityManager"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰è¿‡è™‘å™¨é“¾,ä»ä¸Šå‘ä¸‹é¡ºåºæ‰§è¡Œ,ä¸€èˆ¬å°†/**æ”¾åœ¨æœ€ä¸‹è¾¹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"filterChainDefinitions"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- é˜²æ­¢è¿‡æ»¤å™¨æ‹¦æˆªéªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯çš„è¯·æ±‚(/login ) --&gt;</span></span><br><span class="line">                /login=anon</span><br><span class="line">                <span class="comment">&lt;!-- è®¾ç½®Shiroé»˜è®¤çš„æ³¨é”€è¯·æ±‚:å…¶å…·ä½“çš„æ³¨é”€é€»è¾‘ä»£ç Shiroå·²ç»æ›¿æˆ‘ä»¬å®ç°äº†å“Ÿ --&gt;</span></span><br><span class="line">                /logout=logout</span><br><span class="line">                <span class="comment">&lt;!-- è®¾ç½®è§’è‰²è¿‡æ»¤ --&gt;</span></span><br><span class="line">                /teaListView=roles[admin]</span><br><span class="line">                <span class="comment">&lt;!-- è®¾ç½®è¯·æ±‚æƒé™è¿‡æ»¤:é™¤èº«ä»½è®¤è¯å¤–,è¿˜éœ€è¦ç”¨æˆ·æ‹¥æœ‰å¯¹stuListView/teaListViewèµ„æºçš„viewæƒé™ --&gt;</span></span><br><span class="line">                /stuListView=perms[stuListView:view]</span><br><span class="line">                /teaListView=perms[teaListView:view]</span><br><span class="line">                <span class="comment">&lt;!-- æ‰€æœ‰èµ„æºçš„è®¿é—®éƒ½éœ€è¦èº«ä»½è®¤è¯ --&gt;</span></span><br><span class="line">                /**=authc</span><br><span class="line">            <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šShiroé»˜è®¤çš„ç™»å½•è¯·æ±‚,é»˜è®¤: http://localhost:8080/login.jsp --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"loginUrl"</span> <span class="attr">value</span>=<span class="string">"/loginView"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šç”¨æˆ·æœªæˆæƒæ“ä½œæç¤ºé¡µ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"unauthorizedUrl"</span> <span class="attr">value</span>=<span class="string">"/unauthorizedView"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªå®šä¹‰realm --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"realm"</span> <span class="attr">class</span>=<span class="string">"pers.huangyuhui.shiro.shiro.UserRealm"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç”¨æˆ·å‡­è¯åŠ å¯†é…ç½® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"credentialsMatcher"</span> <span class="attr">ref</span>=<span class="string">"credentialsMatcher"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ˜¯å¦å¯ç”¨ç¼“å­˜:é»˜è®¤ä¸ºtrue --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cachingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ˜¯å¦å¯ç”¨èº«ä»½éªŒè¯ç¼“å­˜ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"authenticationCachingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç¼“å­˜AuthenticationInfoä¿¡æ¯çš„ç¼“å­˜åç§° --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"authenticationCacheName"</span> <span class="attr">value</span>=<span class="string">"authenticationCache"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ˜¯å¦å¯ç”¨æˆæƒç¼“å­˜:ç¼“å­˜AuthorizationInfoä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"authorizationCachingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç¼“å­˜AuthorizationInfoä¿¡æ¯çš„ç¼“å­˜åç§° --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"authorizationCacheName"</span> <span class="attr">value</span>=<span class="string">"authorizationCache"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Shiroå®‰å…¨ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"securityManager"</span> <span class="attr">class</span>=<span class="string">"org.apache.shiro.web.mgt.DefaultWebSecurityManager"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥è‡ªå®šä¹‰Realm --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"realm"</span> <span class="attr">ref</span>=<span class="string">"realm"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥ç¼“å­˜ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cacheManager"</span> <span class="attr">ref</span>=<span class="string">"ehCacheManager"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Shiroå‡­è¯åŒ¹é…å™¨:å¯¹ç™»å½•ç”¨æˆ·çš„å¯†ç è¿›è¡ŒMD5åŠ å¯†,hashIterationsæ˜¯æ•£åˆ—åŠ å¯†æ¬¡æ•°,ç›å€¼ä¿¡æ¯è§:UserRealm.java --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"credentialsMatcher"</span> <span class="attr">class</span>=<span class="string">"org.apache.shiro.authc.credential.HashedCredentialsMatcher"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hashAlgorithmName"</span> <span class="attr">value</span>=<span class="string">"MD5"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hashIterations"</span> <span class="attr">value</span>=<span class="string">"3"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Shiroç¼“å­˜ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"ehCacheManager"</span> <span class="attr">class</span>=<span class="string">"org.apache.shiro.cache.ehcache.EhCacheManager"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥ehcacheé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cacheManagerConfigFile"</span> <span class="attr">value</span>=<span class="string">"classpath:shiro-config/ehcache-shiro.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Shiroç”Ÿå‘½å‘¨æœŸå¤„ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"lifecycleBeanPostProcessor"</span> <span class="attr">class</span>=<span class="string">"org.apache.shiro.spring.LifecycleBeanPostProcessor"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯shiroæ³¨è§£æ¨¡å¼:å¦‚æœä½¿ç”¨æ³¨è§£æ¨¡å¼,å¿…é¡»é‡‡ç”¨cglibé’ˆå¯¹ç±»è¿›è¡Œä»£ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">depends-on</span>=<span class="string">"lifecycleBeanPostProcessor"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"proxyTargetClass"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"securityManager"</span> <span class="attr">ref</span>=<span class="string">"securityManager"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>Shiro-learning/ssm project with shiro/ssm-shiro/src/main/resources/shiro-config/ehcache-shiro.xml</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">"http://ehcache.org/ehcache.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">updateCheck</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">name</span>=<span class="string">"myEhcache"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">"java.io.tmpdir"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æˆæƒä¿¡æ¯ç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"authorizationCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- èº«ä»½ä¿¡æ¯ç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"authenticationCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Sessionç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"activeSessionCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜åŠå°æ—¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"halfHour"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜ä¸€å°æ—¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"hour"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"3600"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"3600"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜ä¸€å¤© --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"oneDay"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"86400"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"86400"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">         name: ç¼“å­˜åç§°</span></span><br><span class="line"><span class="comment">         maxElementsInMemory: ç¼“å­˜æœ€å¤§ä¸ªæ•°</span></span><br><span class="line"><span class="comment">         eternal: å¯¹è±¡æ˜¯å¦æ°¸ä¹…æœ‰æ•ˆ,ä¸€ä½†è®¾ç½®äº†,timeoutå°†ä¸èµ·ä½œç”¨</span></span><br><span class="line"><span class="comment">         timeToIdleSeconds: è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰çš„å…è®¸é—²ç½®æ—¶é—´(å•ä½ï¼šç§’). ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨,å¯é€‰å±æ€§,é»˜è®¤å€¼æ˜¯0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">         timeToLiveSeconds: è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰å…è®¸å­˜æ´»æ—¶é—´(å•ä½ï¼šç§’). æœ€å¤§æ—¶é—´ä»‹äºåˆ›å»ºæ—¶é—´å’Œå¤±æ•ˆæ—¶é—´ä¹‹é—´. ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨,é»˜è®¤æ˜¯0,ä¹Ÿå°±æ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">         overflowToDisk: å½“å†…å­˜ä¸­å¯¹è±¡æ•°é‡è¾¾åˆ°maxElementsInMemoryæ—¶,Ehcacheå°†ä¼šå¯¹è±¡å†™åˆ°ç£ç›˜ä¸­</span></span><br><span class="line"><span class="comment">         diskSpoolBufferSizeMB: è¿™ä¸ªå‚æ•°è®¾ç½®DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°,é»˜è®¤æ˜¯30MB. æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">         maxElementsOnDisk: ç¡¬ç›˜æœ€å¤§ç¼“å­˜ä¸ªæ•°</span></span><br><span class="line"><span class="comment">         diskPersistent: æ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ® Whether the disk store persists between restarts of the Virtual Machine. The default value is false.</span></span><br><span class="line"><span class="comment">         diskExpiryThreadIntervalSeconds: ç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”,é»˜è®¤æ˜¯120ç§’</span></span><br><span class="line"><span class="comment">         memoryStoreEvictionPolicy: å½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶,Ehcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜. é»˜è®¤ç­–ç•¥æ˜¯LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨). ä½ å¯ä»¥è®¾ç½®ä¸ºFIFO(å…ˆè¿›å…ˆå‡º)æˆ–æ˜¯LFU(è¾ƒå°‘ä½¿ç”¨)</span></span><br><span class="line"><span class="comment">         clearOnFlush: å†…å­˜æ•°é‡æœ€å¤§æ—¶æ˜¯å¦æ¸…é™¤</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span> <span class="attr">name</span>=<span class="string">"defaultCache"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToIdleSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToLiveSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskPersistent</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">"120"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">"LRU"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="è‡ªå®šä¹‰Realmçš„åŸºæœ¬é…ç½®"><a href="#è‡ªå®šä¹‰Realmçš„åŸºæœ¬é…ç½®" class="headerlink" title="è‡ªå®šä¹‰Realmçš„åŸºæœ¬é…ç½®"></a>è‡ªå®šä¹‰Realmçš„åŸºæœ¬é…ç½®</h3><p><em>Shiro-learning/ssm project with shiro/ssm-shiro/src/main/java/pers/huangyuhui/shiro/shiro/UserRealm.java</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.shiro.shiro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.ByteSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.shiro.bean.Permission;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.shiro.bean.Role;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.shiro.bean.User;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.shiro.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: ssm-shiro</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: é…ç½®è‡ªå®šä¹‰Realm</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/10/2019-1:11 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: æˆæƒè®¤è¯:æä¾›ç”¨æˆ·ä¿¡æ¯,è¿”å›æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: principals</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-11 7:50 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.authz.AuthorizationInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principals)</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">"------------&gt; æˆæƒè®¤è¯ ------------&gt;"</span>);</span><br><span class="line">        <span class="comment">//è·å–å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        User u = (User) currentUser.getPrincipal();</span><br><span class="line">        <span class="comment">//ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è§’è‰²åŠæƒé™ä¿¡æ¯</span></span><br><span class="line">        User user = userService.findByName(u.getUsername());</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            SimpleAuthorizationInfo info = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">            <span class="comment">//ç”¨äºå­˜å‚¨ç”¨æˆ·çš„è§’è‰²åŠæƒé™ä¿¡æ¯</span></span><br><span class="line">            Collection&lt;String&gt; rolesCollection = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">            Collection&lt;String&gt; permissionsCollection = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">            Set&lt;Role&gt; roles = user.getRoles(); <span class="comment">//è·å–ç”¨æˆ·Roleçš„Seté›†åˆ</span></span><br><span class="line">            <span class="comment">//é€šè¿‡éå†ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è§’è‰²,æ¥è·å–å…¶å¯¹åº”çš„æƒé™ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">for</span> (Role role : roles) &#123;</span><br><span class="line">                rolesCollection.add(role.getName()); <span class="comment">//å°†æ¯ä¸€ä¸ªroleçš„nameå°è£…åˆ°é›†åˆä¸­</span></span><br><span class="line">                Set&lt;Permission&gt; permissionSet = role.getPermissions(); <span class="comment">//è·å–æ¯ä¸€ä¸ªroleæ‰€å¯¹åº”çš„permissionçš„seté›†åˆ</span></span><br><span class="line">                <span class="comment">//éå†ç”¨æˆ·æ‰€æ‹¥æœ‰çš„æƒé™ä¿¡æ¯</span></span><br><span class="line">                <span class="keyword">for</span> (Permission permission : permissionSet) &#123;</span><br><span class="line">                    permissionsCollection.add(permission.getName()); <span class="comment">//å°†æ¯ä¸€ä¸ªpermissionçš„nameå°è£…åˆ°é›†åˆä¸­</span></span><br><span class="line">                &#125;</span><br><span class="line">                info.addStringPermissions(permissionsCollection); <span class="comment">//ä¸ºç”¨æˆ·æˆæƒ</span></span><br><span class="line">            &#125;</span><br><span class="line">            info.addRoles(rolesCollection); <span class="comment">//ä¸ºç”¨æˆ·æˆäºˆè§’è‰²</span></span><br><span class="line">            System.out.println(<span class="string">"[roles]------------&gt;"</span> + rolesCollection.toString());</span><br><span class="line">            System.out.println(<span class="string">"[permissions]------------&gt;"</span> + permissionsCollection.toString());</span><br><span class="line">            <span class="keyword">return</span> info;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: ç™»å½•è®¤è¯:æä¾›å¸æˆ·ä¿¡æ¯,è¿”å›è®¤è¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: authenticationToken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-11 7:51 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.authc.AuthenticationInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">"------------&gt; å¼€å§‹è®¤è¯ ------------&gt;"</span>);</span><br><span class="line">        UsernamePasswordToken token = (UsernamePasswordToken) authenticationToken;</span><br><span class="line">        <span class="comment">//ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        User user = userService.findByName(token.getUsername());</span><br><span class="line">        System.out.println(<span class="string">"[user]------------&gt;"</span> + user);</span><br><span class="line">        <span class="comment">//éªŒè¯è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>; <span class="comment">//it's will be throw a UnknownAccountException</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//éªŒè¯å¯†ç ä¿¡æ¯(ç›å€¼:ByteSource.Util.bytes(user.getUsername()))</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SimpleAuthenticationInfo(user, user.getPassword(), ByteSource.Util.bytes(user.getUsername()), <span class="keyword">this</span>.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-SSMæ•´åˆShiroçš„åŸºæœ¬é…ç½®&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-SSMæ•´åˆShiroçš„åŸºæœ¬é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : SSMæ•´åˆShiroçš„åŸºæœ¬é…ç½®&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : SSMæ•´åˆShiroçš„åŸºæœ¬é…ç½®&lt;/
      
    
    </summary>
    
    
      <category term="SSM" scheme="http://yoursite.com/tags/SSM/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>GitHubä¸­emojiè¡¨æƒ…çš„å«ä¹‰åŠä½¿ç”¨è§„èŒƒ</title>
    <link href="http://yoursite.com/2019/08/10/GitHub%E4%B8%ADemoji%E8%A1%A8%E6%83%85%E7%9A%84%E5%90%AB%E4%B9%89%E5%8F%8A%E4%BD%BF%E7%94%A8%E8%A7%84%E8%8C%83/"/>
    <id>http://yoursite.com/2019/08/10/GitHubä¸­emojiè¡¨æƒ…çš„å«ä¹‰åŠä½¿ç”¨è§„èŒƒ/</id>
    <published>2019-08-10T12:02:55.000Z</published>
    <updated>2019-08-11T09:08:28.204Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-GitHubä¸­emojiè¡¨æƒ…çš„å«ä¹‰åŠä½¿ç”¨è§„èŒƒ"><a href="#å­¦ä¹ ç¬”è®°-GitHubä¸­emojiè¡¨æƒ…çš„å«ä¹‰åŠä½¿ç”¨è§„èŒƒ" class="headerlink" title="å­¦ä¹ ç¬”è®° : GitHubä¸­emojiè¡¨æƒ…çš„å«ä¹‰åŠä½¿ç”¨è§„èŒƒ"></a>å­¦ä¹ ç¬”è®° : GitHubä¸­emojiè¡¨æƒ…çš„å«ä¹‰åŠä½¿ç”¨è§„èŒƒ</h2><p><em>æ—¥è¯­ : <code>çµµæ–‡å­—/ãˆã‚‚ã˜ emoji</code>,æ˜¯æ—¥æœ¬åœ¨æ— çº¿é€šä¿¡ä¸­æ‰€ä½¿ç”¨çš„è§†è§‰æƒ…æ„Ÿç¬¦å·,ç»˜æŒ‡å›¾ç”»,æ–‡å­—æŒ‡çš„åˆ™æ˜¯å­—ç¬¦,å¯ç”¨æ¥ä»£è¡¨å¤šç§è¡¨æƒ…,å¦‚ç¬‘è„¸è¡¨ç¤ºç¬‘ã€è›‹ç³•è¡¨ç¤ºé£Ÿç‰©ç­‰. emoji é¢‘ç¹åœ°å‡ºç°åœ¨æˆ‘ä»¬çš„èŠå¤©è®°å½•ã€æœ‹å‹åœˆã€ç”šè‡³å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½ä¼šç”¨ emoji ä»£æ›¿æ–‡å­—æ¥èŠå¤©,æ—¢è€Œæ¥ä¼ è¾¾è‡ªå·±æƒ³è¦è¡¨è¾¾çš„ä¸€åˆ‡,ä½œä¸ºä¸€åç¨‹åºå‘˜,å¸¸ç”¨çš„ä»£ç æ‰˜ç®¡å¹³å° GitHub ä¸­ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨ emoji è¡¨æƒ…çš„å“Ÿ~ ğŸ˜œ</em>â€ƒâ€ƒ</p><p><em>æ‰§è¡Œ<code>git commit</code>æ—¶ä½¿ç”¨ emoji ä¸ºæœ¬æ¬¡æäº¤æ‰“ä¸Šä¸€ä¸ªæ ‡ç­¾, ä½¿å¾—æ­¤æ¬¡ commit çš„ä¸»è¦å·¥ä½œå¾—ä»¥å‡¸ç°,ä¹Ÿèƒ½å¤Ÿä½¿å¾—å…¶åœ¨æ•´ä¸ªæäº¤å†å²ä¸­æ˜“äºåŒºåˆ†ä¸æŸ¥æ‰¾,æ·»åŠ äº† emoji è¡¨æƒ…çš„æäº¤è®°å½•çœŸçš„èƒ½åŒ…å«å¾ˆå¤šæœ‰ç”¨ä¿¡æ¯,é˜…è¯»ä½“éªŒéå¸¸æ£’. ä½†æ˜¯,emoji è¡¨æƒ…åœ¨æäº¤ä»£ç çš„æ—¶å€™ä¹Ÿä¸èƒ½ä¹±ç”¨,å¦åˆ™å®¹æ˜“é€ æˆè¯¯è§£. å› æ­¤å¼€æºé¡¹ç›® <a href="https://gitmoji.carloscuesta.me/" target="_blank" rel="noopener">gitmoji</a> ä¸“é—¨è§„å®šäº†åœ¨ GitHub æäº¤ä»£ç æ—¶åº”å½“éµå¾ªçš„ emoji è§„èŒƒ~ æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ : <a href="https://github.com/carloscuesta/gitmoji/" target="_blank" rel="noopener">https://github.com/carloscuesta/gitmoji/</a></em></p><table><thead><tr><th style="text-align:center">emoji</th><th style="text-align:center">emojiä»£ç </th><th style="text-align:center">commitæè¿°</th></tr></thead><tbody><tr><td style="text-align:center">ğŸ¨ (è°ƒè‰²æ¿)</td><td style="text-align:center"><code>:art:</code></td><td style="text-align:center">æ”¹è¿›ä»£ç ç»“æ„/ä»£ç æ ¼å¼</td></tr><tr><td style="text-align:center">âš¡ï¸(é—ªç”µ)</td><td style="text-align:center"><code>:zap:</code></td><td style="text-align:center">æé«˜æ€§èƒ½</td></tr><tr><td style="text-align:center">ğŸ”¥ (ç«ç„°)</td><td style="text-align:center"><code>:fire:</code></td><td style="text-align:center">ç§»é™¤ä»£ç æˆ–æ–‡ä»¶</td></tr><tr><td style="text-align:center">ğŸ› (bug)</td><td style="text-align:center"><code>:bug:</code></td><td style="text-align:center">ä¿®å¤ bug</td></tr><tr><td style="text-align:center">ğŸš‘ (æ€¥æ•‘è½¦)</td><td style="text-align:center"><code>:ambulance:</code></td><td style="text-align:center">é‡è¦è¡¥ä¸</td></tr><tr><td style="text-align:center">âœ¨ (ç«èŠ±)</td><td style="text-align:center"><code>:sparkles:</code></td><td style="text-align:center">å¼•å…¥æ–°åŠŸèƒ½</td></tr><tr><td style="text-align:center">ğŸ“ (å¤‡å¿˜å½•)</td><td style="text-align:center"><code>:memo:</code></td><td style="text-align:center">æ’°å†™æ–‡æ¡£</td></tr><tr><td style="text-align:center">ğŸš€ (ç«ç®­)</td><td style="text-align:center"><code>:rocket:</code></td><td style="text-align:center">éƒ¨ç½²åŠŸèƒ½</td></tr><tr><td style="text-align:center">ğŸ’„ (å£çº¢)</td><td style="text-align:center"><code>:lipstick:</code></td><td style="text-align:center">æ›´æ–° UI å’Œæ ·å¼æ–‡ä»¶</td></tr><tr><td style="text-align:center">ğŸ‰ (åº†ç¥)</td><td style="text-align:center"><code>:tada:</code></td><td style="text-align:center">åˆæ¬¡æäº¤</td></tr><tr><td style="text-align:center">âœ… (ç™½è‰²å¤é€‰æ¡†)</td><td style="text-align:center"><code>:white_check_mark:</code></td><td style="text-align:center">å¢åŠ æµ‹è¯•</td></tr><tr><td style="text-align:center">ğŸ”’ (é”)</td><td style="text-align:center"><code>:lock:</code></td><td style="text-align:center">ä¿®å¤å®‰å…¨é—®é¢˜</td></tr><tr><td style="text-align:center">ğŸ (çº¢è‹¹æœ)</td><td style="text-align:center"><code>:apple:</code></td><td style="text-align:center">ä¿®å¤ macOS ä¸‹çš„é—®é¢˜</td></tr><tr><td style="text-align:center">ğŸ(é’è‹¹æœ)</td><td style="text-align:center"><code>:green_apple:</code></td><td style="text-align:center">ä¿®å¤ iOS ä¸‹çš„é—®é¢˜</td></tr><tr><td style="text-align:center">ğŸ§ (ä¼é¹…)</td><td style="text-align:center"><code>:penguin:</code></td><td style="text-align:center">ä¿®å¤ Linux ä¸‹çš„é—®é¢˜</td></tr><tr><td style="text-align:center">ğŸ (æ——å¸œ)</td><td style="text-align:center"><code>:checkered_flag:</code></td><td style="text-align:center">ä¿®å¤ Windows ä¸‹çš„é—®é¢˜</td></tr><tr><td style="text-align:center">ğŸ¤–(æœºå™¨äºº)</td><td style="text-align:center"><code>:robot:</code></td><td style="text-align:center">ä¿®å¤ androd ä¸‹çš„é—®é¢˜</td></tr><tr><td style="text-align:center">ğŸ”– (ä¹¦ç­¾)</td><td style="text-align:center"><code>:bookmark:</code></td><td style="text-align:center">å‘è¡Œ/ç‰ˆæœ¬æ ‡ç­¾</td></tr><tr><td style="text-align:center">ğŸš¨ (è­¦è½¦ç¯)</td><td style="text-align:center"><code>:rotating_light:</code></td><td style="text-align:center">ç§»é™¤ linter è­¦å‘Š</td></tr><tr><td style="text-align:center">ğŸš§ (æ–½å·¥)</td><td style="text-align:center"><code>:construction:</code></td><td style="text-align:center">å·¥ä½œè¿›è¡Œä¸­</td></tr><tr><td style="text-align:center">ğŸ’š (ç»¿å¿ƒ)</td><td style="text-align:center"><code>:green_heart:</code></td><td style="text-align:center">ä¿®å¤ CI æ„å»ºé—®é¢˜</td></tr><tr><td style="text-align:center">â¬‡ï¸ (ä¸‹é™ç®­å¤´)</td><td style="text-align:center"><code>:arrow_down:</code></td><td style="text-align:center">é™çº§ä¾èµ–</td></tr><tr><td style="text-align:center">â¬†ï¸ (ä¸Šå‡ç®­å¤´)</td><td style="text-align:center"><code>:arrow_up:</code></td><td style="text-align:center">å‡çº§ä¾èµ–</td></tr><tr><td style="text-align:center">ğŸ‘· (å·¥äºº)</td><td style="text-align:center"><code>:construction_worker:</code></td><td style="text-align:center">æ·»åŠ  CI æ„å»ºç³»ç»Ÿ</td></tr><tr><td style="text-align:center">ğŸ“ˆ (ä¸Šå‡è¶‹åŠ¿å›¾)</td><td style="text-align:center"><code>:chart_with_upwards_trend:</code></td><td style="text-align:center">æ·»åŠ åˆ†ææˆ–è·Ÿè¸ªä»£ç </td></tr><tr><td style="text-align:center">ğŸ”¨ (é”¤å­)</td><td style="text-align:center"><code>:hammer:</code></td><td style="text-align:center">é‡å¤§é‡æ„</td></tr><tr><td style="text-align:center">â– (å‡å·)</td><td style="text-align:center"><code>:heavy_minus_sign:</code></td><td style="text-align:center">å‡å°‘ä¸€ä¸ªä¾èµ–</td></tr><tr><td style="text-align:center">ğŸ³ (é²¸é±¼)</td><td style="text-align:center"><code>:whale:</code></td><td style="text-align:center">Docker ç›¸å…³å·¥ä½œ</td></tr><tr><td style="text-align:center">â• (åŠ å·)</td><td style="text-align:center"><code>:heavy_plus_sign:</code></td><td style="text-align:center">å¢åŠ ä¸€ä¸ªä¾èµ–</td></tr><tr><td style="text-align:center">ğŸ”§ (æ‰³æ‰‹)</td><td style="text-align:center"><code>:wrench:</code></td><td style="text-align:center">ä¿®æ”¹é…ç½®æ–‡ä»¶</td></tr><tr><td style="text-align:center">ğŸŒ (åœ°çƒ)</td><td style="text-align:center"><code>:globe_with_meridians:</code></td><td style="text-align:center">å›½é™…åŒ–ä¸æœ¬åœ°åŒ–</td></tr><tr><td style="text-align:center">âœï¸ (é“…ç¬”)</td><td style="text-align:center"><code>:pencil2:</code></td><td style="text-align:center">ä¿®å¤é”™åˆ«å­—</td></tr><tr><td style="text-align:center">ğŸ‘Œ (OKæ‰‹åŠ¿)</td><td style="text-align:center"><code>:ok_hand:</code></td><td style="text-align:center">ç”±äºä»£ç å®¡æŸ¥æ›´æ”¹è€Œæ›´æ–°ä»£ç </td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:pushpin:</code></td><td style="text-align:center">Pinning dependencies to specific versions</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:recycle:</code></td><td style="text-align:center">Refactoring code</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:poop:</code></td><td style="text-align:center">Writing bad code that needs to be improved</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:rewind:</code></td><td style="text-align:center">Reverting changes</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:twisted_rightwards_arrows:</code></td><td style="text-align:center">Merging branches</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:package:</code></td><td style="text-align:center">Updating compiled files or packages</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:alien:</code></td><td style="text-align:center">Updating code due to external API changes</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:truck:</code></td><td style="text-align:center">Moving or renaming files</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:page_facing_up:</code></td><td style="text-align:center">Adding or updating license</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:boom:</code></td><td style="text-align:center">Introducing breaking changes</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:bento:</code></td><td style="text-align:center">Adding or updating assets</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:wheelchair:</code></td><td style="text-align:center">Improving accessibility</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:bulb:</code></td><td style="text-align:center">Documenting source code</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:beers:</code></td><td style="text-align:center">Writing code drunkenly</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:speech_balloon:</code></td><td style="text-align:center">Updating text and literals</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:card_file_box:</code></td><td style="text-align:center">Performing database related changes</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:loud_sound:</code></td><td style="text-align:center">Adding logs</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:mute:</code></td><td style="text-align:center">Removing logs</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:busts_in_silhouette:</code></td><td style="text-align:center">Adding contributor(s)</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:children_crossing:</code></td><td style="text-align:center">Improving user experience / usability</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:building_construction:</code></td><td style="text-align:center">Making architectural changes</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:iphone:</code></td><td style="text-align:center">Working on responsive design</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:clown_face:</code></td><td style="text-align:center">Mocking things</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:egg:</code></td><td style="text-align:center">Adding an easter egg</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:see_no_evil:</code></td><td style="text-align:center">Adding or updating a .gitignore file</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:camera_flash:</code></td><td style="text-align:center">Adding or updating snapshots</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:alembic:</code></td><td style="text-align:center">Experimenting new things</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:mag:</code></td><td style="text-align:center">Improving SEO</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:wheel_of_dharma:</code></td><td style="text-align:center">Work about Kubernetes</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"><code>:label:</code></td><td style="text-align:center">Adding or updating types (Flow, TypeScript)</td></tr></tbody></table><p><em>ğŸ™å‚è€ƒé“¾æ¥ :</em></p><ul><li><a href="https://qq52o.me/1974.html" target="_blank" rel="noopener">https://qq52o.me/1974.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-GitHubä¸­emojiè¡¨æƒ…çš„å«ä¹‰åŠä½¿ç”¨è§„èŒƒ&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-GitHubä¸­emojiè¡¨æƒ…çš„å«ä¹‰åŠä½¿ç”¨è§„èŒƒ&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : GitHubä¸­emojiè¡¨æƒ…çš„å«ä¹‰åŠä½¿ç”¨è§„èŒƒ&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”
      
    
    </summary>
    
    
      <category term="GitHub" scheme="http://yoursite.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>Git Commit Message è§„èŒƒ</title>
    <link href="http://yoursite.com/2019/08/08/Git-Commit-Message-%E8%A7%84%E8%8C%83/"/>
    <id>http://yoursite.com/2019/08/08/Git-Commit-Message-è§„èŒƒ/</id>
    <published>2019-08-08T11:59:13.000Z</published>
    <updated>2019-08-09T00:34:42.090Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Git-Commit-Messageè§„èŒƒ"><a href="#å­¦ä¹ ç¬”è®°-Git-Commit-Messageè§„èŒƒ" class="headerlink" title="å­¦ä¹ ç¬”è®° : Git Commit Messageè§„èŒƒ"></a>å­¦ä¹ ç¬”è®° : Git Commit Messageè§„èŒƒ</h2><p><em>Git Commit Message åº”è¯¥æ¸…æ™°æ˜äº†,è¦ç”¨ç²¾ç®€çš„è¯­è¨€è¯´æ˜æœ¬æ¬¡æäº¤çš„ç›®çš„,å…¶ä¸»è¦ä½œç”¨æ˜¯ä¸ºäº†åç»­çš„æœç´¢ã€ç‰ˆæœ¬çš„å›æ»šã€åˆå¹¶å†²çªçš„è¿½æº¯ç­‰æ“ä½œ~</em></p><h3 id="è§„èŒƒä»‹ç»"><a href="#è§„èŒƒä»‹ç»" class="headerlink" title="è§„èŒƒä»‹ç»"></a>è§„èŒƒä»‹ç»</h3><p><em>è¿™æ¬¡ä¸»è¦ä»‹ç» AngularJS çš„è§„èŒƒ,å®ƒæ˜¯ç”± Google æ¨å‡ºçš„ä¸€å¥—æäº¤æ¶ˆæ¯è§„èŒƒæ ‡å‡†,ä¹Ÿæ˜¯ç›®å‰ä½¿ç”¨èŒƒå›´æœ€å¹¿çš„è§„èŒƒ,æ¯”è¾ƒåˆç†å’Œç³»ç»ŸåŒ–,å¹¶ä¸”è¿˜æœ‰é…å¥—çš„å·¥å…·å¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨,è§„èŒƒæ‰§è¡Œæ–¹æ¡ˆå¦‚ä¸‹ :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/08/Git-Commit-Message-è§„èŒƒ/git-commit-message-mindmap.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="æ ¼å¼è¦æ±‚"><a href="#æ ¼å¼è¦æ±‚" class="headerlink" title="æ ¼å¼è¦æ±‚"></a>æ ¼å¼è¦æ±‚</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">type</span>&gt;</span>(<span class="tag">&lt;<span class="name">scope</span>&gt;</span>): <span class="tag">&lt;<span class="name">subject</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BLANK</span> <span class="attr">LINE</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BLANK</span> <span class="attr">LINE</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æ¶ˆæ¯åªå ç”¨ä¸€è¡Œ,ä»»ä½•è¡Œéƒ½ä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦</li><li>å…è®¸ä½¿ç”¨ GitHub ä»¥åŠå„ç§ Git å·¥å…·é˜…è¯»æ¶ˆæ¯</li><li>æäº¤æ¶ˆæ¯ç”±é¡µçœ‰ã€æ­£æ–‡å’Œé¡µè„šç»„æˆ,ç”±ç©ºè¡Œåˆ†éš”</li></ul><h4 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h4><p><em>Headeréƒ¨åˆ†åªæœ‰ä¸€è¡Œ,åŒ…æ‹¬ä¸‰ä¸ªå­—æ®µ : <code>type</code>(å¿…éœ€)ã€<code>scope</code>(å¯é€‰)ã€å’Œ<code>subject</code>(å¿…éœ€)</em></p><ol><li><em><code>type</code>ä»£è¡¨æŸæ¬¡æäº¤çš„ç±»å‹,æ¯”å¦‚æ˜¯ä¿®å¤ä¸€ä¸ª bug æˆ–æ˜¯å¢åŠ ä¸€ä¸ª feature,ç±»å‹å¦‚ä¸‹ :</em></li></ol><table><thead><tr><th style="text-align:center">ç±»å‹</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">feat</td><td style="text-align:center">æ–°å¢feature</td></tr><tr><td style="text-align:center">fix</td><td style="text-align:center">ä¿®å¤bug</td></tr><tr><td style="text-align:center">docs</td><td style="text-align:center">ä»…ä»…ä¿®æ”¹äº†æ–‡æ¡£,æ¯”å¦‚README , CHANGELOG , CONTRIBUTEç­‰ç­‰</td></tr><tr><td style="text-align:center">style</td><td style="text-align:center">ä¿®æ”¹äº†ç©ºæ ¼,æ ¼å¼ç¼©è¿›,é€—å·ç­‰,ä¸æ”¹å˜ä»£ç é€»è¾‘</td></tr><tr><td style="text-align:center">refactor</td><td style="text-align:center">ä»£ç é‡æ„,æ²¡æœ‰æ·»åŠ æ–°åŠŸèƒ½æˆ–ä¿®å¤Bug</td></tr><tr><td style="text-align:center">perf</td><td style="text-align:center">ä¼˜åŒ–ç›¸å…³,æ¯”å¦‚æå‡æ€§èƒ½,ä½“éªŒ</td></tr><tr><td style="text-align:center">test</td><td style="text-align:center">æµ‹è¯•ç”¨ä¾‹,åŒ…æ‹¬å•å…ƒæµ‹è¯•,é›†æˆæµ‹è¯•ç­‰</td></tr><tr><td style="text-align:center">chore</td><td style="text-align:center">æ”¹å˜æ„å»ºæµç¨‹,æˆ–è€…å¢åŠ ä¾èµ–åº“,å·¥å…·ç­‰</td></tr><tr><td style="text-align:center">revert</td><td style="text-align:center">å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬</td></tr></tbody></table><ol start="2"><li><em><code>scope</code>ç”¨äºè¯´æ˜ commit å½±å“çš„èŒƒå›´,å¯ä»¥æ˜¯æŒ‡å®šæäº¤æ›´æ”¹ä½ç½®çš„ä»»ä½•å†…å®¹,å¦‚ :</em></li></ol><ul><li>å¯¹ package.json æ–‡ä»¶æ–°å¢ä¾èµ–åº“ï¼Œchore(package.json): æ–°å¢ä¾èµ–åº“</li><li>æˆ–å¯¹ä»£ç è¿›è¡Œé‡æ„ï¼Œrefacto(weChat.vue): é‡æ„å¾®ä¿¡è¿›ä»¶</li></ul><ol start="3"><li><em><code>subject</code>æ˜¯ commit ç›®çš„çš„ç®€çŸ­æè¿°,ä¸è¶…è¿‡50ä¸ªå­—ç¬¦. å¦‚æœæ²¡æœ‰æ›´åˆé€‚çš„èŒƒå›´,å¯ä»¥ç›´æ¥å†™æäº¤å†…å®¹,æ ¼å¼è¦æ±‚å¦‚ä¸‹ :</em></li></ol><ul><li>ä»¥åŠ¨è¯å¼€å¤´,ä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶,æ¯”å¦‚change,è€Œä¸æ˜¯changedæˆ–changes</li><li>ç¬¬ä¸€ä¸ªå­—æ¯å°å†™</li><li>ç»“å°¾ä¸åŠ å¥å·( . )</li></ul><h4 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h4><p><em>Body éƒ¨åˆ†æ˜¯å¯¹æœ¬æ¬¡ commit çš„è¯¦ç»†æè¿°,å¯ä»¥åˆ†æˆå¤šè¡Œ. ä¸‹é¢æ˜¯ä¸€ä¸ªèŒƒä¾‹ :</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">More detailed explanatory text, if necessary.  Wrap it to </span><br><span class="line">about 72 characters or so. </span><br><span class="line"></span><br><span class="line">Further paragraphs come after blank lines.</span><br><span class="line"></span><br><span class="line">- Bullet points are okay, too</span><br><span class="line">- Use a hanging indent</span><br></pre></td></tr></table></figure></p><p><em>æœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹ :</em></p><ul><li>ä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶,æ¯”å¦‚ä½¿ç”¨changeè€Œä¸æ˜¯changedæˆ–changes</li><li>åº”è¯¥è¯´æ˜ä»£ç å˜åŠ¨çš„åŠ¨æœº,ä»¥åŠä¸ä»¥å‰è¡Œä¸ºçš„å¯¹æ¯”</li></ul><h4 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h4><p><em>Footer éƒ¨åˆ†åªç”¨äºä¸¤ç§æƒ…å†µ :</em></p><ol><li><p><em>ä¸å…¼å®¹å˜åŠ¨ : å¦‚æœå½“å‰ä»£ç ä¸ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸å…¼å®¹,åˆ™ Footer éƒ¨åˆ†ä»¥<code>BREAKING CHANGE</code>å¼€å¤´,åé¢æ˜¯å¯¹å˜åŠ¨çš„æè¿°ã€ä»¥åŠå˜åŠ¨ç†ç”±å’Œè¿ç§»æ–¹æ³•,ç¤ºä¾‹å¦‚ä¸‹ :</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">BREAKING CHANGE: isolate scope bindings definition has changed.</span><br><span class="line"></span><br><span class="line">    To migrate the code follow the example below:</span><br><span class="line"></span><br><span class="line">    Before:</span><br><span class="line"></span><br><span class="line">    scope: &#123;</span><br><span class="line">      myAttr: &apos;attribute&apos;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    After:</span><br><span class="line"></span><br><span class="line">    scope: &#123;</span><br><span class="line">      myAttr: &apos;@&apos;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    The removed `inject` wasn&apos;t generaly useful for directives so there should be no code using it.</span><br></pre></td></tr></table></figure></li><li><p><em>å…³é—­ Issue : å¦‚æœå½“å‰ commit é’ˆå¯¹æŸä¸ªissue,é‚£ä¹ˆå¯ä»¥åœ¨ Footer éƒ¨åˆ†å…³é—­è¿™ä¸ª issue :</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Closes #234</span><br></pre></td></tr></table></figure></li></ol><p><em>ä¹Ÿå¯ä»¥ä¸€æ¬¡å…³é—­å¤šä¸ª issue :</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Closes #123, #245, #992</span><br></pre></td></tr></table></figure></p><h4 id="Revert"><a href="#Revert" class="headerlink" title="Revert"></a>Revert</h4><p><em>è¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µ,å¦‚æœå½“å‰ commit ç”¨äºæ’¤é”€ä»¥å‰çš„ commit,åˆ™å¿…é¡»ä»¥<code>revert:</code>å¼€å¤´ï¼Œåé¢è·Ÿç€è¢«æ’¤é”€ Commit çš„ Header,ç¤ºä¾‹å¦‚ä¸‹ :</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">revert: feat(pencil): add &apos;graphiteWidth&apos; option</span><br><span class="line"></span><br><span class="line">This reverts commit 667ecc1654a317a13331b17617d973392f415f02.</span><br></pre></td></tr></table></figure></p><p><em>Bodyéƒ¨åˆ†çš„æ ¼å¼æ˜¯å›ºå®šçš„ï¼Œå¿…é¡»å†™æˆ<code>This reverts commit &amp;lt;hash&gt;</code>,å…¶ä¸­çš„<code>hash</code>æ˜¯è¢«æ’¤é”€ commit çš„<code>SHA</code>æ ‡è¯†ç¬¦ã€‚</em></p><p><em>âœ¨è§„èŒƒå‚è€ƒé“¾æ¥ :</em></p><ul><li><a href="https://github.com/vuejs/vue/commits/dev" target="_blank" rel="noopener">https://github.com/vuejs/vue/commits/dev</a></li><li><a href="https://github.com/angular/angular/commits/master" target="_blank" rel="noopener">https://github.com/angular/angular/commits/master</a></li></ul><p><em>ğŸ™æ–‡ç« å‚è€ƒé“¾æ¥(è·ç›ŠåŒªæµ…,éå¸¸æ„Ÿè°¢) :</em></p><ul><li><a href="https://www.cnblogs.com/wubaiqing/p/10307605.html" target="_blank" rel="noopener">https://www.cnblogs.com/wubaiqing/p/10307605.html</a></li><li><a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Git-Commit-Messageè§„èŒƒ&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Git-Commit-Messageè§„èŒƒ&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Git Commit Messageè§„èŒƒ&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Gi
      
    
    </summary>
    
    
      <category term="GitHub" scheme="http://yoursite.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶</title>
    <link href="http://yoursite.com/2019/08/08/%E4%B8%BAGitHub%E9%87%8F%E8%BA%AB%E5%AE%9A%E5%88%B6%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/"/>
    <id>http://yoursite.com/2019/08/08/ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶/</id>
    <published>2019-08-08T00:29:09.000Z</published>
    <updated>2019-08-08T00:56:47.027Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶"><a href="#åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶" class="headerlink" title="åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶"></a>åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶</h2><h3 id="Octotree"><a href="#Octotree" class="headerlink" title="Octotree"></a>Octotree</h3><p><em>GitHubç°æœ‰çš„ç›®å½•å±‚çº§å½¢å¼,åœ¨æŸ¥çœ‹æ¥è‡ªä¸åŒå±‚çº§æ–‡ä»¶å¤¹çš„æ–‡ä»¶çš„æ—¶å€™æ˜¾å¾—ä¼¼ä¹ä¸æ˜¯å¾ˆæ–¹ä¾¿,ä½“éªŒç›¸å½“ç³Ÿç³•,åªèƒ½é‡å¤åœ°ç‚¹è¿›ä¸€ä¸ªæ–‡ä»¶å¤¹,å†è¿›å…¥å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶å¤¹,å¦‚æ­¤å¾ªç¯. å°¤å…¶æ˜¯åœ¨æ–‡ä»¶ç¹å¤šçš„é¡¹ç›®ä¹‹ä¸­,æ–‡ä»¶å¤¹åµŒå¥—å ªç§°å™©æ¢¦,ä¸€ä¸ªä¸ªç‚¹å‡»å¤ªè´¹æ—¶é—´å’Œç²¾åŠ›. è€Œ<code>octotree</code>è¿™æ¬¾æ’ä»¶åˆ™å¯ä»¥è§£å†³è¿™ä¸ªç—›ç‚¹,ä»–èƒ½å¤Ÿåƒ IDE ä¸€æ ·æä¾›é¡¹ç›®ç›®å½•,å¿«æ·å¯¼èˆª,æ–¹ä¾¿æµè§ˆ !  <a href="https://github.com/ovity/octotree" target="_blank" rel="noopener">https://github.com/ovity/octotree</a></em></p><h3 id="Awesome-Autocomplete-for-GitHub"><a href="#Awesome-Autocomplete-for-GitHub" class="headerlink" title="Awesome Autocomplete for GitHub"></a>Awesome Autocomplete for GitHub</h3><p><em><code>Awesome Autocomplete for GitHub</code>æ˜¯ä¸€æ¬¾GitHubæ™ºèƒ½æœç´¢æ’ä»¶ : æœ‰ç‚¹ç±»ä¼¼è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½,å®æ—¶ç›‘å¬è¾“å…¥çš„æœç´¢å…³é”®å­—,è‡ªåŠ¨åˆ—å‡ºç›¸å…³å†…å®¹. æ­£å¦‚å®˜æ–¹ä»‹ç» : è‡´åŠ›äºæ‰“é€  GitHub ä¸Šæœ€å¥½çš„æœç´¢å¼•æ“,åŠ©ä½ åœ¨æœç´¢ä»“åº“å’Œç”¨æˆ·æ–¹é¢,æ¯”ä»¥å¾€æ›´å¿«äººä¸€æ­¥ !  <a href="https://github.com/algolia/github-awesome-autocomplete" target="_blank" rel="noopener">https://github.com/algolia/github-awesome-autocomplete</a></em></p><h3 id="Isometric-Contributions"><a href="#Isometric-Contributions" class="headerlink" title="Isometric Contributions"></a>Isometric Contributions</h3><p><em><code>Isometric Contributions</code>æ˜¯ä¸€æ¬¾å¯ä»¥å°†å†·å†°å†°çš„æ•°æ®è½¬åŒ–ä¸ºç”ŸåŠ¨å›¾å½¢çš„æ‰©å±•ç¨‹åº : å®ƒå¯ä»¥å°†ä½ æ¯å¤©çš„contributionsæ•°ç›®è½¬åŒ–ä¸ºé¢œè‰²ä¸ä¸€çš„ç«‹ä½“æŸ±çŠ¶å›¾,å¹¶ç»™å‡ºè‡ªå·±çš„ç»Ÿè®¡æ•°æ®. Contributionsæ•°ç›®ç”±å°‘åˆ°å¤šåˆ†åˆ«ä»¥é¢œè‰²é€æ¸å˜é‡çš„ç«‹ä½“æŸ±çŠ¶å›¾æ˜¾ç¤º,å®›å¦‚æ­å»ºä¸€åº§é«˜ä½é”™è½çš„åŸå¸‚ä¸€èˆ¬. è¿™ä¸ªæ’ä»¶å…è®¸ä½ åœ¨æ™®é€šçš„ Github è´¡çŒ®è¡¨ä¸ç­‰è·åƒç´ è‰ºæœ¯ç‰ˆä¹‹é—´åˆ‡æ¢,é™¤äº†â€å›¾å½¢åŒ–â€ä½ çš„æ•°æ®ä¹‹å¤–,å®ƒè¿˜å¯ä»¥å°†ä½ ä¸€å¹´å†…çš„æäº¤çŠ¶å†µ,ä»¥åŠâ€æœ€å¿™â€çš„ä¸€å¤©æäº¤æ•°ç›®ç»Ÿè®¡å‡ºæ¥ !  <a href="https://github.com/jasonlong/isometric-contributions" target="_blank" rel="noopener">https://github.com/jasonlong/isometric-contributions</a></em></p><p><em>æ›´å¤šä¼˜ç§€æ’ä»¶ä»‹ç»å¯å‚è€ƒ : <a href="https://www.cnblogs.com/fang8206/p/7484703.html" target="_blank" rel="noopener">https://www.cnblogs.com/fang8206/p/7484703.html</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶&quot;&gt;&lt;a href=&quot;#åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶&quot; class=&quot;headerlink&quot; title=&quot;åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶&quot;&gt;&lt;/a&gt;åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶&lt;/
      
    
    </summary>
    
    
      <category term="GitHub" scheme="http://yoursite.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹</title>
    <link href="http://yoursite.com/2019/08/07/%E4%B8%80%E4%B8%AA%E5%9F%BA%E7%A1%80%E7%9A%84SpringBoot%E6%95%B4%E5%90%88Shiro%E6%A1%88%E4%BE%8B/"/>
    <id>http://yoursite.com/2019/08/07/ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹/</id>
    <published>2019-08-07T04:14:55.000Z</published>
    <updated>2019-08-12T01:13:12.139Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹"><a href="#å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹" class="headerlink" title="å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹"></a>å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹</h2><p><em>å‰äº›æ—¥å­å†™äº†ä¸€ä¸ª<a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/basic%20web%20project%20with%20shiro" target="_blank" rel="noopener">æ•´åˆShiroçš„åŸºæœ¬Webæ¡ˆä¾‹</a>,ç„¶ååˆè¿›é˜¶åœ°å­¦ä¹ äº†SpringBootæ•´åˆShiroçš„åŸºæœ¬çŸ¥è¯†,ç»§è€Œä»Šå¤©æ€»ç»“ä¸€ä¸‹ : å†™ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹~ è¯¥æ¡ˆä¾‹çš„ä»£ç ä»“åº“ : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro" target="_blank" rel="noopener">https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro</a></em></p><h3 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h3><p><em>æ•°æ®åº“ERå›¾å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹/shiro-learning-database-er.png" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•°æ®è¡¨ä¸­ç”¨æˆ·åŠå…¶åˆ†é…çš„æƒé™ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤º :</em></p><table><thead><tr><th style="text-align:center">è´¦æˆ·</th><th style="text-align:center">å¯†ç (MD5åŠ å¯†å‰)</th><th style="text-align:center">è§’è‰²</th><th style="text-align:center">æƒé™</th></tr></thead><tbody><tr><td style="text-align:center">admin</td><td style="text-align:center">demo</td><td style="text-align:center">admin</td><td style="text-align:center">*</td></tr><tr><td style="text-align:center">tea</td><td style="text-align:center">demo</td><td style="text-align:center">teacher</td><td style="text-align:center">teaListView:view , stuListView:view , stuListView:add , stuListView:edit</td></tr><tr><td style="text-align:center">stu</td><td style="text-align:center">demo</td><td style="text-align:center">student</td><td style="text-align:center">stuListView:view</td></tr></tbody></table><h3 id="èµ„æºæƒé™è®¾è®¡"><a href="#èµ„æºæƒé™è®¾è®¡" class="headerlink" title="èµ„æºæƒé™è®¾è®¡"></a>èµ„æºæƒé™è®¾è®¡</h3><p><em>springboot-shiro/src/main/java/pers/huangyuhui/ss/shiro/ShiroConfig.java : èµ„æºè¿‡æ»¤åŠå…¶æƒé™çš„é…ç½®ä¿¡æ¯å¦‚ä¸‹</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: é…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: securityManager</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-08-05 7:59 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: org.apache.shiro.spring.web.ShiroFilterFactoryBean</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">shiroFilterFactoryBean</span><span class="params">(SecurityManager securityManager)</span> </span>&#123;</span><br><span class="line">    ShiroFilterFactoryBean shiroFilterFactoryBean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line">    <span class="comment">//è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    shiroFilterFactoryBean.setSecurityManager(securityManager);</span><br><span class="line">    <span class="comment">//è®¾ç½®è‡ªå®šä¹‰è¿‡æ»¤å™¨</span></span><br><span class="line">    shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap());</span><br><span class="line">    <span class="comment">//è®¾ç½®ç”¨æˆ·ç™»å½•é¡µ,é»˜è®¤: http://localhost:8080/login.jsp</span></span><br><span class="line">    shiroFilterFactoryBean.setLoginUrl(<span class="string">"/loginView"</span>);</span><br><span class="line">    <span class="comment">//è®¾ç½®ç”¨æˆ·æœªæˆæƒæ“ä½œæç¤ºé¡µ</span></span><br><span class="line">    shiroFilterFactoryBean.setUnauthorizedUrl(<span class="string">"/unauthorizedView"</span>);</span><br><span class="line">    <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: è®¾ç½®èµ„æºçš„æƒé™æ§åˆ¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-08-05 8:31 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: java.util.Map</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Map&lt;String, String&gt; <span class="title">filterChainDefinitionMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Map&lt;String, String&gt; filterMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">//éœ€èº«ä»½è®¤è¯</span></span><br><span class="line">    filterMap.put(<span class="string">"/stuListView"</span>, <span class="string">"authc"</span>);</span><br><span class="line">    filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"authc"</span>);</span><br><span class="line">    <span class="comment">//æ— éœ€èº«ä»½è®¤è¯:é˜²æ­¢éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯æ“ä½œè¢«'filterMap.put("/**", "authc")'æ‹¦æˆª</span></span><br><span class="line">    filterMap.put(<span class="string">"/login"</span>, <span class="string">"anon"</span>);</span><br><span class="line">    <span class="comment">//æ³¨é”€è¿‡æ»¤å™¨:å…¶å…·ä½“çš„æ³¨é”€é€»è¾‘ä»£ç Shiroå·²ç»æ›¿æˆ‘ä»¬å®ç°äº†å“Ÿ</span></span><br><span class="line">    filterMap.put(<span class="string">"/logout"</span>, <span class="string">"logout"</span>);</span><br><span class="line">    <span class="comment">//è§’è‰²è¿‡æ»¤:éœ€è¦ç”¨æˆ·æ‹¥æœ‰'admin'è§’è‰²</span></span><br><span class="line">    filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"roles[admin]"</span>);</span><br><span class="line">    <span class="comment">//æƒé™è¿‡æ»¤:é™¤èº«ä»½è®¤è¯å¤–,è¿˜éœ€è¦ç”¨æˆ·æ‹¥æœ‰å¯¹stuListViewèµ„æºçš„viewæƒé™</span></span><br><span class="line">    filterMap.put(<span class="string">"/stuListView"</span>, <span class="string">"perms[stuListView:view]"</span>);</span><br><span class="line">    filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"perms[teaListView:view]"</span>);</span><br><span class="line">    <span class="comment">//æ‹¦æˆªéœ€è¦ç™»å½•(ç”¨æˆ·è®¤è¯)æ–¹å¯è®¿é—®çš„èµ„æº(ä¸€èˆ¬å°†/**æ”¾åœ¨æœ€ä¸‹è¾¹,ä¸ç„¶ä¼šå¯¼è‡´æ‰€æœ‰urléƒ½è¢«æ‹¦æˆªå“Ÿ)</span></span><br><span class="line">    filterMap.put(<span class="string">"/**"</span>, <span class="string">"authc"</span>);</span><br><span class="line">    <span class="keyword">return</span> filterMap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></p><h3 id="å‡­è¯åŠ å¯†è®¾è®¡"><a href="#å‡­è¯åŠ å¯†è®¾è®¡" class="headerlink" title="å‡­è¯åŠ å¯†è®¾è®¡"></a>å‡­è¯åŠ å¯†è®¾è®¡</h3><p><em>springboot-shiro/src/main/java/pers/huangyuhui/ss/shiro/ShiroConfig.java : ç”¨æˆ·å‡­è¯åŠ å¯†çš„é…ç½®ä¿¡æ¯å¦‚ä¸‹(ç›å€¼:ç”¨æˆ·å)</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: åˆå§‹åŒ–è‡ªå®šä¹‰Realm</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: credentialsMatcher</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-08-05 7:50 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: pers.huangyuhui.ss.shiro.UserRealm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> UserRealm <span class="title">userRealm</span><span class="params">(HashedCredentialsMatcher hashedCredentialsMatcher)</span> </span>&#123;</span><br><span class="line">    UserRealm userRealm = <span class="keyword">new</span> UserRealm();</span><br><span class="line">    <span class="comment">//è®¾ç½®å‡­è¯åŒ¹é…å™¨</span></span><br><span class="line">    userRealm.setCredentialsMatcher(hashedCredentialsMatcher);</span><br><span class="line">    <span class="keyword">return</span> userRealm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å“ˆå¸Œå¯†ç åŒ¹é…å™¨:æ¯”è¾ƒç”¨æˆ·ç™»å½•æ—¶è¾“å…¥çš„å¯†ç ,è·Ÿæ•°æ®åº“å¯†ç é…åˆç›å€¼saltè§£å¯†åæ˜¯å¦ä¸€è‡´</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-08-05 9:01 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: org.apache.shiro.authc.credential.HashedCredentialsMatcher</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> HashedCredentialsMatcher <span class="title">hashedCredentialsMatcher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    HashedCredentialsMatcher hashedCredentialsMatcher = <span class="keyword">new</span> HashedCredentialsMatcher();</span><br><span class="line">    hashedCredentialsMatcher.setHashAlgorithmName(<span class="string">"md5"</span>); <span class="comment">//æ•£åˆ—ç®—æ³•</span></span><br><span class="line">    hashedCredentialsMatcher.setHashIterations(<span class="number">3</span>); <span class="comment">//æ•£åˆ—çš„æ¬¡æ•°</span></span><br><span class="line">    hashedCredentialsMatcher.setStoredCredentialsHexEncoded(<span class="keyword">true</span>); <span class="comment">//é»˜è®¤æ˜¯true:Hexç¼–ç .false:Base64ç¼–ç </span></span><br><span class="line">    <span class="keyword">return</span> hashedCredentialsMatcher;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></p><p><em>springboot-shiro/src/main/java/pers/huangyuhui/ss/utils/SecurityUtils.java : å¯†ç åŠ å¯†é€»è¾‘å¦‚ä¸‹</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot-shiro</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: åŠ å¯†å·¥å…·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/5/2019-9:09 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//admin-pwd [source:demo+salt:admin+hashIterations:3] :  257e3b15d67a9127d230175e43118e40</span></span><br><span class="line">        <span class="comment">//tea-pwd [source:demo+salt:tea+hashIterations:3] : f97ccdcf125073d5f19bd3de0b67eb40</span></span><br><span class="line">        <span class="comment">//stu-pwd [source:demo+salt:stu+hashIterations:3] : e1a1c9a1340d179077086b5dbee621b4</span></span><br><span class="line">        String md5Pwd = <span class="keyword">new</span> SimpleHash(<span class="string">"md5"</span>, <span class="string">"demo"</span>, ByteSource.Util.bytes(<span class="string">"stu"</span>), <span class="number">3</span>).toHex();</span><br><span class="line">        System.out.println(md5Pwd);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Thymeleafæ•´åˆShiroæ ‡ç­¾"><a href="#Thymeleafæ•´åˆShiroæ ‡ç­¾" class="headerlink" title="Thymeleafæ•´åˆShiroæ ‡ç­¾"></a>Thymeleafæ•´åˆShiroæ ‡ç­¾</h3><p><em>springboot-shiro/src/main/java/pers/huangyuhui/ss/shiro/ShiroConfig.java : Thymeleafæ•´åˆShiroæ ‡ç­¾çš„é…ç½®å¦‚ä¸‹</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: é…ç½®ShiroDialect, ç”¨äºthymeleafå’Œshiroæ ‡ç­¾é…åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 6:37 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: at.pollux.thymeleaf.shiro.dialect.ShiroDialect</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroDialect <span class="title">shiroDialect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ShiroDialect();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Shiroé›†æˆEhCacheç¼“å­˜"><a href="#Shiroé›†æˆEhCacheç¼“å­˜" class="headerlink" title="Shiroé›†æˆEhCacheç¼“å­˜"></a>Shiroé›†æˆEhCacheç¼“å­˜</h3><p><em>springboot-shiro/src/main/java/pers/huangyuhui/ss/shiro/ShiroConfig.java : Shiroé›†æˆEhCacheçš„é…ç½®ä¿¡æ¯å¦‚ä¸‹</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: å®‰å…¨äº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: credentialsMatcher</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 7:53 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.web.mgt.DefaultWebSecurityManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SecurityManager <span class="title">securityManager</span><span class="params">(UserRealm userRealm, EhCacheManager ehCacheManager)</span> </span>&#123;</span><br><span class="line">        DefaultWebSecurityManager defaultWebSecurityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line">        <span class="comment">//å…³è”è‡ªå®šä¹‰realm</span></span><br><span class="line">        defaultWebSecurityManager.setRealm(userRealm);</span><br><span class="line">        <span class="comment">//å…³è”ç¼“å­˜ç®¡ç†</span></span><br><span class="line">        defaultWebSecurityManager.setCacheManager(ehCacheManager);</span><br><span class="line">        <span class="keyword">return</span> defaultWebSecurityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: è®¾ç½®ç¼“å­˜ç®¡ç†, ç¼“å­˜ç”¨æˆ·åŠå…¶æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-07 7:51 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.cache.ehcache.EhCacheManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EhCacheManager <span class="title">ehCacheManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ³¨æ„:myEhcacheå¯¹åº”ehcache-shiro.xmlä¸­çš„'&lt;ehcache name="myEhcache"&gt;'</span></span><br><span class="line">        CacheManager cacheManager = CacheManager.getCacheManager(<span class="string">"myEhcache"</span>);</span><br><span class="line">        <span class="keyword">if</span> (cacheManager == <span class="keyword">null</span>) &#123;</span><br><span class="line">            cacheManager = CacheManager.create();</span><br><span class="line">        &#125;</span><br><span class="line">        EhCacheManager ehCacheManager = <span class="keyword">new</span> EhCacheManager();</span><br><span class="line">        ehCacheManager.setCacheManager(cacheManager);</span><br><span class="line">        <span class="keyword">return</span> ehCacheManager;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ¡ˆä¾‹æˆªå±è§£æ"><a href="#æ¡ˆä¾‹æˆªå±è§£æ" class="headerlink" title="æ¡ˆä¾‹æˆªå±è§£æ"></a>æ¡ˆä¾‹æˆªå±è§£æ</h3><p><em>ç”¨æˆ·ç™»å½•é¡µ,è®¿é—®èµ„æºå‰å¿…é¡»å…ˆè¿›è¡Œç”¨æˆ·èº«ä»½è®¤è¯,è¯¦æƒ…å‚è€ƒèµ„æºæ‹¦æˆªå™¨ä¸­çš„é…ç½®ä¿¡æ¯å“Ÿ</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹/springboot-shiro-ç”¨æˆ·ç™»å½•é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>è‹¥è¦è®¿é—®æ•™å¸ˆ / å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µ,éœ€è¦ç”¨æˆ·æ‹¥æœ‰<code>teaListView:view / stuListView:view</code>æƒé™</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹/springboot-shiro-ç”¨æˆ·ä¸»é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç®¡ç†å‘˜( admin )æ‹¥æœ‰è®¿é—®èµ„æºçš„æ‰€æœ‰æƒé™( </em> ),æ‰€ä»¥å¯ä»¥æ“æ§å­¦ç”Ÿä¿¡æ¯é¡µé¢ä¸­çš„ä»»ä½•æ“ä½œ*<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹/springboot-shiro-[admin]-å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç®¡ç†å‘˜( admin )æ‹¥æœ‰è®¿é—®èµ„æºçš„æ‰€æœ‰æƒé™( </em> ),æ‰€ä»¥å¯ä»¥æ“æ§æ•™å¸ˆä¿¡æ¯é¡µé¢ä¸­çš„ä»»ä½•æ“ä½œ*<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹/springboot-shiro-[admin]-æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•™å¸ˆ( tea )æ‹¥æœ‰å­¦ç”Ÿé¡µé¢çš„<code>stuListView:view , stuListView:add , stuListView:edit</code>æƒé™,æ‰€ä»¥åˆ é™¤ä¿¡æ¯æ“ä½œä¸ºä¸å¯è§</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹/springboot-shiro-[tea]-å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•™å¸ˆ( tea )ä»…æ‹¥æœ‰æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µé¢çš„<code>teaListView:view</code>æƒé™,æ‰€ä»¥å¢,åˆ ,æ”¹,æ“ä½œä¸ºä¸å¯è§çŠ¶æ€</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹/springboot-shiro-[tea]-æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>å­¦ç”Ÿ( stu )ä»…æ‹¥æœ‰å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µé¢çš„<code>stuListView:view</code>æƒé™,æ‰€ä»¥å¢,åˆ ,æ”¹,æ“ä½œä¸ºä¸å¯è§çŠ¶æ€</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹/springboot-shiro-[stu]-å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>å­¦ç”Ÿ( stu )æ²¡æœ‰è®¿é—®æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µé¢çš„æƒé™,æ‰€ä»¥è¢«èµ„æºæ‹¦æˆªå™¨æ‰€æ‹¦æˆªç»§è€Œè¿›å…¥æŒ‡å®šçš„â€™unauthorized.htmlâ€™é¡µé¢</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹/springboot-shiro-[stu]-æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•°æ®åº“è®¾è®¡å‚è€ƒäº†(éå¸¸æ„Ÿè°¢) : <a href="https://www.jianshu.com/p/7716951f4d7f" target="_blank" rel="noopener">https://www.jianshu.com/p/7716951f4d7f</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„SpringBootæ•´åˆShiroæ¡ˆä¾‹&quot;&gt;&lt;
      
    
    </summary>
    
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
      <category term="Thymeleaf" scheme="http://yoursite.com/tags/Thymeleaf/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
      <category term="EhCache" scheme="http://yoursite.com/tags/EhCache/"/>
    
  </entry>
  
  <entry>
    <title>è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶</title>
    <link href="http://yoursite.com/2019/08/07/%E8%AF%A6%E8%A7%A3Shiro%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/"/>
    <id>http://yoursite.com/2019/08/07/è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶/</id>
    <published>2019-08-07T04:12:16.000Z</published>
    <updated>2019-08-08T03:31:13.837Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶"><a href="#å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶" class="headerlink" title="å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶"></a>å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p><em>Shiroä½œä¸ºä¸€ä¸ªå¼€æºçš„æƒé™æ¡†æ¶,å…¶ç»„ä»¶åŒ–çš„è®¾è®¡æ€æƒ³ä½¿å¾—å¼€å‘è€…å¯ä»¥æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯çµæ´»åœ°å®ç°æƒé™ç®¡ç†æ–¹æ¡ˆ,æƒé™ç²’åº¦çš„æ§åˆ¶éå¸¸æ–¹ä¾¿,Shiroæ¡†æ¶çš„æ¶æ„å›¾å¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶/Shiro-framework-æ¶æ„å›¾.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ™°åœ°çœ‹åˆ°,<code>CacheManager</code>ä¹Ÿæ˜¯Shiroæ¶æ„ä¸­çš„ä¸»è¦ç»„ä»¶ä¹‹ä¸€,Shiroæ­£æ˜¯é€šè¿‡CacheManagerç»„ä»¶å®ç°æƒé™æ•°æ®ç¼“å­˜.<br><code>å½“æƒé™ä¿¡æ¯å­˜æ”¾åœ¨æ•°æ®åº“ä¸­æ—¶,å¯¹äºæ¯æ¬¡å‰ç«¯çš„è®¿é—®è¯·æ±‚éƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢</code>. ç‰¹åˆ«æ˜¯åœ¨å¤§é‡ä½¿ç”¨shiroçš„jspæ ‡ç­¾çš„åœºæ™¯ä¸‹,å¯¹åº”å‰ç«¯çš„ä¸€ä¸ªé¡µé¢è®¿é—®è¯·æ±‚ä¼šåŒæ—¶å‡ºç°å¾ˆå¤šçš„æƒé™æŸ¥è¯¢æ“ä½œ,è¿™å¯¹äºæƒé™ä¿¡æ¯å˜åŒ–ä¸æ˜¯å¾ˆé¢‘ç¹çš„åœºæ™¯,æ¯æ¬¡å‰ç«¯é¡µé¢è®¿é—®éƒ½è¿›è¡Œå¤§é‡çš„æƒé™æ•°æ®åº“æŸ¥è¯¢æ˜¯éå¸¸ä¸ç»æµçš„! å› æ­¤éå¸¸æœ‰å¿…è¦å¯¹æƒé™æ•°æ®ä½¿ç”¨ç¼“å­˜æ–¹æ¡ˆ~</em></p><h3 id="Shiroæƒé™æ•°æ®çš„ç¼“å­˜æ–¹å¼"><a href="#Shiroæƒé™æ•°æ®çš„ç¼“å­˜æ–¹å¼" class="headerlink" title="Shiroæƒé™æ•°æ®çš„ç¼“å­˜æ–¹å¼"></a>Shiroæƒé™æ•°æ®çš„ç¼“å­˜æ–¹å¼</h3><p><em>å…³äºshiroæƒé™æ•°æ®çš„ç¼“å­˜æ–¹å¼,å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±» :</em> </p><ol><li><em>å°†æƒé™æ•°æ®ç¼“å­˜åˆ°é›†ä¸­å¼å­˜å‚¨ä¸­é—´ä»¶ä¸­,æ¯”å¦‚redisæˆ–è€…memcached</em></li><li><em>å°†æƒé™æ•°æ®ç¼“å­˜åˆ°æœ¬åœ°</em></li></ol><h3 id="å¦‚ä½•åœ¨Shiroä¸­ä½¿ç”¨ç¼“å­˜"><a href="#å¦‚ä½•åœ¨Shiroä¸­ä½¿ç”¨ç¼“å­˜" class="headerlink" title="å¦‚ä½•åœ¨Shiroä¸­ä½¿ç”¨ç¼“å­˜"></a>å¦‚ä½•åœ¨Shiroä¸­ä½¿ç”¨ç¼“å­˜</h3><p><em>æ ¹æ®Shiroå®˜æ–¹çš„è¯´æ³•,è™½ç„¶ç¼“å­˜åœ¨æƒé™æ¡†æ¶ä¸­éå¸¸é‡è¦,ä½†æ˜¯å¦‚æœå®ç°ä¸€å¥—å®Œæ•´çš„ç¼“å­˜æœºåˆ¶ä¼šä½¿å¾—Shiroåç¦»äº†æ ¸å¿ƒçš„åŠŸèƒ½(è®¤è¯å’Œæˆæƒ). å› æ­¤Shiroåªæä¾›äº†ä¸€ä¸ªå¯ä»¥æ”¯æŒå…·ä½“ç¼“å­˜å®ç°(å¦‚ : <code>Hazelcast</code>, <code>Ehcache</code>, <code>OSCache</code>, <code>Terracotta</code>, <code>Coherence</code>, <code>GigaSpaces</code>, <code>JBossCache</code> ç­‰)çš„æŠ½è±¡APIæ¥å£,è¿™æ ·å°±å…è®¸Shiroç”¨æˆ·æ ¹æ®è‡ªå·±çš„éœ€æ±‚çµæ´»åœ°é€‰æ‹©å…·ä½“çš„CacheManager,å½“ç„¶,å…¶å®Shiroä¹Ÿè‡ªå¸¦äº†ä¸€ä¸ªæœ¬åœ°å†…å­˜CacheManager(<code>org.apache.shiro.cache.MemoryConstrainedCacheManager</code>),Shiroçš„ç¼“å­˜ç»„ä»¶ç±»å›¾å¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶/Shiro-ç¼“å­˜ç»„ä»¶ç±»å›¾.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>ä»Shiroç¼“å­˜ç»„ä»¶ç±»å›¾å¯ä»¥çœ‹åˆ°,Shiroæä¾›çš„ç¼“å­˜æŠ½è±¡APIæ¥å£æ­£æ˜¯ : <code>org.apache.shiro.cache.CacheManager</code>,é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•é…ç½®å’Œä½¿ç”¨CacheManagerå‘¢ ? å¦‚ä¸‹æˆ‘ä»¬ä»¥ä½¿ç”¨Shiroæä¾›çš„<code>MemoryConstrainedCacheManager</code>ç»„ä»¶ä¸ºä¾‹è¿›è¡Œè¯´æ˜. æˆ‘ä»¬çŸ¥é“,SecurityManageræ˜¯Shiroçš„æ ¸å¿ƒæ§åˆ¶å™¨,æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…¶ç±»å›¾ :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶/Shiro-SecurityManagerç±»å›¾.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em><code>org.apache.shiro.mgt.CachingSecurityManager</code>æ˜¯Shiroä¸­SecurityManageræ¥å£çš„åŸºç¡€æŠ½è±¡ç±»,æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…¶æºç ç»“æ„(å¦‚ä¸‹æ‰€ç¤º),<code>å‘ç°åœ¨CachingSecurityManagerä¸­å­˜åœ¨ä¸€ä¸ªCacheManagerç±»å‹çš„æˆå‘˜å˜é‡</code></em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">CachingSecurityManager</span> <span class="keyword">implements</span> <span class="title">SecurityManager</span>, <span class="title">Destroyable</span>, <span class="title">CacheManagerAware</span>, <span class="title">EventBusAware</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The CacheManager to use to perform caching operations to enhance performance.  Can be null.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> CacheManager cacheManager;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The EventBus to use to use to publish and receive events of interest during Shiro's lifecycle.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.3</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> EventBus eventBus;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Default no-arg constructor that will automatically attempt to initialize a default cacheManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CachingSecurityManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//use a default event bus:</span></span><br><span class="line">        setEventBus(<span class="keyword">new</span> DefaultEventBus());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>å¦å¤–,æ¥å£<code>org.apache.shiro.realm.Realm</code>å®šä¹‰äº†æƒé™æ•°æ®çš„å­˜å‚¨æ–¹å¼,å…¶ç±»å›¾å¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶/Shiro-Realmç±»å›¾.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>æ˜¾ç„¶,<code>org.apache.shiro.realm.CachingRealm</code>æ˜¯Shiroä¸­Realmæ¥å£çš„åŸºç¡€å®ç°ç±»,æˆ‘ä»¬åŒæ ·æ¥çœ‹ä¸€ä¸‹å…¶æºç ç»“æ„(å¦‚ä¸‹æ‰€ç¤º),<code>å‘ç°åŒæ ·åœ¨CachingRealmä¹Ÿå­˜åœ¨ä¸€ä¸ªCacheManagerç±»å‹çš„æˆå‘˜å˜é‡</code></em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">CachingRealm</span> <span class="keyword">implements</span> <span class="title">Realm</span>, <span class="title">Nameable</span>, <span class="title">CacheManagerAware</span>, <span class="title">LogoutAware</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(CachingRealm.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//TODO - complete JavaDoc</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicInteger INSTANCE_COUNT = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*--------------------------------------------</span></span><br><span class="line"><span class="comment">    |    I N S T A N C E   V A R I A B L E S    |</span></span><br><span class="line"><span class="comment">    ============================================*/</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> cachingEnabled;</span><br><span class="line">    <span class="keyword">private</span> CacheManager cacheManager;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Default no-argument constructor that defaults</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@link</span> #isCachingEnabled() cachingEnabled&#125; (for general caching) to &#123;<span class="doctag">@code</span> true&#125; and sets a</span></span><br><span class="line"><span class="comment">     * default &#123;<span class="doctag">@link</span> #getName() name&#125; based on the class name.</span></span><br><span class="line"><span class="comment">     * &lt;p/&gt;</span></span><br><span class="line"><span class="comment">     * Note that while in general, caching may be enabled by default, subclasses have control over</span></span><br><span class="line"><span class="comment">     * if specific caching is enabled.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CachingRealm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cachingEnabled = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.name = getClass().getName() + <span class="string">"_"</span> + INSTANCE_COUNT.getAndIncrement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p><em>ä»ä»¥ä¸Šåˆ†ææˆ‘ä»¬çŸ¥é“Shiroæ”¯æŒåœ¨2ä¸ªåœ°æ–¹å®šä¹‰ç¼“å­˜ç®¡ç†å™¨,æ—¢å¯ä»¥åœ¨SecurityManagerä¸­å®šä¹‰,ä¹Ÿå¯ä»¥åœ¨Realmä¸­å®šä¹‰,ä»»é€‰å…¶ä¸€å³å¯. é€šå¸¸æˆ‘ä»¬éƒ½ä¼šè‡ªå®šä¹‰Realmå®ç°,ä¾‹å¦‚å°†æƒé™æ•°æ®å­˜æ”¾åœ¨æ•°æ®åº“ä¸­,é‚£ä¹ˆåœ¨Realmå®ç°ä¸­å®šä¹‰ç¼“å­˜ç®¡ç†å™¨å†åˆé€‚ä¸è¿‡äº†</em></p><p><em>é‚£ä¹ˆæˆ‘ä»¬ä¸ç¦è¦é—®äº† :</em></p><ul><li>ç¬¬ä¸€ : ä¸ºä»€ä¹ˆShiroè¦è®¾è®¡æˆæ—¢å¯ä»¥åœ¨Realm,ä¹Ÿå¯ä»¥åœ¨SecurityManagerä¸­è®¾ç½®ç¼“å­˜ç®¡ç†å™¨å‘¢ ?</li><li>ç¬¬äºŒ : åˆ†åˆ«åœ¨Realmå’ŒSecurityManagerå®šä¹‰çš„ç¼“å­˜ç®¡ç†å™¨,ä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«æˆ–è”ç³»å— ?</li></ul><p><em>æ€€ç€ç§ç§ç–‘é—®è®©æˆ‘ä»¬è¿½è¸ªä¸€ä¸‹<code>org.apache.shiro.mgt.RealmSecurityManae</code>çš„æºç å®ç°,å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">RealmSecurityManager</span> <span class="keyword">extends</span> <span class="title">CachingSecurityManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Sets the internal &#123;<span class="doctag">@link</span> #getCacheManager CacheManager&#125; on any internal configured</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@link</span> #getRealms Realms&#125; that implement the &#123;<span class="doctag">@link</span> org.apache.shiro.cache.CacheManagerAware CacheManagerAware&#125; interface.</span></span><br><span class="line"><span class="comment">     * &lt;p/&gt;</span></span><br><span class="line"><span class="comment">     * This method is called after setting a cacheManager on this securityManager via the</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@link</span> #setCacheManager(org.apache.shiro.cache.CacheManager) setCacheManager&#125; method to allow it to be propagated</span></span><br><span class="line"><span class="comment">     * down to all the internal Realms that would need to use it.</span></span><br><span class="line"><span class="comment">     * &lt;p/&gt;</span></span><br><span class="line"><span class="comment">     * It is also called after setting one or more realms via the &#123;<span class="doctag">@link</span> #setRealm setRealm&#125; or</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@link</span> #setRealms setRealms&#125; methods to allow these newly available realms to be given the cache manager</span></span><br><span class="line"><span class="comment">     * already in use.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">applyCacheManagerToRealms</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        CacheManager cacheManager = getCacheManager();</span><br><span class="line">        Collection&lt;Realm&gt; realms = getRealms();</span><br><span class="line">        <span class="keyword">if</span> (cacheManager != <span class="keyword">null</span> &amp;&amp; realms != <span class="keyword">null</span> &amp;&amp; !realms.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Realm realm : realms) &#123;</span><br><span class="line">                <span class="keyword">if</span> (realm <span class="keyword">instanceof</span> CacheManagerAware) &#123;</span><br><span class="line">                    ((CacheManagerAware) realm).setCacheManager(cacheManager);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>è¿™ä¸‹æç„¶å¤§æ‚Ÿäº†å§ ! <code>ä»æºç å¯ä»¥åˆ†æå‡ºå…¶å®åœ¨SecurityManagerä¸­è®¾ç½®çš„CacheManageréƒ½ä¼šç»™Realmä½¿ç”¨,å³çœŸæ­£ä½¿ç”¨CacheManagerçš„ç»„ä»¶æ˜¯Realm</code></em></p><p><em>ğŸ™æ‘˜è‡ª(è·ç›ŠåŒªæµ…,éå¸¸æ„Ÿè°¢) : <a href="https://www.cnblogs.com/nuccch/p/8044226.html" target="_blank" rel="noopener">https://www.cnblogs.com/nuccch/p/8044226.html</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶&lt;/h2&gt;&lt;h3 id=&quot;ç®€
      
    
    </summary>
    
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootä¸­Shiroé›†æˆEhCache</title>
    <link href="http://yoursite.com/2019/08/07/SpringBoot%E4%B8%ADShiro%E9%9B%86%E6%88%90EhCache/"/>
    <id>http://yoursite.com/2019/08/07/SpringBootä¸­Shiroé›†æˆEhCache/</id>
    <published>2019-08-07T04:10:32.000Z</published>
    <updated>2019-08-08T06:16:06.176Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache"><a href="#å­¦ä¹ ç¬”è®°-SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache" class="headerlink" title="å­¦ä¹ ç¬”è®° : SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache"></a>å­¦ä¹ ç¬”è®° : SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache</h2><p><em>ç¤ºä¾‹ç¨‹åºæ‘˜è‡ª : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹</a></em></p><h3 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h3><p><em>Shiro-learning/spring boot project with shiro/springboot-shiro/pom.xml</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiro --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Ehcache --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="åˆ›å»ºEhCacheç¼“å­˜é…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºEhCacheç¼“å­˜é…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºEhCacheç¼“å­˜é…ç½®æ–‡ä»¶"></a>åˆ›å»ºEhCacheç¼“å­˜é…ç½®æ–‡ä»¶</h3><p><em>Shiro-learning/spring boot project with shiro/springboot-shiro/src/main/resources/ehcache-shiro.xml</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">"http://ehcache.org/ehcache.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">updateCheck</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">name</span>=<span class="string">"myEhcache"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">"java.io.tmpdir"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æˆæƒä¿¡æ¯ç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"authorizationCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- èº«ä»½ä¿¡æ¯ç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"authenticationCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Sessionç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"activeSessionCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜åŠå°æ—¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"halfHour"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜ä¸€å°æ—¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"hour"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"3600"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"3600"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜ä¸€å¤© --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"oneDay"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"86400"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"86400"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">         name: ç¼“å­˜åç§°ã€‚</span></span><br><span class="line"><span class="comment">         maxElementsInMemory: ç¼“å­˜æœ€å¤§ä¸ªæ•°</span></span><br><span class="line"><span class="comment">         eternal: å¯¹è±¡æ˜¯å¦æ°¸ä¹…æœ‰æ•ˆ,ä¸€ä½†è®¾ç½®äº†,timeoutå°†ä¸èµ·ä½œç”¨</span></span><br><span class="line"><span class="comment">         timeToIdleSeconds: è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰çš„å…è®¸é—²ç½®æ—¶é—´(å•ä½ï¼šç§’). ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨,å¯é€‰å±æ€§,é»˜è®¤å€¼æ˜¯0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">         timeToLiveSeconds: è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰å…è®¸å­˜æ´»æ—¶é—´(å•ä½ï¼šç§’). æœ€å¤§æ—¶é—´ä»‹äºåˆ›å»ºæ—¶é—´å’Œå¤±æ•ˆæ—¶é—´ä¹‹é—´. ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨,é»˜è®¤æ˜¯0,ä¹Ÿå°±æ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">         overflowToDisk: å½“å†…å­˜ä¸­å¯¹è±¡æ•°é‡è¾¾åˆ°maxElementsInMemoryæ—¶,Ehcacheå°†ä¼šå¯¹è±¡å†™åˆ°ç£ç›˜ä¸­</span></span><br><span class="line"><span class="comment">         diskSpoolBufferSizeMB: è¿™ä¸ªå‚æ•°è®¾ç½®DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°,é»˜è®¤æ˜¯30MB. æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">         maxElementsOnDisk: ç¡¬ç›˜æœ€å¤§ç¼“å­˜ä¸ªæ•°</span></span><br><span class="line"><span class="comment">         diskPersistent: æ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ® Whether the disk store persists between restarts of the Virtual Machine. The default value is false.</span></span><br><span class="line"><span class="comment">         diskExpiryThreadIntervalSeconds: ç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”,é»˜è®¤æ˜¯120ç§’</span></span><br><span class="line"><span class="comment">         memoryStoreEvictionPolicy: å½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶,Ehcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜. é»˜è®¤ç­–ç•¥æ˜¯LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨). ä½ å¯ä»¥è®¾ç½®ä¸ºFIFO(å…ˆè¿›å…ˆå‡º)æˆ–æ˜¯LFU(è¾ƒå°‘ä½¿ç”¨)</span></span><br><span class="line"><span class="comment">         clearOnFlush: å†…å­˜æ•°é‡æœ€å¤§æ—¶æ˜¯å¦æ¸…é™¤</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span> <span class="attr">name</span>=<span class="string">"defaultCache"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToIdleSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToLiveSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskPersistent</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">"120"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">"LRU"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="é…ç½®Shiroç¼“å­˜"><a href="#é…ç½®Shiroç¼“å­˜" class="headerlink" title="é…ç½®Shiroç¼“å­˜"></a>é…ç½®Shiroç¼“å­˜</h3><p><em>Shiro-learning/spring boot project with shiro/springboot-shiro/src/main/java/pers/huangyuhui/ss/shiro/ShiroConfig.java</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot-shiro</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: Shiroé…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/5/2019-7:41 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: å®‰å…¨äº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: credentialsMatcher</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 7:53 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.web.mgt.DefaultWebSecurityManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SecurityManager <span class="title">securityManager</span><span class="params">(UserRealm userRealm, EhCacheManager ehCacheManager)</span> </span>&#123;</span><br><span class="line">        DefaultWebSecurityManager defaultWebSecurityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line">        <span class="comment">//å…³è”è‡ªå®šä¹‰realm</span></span><br><span class="line">        defaultWebSecurityManager.setRealm(userRealm);</span><br><span class="line">        <span class="comment">//å…³è”ç¼“å­˜ç®¡ç†</span></span><br><span class="line">        defaultWebSecurityManager.setCacheManager(ehCacheManager);</span><br><span class="line">        <span class="keyword">return</span> defaultWebSecurityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: è®¾ç½®ç¼“å­˜ç®¡ç†å™¨, ç¼“å­˜ç”¨æˆ·åŠå…¶æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-07 7:51 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.cache.ehcache.EhCacheManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EhCacheManager <span class="title">ehCacheManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ³¨æ„:myEhcacheå¯¹åº”ehcache-shiro.xmlä¸­çš„'&lt;ehcache name="myEhcache"&gt;'</span></span><br><span class="line">        CacheManager cacheManager = CacheManager.getCacheManager(<span class="string">"myEhcache"</span>);</span><br><span class="line">        <span class="keyword">if</span> (cacheManager == <span class="keyword">null</span>) &#123;</span><br><span class="line">            cacheManager = CacheManager.create();</span><br><span class="line">        &#125;</span><br><span class="line">        EhCacheManager ehCacheManager = <span class="keyword">new</span> EhCacheManager();</span><br><span class="line">        ehCacheManager.setCacheManager(cacheManager);</span><br><span class="line">        <span class="keyword">return</span> ehCacheManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><p><em>å¦‚æœä½¿ç”¨çš„EhCacheç‰ˆæœ¬è¶…è¿‡äº†2.5.0,é‚£ä¹ˆ<code>&lt;ehcache name=&quot;myEhcache&quot;&gt;</code>çš„é…ç½®å°±æ˜¾å¾—éå¸¸é‡è¦äº†,ä¸ç„¶EhCacheä¼šè‡ªåŠ¨åŠ è½½é»˜è®¤çš„åå­— : <code>_default_</code>,ä¸”EhCache2.5ä»¥ååªå…è®¸åˆ›å»ºå•ä¾‹çš„CacheManager(ç¼“å­˜ç®¡ç†å™¨),æ‰€ä»¥åº”æ³¨æ„é¿å…é‡å¤åŠ è½½CacheManagerå“Ÿ : åˆ›å»ºehCacheManagerçš„æ—¶å…ˆåˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨cacheManager,æ²¡æœ‰çš„æƒ…å†µä¸‹å†è¿›è¡Œåˆ›å»º,åˆ¤æ–­çš„å…³é”®ä¸º<code>ehcache-shiro.xml</code>(ç¼“å­˜é…ç½®æ–‡ä»¶)ä¸­é…ç½®çš„<code>name</code>å±æ€§,å¯é€šè¿‡è¯¥å±æ€§æ¥åˆ¤æ–­cacheManageræ˜¯å¦åŠ è½½äº†,ç¤ºä¾‹ä»£ç å¦‚ä¸‹ :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CacheManager cacheManager = CacheManager.getCacheManager(<span class="string">"myEhcache"</span>);</span><br><span class="line">    <span class="keyword">if</span> (cacheManager == <span class="keyword">null</span>) &#123;</span><br><span class="line">        cacheManager = CacheManager.create();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><em>å€Ÿé‰´(éå¸¸æ„Ÿè°¢) : <a href="https://blog.csdn.net/Maslii/article/details/82380568" target="_blank" rel="noopener">https://blog.csdn.net/Maslii/article/details/82380568</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : SpringBooté¡¹ç›®ä¸­Shiroé›†æˆE
      
    
    </summary>
    
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
      <category term="EhCache" scheme="http://yoursite.com/tags/EhCache/"/>
    
  </entry>
  
  <entry>
    <title>è¯¦è§£Intellij IDEAä¸­çš„DEBUGåŠŸèƒ½</title>
    <link href="http://yoursite.com/2019/08/06/%E8%AF%A6%E8%A7%A3Intellij-IDEA%E4%B8%AD%E7%9A%84DEBUG%E5%8A%9F%E8%83%BD/"/>
    <id>http://yoursite.com/2019/08/06/è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½/</id>
    <published>2019-08-06T07:21:34.000Z</published>
    <updated>2019-08-06T13:36:55.769Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½"><a href="#å­¦ä¹ ç¬”è®°-è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½" class="headerlink" title="å­¦ä¹ ç¬”è®° : è¯¦è§£Intellij IDEAä¸­çš„DEBUGåŠŸèƒ½"></a>å­¦ä¹ ç¬”è®° : è¯¦è§£Intellij IDEAä¸­çš„DEBUGåŠŸèƒ½</h2><p><em><code>Debug</code>ç”¨äºè¿½è¸ªä»£ç çš„æ‰§è¡Œæµç¨‹,å…¶ä¸»è¦ç”¨é€”å¦‚ä¸‹ :</em></p><ol><li><em>è‹¥ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸,å¯é€šè¿‡å¯ç”¨Debugæ¨¡å¼æ¥åˆ†æç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å„ä¸ªå‚æ•°çš„å˜åŒ–,ç»§è€Œå®šä½åˆ°å¼‚å¸¸å‘ç”Ÿçš„ä½ç½®</em></li><li><em>é€šè¿‡å¯ç”¨Debugæ¨¡å¼æ¥è·Ÿè¸ªä»£ç çš„è¿è¡Œæµç¨‹,ç»§è€Œå»å­¦ä¹ ä¸€äº›ç¬¬ä¸‰æ–¹æ¡†æ¶çš„æºç </em></li></ol><h3 id="åŸºæœ¬ç”¨æ³•-amp-å¿«æ·é”®"><a href="#åŸºæœ¬ç”¨æ³•-amp-å¿«æ·é”®" class="headerlink" title="åŸºæœ¬ç”¨æ³•&amp;å¿«æ·é”®"></a>åŸºæœ¬ç”¨æ³•&amp;å¿«æ·é”®</h3><p><em>IDEAç‰ˆæœ¬ : Intellij IDEA 2019.1.3-UItimate Edition</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/06/è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½/IDEA-debug-view-1.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>å¦‚ä¸Šdebugè§†å›¾,ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡è®²è§£ :</em></p><ol><li><em><code>Show Execution Point (Alt + F10)</code> : å¦‚æœä½ çš„å…‰æ ‡åœ¨å…¶å®ƒè¡Œæˆ–å…¶å®ƒé¡µé¢,ç‚¹å‡»è¿™ä¸ªæŒ‰é’®å¯è·³è½¬åˆ°å½“å‰ä»£ç æ‰§è¡Œçš„è¡Œ</em></li><li><em><code>Step Over (F6)</code> : æ­¥è¿‡,ä¸€è¡Œä¸€è¡Œåœ°å¾€ä¸‹èµ°,å¦‚æœè¿™ä¸€è¡Œä¸Šæœ‰æ–¹æ³•,å¹¶ä¸ä¼šè¿›å…¥</em></li><li><em><code>Step Into (F5)</code> : æ­¥å…¥,å¦‚æœå½“å‰è¡Œæœ‰æ–¹æ³•,å¯ä»¥è¿›å…¥æ–¹æ³•å†…éƒ¨,ä¸€èˆ¬ç”¨äºè¿›å…¥è‡ªå®šä¹‰æ–¹æ³•å†…,ä¸ä¼šè¿›å…¥å®˜æ–¹ç±»åº“çš„æ–¹æ³•</em></li><li><em><code>Force Step Into (Alt + Shift + F7)</code> : å¼ºåˆ¶æ­¥å…¥,èƒ½è¿›å…¥ä»»ä½•æ–¹æ³•,æŸ¥çœ‹åº•å±‚æºç çš„æ—¶å€™å¯ä»¥ç”¨è¿™ä¸ªè¿›å…¥å®˜æ–¹ç±»åº“çš„æ–¹æ³•</em></li><li><em><code>Step Out (F7)</code> : æ­¥å‡º,ä»æ­¥å…¥çš„æ–¹æ³•å†…é€€å‡ºåˆ°æ–¹æ³•è°ƒç”¨å¤„,æ­¤æ—¶æ–¹æ³•å·²æ‰§è¡Œå®Œæ¯•,åªæ˜¯è¿˜æ²¡æœ‰å®Œæˆèµ‹å€¼</em></li><li><em><code>Drop Frame (é»˜è®¤æ— )</code> : å›é€€æ–­ç‚¹,åé¢ç« èŠ‚è¯¦ç»†è¯´æ˜</em></li><li><em><code>Run to Cursor (Ctrl + R)</code> : è¿è¡Œåˆ°å…‰æ ‡å¤„,ä½ å¯ä»¥å°†å…‰æ ‡å®šä½åˆ°ä½ éœ€è¦æŸ¥çœ‹çš„é‚£ä¸€è¡Œ,ç„¶åä½¿ç”¨è¿™ä¸ªåŠŸèƒ½,ä»£ç ä¼šè¿è¡Œè‡³å…‰æ ‡è¡Œ,è€Œä¸éœ€è¦æ‰“æ–­ç‚¹å“Ÿ</em></li><li><em><code>Evaluate Expression (Ctrl + U)</code> : è®¡ç®—è¡¨è¾¾å¼,åé¢ç« èŠ‚è¯¦ç»†è¯´æ˜</em></li></ol><p><em>ä»å·¦åˆ°å³ä¾æ¬¡è®²è§£ :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/06/è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½/IDEA-debug-view-2.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>å¦‚ä¸Šdebugè§†å›¾,ä»å·¦åˆ°å³ä¾æ¬¡è®²è§£ :</em></p><ol><li><em><code>Rerun &#39;xxx&#39;(Ctrl + F11)</code> : é‡æ–°è¿è¡Œç¨‹åº,ä¼šå…³é—­æœåŠ¡åé‡æ–°å¯åŠ¨ç¨‹åº</em></li><li><em><code>Update &#39;xxx&#39; application (Ctrl + F10)</code> : æ›´æ–°ç¨‹åº,ä¸€èˆ¬åœ¨ä½ çš„ä»£ç æœ‰æ”¹åŠ¨åå¯æ‰§è¡Œè¿™ä¸ªåŠŸèƒ½. è€Œè¿™ä¸ªåŠŸèƒ½å¯¹åº”çš„æ“ä½œåˆ™æ˜¯åœ¨æœåŠ¡é…ç½®é‡Œ,ä¸€èˆ¬é…åˆçƒ­éƒ¨ç½²æ’ä»¶ä¼šæ›´å¥½ç”¨,å¦‚JRebel,è¿™æ ·å°±ä¸ç”¨æ¯æ¬¡æ›´æ”¹ä»£ç åè¿˜è¦å»é‡æ–°å¯åŠ¨æœåŠ¡å•¦</em></li><li><em><code>Resume Program (F8)</code> : æ¢å¤ç¨‹åº,æ¯”å¦‚ä½ åœ¨ç¬¬20è¡Œå’Œ25è¡Œæœ‰ä¸¤ä¸ªæ–­ç‚¹,å½“å‰è¿è¡Œè‡³ç¬¬20è¡Œæ—¶æŒ‰F9,åˆ™è¿è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹(å³ç¬¬25è¡Œ),å†æŒ‰F9åˆ™è¿è¡Œå®Œæ•´ä¸ªæµç¨‹,å› ä¸ºåé¢å·²ç»æ²¡æœ‰æ–­ç‚¹å’¯</em></li><li><em><code>Pause Program</code> : æš‚åœç¨‹åº,å¯ç”¨Debug</em></li><li><em><code>Stop &#39;xxx&#39; (Ctrl + F2)</code> : è¿ç»­æŒ‰ä¸¤ä¸‹ä¼šå…³é—­ç¨‹åº,æœ‰æ—¶å€™ä½ ä¼šå‘ç°å…³é—­æœåŠ¡å†å¯åŠ¨æ—¶,æŠ¥ç«¯å£è¢«å ç”¨,è¿™æ˜¯å› ä¸ºæ²¡å®Œå…¨å…³é—­æœåŠ¡çš„åŸå› ,è¿™æ—¶å°±éœ€è¦ä½ æŸ¥æ€æŒ‡å®šçš„JVMè¿›ç¨‹å•¦</em></li><li><em><code>View Breakpoints (Ctrl + Shift + F8)</code> : æŸ¥çœ‹æ‰€æœ‰æ–­ç‚¹,åé¢ç« èŠ‚ä¼šæ¶‰åŠåˆ°</em></li><li><em><code>Mute Breakpoints</code> : å“‘çš„æ–­ç‚¹,æ—¢é€‰æ‹©è¿™ä¸ªå,æ‰€æœ‰æ–­ç‚¹å˜ä¸ºç°è‰²,æ–­ç‚¹å¤±æ•ˆ,æŒ‰F9åˆ™å¯ä»¥ç›´æ¥è¿è¡Œå®Œç¨‹åº. å†æ¬¡ç‚¹å‡»,æ–­ç‚¹å˜ä¸ºçº¢è‰²,æœ‰æ•ˆ. å¦‚æœåªæƒ³ä½¿æŸä¸€ä¸ªæ–­ç‚¹å¤±æ•ˆ,åˆ™å¯ä»¥åœ¨æ–­ç‚¹ä¸Šå³é”®,ç„¶åå–æ¶ˆEnabled</em></li></ol><p><em>æ›´å¤šå†…å®¹è¯·å‚è€ƒ(è€ç‰ˆæœ¬å“Ÿ,æ— ç¢å•¦~) : <a href="https://www.cnblogs.com/nihaorz/p/7613967.html" target="_blank" rel="noopener">https://www.cnblogs.com/nihaorz/p/7613967.html</a> .</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : è¯¦è§£Intellij IDEAä¸­çš„DEBUGåŠŸèƒ½&quot;&gt;&lt;
      
    
    </summary>
    
    
      <category term="IDEA" scheme="http://yoursite.com/tags/IDEA/"/>
    
  </entry>
  
  <entry>
    <title>Thymeleafæ•´åˆShiroæ ‡ç­¾</title>
    <link href="http://yoursite.com/2019/08/06/Thymeleaf%E6%95%B4%E5%90%88Shiro%E6%A0%87%E7%AD%BE/"/>
    <id>http://yoursite.com/2019/08/06/Thymeleafæ•´åˆShiroæ ‡ç­¾/</id>
    <published>2019-08-06T07:16:26.000Z</published>
    <updated>2019-08-07T08:46:22.616Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Thymeleafæ•´åˆShiroæ ‡ç­¾"><a href="#å­¦ä¹ ç¬”è®°-Thymeleafæ•´åˆShiroæ ‡ç­¾" class="headerlink" title="å­¦ä¹ ç¬”è®° : Thymeleafæ•´åˆShiroæ ‡ç­¾"></a>å­¦ä¹ ç¬”è®° : Thymeleafæ•´åˆShiroæ ‡ç­¾</h2><p><em>è¯¦æƒ…è¯·å‚è€ƒ : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹</a></em></p><h3 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h3><p><em>æ·»åŠ ThymeleafåŠå…¶å¯¹Shiroæ‰©å±•çš„ä¾èµ–</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Thymeleaf --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Thymeleafå¯¹shiroçš„æ‰©å±• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.theborakompanioni<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-shiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><em>åœ¨Shiroçš„é…ç½®ç±»ä¸­é…ç½®<code>ShiroDialect</code></em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: é…ç½®ShiroDialect, ç”¨äºthymeleafå’Œshiroæ ‡ç­¾é…åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 6:37 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: at.pollux.thymeleaf.shiro.dialect.ShiroDialect</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroDialect <span class="title">shiroDialect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ShiroDialect();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ·»åŠ HTMLå‘½ä»¤ç©ºé—´"><a href="#æ·»åŠ HTMLå‘½ä»¤ç©ºé—´" class="headerlink" title="æ·»åŠ HTMLå‘½ä»¤ç©ºé—´"></a>æ·»åŠ HTMLå‘½ä»¤ç©ºé—´</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh_CN"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span> <span class="attr">xmlns:shiro</span>=<span class="string">"http://www.pollix.at/thymeleaf/shiro"</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Thymealf-Shiroæ ‡ç­¾"><a href="#Thymealf-Shiroæ ‡ç­¾" class="headerlink" title="Thymealf+Shiroæ ‡ç­¾"></a>Thymealf+Shiroæ ‡ç­¾</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- guestæ ‡ç­¾:ç”¨æˆ·æ²¡æœ‰èº«ä»½éªŒè¯æ—¶æ˜¾ç¤ºç›¸åº”ä¿¡æ¯,å³æ¸¸å®¢è®¿é—®ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:guest</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:guest</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- useræ ‡ç­¾:ç”¨æˆ·å·²ç»èº«ä»½éªŒè¯/è®°ä½æˆ‘ç™»å½•åæ˜¾ç¤ºç›¸åº”çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:user</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:user</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- authenticatedæ ‡ç­¾:ç”¨æˆ·å·²ç»èº«ä»½éªŒè¯é€šè¿‡,å³Subject.loginç™»å½•æˆåŠŸ,ä¸æ˜¯è®°ä½æˆ‘ç™»å½•çš„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:authenticated</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:authenticated</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- notAuthenticatedæ ‡ç­¾:ç”¨æˆ·å·²ç»èº«ä»½éªŒè¯é€šè¿‡,å³æ²¡æœ‰è°ƒç”¨Subject.loginè¿›è¡Œç™»å½•,åŒ…æ‹¬è®°ä½æˆ‘,è‡ªåŠ¨ç™»å½•çš„ä¹Ÿå±äºæœªè¿›è¡Œèº«ä»½éªŒè¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:notAuthenticated</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:notAuthenticated</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- principalæ ‡ç­¾:ç›¸å½“äº((User)Subject.getPrincipals()).getUsername()  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:</span> <span class="attr">principal</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:principal</span> <span class="attr">property</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line">ã€€ã€€</span><br><span class="line"><span class="comment">&lt;!-- lacksPermissionæ ‡ç­¾:å¦‚æœå½“å‰Subjectæ²¡æœ‰æƒé™å°†æ˜¾ç¤ºbodyä½“å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:lacksPermission</span> <span class="attr">name</span>=<span class="string">"org:create"</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:lacksPermission</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- hasRoleæ ‡ç­¾:å¦‚æœå½“å‰Subjectæœ‰è§’è‰²å°†æ˜¾ç¤ºbodyä½“å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:hasRole</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:hasRole</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- hasAnyRolesæ ‡ç­¾:å¦‚æœå½“å‰Subjectæœ‰ä»»æ„ä¸€ä¸ªè§’è‰²ï¼ˆæˆ–çš„å…³ç³»ï¼‰å°†æ˜¾ç¤ºbodyä½“å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:hasAnyRoles</span> <span class="attr">name</span>=<span class="string">"admin,user"</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:hasAnyRoles</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- lacksRoleæ ‡ç­¾:å¦‚æœå½“å‰Subjectæ²¡æœ‰è§’è‰²å°†æ˜¾ç¤ºbodyä½“å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:lacksRole</span> <span class="attr">name</span>=<span class="string">"abc"</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:lacksRole</span>&gt;</span>ã€€</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- hasPermissionæ ‡ç­¾:å¦‚æœå½“å‰Subjectæœ‰æƒé™å°†æ˜¾ç¤ºbodyä½“å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"user:create"</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br></pre></td></tr></table></figure><p><em>ğŸ™‚å‚è€ƒ(éå¸¸æ„Ÿè°¢) : <a href="https://www.jianshu.com/p/c8b53445cbb0" target="_blank" rel="noopener">https://www.jianshu.com/p/c8b53445cbb0</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Thymeleafæ•´åˆShiroæ ‡ç­¾&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Thymeleafæ•´åˆShiroæ ‡ç­¾&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Thymeleafæ•´åˆShiroæ ‡ç­¾&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Thymelea
      
    
    </summary>
    
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
      <category term="Thymeleaf" scheme="http://yoursite.com/tags/Thymeleaf/"/>
    
  </entry>
  
  <entry>
    <title>SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®</title>
    <link href="http://yoursite.com/2019/08/06/SpringBoot%E9%9B%86%E6%88%90Shiro%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2019/08/06/SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®/</id>
    <published>2019-08-06T07:13:51.000Z</published>
    <updated>2019-08-11T02:18:00.121Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®"><a href="#å­¦ä¹ ç¬”è®°-SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®" class="headerlink" title="å­¦ä¹ ç¬”è®° : SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®"></a>å­¦ä¹ ç¬”è®° : SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®</h2><p><em>Springé›†æˆShiroä¸€èˆ¬é€šè¿‡çš„ xml é…ç½®,æ¯”è¾ƒç¹ç,è€ŒSpring Booté›†æˆShiroç›¸å¯¹ç®€å•,åªéœ€è¦é…ç½®ä¸¤ä¸ªç±» : ShiroConfigurationç±»åŠç»§æ‰¿AuthorizingRealmçš„Realmç±»,å¦‚ä¸‹æ‰€ç¤º :</em></p><ol><li><em><code>ShiroConfig</code> : é¡¾åæ€ä¹‰å°±æ˜¯å¯¹Shiroçš„ä¸€äº›é…ç½®,ç›¸å¯¹äºSpringä¸­çš„xmlé…ç½®. åŒ…æ‹¬ : åŒ…æ‹¬è¿‡æ»¤å™¨(ShiroFilter)ã€å®‰å…¨äº‹åŠ¡ç®¡ç†å™¨(SecurityManager)ã€å¯†ç å‡­è¯åŒ¹é…å™¨(CredentialsMatcher)ã€ç¼“å†²ç®¡ç†å™¨(EhCacheManager)ã€aopæ³¨è§£æ”¯æŒ(authorizationAttributeSourceAdvisor)ã€ç­‰ç­‰</em></li><li><em><code>CustomRealm</code> : è‡ªå®šä¹‰çš„CustomRealmç»§æ‰¿è‡ªAuthorizingRealm,é‡å†™äº†çˆ¶ç±»ä¸­çš„doGetAuthorizationInfo(æˆæƒè®¤è¯)ã€doGetAuthenticationInfo(ç™»é™†è®¤è¯)è¿™ä¸¤ä¸ªæ–¹æ³•</em></li></ol><h3 id="åŸºæœ¬çš„é…ç½®"><a href="#åŸºæœ¬çš„é…ç½®" class="headerlink" title="åŸºæœ¬çš„é…ç½®"></a>åŸºæœ¬çš„é…ç½®</h3><p><em>ä»¥ä¸‹ç¤ºä¾‹ä»£ç æ‘˜è‡ª : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•çš„SpringBooté›†æˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹</a></em></p><h4 id="Shiroçš„åŸºæœ¬é…ç½®ä¿¡æ¯"><a href="#Shiroçš„åŸºæœ¬é…ç½®ä¿¡æ¯" class="headerlink" title="Shiroçš„åŸºæœ¬é…ç½®ä¿¡æ¯"></a>Shiroçš„åŸºæœ¬é…ç½®ä¿¡æ¯</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.ss.shiro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> at.pollux.thymeleaf.shiro.dialect.ShiroDialect;</span><br><span class="line"><span class="keyword">import</span> net.sf.ehcache.CacheManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.credential.HashedCredentialsMatcher;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.cache.ehcache.EhCacheManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot-shiro</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: Shiroé…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/5/2019-7:41 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: é…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: securityManager</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 7:59 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.spring.web.ShiroFilterFactoryBean</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">shiroFilterFactoryBean</span><span class="params">(SecurityManager securityManager)</span> </span>&#123;</span><br><span class="line">        ShiroFilterFactoryBean shiroFilterFactoryBean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line">        <span class="comment">//è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        shiroFilterFactoryBean.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//è®¾ç½®è‡ªå®šä¹‰è¿‡æ»¤å™¨</span></span><br><span class="line">        shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap());</span><br><span class="line">        <span class="comment">//è®¾ç½®ç”¨æˆ·ç™»å½•é¡µ,é»˜è®¤: http://localhost:8080/login.jsp</span></span><br><span class="line">        shiroFilterFactoryBean.setLoginUrl(<span class="string">"/loginView"</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®ç”¨æˆ·æœªæˆæƒæ“ä½œæç¤ºé¡µ</span></span><br><span class="line">        shiroFilterFactoryBean.setUnauthorizedUrl(<span class="string">"/unauthorizedView"</span>);</span><br><span class="line">        <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: åˆå§‹åŒ–è‡ªå®šä¹‰Realm</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: credentialsMatcher</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 7:50 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: pers.huangyuhui.ss.shiro.UserRealm</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserRealm <span class="title">userRealm</span><span class="params">(HashedCredentialsMatcher hashedCredentialsMatcher)</span> </span>&#123;</span><br><span class="line">        UserRealm userRealm = <span class="keyword">new</span> UserRealm();</span><br><span class="line">        <span class="comment">//è®¾ç½®å‡­è¯åŒ¹é…å™¨</span></span><br><span class="line">        userRealm.setCredentialsMatcher(hashedCredentialsMatcher);</span><br><span class="line">        <span class="keyword">return</span> userRealm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: å®‰å…¨äº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: credentialsMatcher</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 7:53 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.web.mgt.DefaultWebSecurityManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SecurityManager <span class="title">securityManager</span><span class="params">(UserRealm userRealm, EhCacheManager ehCacheManager)</span> </span>&#123;</span><br><span class="line">        DefaultWebSecurityManager defaultWebSecurityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line">        <span class="comment">//å…³è”è‡ªå®šä¹‰realm</span></span><br><span class="line">        defaultWebSecurityManager.setRealm(userRealm);</span><br><span class="line">        <span class="comment">//å…³è”ç¼“å­˜ç®¡ç†</span></span><br><span class="line">        defaultWebSecurityManager.setCacheManager(ehCacheManager);</span><br><span class="line">        <span class="keyword">return</span> defaultWebSecurityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: å“ˆå¸Œå¯†ç åŒ¹é…å™¨:æ¯”è¾ƒç”¨æˆ·ç™»å½•æ—¶è¾“å…¥çš„å¯†ç ,è·Ÿæ•°æ®åº“å¯†ç é…åˆç›å€¼saltè§£å¯†åæ˜¯å¦ä¸€è‡´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 9:01 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.authc.credential.HashedCredentialsMatcher</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HashedCredentialsMatcher <span class="title">hashedCredentialsMatcher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HashedCredentialsMatcher hashedCredentialsMatcher = <span class="keyword">new</span> HashedCredentialsMatcher();</span><br><span class="line">        hashedCredentialsMatcher.setHashAlgorithmName(<span class="string">"md5"</span>); <span class="comment">//æ•£åˆ—ç®—æ³•</span></span><br><span class="line">        hashedCredentialsMatcher.setHashIterations(<span class="number">3</span>); <span class="comment">//æ•£åˆ—çš„æ¬¡æ•°</span></span><br><span class="line">        hashedCredentialsMatcher.setStoredCredentialsHexEncoded(<span class="keyword">true</span>); <span class="comment">//é»˜è®¤æ˜¯true:Hexç¼–ç .false:Base64ç¼–ç </span></span><br><span class="line">        <span class="keyword">return</span> hashedCredentialsMatcher;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: è®¾ç½®ç¼“å­˜ç®¡ç†, ç¼“å­˜ç”¨æˆ·åŠå…¶æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-07 7:51 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.cache.ehcache.EhCacheManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EhCacheManager <span class="title">ehCacheManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ³¨æ„:myEhcacheå¯¹åº”ehcache-shiro.xmlä¸­çš„'&lt;ehcache name="myEhcache"&gt;'</span></span><br><span class="line">        CacheManager cacheManager = CacheManager.getCacheManager(<span class="string">"myEhcache"</span>);</span><br><span class="line">        <span class="keyword">if</span> (cacheManager == <span class="keyword">null</span>) &#123;</span><br><span class="line">            cacheManager = CacheManager.create();</span><br><span class="line">        &#125;</span><br><span class="line">        EhCacheManager ehCacheManager = <span class="keyword">new</span> EhCacheManager();</span><br><span class="line">        ehCacheManager.setCacheManager(cacheManager);</span><br><span class="line">        <span class="keyword">return</span> ehCacheManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: è®¾ç½®èµ„æºçš„æƒé™æ§åˆ¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 8:31 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.util.Map</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Map&lt;String, String&gt; <span class="title">filterChainDefinitionMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String, String&gt; filterMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">//éœ€èº«ä»½è®¤è¯</span></span><br><span class="line">        filterMap.put(<span class="string">"/stuListView"</span>, <span class="string">"authc"</span>);</span><br><span class="line">        filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"authc"</span>);</span><br><span class="line">        <span class="comment">//æ— éœ€èº«ä»½è®¤è¯:é˜²æ­¢éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯æ“ä½œè¢«'filterMap.put("/**", "authc")'æ‹¦æˆª</span></span><br><span class="line">        filterMap.put(<span class="string">"/login"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        <span class="comment">//æ³¨é”€è¿‡æ»¤å™¨:å…¶å…·ä½“çš„æ³¨é”€é€»è¾‘ä»£ç Shiroå·²ç»æ›¿æˆ‘ä»¬å®ç°äº†å“Ÿ</span></span><br><span class="line">        filterMap.put(<span class="string">"/logout"</span>, <span class="string">"logout"</span>);</span><br><span class="line">        <span class="comment">//è§’è‰²è¿‡æ»¤:éœ€è¦ç”¨æˆ·æ‹¥æœ‰'admin'è§’è‰²</span></span><br><span class="line">        filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"roles[admin]"</span>);</span><br><span class="line">        <span class="comment">//æƒé™è¿‡æ»¤:é™¤èº«ä»½è®¤è¯å¤–,è¿˜éœ€è¦ç”¨æˆ·æ‹¥æœ‰å¯¹stuListViewèµ„æºçš„viewæƒé™</span></span><br><span class="line">        filterMap.put(<span class="string">"/stuListView"</span>, <span class="string">"perms[stuListView:view]"</span>);</span><br><span class="line">        filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"perms[teaListView:view]"</span>);</span><br><span class="line">        <span class="comment">//æ‹¦æˆªéœ€è¦ç™»å½•(ç”¨æˆ·è®¤è¯)æ–¹å¯è®¿é—®çš„èµ„æº(ä¸€èˆ¬å°†/**æ”¾åœ¨æœ€ä¸‹è¾¹,ä¸ç„¶ä¼šå¯¼è‡´æ‰€æœ‰urléƒ½è¢«æ‹¦æˆªå“Ÿ)</span></span><br><span class="line">        filterMap.put(<span class="string">"/**"</span>, <span class="string">"authc"</span>);</span><br><span class="line">        <span class="keyword">return</span> filterMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: é…ç½®ShiroDialect, ç”¨äºthymeleafå’Œshiroæ ‡ç­¾é…åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 6:37 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: at.pollux.thymeleaf.shiro.dialect.ShiroDialect</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroDialect <span class="title">shiroDialect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ShiroDialect();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>ehcache-shiro.xml : EhCacheç¼“å­˜æ¡†æ¶çš„é…ç½®æ–‡ä»¶</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">"http://ehcache.org/ehcache.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">updateCheck</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">name</span>=<span class="string">"myEhcache"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">"java.io.tmpdir"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æˆæƒä¿¡æ¯ç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"authorizationCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- èº«ä»½ä¿¡æ¯ç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"authenticationCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Sessionç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"activeSessionCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜åŠå°æ—¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"halfHour"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜ä¸€å°æ—¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"hour"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"3600"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"3600"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜ä¸€å¤© --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"oneDay"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"86400"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"86400"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">         name: ç¼“å­˜åç§°ã€‚</span></span><br><span class="line"><span class="comment">         maxElementsInMemory: ç¼“å­˜æœ€å¤§ä¸ªæ•°</span></span><br><span class="line"><span class="comment">         eternal: å¯¹è±¡æ˜¯å¦æ°¸ä¹…æœ‰æ•ˆ,ä¸€ä½†è®¾ç½®äº†,timeoutå°†ä¸èµ·ä½œç”¨</span></span><br><span class="line"><span class="comment">         timeToIdleSeconds: è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰çš„å…è®¸é—²ç½®æ—¶é—´(å•ä½ï¼šç§’). ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨,å¯é€‰å±æ€§,é»˜è®¤å€¼æ˜¯0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">         timeToLiveSeconds: è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰å…è®¸å­˜æ´»æ—¶é—´(å•ä½ï¼šç§’). æœ€å¤§æ—¶é—´ä»‹äºåˆ›å»ºæ—¶é—´å’Œå¤±æ•ˆæ—¶é—´ä¹‹é—´. ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨,é»˜è®¤æ˜¯0,ä¹Ÿå°±æ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">         overflowToDisk: å½“å†…å­˜ä¸­å¯¹è±¡æ•°é‡è¾¾åˆ°maxElementsInMemoryæ—¶,Ehcacheå°†ä¼šå¯¹è±¡å†™åˆ°ç£ç›˜ä¸­</span></span><br><span class="line"><span class="comment">         diskSpoolBufferSizeMB: è¿™ä¸ªå‚æ•°è®¾ç½®DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°,é»˜è®¤æ˜¯30MB. æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">         maxElementsOnDisk: ç¡¬ç›˜æœ€å¤§ç¼“å­˜ä¸ªæ•°</span></span><br><span class="line"><span class="comment">         diskPersistent: æ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ® Whether the disk store persists between restarts of the Virtual Machine. The default value is false.</span></span><br><span class="line"><span class="comment">         diskExpiryThreadIntervalSeconds: ç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”,é»˜è®¤æ˜¯120ç§’</span></span><br><span class="line"><span class="comment">         memoryStoreEvictionPolicy: å½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶,Ehcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜. é»˜è®¤ç­–ç•¥æ˜¯LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨). ä½ å¯ä»¥è®¾ç½®ä¸ºFIFO(å…ˆè¿›å…ˆå‡º)æˆ–æ˜¯LFU(è¾ƒå°‘ä½¿ç”¨)</span></span><br><span class="line"><span class="comment">         clearOnFlush: å†…å­˜æ•°é‡æœ€å¤§æ—¶æ˜¯å¦æ¸…é™¤</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span> <span class="attr">name</span>=<span class="string">"defaultCache"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToIdleSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToLiveSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskPersistent</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">"120"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">"LRU"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="è‡ªå®šä¹‰Realm"><a href="#è‡ªå®šä¹‰Realm" class="headerlink" title="è‡ªå®šä¹‰Realm"></a>è‡ªå®šä¹‰Realm</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.ss.shiro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.ByteSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ss.bean.Permission;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ss.bean.Role;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ss.bean.User;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ss.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot-shiro</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: é…ç½®è‡ªå®šä¹‰Realm</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/5/2019-7:45 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: æˆæƒè®¤è¯:æä¾›ç”¨æˆ·ä¿¡æ¯,è¿”å›æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: principalCollection</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-06 6:02 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.authz.AuthorizationInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">"------------&gt; æˆæƒè®¤è¯ ------------&gt;"</span>);</span><br><span class="line">        <span class="comment">//è·å–å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        User u = (User) currentUser.getPrincipal();</span><br><span class="line">        <span class="comment">//ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è§’è‰²åŠæƒé™ä¿¡æ¯</span></span><br><span class="line">        User user = userService.findByName(u.getUsername());</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            SimpleAuthorizationInfo info = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">            <span class="comment">//ç”¨äºå­˜å‚¨ç”¨æˆ·çš„è§’è‰²åŠæƒé™ä¿¡æ¯</span></span><br><span class="line">            Collection&lt;String&gt; rolesCollection = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">            Collection&lt;String&gt; permissionsCollection = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">            Set&lt;Role&gt; roles = user.getRoles(); <span class="comment">//è·å–ç”¨æˆ·Roleçš„Seté›†åˆ</span></span><br><span class="line">            <span class="comment">//é€šè¿‡éå†ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è§’è‰²,æ¥è·å–å…¶å¯¹åº”çš„æƒé™ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">for</span> (Role role : roles) &#123;</span><br><span class="line">                rolesCollection.add(role.getName()); <span class="comment">//å°†æ¯ä¸€ä¸ªroleçš„nameå°è£…åˆ°é›†åˆä¸­</span></span><br><span class="line">                Set&lt;Permission&gt; permissionSet = role.getPermissions(); <span class="comment">//è·å–æ¯ä¸€ä¸ªroleæ‰€å¯¹åº”çš„permissionçš„seté›†åˆ</span></span><br><span class="line">                <span class="comment">//éå†ç”¨æˆ·æ‰€æ‹¥æœ‰çš„æƒé™ä¿¡æ¯</span></span><br><span class="line">                <span class="keyword">for</span> (Permission permission : permissionSet) &#123;</span><br><span class="line">                    permissionsCollection.add(permission.getName()); <span class="comment">//å°†æ¯ä¸€ä¸ªpermissionçš„nameå°è£…åˆ°é›†åˆä¸­</span></span><br><span class="line">                &#125;</span><br><span class="line">                info.addStringPermissions(permissionsCollection); <span class="comment">//ä¸ºç”¨æˆ·æˆæƒ</span></span><br><span class="line">            &#125;</span><br><span class="line">            info.addRoles(rolesCollection); <span class="comment">//ä¸ºç”¨æˆ·æˆäºˆè§’è‰²</span></span><br><span class="line">            System.out.println(<span class="string">"[roles]------------&gt;"</span> + rolesCollection.toString());</span><br><span class="line">            System.out.println(<span class="string">"[permissions]------------&gt;"</span> + permissionsCollection.toString());</span><br><span class="line">            <span class="keyword">return</span> info;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: ç™»å½•è®¤è¯:æä¾›å¸æˆ·ä¿¡æ¯,è¿”å›è®¤è¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: authenticationToken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-06 6:12 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.authc.AuthenticationInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">"------------&gt; å¼€å§‹è®¤è¯ ------------&gt;"</span>);</span><br><span class="line">        UsernamePasswordToken token = (UsernamePasswordToken) authenticationToken;</span><br><span class="line">        <span class="comment">//ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        User user = userService.findByName(token.getUsername());</span><br><span class="line">        <span class="comment">//éªŒè¯è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>; <span class="comment">//it's will be throw a UnknownAccountException</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//éªŒè¯å¯†ç ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SimpleAuthenticationInfo(user, user.getPassword(), ByteSource.Util.bytes(user.getUsername()), <span class="keyword">this</span>.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”
      
    
    </summary>
    
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹</title>
    <link href="http://yoursite.com/2019/08/04/%E4%B8%80%E4%B8%AA%E5%9F%BA%E7%A1%80%E7%9A%84Web%E6%95%B4%E5%90%88Shiro%E6%A1%88%E4%BE%8B/"/>
    <id>http://yoursite.com/2019/08/04/ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹/</id>
    <published>2019-08-04T05:15:15.000Z</published>
    <updated>2019-08-12T01:32:47.244Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹"><a href="#å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹" class="headerlink" title="å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹"></a>å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹</h2><p><em>æ€»ç»“å‰é¢<code>Shiro</code>çš„åŸºæœ¬å­¦ä¹ ç¬”è®°,ç»§è€Œå°è¯•æ•´åˆweb,æ¥å†™ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹( Java web ),ç”¨æˆ·æƒé™åˆ’åˆ†å¦‚ä¸‹,è¯¥æ¡ˆä¾‹çš„ä»£ç ä»“åº“ : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/basic%20web%20project%20with%20shiro" target="_blank" rel="noopener">https://github.com/YUbuntu0109/Shiro-learning/tree/master/basic%20web%20project%20with%20shiro</a></em></p><ul><li>ç®¡ç†å‘˜(admin) : å…·æœ‰æ“æ§éƒ¨é—¨/å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µçš„æ‰€æœ‰æƒé™</li><li>ç”¨æˆ·(yuhui) : ä»…å…·æœ‰éƒ¨é—¨ä¿¡æ¯çš„<code>view</code>æƒé™</li></ul><h3 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h3><ol><li><p><em>baseWebShiro\pom.xml : Mavenä¾èµ–</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>pers.huangyuhui<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>baseWebShiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>a simple web program for Shiro<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Serlvet --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Shiro core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Shiro web --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- logging --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\resources\shiro.ini : ç”¨æˆ·èº«ä»½åŠæƒé™ä¿¡æ¯</em></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[main]</span></span><br><span class="line"><span class="comment"># é»˜è®¤ç™»å½•é¡µä¸º:/login.jsp</span></span><br><span class="line"><span class="attr">authc.loginUrl</span> = /login</span><br><span class="line"><span class="comment"># ç”¨æˆ·æ²¡æœ‰è®¿é—®æŒ‡å®šèµ„æºçš„è§’è‰²æ—¶æ‰€è·³è½¬çš„é¡µé¢</span></span><br><span class="line"><span class="attr">roles.unauthorizedUrl</span> = /nopermission.jsp</span><br><span class="line"><span class="comment"># ç”¨æˆ·æ²¡æœ‰è®¿é—®æŒ‡å®šèµ„æºçš„æƒé™æ—¶æ‰€è·³è½¬çš„é¡µé¢</span></span><br><span class="line"><span class="attr">perms.unauthorizedUrl</span> = /nopermission.jsp</span><br><span class="line"><span class="comment"># ç™»å‡ºä¹‹åé‡å®šå‘çš„é¡µé¢</span></span><br><span class="line"><span class="attr">logout.redirectUrl</span> = /login</span><br><span class="line"></span><br><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="attr">admin</span> = <span class="number">666</span>,admin</span><br><span class="line"><span class="attr">yuhui</span> = <span class="number">777</span>,deptManager</span><br><span class="line"></span><br><span class="line"><span class="section">[roles ]</span></span><br><span class="line"><span class="attr">admin</span> = employee:*,department:*</span><br><span class="line"><span class="attr">deptManager</span> = department:view</span><br><span class="line"></span><br><span class="line"><span class="section">[urls]</span></span><br><span class="line"><span class="comment"># é™æ€èµ„æºå¯ä»¥åŒ¿åè®¿é—®</span></span><br><span class="line">/static/** = anon</span><br><span class="line"><span class="comment"># è®¿é—®å‘˜å·¥åˆ—è¡¨éœ€è¦èº«ä»½è®¤è¯åŠéœ€è¦ç”¨æˆ·æ‹¥æœ‰'admin'è§’è‰²</span></span><br><span class="line">/employee = authc,roles[admin]</span><br><span class="line"><span class="comment"># è®¿é—®éƒ¨é—¨åˆ—è¡¨éœ€è¦èº«ä»½è®¤è¯åŠéœ€è¦ç”¨æˆ·æ‹¥æœ‰'department:view'çš„æƒé™</span></span><br><span class="line">/department = authc,perms["department:view"]</span><br><span class="line"><span class="comment"># å½“è¯·æ±‚loginOutæ—¶,ä¼šè¢«logoutæ•è·å¹¶æ¸…é™¤session</span></span><br><span class="line">/logout = logout</span><br><span class="line"><span class="comment"># æ‰€æœ‰çš„è¯·æ±‚éƒ½éœ€è¦èº«ä»½è®¤è¯</span></span><br><span class="line">/** = authc</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\WEB-INF\web.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       Shiro 1.2å¼•å…¥äº†Environmnet/WebEnvironmentçš„æ¦‚å¿µ,æ—¢ç”±å®ƒä»¬æ¥å£æä¾›ç›¸åº”çš„SecurityManageråŠå…¶ç›¸åº”çš„ä¾èµ–.</span></span><br><span class="line"><span class="comment">       ShiroFilterä¼šè‡ªåŠ¨æ‰¾åˆ°Environment,ç„¶åè·å–ç›¸åº”çš„ä¾èµ–.</span></span><br><span class="line"><span class="comment">       åº•å±‚å®ç°:è¿”å›åå°„åˆ›å»ºshiroEnvironmentClasså¯¹è±¡,è°ƒç”¨å…¶initæ–¹æ³•,æ—¢é€šè¿‡shiroEnvironmnetClassä¸­çš„initæ–¹æ³•</span></span><br><span class="line"><span class="comment">       åˆ›å»ºSecurityManagerå®ä¾‹,å¹¶å°†å…¶ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒ</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ShiroFilterç¯å¢ƒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>shiroEnvironmentClass<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>org.apache.shiro.web.env.IniWebEnvironment<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>shiroCConfigLocations<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:shiro.ini<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiroç›‘å¬å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.apache.shiro.web.env.EnvironmentLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiroæ‹¦æˆªå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>shiroFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.apache.shiro.web.servlet.ShiroFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>shiroFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="å‰ç«¯é¡µé¢"><a href="#å‰ç«¯é¡µé¢" class="headerlink" title="å‰ç«¯é¡µé¢"></a>å‰ç«¯é¡µé¢</h3><ol><li><p><em>baseWebShiro\src\main\webapp\static\js\jquery.js : å˜¿å˜¿,ä»£ç é‡ä½ æ‡‚å¾—,è‡ªè¡Œä¸‹è½½å§~</em></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> * jQuery JavaScript Library v1.7.1</span></span><br><span class="line"><span class="comment"> * http://jquery.com/</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Copyright 2011, John Resig</span></span><br><span class="line"><span class="comment"> * Dual licensed under the MIT or GPL Version 2 licenses.</span></span><br><span class="line"><span class="comment"> * http://jquery.org/license</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Includes Sizzle.js</span></span><br><span class="line"><span class="comment"> * http://sizzlejs.com/</span></span><br><span class="line"><span class="comment"> * Copyright 2011, The Dojo Foundation</span></span><br><span class="line"><span class="comment"> * Released under the MIT, BSD, and GPL Licenses.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Date: Mon Nov 21 21:11:03 2011 -0500</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window, undefined</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use the correct document accordingly with window argument (sandbox)</span></span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">document</span> = <span class="built_in">window</span>.document,</span><br><span class="line">        navigator = <span class="built_in">window</span>.navigator,</span><br><span class="line">        location = <span class="built_in">window</span>.location;</span><br><span class="line">    <span class="keyword">var</span> jQuery = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\static\js\main.js : åˆ‡æ¢ç”¨æˆ·ä¸»é¡µä¸­çš„ä¿¡æ¯ç®¡ç†é¡µé¢</em></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">".changePage"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">"#rightMain"</span>).prop(<span class="string">"src"</span>, $(<span class="keyword">this</span>).data(<span class="string">"url"</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\static\style\main_css.css : ç”¨æˆ·ä¸»é¡µæ ·å¼</em></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.top</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">99%</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.userinfo</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center_left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10%</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> black;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center_content</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">89%</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> black;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\WEB-INF\views\login.jsp : ç”¨æˆ·ç™»å½•é¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        h3 &#123;</span></span><br><span class="line"><span class="undefined">            text-align: center;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#main</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 600px;</span></span><br><span class="line"><span class="undefined">            margin-left: 480px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#main</span> <span class="selector-tag">tr</span> &#123;</span></span><br><span class="line"><span class="undefined">            height: 40px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#main</span> <span class="selector-tag">tr</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 20px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#main</span> <span class="selector-tag">tr</span> <span class="selector-tag">td</span> <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        span &#123;</span></span><br><span class="line"><span class="undefined">            font-size: 13px;</span></span><br><span class="line"><span class="undefined">            color: red;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.buttom</span> &#123;</span></span><br><span class="line"><span class="undefined">            text-align: center;</span></span><br><span class="line"><span class="undefined">            padding-top: 25px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.buttom</span> <span class="selector-class">.login</span> &#123;</span></span><br><span class="line"><span class="undefined">            margin-right: 40px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>ç”¨æˆ·ç™»å½•é¡µ<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/login"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>è´¦å·<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¯†ç <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>$&#123;errorMsg&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buttom"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"login"</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ç™»å½•"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"é‡ç½®"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\WEB-INF\views\main.jsp : ç”¨æˆ·ä¸»é¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥Shiroæ ‡ç­¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"shiro"</span> <span class="attr">uri</span>=<span class="string">"http://shiro.apache.org/tags"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>main<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/static/style/main_css.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/static/js/jquery.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/static/js/main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">"margin-left: 15px"</span>&gt;</span>Shiroæ•´åˆåŸºæœ¬web | ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"userinfo"</span>&gt;</span></span><br><span class="line">        å½“å‰ç™»å½•ç”¨æˆ· : <span class="tag">&lt;<span class="name">shiro:principal</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/logout"</span>&gt;</span>æ³¨é”€<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center_left"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"changePage"</span> <span class="attr">data-url</span>=<span class="string">"/employee"</span>&gt;</span>å‘˜å·¥ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"changePage"</span> <span class="attr">data-url</span>=<span class="string">"/department"</span>&gt;</span>éƒ¨é—¨ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center_content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">name</span>=<span class="string">"right"</span> <span class="attr">id</span>=<span class="string">"rightMain"</span> <span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/welcome.jsp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">frameborder</span>=<span class="string">"no"</span> <span class="attr">scrolling</span>=<span class="string">"auto"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">allowtransparency</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\welcome.jsp : ç”¨æˆ·æ¬¢è¿é¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç”¨æˆ·é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span>ï¼ˆã¥ï¿£3ï¿£ï¼‰ã¥â•­â¤ï½ ç”¨æˆ·æ¬¢è¿é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\WEB-INF\views\department\list.jsp : éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥Shiroæ ‡ç­¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"shiro"</span> <span class="attr">uri</span>=<span class="string">"http://shiro.apache.org/tags"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>éƒ¨é—¨åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>éƒ¨é—¨åˆ—è¡¨<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å½“ç”¨æˆ·å…·æœ‰departmentæ¨¡å—çš„â€˜addâ€™æƒé™æ—¶æ‰æ˜¾ç¤ºæ­¤æŒ‰é’® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"department:add"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/department?cmd=input"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>éƒ¨é—¨ç¼–å·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>éƒ¨é—¨åç§°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>éƒ¨é—¨äººæ•°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>åˆ›å»ºæ—¶é—´<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>è´Ÿè´£äºº<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>ç ”å‘éƒ¨<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>100<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>2019-8-3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>yubuntu0109<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å½“ç”¨æˆ·å…·æœ‰departmentæ¨¡å—çš„â€˜editâ€™æƒé™æ—¶æ‰æ˜¾ç¤ºæ­¤æŒ‰é’® --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"department:edit"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/department?cmd=input&amp;id=1"</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å½“ç”¨æˆ·å…·æœ‰departmentæ¨¡å—çš„â€˜delâ€™æƒé™æ—¶æ‰æ˜¾ç¤ºæ­¤æŒ‰é’® --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"department:del"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/department?cmd=delete"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\WEB-INF\views\employee\list.jsp : å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/employee?cmd=input"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>ç¼–å·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>é‚®ç®±<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>yubuntu0109<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>3083968068@qq.com<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>21<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/employee?cmd=input&amp;id=1"</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/employee?cmd=delete"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\nopermission.jsp : æ— è§’è‰²/æƒé™æç¤ºé¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ— è§’è‰²/æƒé™æç¤ºç•Œé¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span>(à²¥_à²¥) æŠ±æ­‰,ä½ æ— æƒé™æ“ä½œè¯¥æ¨¡å— !<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="åç«¯æ§åˆ¶å™¨"><a href="#åç«¯æ§åˆ¶å™¨" class="headerlink" title="åç«¯æ§åˆ¶å™¨"></a>åç«¯æ§åˆ¶å™¨</h3><ol><li><p><em>baseWebShiro\src\main\java\pers\huangyuhui\shiro\web\LoginServlet.java : ç”¨æˆ·ç™»å½•æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.shiro.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"loginServlet"</span>, urlPatterns = <span class="string">"/login"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœç™»å½•å¤±è´¥,åˆ™ä»requestä¸­è·å–è®¤è¯å¼‚å¸¸ä¿¡æ¯,shiroå¼‚å¸¸ç±»çš„å…¨é™å®šåä¸º:shiroLoginFailure</span></span><br><span class="line">        String exceptionClassName = (String) req.getAttribute(<span class="string">"shiroLoginFailure"</span>);</span><br><span class="line">        <span class="comment">//æ ¹æ®Shiroè¿”å›çš„å¼‚å¸¸ç±»,æŠ›å‡ºæŒ‡å®šçš„å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span> (exceptionClassName != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (UnknownAccountException.class.getName().equals(exceptionClassName)) &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"errorMsg"</span>, <span class="string">"è´¦å·ä¸å­˜åœ¨ !"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (IncorrectCredentialsException.class.getName().equals(exceptionClassName)) &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"errorMsg"</span>, <span class="string">"è´¦å·/å¯†ç ä¿¡æ¯é”™è¯¯ !"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"errorMsg"</span>, <span class="string">"å…¶å®ƒå¼‚å¸¸ä¿¡æ¯ ..."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        req.getRequestDispatcher(<span class="string">"/WEB-INF/views/login.jsp"</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\java\pers\huangyuhui\shiro\web\MainAction.java : ç”¨æˆ·ä¸»é¡µé¢æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.shiro.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"mainServlet"</span>, urlPatterns = <span class="string">"/main"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainAction</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        req.getRequestDispatcher(<span class="string">"/WEB-INF/views/main.jsp"</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\java\pers\huangyuhui\shiro\web\DepartmentServlet.java : éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µæ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.shiro.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"departmentServlet"</span>, urlPatterns = <span class="string">"/department"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String cmd = req.getParameter(<span class="string">"cmd"</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"input"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (req.getParameter(<span class="string">"id"</span>) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"name"</span>, <span class="string">"Shiroç ”å‘éƒ¨"</span>);</span><br><span class="line">                req.setAttribute(<span class="string">"cmdType"</span>, <span class="string">"ç¼–è¾‘"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"cmdType"</span>, <span class="string">"æ–°å¢"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            req.getRequestDispatcher(<span class="string">"/WEB-INF/views/department/input.jsp"</span>).forward(req, resp);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"savaOrUpdate"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="comment">// Â·Â·Â·</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"delete"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="comment">// Â·Â·Â·</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            req.getRequestDispatcher(<span class="string">"/WEB-INF/views/department/list.jsp"</span>).forward(req, resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\java\pers\huangyuhui\shiro\web\EmployeeServlet.java : å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µæ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.shiro.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"employeeServlet"</span>, urlPatterns = <span class="string">"/employee"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String cmd = req.getParameter(<span class="string">"cmd"</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"input"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (req.getParameter(<span class="string">"id"</span>) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"name"</span>, <span class="string">"yubuntu0109"</span>);</span><br><span class="line">                req.setAttribute(<span class="string">"age"</span>, <span class="string">"21"</span>);</span><br><span class="line">                req.setAttribute(<span class="string">"email"</span>, <span class="string">"3083968068@qq.com"</span>);</span><br><span class="line">                req.setAttribute(<span class="string">"cmdType"</span>, <span class="string">"ç¼–è¾‘"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"cmdType"</span>, <span class="string">"æ–°å¢"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            req.getRequestDispatcher(<span class="string">"/WEB-INF/views/employee/input.jsp"</span>).forward(req, resp);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"savaOrUpdate"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"delete"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            req.getRequestDispatcher(<span class="string">"/WEB-INF/views/employee/list.jsp"</span>).forward(req, resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="æ¡ˆä¾‹æˆªå±"><a href="#æ¡ˆä¾‹æˆªå±" class="headerlink" title="æ¡ˆä¾‹æˆªå±"></a>æ¡ˆä¾‹æˆªå±</h3><p><em>ç”¨æˆ·ç™»å½•é¡µé¢ :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹/Shiroæ•´åˆweb-ç”¨æˆ·ç™»å½•é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç”¨æˆ·ä¸»é¡µé¢ :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹/Shiroæ•´åˆweb-ç”¨æˆ·ä¸»é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç®¡ç†å‘˜(<code>admin</code>)èº«ä»½ç™»å½• : éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µ( è¯¥ç”¨æˆ·æ‹¥æœ‰æ“æ§éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µçš„æ‰€æœ‰æƒé™ )</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹/Shiroæ•´åˆweb-admin-éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç®¡ç†å‘˜(<code>admin</code>)èº«ä»½ç™»å½• : å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µ( è¯¥ç”¨æˆ·æ‹¥æœ‰æ“æ§å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µçš„æ‰€æœ‰æƒé™ )</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹/Shiroæ•´åˆweb-admin-å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ™®é€šç”¨æˆ·(<code>yuhui</code>)èº«ä»½ç™»å½• : éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µ( è¯¥ç”¨æˆ·åªå…·æœ‰éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µçš„<code>view</code>æƒé™ )</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹/Shiroæ•´åˆweb-yuhui-éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ™®é€šç”¨æˆ·(<code>yuhui</code>)èº«ä»½ç™»å½• : å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µ( è¯¥ç”¨æˆ·å¹¶æ²¡æœ‰æ“æ§å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µçš„æƒé™ )</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹/Shiroæ•´åˆweb-yuhui-å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆShiroæ¡ˆä¾‹&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : ä¸€ä¸ªåŸºç¡€çš„Webæ•´åˆS
      
    
    </summary>
    
    
      <category term="Java web" scheme="http://yoursite.com/tags/Java-web/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>Hi Layui ~</title>
    <link href="http://yoursite.com/2019/08/04/Hi-Layui/"/>
    <id>http://yoursite.com/2019/08/04/Hi-Layui/</id>
    <published>2019-08-04T02:16:22.000Z</published>
    <updated>2019-08-04T03:40:57.889Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui"><a href="#å­¦ä¹ ç¬”è®°-æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui" class="headerlink" title="å­¦ä¹ ç¬”è®° : æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui"></a>å­¦ä¹ ç¬”è®° : æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui</h2><p><em>layui çš„å‡ºå‘ç‚¹å¾ˆç®€å• : <code>æ»¡è¶³æœåŠ¡ç«¯ç¨‹åºå‘˜çš„éœ€æ±‚</code>,å› æ­¤å¯ä»¥æ¯«ä¸ä¿ç•™åœ°è¯´,layui å¹¶éé¢å‘äºå‰ç«¯å¼€å‘è€…,æ‰€ä»¥åœ¨ç»„ç»‡å½¢å¼ä¸Šæ¯…ç„¶é‡‡ç”¨äº†å‡ å¹´å‰çš„ä»¥æµè§ˆå™¨ä¸ºå®¿ä¸»çš„ç±» AMD æ¨¡å—ç®¡ç†æ–¹å¼. å¯¹æ¯”EasyUI,Layuiçš„ä½œè€…<code>è´¤å¿ƒ</code>å†™å‡ºäº†å¦‚ä¸‹è¯„è¯­,ä¸€ç›´ç”¨EasyUIå†™å°é¡¹ç›®å‰ç«¯çš„æˆ‘çœ‹åå†…å¿ƒæ³¢æ¶›æ±¹æ¶Œ,ç‰¹ä¹ˆå¤ªç”ŸåŠ¨äº†è¶´ãƒ¾(=ï½¥Ï‰ï½¥=)o</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Layui : ä¸€ä¸ªæ˜¯é‚»å®¶å¥³å­©ï¼Œå°šå¤„èŠ³é¾„ï¼Œç®€è€Œçº¯</span><br><span class="line">EasyUI : ä¸€ä¸ªæ˜¯å½ªæ‚å¦‡å¥³ï¼Œæ˜¨æ—¥é»„èŠ±ï¼Œå¼ºè€Œä¸‘</span><br></pre></td></tr></table></figure></p><h3 id="å®˜æ–¹ç®€ä»‹"><a href="#å®˜æ–¹ç®€ä»‹" class="headerlink" title="å®˜æ–¹ç®€ä»‹"></a>å®˜æ–¹ç®€ä»‹</h3><p><em>å®˜æ–¹ç®€ä»‹ : layui(è°éŸ³:ç±»UI)æ˜¯ä¸€æ¬¾é‡‡ç”¨è‡ªèº«æ¨¡å—è§„èŒƒç¼–å†™çš„å‰ç«¯ UI æ¡†æ¶,éµå¾ªåŸç”Ÿ HTML/CSS/JS çš„ä¹¦å†™ä¸ç»„ç»‡å½¢å¼,é—¨æ§›æä½,æ‹¿æ¥å³ç”¨. å…¶å¤–åœ¨æç®€,å´åˆä¸å¤±é¥±æ»¡çš„å†…åœ¨,ä½“ç§¯è½»ç›ˆ,ç»„ä»¶ä¸°ç›ˆ,ä»æ ¸å¿ƒä»£ç åˆ° API çš„æ¯ä¸€å¤„ç»†èŠ‚éƒ½ç»è¿‡ç²¾å¿ƒé›•ç¢,éå¸¸é€‚åˆç•Œé¢çš„å¿«é€Ÿå¼€å‘. layui é¦–ä¸ªç‰ˆæœ¬å‘å¸ƒäº2016å¹´é‡‘ç§‹,å¥¹åŒºåˆ«äºé‚£äº›åŸºäº MVVM åº•å±‚çš„ UI æ¡†æ¶,å´å¹¶éé€†é“è€Œè¡Œ,è€Œæ˜¯ä¿¡å¥‰è¿”ç’å½’çœŸä¹‹é“. å‡†ç¡®åœ°è¯´,å¥¹æ›´å¤šæ˜¯ä¸ºæœåŠ¡ç«¯ç¨‹åºå‘˜é‡èº«å®šåš,ä½ æ— éœ€æ¶‰è¶³å„ç§å‰ç«¯å·¥å…·çš„å¤æ‚é…ç½®,åªéœ€é¢å¯¹æµè§ˆå™¨æœ¬èº«,è®©ä¸€åˆ‡ä½ æ‰€éœ€è¦çš„å…ƒç´ ä¸äº¤äº’,ä»è¿™é‡Œä¿¡æ‰‹æ‹ˆæ¥~</em></p><h3 id="å…¼å®¹æ€§å’Œé¢å‘åœºæ™¯"><a href="#å…¼å®¹æ€§å’Œé¢å‘åœºæ™¯" class="headerlink" title="å…¼å®¹æ€§å’Œé¢å‘åœºæ™¯"></a>å…¼å®¹æ€§å’Œé¢å‘åœºæ™¯</h3><p><em>layui å…¼å®¹äººç±»æ­£åœ¨ä½¿ç”¨çš„å…¨éƒ¨æµè§ˆå™¨(IE6/7é™¤å¤–),å¯ä½œä¸º PC ç«¯åå°ç³»ç»Ÿä¸å‰å°ç•Œé¢çš„é€Ÿæˆå¼€å‘æ–¹æ¡ˆ</em></p><h3 id="ä¸»è¦æ¨¡å—"><a href="#ä¸»è¦æ¨¡å—" class="headerlink" title="ä¸»è¦æ¨¡å—"></a>ä¸»è¦æ¨¡å—</h3><p><em>layui æä¾›äº†ä¸°å¯Œçš„å†…ç½®æ¨¡å—,ä»–ä»¬çš†å¯é€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼æŒ‰éœ€åŠ è½½,å…¶ä¸­åŒ…æ‹¬ : layerã€layDateã€layPageã€laytplã€tableã€formã€uploadã€elementã€treeã€layeditorã€rateã€carouselã€flowã€utilã€codeç­‰..</em></p><h3 id="ç¬¬ä¸€ä¸ªLayuié¡µé¢"><a href="#ç¬¬ä¸€ä¸ªLayuié¡µé¢" class="headerlink" title="ç¬¬ä¸€ä¸ªLayuié¡µé¢"></a>ç¬¬ä¸€ä¸ªLayuié¡µé¢</h3><p><em>æ¥ä¸‹æ¥é€šè¿‡Layuiçš„è¡¨å•æ¨¡å—,æ¥å¿«é€Ÿå†™åœ°ä¸€ä¸ªç®€æ´çš„ç”¨æˆ·ç™»å½•é¡µé¢ !ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../resources/layui/layui-v2.5.4/layui/layui.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../resources/layui/layui-v2.5.4/layui/css/layui.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>layuiè¡¨å•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">style</span>=<span class="string">"margin-left: 400px;padding-top: 100px;"</span> <span class="attr">class</span>=<span class="string">"layui-form"</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-form-item"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"layui-form-label"</span>&gt;</span>è¾“å…¥æ¡†<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-input-inline"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">style</span>=<span class="string">"width: 300px;"</span> <span class="attr">required</span> <span class="attr">lay-verify</span>=<span class="string">"required"</span> <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥è´¦å·"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">autocomplete</span>=<span class="string">"off"</span> <span class="attr">class</span>=<span class="string">"layui-input"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-form-item"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"layui-form-label"</span>&gt;</span>å¯†ç æ¡†<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-input-inline"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">style</span>=<span class="string">"width: 300px;"</span> <span class="attr">required</span> <span class="attr">lay-verify</span>=<span class="string">"required"</span> <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥å¯†ç "</span></span></span><br><span class="line"><span class="tag"> <span class="attr">autocomplete</span>=<span class="string">"off"</span> <span class="attr">class</span>=<span class="string">"layui-input"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-form-item"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"layui-form-label"</span>&gt;</span>å¤é€‰æ¡†<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-input-block"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"like[student]"</span> <span class="attr">title</span>=<span class="string">"å­¦ç”Ÿ"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"like[teacher]"</span> <span class="attr">title</span>=<span class="string">"æ•™å¸ˆ"</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-form-item"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-input-block"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"layui-btn"</span> <span class="attr">lay-submit</span> <span class="attr">lay-filter</span>=<span class="string">"formDemo"</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">class</span>=<span class="string">"layui-btn layui-btn-primary"</span>&gt;</span>é‡ç½®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">//Demo</span></span><br><span class="line"><span class="undefined">layui.use('form', function() &#123;</span></span><br><span class="line"><span class="undefined">var form = layui.form;</span></span><br><span class="line"><span class="undefined">//ç›‘å¬æäº¤</span></span><br><span class="line"><span class="undefined">form.on('submit(formDemo)', function(data) &#123;</span></span><br><span class="line"><span class="undefined">layer.msg(JSON.stringify(data.field));</span></span><br><span class="line"><span class="undefined">return false;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º,æ˜¯ä¸æ˜¯æ„Ÿè§‰ç¬é—´çˆ±ä¸ŠLayuiäº†å‘¢ !</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/Hi-Layui/Layui-form.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>âœ¨ Layuiå®˜æ–¹ä½¿ç”¨æ–‡æ¡£ : <a href="https://www.layui.com/doc/" target="_blank" rel="noopener">https://www.layui.com/doc/</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui&lt;/h2&gt;&lt;p&gt;&lt;em&gt;layui 
      
    
    </summary>
    
    
      <category term="Layui" scheme="http://yoursite.com/tags/Layui/"/>
    
  </entry>
  
  <entry>
    <title>Shiroçš„æ‹¦æˆªå™¨æœºåˆ¶</title>
    <link href="http://yoursite.com/2019/08/03/Shiro%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%E6%9C%BA%E5%88%B6/"/>
    <id>http://yoursite.com/2019/08/03/Shiroçš„æ‹¦æˆªå™¨æœºåˆ¶/</id>
    <published>2019-08-03T00:01:57.000Z</published>
    <updated>2019-08-03T11:57:19.995Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Shiroçš„æ‹¦æˆªæœºåˆ¶"><a href="#å­¦ä¹ ç¬”è®°-Shiroçš„æ‹¦æˆªæœºåˆ¶" class="headerlink" title="å­¦ä¹ ç¬”è®° : Shiroçš„æ‹¦æˆªæœºåˆ¶"></a>å­¦ä¹ ç¬”è®° : Shiroçš„æ‹¦æˆªæœºåˆ¶</h2><h3 id="é»˜è®¤æ‹¦æˆªå™¨"><a href="#é»˜è®¤æ‹¦æˆªå™¨" class="headerlink" title="é»˜è®¤æ‹¦æˆªå™¨"></a>é»˜è®¤æ‹¦æˆªå™¨</h3><p><em>Shiroå†…ç½®äº†å¾ˆå¤šé»˜è®¤çš„æ‹¦æˆªå™¨,æ¯”å¦‚èº«ä»½éªŒè¯ã€æˆæƒç­‰ç›¸å…³çš„.æ›´å¤šé»˜è®¤æ‹¦æˆªå™¨å¯ä»¥å‚è€ƒ <code>org.apache.shiro.web.filter.mgt.DefaultFilter</code>ä¸­çš„æšä¸¾æ‹¦æˆªå™¨,å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Enum representing all of the default Shiro Filter instances available to web applications.  </span></span><br><span class="line"><span class="comment"> * Each filter instance is typically accessible </span></span><br><span class="line"><span class="comment"> * in configuration the &#123;<span class="doctag">@link</span> #name() name&#125; of the enum constant.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> DefaultFilter &#123;</span><br><span class="line"></span><br><span class="line">    anon(AnonymousFilter.class),</span><br><span class="line">    authc(FormAuthenticationFilter.class),</span><br><span class="line">    authcBasic(BasicHttpAuthenticationFilter.class),</span><br><span class="line">    logout(LogoutFilter.class),</span><br><span class="line">    noSessionCreation(NoSessionCreationFilter.class),</span><br><span class="line">    perms(PermissionsAuthorizationFilter.class),</span><br><span class="line">    port(PortFilter.class),</span><br><span class="line">    rest(HttpMethodPermissionFilter.class),</span><br><span class="line">    roles(RolesAuthorizationFilter.class),</span><br><span class="line">    ssl(SslFilter.class),</span><br><span class="line">    user(UserFilter.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Class&lt;? extends Filter&gt; filterClass;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">DefaultFilter</span><span class="params">(Class&lt;? extends Filter&gt; filterClass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.filterClass = filterClass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Filter <span class="title">newInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (Filter) ClassUtils.newInstance(<span class="keyword">this</span>.filterClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Class&lt;? extends Filter&gt; getFilterClass() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.filterClass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Filter&gt; <span class="title">createInstanceMap</span><span class="params">(FilterConfig config)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Filter&gt; filters = <span class="keyword">new</span> LinkedHashMap&lt;String, Filter&gt;(values().length);</span><br><span class="line">        <span class="keyword">for</span> (DefaultFilter defaultFilter : values()) &#123;</span><br><span class="line">            Filter filter = defaultFilter.newInstance();</span><br><span class="line">            <span class="keyword">if</span> (config != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    filter.init(config);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ServletException e) &#123;</span><br><span class="line">                    String msg = <span class="string">"Unable to correctly init default filter instance of type "</span> +</span><br><span class="line">                            filter.getClass().getName();</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(msg, e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            filters.put(defaultFilter.name(), filter);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> filters;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/03/Shiroçš„æ‹¦æˆªå™¨æœºåˆ¶/Shiro-ShiroFilter.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><table><thead><tr><th style="text-align:center">è¿‡æ»¤å™¨ç®€ç§°</th><th style="text-align:center">å¯¹åº”çš„javaç±»</th></tr></thead><tbody><tr><td style="text-align:center">anon</td><td style="text-align:center">org.apache.shiro.web.filter.authc.AnonymousFilter</td></tr><tr><td style="text-align:center">authc</td><td style="text-align:center">org.apache.shiro.web.filter.authc.FormAuthenticationFilter</td></tr><tr><td style="text-align:center">authcBasic</td><td style="text-align:center">org.apache.shiro.web.filter.authc.BasicHttpAuthenticationFilter</td></tr><tr><td style="text-align:center">roles</td><td style="text-align:center">org.apache.shiro.web.filter.authz.RolesAuthorizationFilter</td></tr><tr><td style="text-align:center">perms</td><td style="text-align:center">org.apache.shiro.web.filter.authz.PermissionsAuthorizationFilter</td></tr><tr><td style="text-align:center">user</td><td style="text-align:center">org.apache.shiro.web.filter.authc.UserFilter</td></tr><tr><td style="text-align:center">logout</td><td style="text-align:center">org.apache.shiro.web.filter.authc.LogoutFilter</td></tr><tr><td style="text-align:center">port</td><td style="text-align:center">org.apache.shiro.web.filter.authz.PortFilter</td></tr><tr><td style="text-align:center">rest</td><td style="text-align:center">org.apache.shiro.web.filter.authz.HttpMethodPermissionFilter</td></tr><tr><td style="text-align:center">ssl</td><td style="text-align:center">org.apache.shiro.web.filter.authz.SslFilter</td></tr></tbody></table><ol><li><code>anon</code> : åŒ¿åæ‹¦æˆªå™¨,å³ä¸éœ€è¦ç™»å½•å³å¯è®¿é—®. ä¸€èˆ¬ç”¨äºé™æ€èµ„æºè¿‡æ»¤,ç¤ºä¾‹â€/static/**=anonâ€</li><li><code>authc</code> : è¡¨ç¤ºéœ€è¦è®¤è¯(ç™»å½•)æ‰èƒ½ä½¿ç”¨,ç¤ºä¾‹â€/**=authcâ€,ä¸»è¦å±æ€§æœ‰ : <ul><li>usernameParam : è¡¨å•æäº¤çš„ç”¨æˆ·åå‚æ•°å(username)</li><li>passwordParam : è¡¨å•æäº¤çš„å¯†ç å‚æ•°å(password)</li><li>rememberMeParam : è¡¨å•æäº¤çš„å¯†ç å‚æ•°å(rememberMe)</li><li>loginUrl : ç™»å½•è¯·æ±‚åœ°å€(/login.jsp)</li><li>successUrl : ç™»å½•æˆåŠŸåçš„é»˜è®¤é‡å®šå‘åœ°å€</li><li>failureKeyAttribute : ç™»å½•å¤±è´¥åé”™è¯¯ä¿¡æ¯å­˜å‚¨key(shiroLoginFailure)</li></ul></li><li><code>authcBasic</code> : Basic HTTPèº«ä»½éªŒè¯æ‹¦æˆªå™¨,ä¸»è¦å±æ€§ : applicationName:å¼¹å‡ºç™»å½•æ¡†æ˜¾ç¤ºçš„ä¿¡æ¯(application)</li><li><code>roles</code> : è§’è‰²æˆæƒæ‹¦æˆªå™¨,éªŒè¯ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰èµ„æºè§’è‰². ç¤ºä¾‹â€/admin/**=roles[admin]â€</li><li><code>perms</code> : æƒé™æˆæƒæ‹¦æˆªå™¨,éªŒè¯ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰èµ„æºæƒé™. ç¤ºä¾‹â€/user/create=perms[â€œuser:createâ€]â€</li><li><code>user</code> : ç”¨æˆ·æ‹¦æˆªå™¨,ç”¨æˆ·å·²ç»èº«ä»½éªŒè¯/è®°ä½æˆ‘çš„ç™»å½•. ç¤ºä¾‹â€/index=userâ€</li><li><code>logout</code> : é€€å‡ºæ‹¦æˆªå™¨,ä¸»è¦å±æ€§ : redirectUrl:é€€å‡ºæˆåŠŸåé‡å®šå‘çš„åœ°å€(/). ç¤ºä¾‹â€/logout=logoutâ€</li><li><code>port</code> : ç«¯å£æ‹¦æˆªå™¨,ä¸»è¦å±æ€§ : port(80):å¯ä»¥é€šè¿‡çš„ç«¯å£. ç¤ºä¾‹â€/test= port[80]â€,å¦‚æœç”¨æˆ·è®¿é—®è¯¥é¡µé¢æ˜¯é80,å°†è‡ªåŠ¨å°†è¯·æ±‚ç«¯å£æ”¹ä¸º80å¹¶é‡å®šå‘åˆ°è¯¥80ç«¯å£,å…¶ä»–è·¯å¾„/å‚æ•°ç­‰ç›¸åŒ</li><li><code>rest</code> : resté£æ ¼æ‹¦æˆªå™¨,è‡ªåŠ¨æ ¹æ®è¯·æ±‚æ–¹æ³•æ„å»ºæƒé™å­—ç¬¦ä¸²(GET=read,POST=create,PUT=update,DELETE=delete,HEAD=read,TRACE=read,OPTIONS=read, MKCOL=create)æ„å»ºæƒé™å­—ç¬¦ä¸². ç¤ºä¾‹â€/users=rest[user]â€,ä¼šè‡ªåŠ¨æ‹¼å‡ºâ€user:read,user:create,user:update,user:deleteâ€æƒé™å­—ç¬¦ä¸²è¿›è¡Œæƒé™åŒ¹é…(æ‰€æœ‰éƒ½å¾—åŒ¹é…:isPermittedAll)</li><li><code>ssl</code> : SSLæ‹¦æˆªå™¨,åªæœ‰è¯·æ±‚åè®®æ˜¯httpsæ‰èƒ½é€šè¿‡. å¦åˆ™è‡ªåŠ¨è·³è½¬ä¼šhttpsç«¯å£(443). å…¶ä»–å’Œportæ‹¦æˆªå™¨ä¸€æ ·</li></ol><ul><li>æ³¨ : anon,authcBasic,auchc,useræ˜¯è®¤è¯è¿‡æ»¤å™¨. perms,roles,ssl,rest,portæ˜¯æˆæƒè¿‡æ»¤å™¨</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Shiroçš„æ‹¦æˆªæœºåˆ¶&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Shiroçš„æ‹¦æˆªæœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Shiroçš„æ‹¦æˆªæœºåˆ¶&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Shiroçš„æ‹¦æˆªæœºåˆ¶&lt;/h2&gt;&lt;h3 id=&quot;é»˜è®¤æ‹¦æˆªå™¨&quot;&gt;&lt;a
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>Shiroä¹‹ç”¨æˆ·æˆæƒ</title>
    <link href="http://yoursite.com/2019/08/02/Shiro%E4%B9%8B%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83/"/>
    <id>http://yoursite.com/2019/08/02/Shiroä¹‹ç”¨æˆ·æˆæƒ/</id>
    <published>2019-08-02T00:28:58.000Z</published>
    <updated>2019-08-03T09:07:53.088Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ"><a href="#å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ" class="headerlink" title="å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ"></a>å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ</h2><p><em>ç®€ä»‹ : æˆæƒ,ä¹Ÿå«è®¿é—®æ§åˆ¶,å³åœ¨åº”ç”¨ä¸­æ§åˆ¶è°èƒ½è®¿é—®å“ªäº›èµ„æº(å¦‚è®¿é—®é¡µé¢/ç¼–è¾‘æ•°æ®/é¡µé¢æ“ä½œç­‰). åœ¨æˆæƒä¸­éœ€äº†è§£çš„å‡ ä¸ªå…³é”®å¯¹è±¡ : ä¸»ä½“(Subject)ã€èµ„æº(Resource)ã€æƒé™(Permission)ã€è§’è‰²(Role),å…¶è§£æå¦‚ä¸‹æ‰€ç¤º :</em></p><ol><li><code>ä¸»ä½“</code> : <em>ä¸»ä½“,å³è®¿é—®åº”ç”¨çš„ç”¨æˆ·,åœ¨Shiroä¸­ä½¿ç”¨Subjectä»£è¡¨è¯¥ç”¨æˆ·. ç”¨æˆ·åªæœ‰æˆæƒåæ‰å…è®¸è®¿é—®ç›¸åº”çš„èµ„æº</em></li><li><code>èµ„æº</code> : <em>åœ¨åº”ç”¨ä¸­ç”¨æˆ·å¯ä»¥è®¿é—®çš„ä»»ä½•èµ„æº,æ¯”å¦‚è®¿é—®JSPé¡µé¢ã€æŸ¥çœ‹/ç¼–è¾‘æŸäº›æ•°æ®ã€è®¿é—®æŸä¸ªä¸šåŠ¡æ–¹æ³•ã€æ‰“å°æ–‡æœ¬ç­‰ç­‰..ç”¨æˆ·éœ€è¦æˆæƒåæ–¹å¯è®¿é—®</em></li><li><code>æƒé™</code> : <em>å®‰å…¨ç­–ç•¥ä¸­çš„åŸå­æˆæƒå•ä½,å¯ç”¨æƒé™æ§åˆ¶ç”¨æˆ·åœ¨åº”ç”¨ä¸­æ˜¯å¦èƒ½è®¿é—®æŸä¸ªèµ„æº,å¦‚è®¿é—®ç”¨æˆ·åˆ—è¡¨é¡µé¢,æŸ¥çœ‹/æ–°å¢/ä¿®æ”¹/åˆ é™¤ç”¨æˆ·æ•°æ®(åŸºæœ¬ä¸ºCRUDå¼æƒé™æ§åˆ¶)..</em></li><li><p><code>è§’è‰²</code> : <em>è§’è‰²ä»£è¡¨äº†æ“ä½œé›†åˆ,å¯ä»¥ç†è§£ä¸ºæƒé™çš„é›†åˆ,ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼šèµ‹äºˆç”¨æˆ·è§’è‰²è€Œä¸æ˜¯æƒé™,å³è¿™æ ·ç”¨æˆ·å¯ä»¥æ‹¥æœ‰ä¸€ç»„æƒé™,ä¸åŒçš„è§’è‰²æ‹¥æœ‰ä¸€ç»„ä¸åŒçš„æƒé™</em></p><ul><li><code>éšå¼è§’è‰²</code> : <em>å³ç›´æ¥é€šè¿‡è§’è‰²æ¥éªŒè¯ç”¨æˆ·æœ‰æ²¡æœ‰æ“ä½œæƒé™,å³ç²’åº¦æ˜¯ä»¥è§’è‰²ä¸ºå•ä½è¿›è¡Œè®¿é—®æ§åˆ¶çš„,ç²’åº¦è¾ƒç²—. è‹¥è¿›è¡Œå˜æ›´å¯èƒ½éœ€è¦å¤šå¤„ä»£ç çš„ä¿®æ”¹</em></li><li><code>æ˜¾ç¤ºè§’è‰²</code> : <em>åœ¨ç¨‹åºä¸­é€šè¿‡æƒé™æ§åˆ¶è°èƒ½è®¿é—®æŸä¸ªèµ„æº,è§’è‰²èšåˆä¸€ç»„æƒé™é›†åˆ. è¿™æ ·è‹¥éœ€è¦å“ªä¸ªè§’è‰²ä¸èƒ½è®¿é—®æŸä¸ªèµ„æº,åªéœ€è¦ä»è§’è‰²ä»£è¡¨çš„æƒé™é›†åˆä¸­ç§»é™¤æŒ‡å®šçš„è®¿é—®æƒé™å³å¯,æ— é¡»ä¿®æ”¹å¤šå¤„ä»£ç </em></li></ul></li></ol><h3 id="æˆæƒæ–¹å¼"><a href="#æˆæƒæ–¹å¼" class="headerlink" title="æˆæƒæ–¹å¼"></a>æˆæƒæ–¹å¼</h3><p><em>Shiro æ”¯æŒä¸‰ç§æ–¹å¼çš„æˆæƒ,å¦‚ä¸‹æ‰€ç¤º :</em></p><ol><li><p><em><code>ç¼–ç¨‹å¼</code> : é€šè¿‡å†™if/elseæˆæƒä»£ç å—å®Œæˆ</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Subject subject = SecurityUtils.getSubject();</span><br><span class="line"><span class="keyword">if</span>(subject.hasRole(<span class="string">"admin"</span>)) &#123;</span><br><span class="line">    <span class="comment">//æœ‰æƒé™</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//æ— æƒé™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em><code>æ³¨è§£å¼</code> : é€šè¿‡åœ¨æ‰§è¡Œçš„Javaæ–¹æ³•ä¸Šæ”¾ç½®ç›¸åº”çš„æ³¨è§£å®Œæˆ</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequiresRoles</span>(<span class="string">"admin"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æœ‰æƒé™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em><code>JSP/GSP æ ‡ç­¾</code> : åœ¨JSP/GSPé¡µé¢é€šè¿‡ç›¸åº”çš„æ ‡ç­¾å®Œæˆ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:hasRole</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">!â€”</span> æœ‰æƒé™ â€”&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:hasRole</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="æˆæƒæµç¨‹"><a href="#æˆæƒæµç¨‹" class="headerlink" title="æˆæƒæµç¨‹"></a>æˆæƒæµç¨‹</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/02/Shiroä¹‹ç”¨æˆ·æˆæƒ/Shiro-æˆæƒæµç¨‹.png" alt title>                </div>                <div class="image-caption"></div>            </figure><ol><li><em>é¦–å…ˆè°ƒç”¨`Subject.isPermitted</em>/hasRole<em>`æ¥å£,å…¶ä¼šå§”æ‰˜ç»™SecurityManager,è€ŒSecurityManageræ¥ç€ä¼šå§”æ‰˜ç»™Authorizer</em></li><li><em>Authorizeræ˜¯çœŸæ­£çš„æˆæƒè€…,å¦‚æœæˆ‘ä»¬è°ƒç”¨å¦‚isPermitted(â€œuser:createâ€),å…¶é¦–å…ˆä¼šé€šè¿‡PermissionResolveræŠŠå­—ç¬¦ä¸²è½¬æ¢æˆç›¸åº”çš„Permissionå®ä¾‹</em></li><li><em>åœ¨è¿›è¡Œæˆæƒä¹‹å‰,å…¶ä¼šè°ƒç”¨ç›¸åº”çš„Realmè·å–Subjectç›¸åº”çš„è§’è‰²/æƒé™ç”¨äºåŒ¹é…ä¼ å…¥çš„è§’è‰²/æƒé™</em></li><li><em>Authorizerä¼šåˆ¤æ–­Realmçš„è§’è‰²/æƒé™æ˜¯å¦å’Œä¼ å…¥çš„åŒ¹é…,å¦‚æœæœ‰å¤šä¸ªRealm,åˆ™ä¼šå§”æ‰˜ç»™ModularRealmAuthorizerè¿›è¡Œå¾ªç¯åˆ¤æ–­,å¦‚æœåŒ¹é…å¦‚`isPermitted</em>/hasRole<em>`ä¼šè¿”å›true,å¦åˆ™è¿”å›falseä»¥è¡¨ç¤ºæˆæƒå¤±è´¥</em></li></ol><h3 id="iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²"><a href="#iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²" class="headerlink" title="iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²"></a>iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²</h3><p><em>é€šè¿‡åŠ è½½<code>ini</code>é…ç½®æ–‡ä»¶çš„æ–¹å¼,æ¥å®ç°ä¸€ä¸ªç”¨äºæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŒ‡å®šè§’è‰²çš„ç¨‹åº~</em></p><ol><li><p><em>pom.xml : Mavenä¾èµ–</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiroæ ¸å¿ƒåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- slf4jçš„æ¥å£å®ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>per-shiro.ini : ç”¨æˆ·èº«ä»½åŠæƒé™é…ç½®ä¿¡æ¯</em></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æƒé™è¡¨è¾¾å¼çš„å®šä¹‰:é¦–å…ˆæ ¹æ®ç”¨æˆ·åæŸ¥æ‰¾è§’è‰²,å†æ ¹æ®è§’è‰²æŸ¥æ‰¾æƒé™,è§’è‰²æ˜¯æƒé™çš„é›†åˆ</span></span><br><span class="line"></span><br><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="comment">#ç”¨æˆ·hunagyuhuiçš„å¯†ç ä¸ºloveyourself,ä¸”å…·æœ‰studentå’Œprogrammerä¸¤ä¸ªè§’è‰²</span></span><br><span class="line"><span class="attr">huangyuhui</span> = loveyourself,student,programmer</span><br><span class="line"></span><br><span class="line"><span class="section">[roles]</span></span><br><span class="line"><span class="comment">#è§’è‰²studentå¯¹èµ„æº'user'æ‹¥æœ‰create,updateæƒé™</span></span><br><span class="line"><span class="attr">student</span> = user:create,user:update</span><br><span class="line"><span class="comment">#è§’è‰²programmerå¯¹èµ„æº'user'å…·æœ‰insert,deleteæƒé™</span></span><br><span class="line"><span class="attr">programmer</span> = user:read,user:delete</span><br></pre></td></tr></table></figure></li><li><p><em>RolesTest.java : éªŒè¯ç”¨æˆ·è§’è‰²ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.permission;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.UnauthorizedException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RolesTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1:åŠ è½½é…ç½®æ–‡ä»¶,åˆ›å»ºSecurityManagerå·¥å‚å¯¹è±¡</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:per-shiro.ini"</span>);</span><br><span class="line">        <span class="comment">//2:è·å¾—securityManagerå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        <span class="comment">//3:å°†securityMangerå®ä¾‹ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒä¸­,ä¾¿äºè®¿é—®</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//4:åˆ›å»ºå½“å‰ç™»å½•çš„ä¸»ä½“</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//5:ç»‘å®šä¸»ä½“ç™»å½•çš„èº«ä»½/å‡­è¯,æ—¢è´¦æˆ·åŠå¯†ç </span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"huangyuhui"</span>, <span class="string">"loveyourself"</span>);</span><br><span class="line">        <span class="comment">//6:ä¸»ä½“ç™»å½•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            currentUser.login(token);</span><br><span class="line">            System.out.println(<span class="string">"ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :"</span> + currentUser.isAuthenticated());</span><br><span class="line">            <span class="comment">//7:è¿›è¡Œç”¨æˆ·è§’è‰²åˆ¤æ–­</span></span><br><span class="line">            System.out.println(<span class="string">"åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰'student'è§’è‰² : "</span> + currentUser.hasRole(<span class="string">"student"</span>));</span><br><span class="line">            System.out.println(<span class="string">"åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦åŒæ—¶æ‹¥æœ‰'student'ä¸'programmer'è§’è‰² : "</span> + currentUser.hasAllRoles(List.of(<span class="string">"student"</span>, <span class="string">"programmer"</span>)));</span><br><span class="line">            System.out.println(<span class="string">"åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰'student','programmer','singer'è§’è‰² : "</span> + Arrays.toString(currentUser.hasRoles(List.of(<span class="string">"student"</span>, <span class="string">"programmer"</span>, <span class="string">"singer"</span>))));</span><br><span class="line">            <span class="comment">//åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªè§’è‰²,è‹¥æ‹¥æœ‰è¯¥è§’è‰²åˆ™ä¸åšä»»ä½•æ“ä½œ(æ— è¿”å›å€¼),åä¹‹åˆ™æŠ›å‡º:UnauthorizedException</span></span><br><span class="line">            currentUser.checkRole(<span class="string">"singer"</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·è´¦æˆ·é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¯†ç é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnauthorizedException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¹¶ä¸æ‹¥æœ‰'singer'è§’è‰² !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//8:æ³¨é”€ç™»å½•</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :"</span> + !currentUser.isAuthenticated());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :<span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰<span class="string">'student'</span>è§’è‰² : <span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦åŒæ—¶æ‹¥æœ‰<span class="string">'student'</span>ä¸<span class="string">'programmer'</span>è§’è‰² : <span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰<span class="string">'student'</span>,<span class="string">'programmer'</span>,<span class="string">'singer'</span>è§’è‰² : [<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·å¹¶ä¸æ‹¥æœ‰<span class="string">'singer'</span>è§’è‰² !</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :<span class="keyword">true</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™"><a href="#iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™" class="headerlink" title="iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™"></a>iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™</h3><p><em>é€šè¿‡åŠ è½½<code>ini</code>é…ç½®æ–‡ä»¶çš„æ–¹å¼,æ¥å®ç°ä¸€ä¸ªç”¨äºæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŒ‡å®šæƒé™çš„ç¨‹åº~</em></p><ol><li><p><em>pom.xml : Mavenä¾èµ–(åŒä¸Š)</em></p></li><li><p><em>per-shiro.ini : ç”¨æˆ·èº«ä»½åŠæƒé™é…ç½®ä¿¡æ¯(åŒä¸Š)</em></p></li><li><p><em>PermissionTest.java : éªŒè¯ç”¨æˆ·æƒé™ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.permission;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.UnauthorizedException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissionsTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1:åŠ è½½é…ç½®æ–‡ä»¶,åˆ›å»ºSecurityManagerå·¥å‚å¯¹è±¡</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:per-shiro.ini"</span>);</span><br><span class="line">        <span class="comment">//2:è·å¾—securityManagerå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        <span class="comment">//3:å°†securityMangerå®ä¾‹ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒä¸­,ä¾¿äºè®¿é—®</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//4:åˆ›å»ºå½“å‰ç™»å½•çš„ä¸»ä½“</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//5:ç»‘å®šä¸»ä½“ç™»å½•çš„èº«ä»½/å‡­è¯,æ—¢è´¦æˆ·åŠå¯†ç </span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"huangyuhui"</span>, <span class="string">"loveyourself"</span>);</span><br><span class="line">        <span class="comment">//6:ä¸»ä½“ç™»å½•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            currentUser.login(token);</span><br><span class="line">            System.out.println(<span class="string">"ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :"</span> + currentUser.isAuthenticated());</span><br><span class="line">            <span class="comment">//7:è¿›è¡Œç”¨æˆ·æƒé™åˆ¤æ–­</span></span><br><span class="line">            System.out.println(<span class="string">"å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº'user'çš„'create'ä¸'read'æƒé™ : "</span> + Arrays.toString(currentUser.isPermitted(<span class="string">"user:create"</span>, <span class="string">"user:read"</span>)));</span><br><span class="line">            System.out.println(<span class="string">"å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº'user'çš„'update'ä¸'delete'æƒé™ : "</span> + Arrays.toString(currentUser.isPermitted(<span class="string">"user:update"</span>, <span class="string">"user:delete"</span>)));</span><br><span class="line">            System.out.println(<span class="string">"å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº'user'çš„'import'ä¸'export'æƒé™ : "</span> + Arrays.toString(currentUser.isPermitted(<span class="string">"user:import"</span>, <span class="string">"user:export"</span>)));</span><br><span class="line">            <span class="comment">//åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªæƒé™,è‹¥æœ‰åˆ™ä¸åšä»»ä½•æ“ä½œ(æ— è¿”å›å€¼),åä¹‹æŠ›å‡º:UnauthorizedException</span></span><br><span class="line">            currentUser.checkPermission(<span class="string">"user:getUserList"</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·è´¦æˆ·é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¯†ç é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnauthorizedException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"å½“å‰ç”¨æˆ·å¹¶æœªæ‹¥æœ‰å¯¹èµ„æº'user'çš„'getUserList'æƒé™ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//8:æ³¨é”€ç™»å½•</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :"</span> + !currentUser.isAuthenticated());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :<span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº<span class="string">'user'</span>çš„<span class="string">'create'</span>ä¸<span class="string">'read'</span>æƒé™ : [<span class="keyword">true</span>, <span class="keyword">true</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº<span class="string">'user'</span>çš„<span class="string">'update'</span>ä¸<span class="string">'delete'</span>æƒé™ : [<span class="keyword">true</span>, <span class="keyword">true</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº<span class="string">'user'</span>çš„<span class="string">'import'</span>ä¸<span class="string">'export'</span>æƒé™ : [<span class="keyword">false</span>, <span class="keyword">false</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">å½“å‰ç”¨æˆ·å¹¶æœªæ‹¥æœ‰å¯¹èµ„æº<span class="string">'user'</span>çš„<span class="string">'getUserList'</span>æƒé™ !</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :<span class="keyword">true</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="è‡ªå®šä¹‰Realmæ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™"><a href="#è‡ªå®šä¹‰Realmæ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™" class="headerlink" title="è‡ªå®šä¹‰Realmæ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™"></a>è‡ªå®šä¹‰Realmæ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™</h3><p><em>é€šè¿‡é…ç½®è‡ªå®šä¹‰<code>Realm</code>çš„æ–¹å¼,æ¥å®ç°ä¸€ä¸ªç”¨äºéªŒè¯ç”¨äºè§’è‰²åŠæƒé™çš„ç¨‹åº~</em></p><ol><li><p><em>pom.xml : Mavenä¾èµ–(åŒä¸Š)</em></p></li><li><p><em>per-my-shiro.ini : é…ç½®è‡ªå®šä¹‰Realm</em></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŒ‡å®šè‡ªå®šä¹‰realm</span></span><br><span class="line"><span class="attr">myRealm</span> = pers.huangyuhui.permission.realm.PermissRealm</span><br><span class="line"><span class="comment">#æŒ‡å®šSecurityManagerçš„realmså®ç°</span></span><br><span class="line"><span class="attr">securityManager.realm</span> = <span class="variable">$myRealm</span></span><br></pre></td></tr></table></figure></li><li><p><em>PermissionRealm.java : è‡ªå®šä¹‰Realm,å¹¶é…ç½®ç”¨æˆ·è§’è‰²åŠæƒé™ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.permission.realm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.SimpleAuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: shiro-learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: è‡ªå®šä¹‰Realm, é…ç½®ç”¨æˆ·è§’è‰²åŠæƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/2/2019-10:52 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"permissRealm"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//æˆæƒ:å…¶principalså­˜å‚¨ç€ç”¨æˆ·è®¤è¯çš„å‡­è¯ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principals)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–å½“å‰ç™»å½•çš„ç”¨æˆ·åä¿¡æ¯,æ—¢ç”¨æˆ·å‡­è¯</span></span><br><span class="line">        <span class="comment">//Object username = principals.getPrimaryPrincipal();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¨¡æ‹ŸæŸ¥è¯¢æ•°æ®åº“æ“ä½œ:æŸ¥è¯¢ç”¨æˆ·æ‰€æ‹¥æœ‰çš„çš„è§’è‰²åŠæƒé™ä¿¡æ¯</span></span><br><span class="line">        List&lt;String&gt; roles = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; permiss = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">//å‡è®¾è¯¥ç”¨æˆ·æ‹¥æœ‰'student'ä¸'programmer'è§’è‰²</span></span><br><span class="line">        roles.add(<span class="string">"student"</span>);</span><br><span class="line">        roles.add(<span class="string">"programmer"</span>);</span><br><span class="line">        <span class="comment">//å‡è®¾è¯¥ç”¨æˆ·æ‹¥æœ‰å¯¹èµ„æº'user'çš„'read'ä¸'update'æƒé™</span></span><br><span class="line">        permiss.add(<span class="string">"user:create"</span>);</span><br><span class="line">        permiss.add(<span class="string">"user:update"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°è£…ç”¨æˆ·çš„è§’è‰²ä¸æƒé™ä¿¡æ¯å¹¶è¿”å›</span></span><br><span class="line">        SimpleAuthorizationInfo info = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">        info.addRoles(roles);</span><br><span class="line">        info.addStringPermissions(permiss);</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//è®¤è¯:å…¶tokenå­˜å‚¨ç€ä¼ å…¥çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯(usernamePasswordToken)</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–ç”¨æˆ·çš„è´¦æˆ·ä¿¡æ¯å¹¶éªŒè¯</span></span><br><span class="line">        String username = (String) token.getPrincipal();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">"github"</span>.equals(username)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿç”¨æˆ·å¯†ç ä¿¡æ¯</span></span><br><span class="line">        String password = <span class="string">"yubuntu0109"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//SimpleAuthenticationInfo(Object principal, Object credentials, String realmName)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SimpleAuthenticationInfo(username, password, getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>PermissTest.java : éªŒè¯ç”¨æˆ·è§’è‰²åŠæƒé™ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.permission.realm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.UnauthorizedException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1:åŠ è½½é…ç½®æ–‡ä»¶,åˆ›å»ºSecurityManagerå·¥å‚å¯¹è±¡</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:my-per-shiro.ini"</span>);</span><br><span class="line">        <span class="comment">//2:è·å¾—securityManagerå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        <span class="comment">//3:å°†securityMangerå®ä¾‹ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒä¸­,ä¾¿äºè®¿é—®</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//4:åˆ›å»ºå½“å‰ç™»å½•çš„ä¸»ä½“</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//5:ç»‘å®šä¸»ä½“ç™»å½•çš„èº«ä»½/å‡­è¯,æ—¢è´¦æˆ·åŠå¯†ç </span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"github"</span>, <span class="string">"yubuntu0109"</span>);</span><br><span class="line">        <span class="comment">//6:ä¸»ä½“ç™»å½•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            currentUser.login(token);</span><br><span class="line">            System.out.println(<span class="string">"ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :"</span> + currentUser.isAuthenticated());</span><br><span class="line">            <span class="comment">//7:éªŒè¯ç”¨æˆ·è§’è‰²</span></span><br><span class="line">            System.out.println(<span class="string">"åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰'student','programmer','singer'è§’è‰² : "</span></span><br><span class="line">                    + Arrays.toString(currentUser.hasRoles(List.of(<span class="string">"student"</span>, <span class="string">"programmer"</span>, <span class="string">"singer"</span>))));</span><br><span class="line">            <span class="comment">//8:éªŒè¯ç”¨æˆ·æƒé™</span></span><br><span class="line">            System.out.println(<span class="string">"å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹'user'èµ„æºçš„'create','update','read','delete'æƒé™ : "</span></span><br><span class="line">                    + Arrays.toString(currentUser.isPermitted(<span class="string">"user:create"</span>, <span class="string">"user:update"</span>, <span class="string">"user:read"</span>, <span class="string">"user:delete"</span>)));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·è´¦æˆ·é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¯†ç é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//8:æ³¨é”€ç™»å½•</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :"</span> + !currentUser.isAuthenticated());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :<span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰<span class="string">'student'</span>,<span class="string">'programmer'</span>,<span class="string">'singer'</span>è§’è‰² : [<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹<span class="string">'user'</span>èµ„æºçš„<span class="string">'create'</span>,<span class="string">'update'</span>,<span class="string">'read'</span>,<span class="string">'delete'</span>æƒé™ : [<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :<span class="keyword">true</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ç®€ä»‹
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
</feed>
