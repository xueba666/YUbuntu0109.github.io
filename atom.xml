<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ¬¢è¿å‚è§‚å°ç°ç°çš„ç½‘ç«™å“Ÿ ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾ ~</title>
  
  <subtitle>My Personal blog website â€”â€” be founded on March 9, 2019</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-08-09T00:34:42.090Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>é»„å®‡è¾‰</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Git Commit Message è§„èŒƒ</title>
    <link href="http://yoursite.com/2019/08/08/Git-Commit-Message-%E8%A7%84%E8%8C%83/"/>
    <id>http://yoursite.com/2019/08/08/Git-Commit-Message-è§„èŒƒ/</id>
    <published>2019-08-08T11:59:13.000Z</published>
    <updated>2019-08-09T00:34:42.090Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Git-Commit-Messageè§„èŒƒ"><a href="#å­¦ä¹ ç¬”è®°-Git-Commit-Messageè§„èŒƒ" class="headerlink" title="å­¦ä¹ ç¬”è®° : Git Commit Messageè§„èŒƒ"></a>å­¦ä¹ ç¬”è®° : Git Commit Messageè§„èŒƒ</h2><p><em>Git Commit Message åº”è¯¥æ¸…æ™°æ˜äº†,è¦ç”¨ç²¾ç®€çš„è¯­è¨€è¯´æ˜æœ¬æ¬¡æäº¤çš„ç›®çš„,å…¶ä¸»è¦ä½œç”¨æ˜¯ä¸ºäº†åç»­çš„æœç´¢ã€ç‰ˆæœ¬çš„å›æ»šã€åˆå¹¶å†²çªçš„è¿½æº¯ç­‰æ“ä½œ~</em></p><h3 id="è§„èŒƒä»‹ç»"><a href="#è§„èŒƒä»‹ç»" class="headerlink" title="è§„èŒƒä»‹ç»"></a>è§„èŒƒä»‹ç»</h3><p><em>è¿™æ¬¡ä¸»è¦ä»‹ç» AngularJS çš„è§„èŒƒ,å®ƒæ˜¯ç”± Google æ¨å‡ºçš„ä¸€å¥—æäº¤æ¶ˆæ¯è§„èŒƒæ ‡å‡†,ä¹Ÿæ˜¯ç›®å‰ä½¿ç”¨èŒƒå›´æœ€å¹¿çš„è§„èŒƒ,æ¯”è¾ƒåˆç†å’Œç³»ç»ŸåŒ–,å¹¶ä¸”è¿˜æœ‰é…å¥—çš„å·¥å…·å¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨,è§„èŒƒæ‰§è¡Œæ–¹æ¡ˆå¦‚ä¸‹ :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/08/Git-Commit-Message-è§„èŒƒ/git-commit-message-mindmap.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="æ ¼å¼è¦æ±‚"><a href="#æ ¼å¼è¦æ±‚" class="headerlink" title="æ ¼å¼è¦æ±‚"></a>æ ¼å¼è¦æ±‚</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">type</span>&gt;</span>(<span class="tag">&lt;<span class="name">scope</span>&gt;</span>): <span class="tag">&lt;<span class="name">subject</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BLANK</span> <span class="attr">LINE</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BLANK</span> <span class="attr">LINE</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>æ¶ˆæ¯åªå ç”¨ä¸€è¡Œ,ä»»ä½•è¡Œéƒ½ä¸èƒ½è¶…è¿‡ 100 ä¸ªå­—ç¬¦</li><li>å…è®¸ä½¿ç”¨ GitHub ä»¥åŠå„ç§ Git å·¥å…·é˜…è¯»æ¶ˆæ¯</li><li>æäº¤æ¶ˆæ¯ç”±é¡µçœ‰ã€æ­£æ–‡å’Œé¡µè„šç»„æˆ,ç”±ç©ºè¡Œåˆ†éš”</li></ul><h4 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h4><p><em>Headeréƒ¨åˆ†åªæœ‰ä¸€è¡Œ,åŒ…æ‹¬ä¸‰ä¸ªå­—æ®µ : <code>type</code>(å¿…éœ€)ã€<code>scope</code>(å¯é€‰)ã€å’Œ<code>subject</code>(å¿…éœ€)</em></p><ol><li><em><code>type</code>ä»£è¡¨æŸæ¬¡æäº¤çš„ç±»å‹,æ¯”å¦‚æ˜¯ä¿®å¤ä¸€ä¸ª bug æˆ–æ˜¯å¢åŠ ä¸€ä¸ª feature,ç±»å‹å¦‚ä¸‹ :</em></li></ol><table><thead><tr><th style="text-align:center">ç±»å‹</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">feat</td><td style="text-align:center">æ–°å¢feature</td></tr><tr><td style="text-align:center">fix</td><td style="text-align:center">ä¿®å¤bug</td></tr><tr><td style="text-align:center">docs</td><td style="text-align:center">ä»…ä»…ä¿®æ”¹äº†æ–‡æ¡£,æ¯”å¦‚README , CHANGELOG , CONTRIBUTEç­‰ç­‰</td></tr><tr><td style="text-align:center">style</td><td style="text-align:center">ä¿®æ”¹äº†ç©ºæ ¼,æ ¼å¼ç¼©è¿›,é€—å·ç­‰,ä¸æ”¹å˜ä»£ç é€»è¾‘</td></tr><tr><td style="text-align:center">refactor</td><td style="text-align:center">ä»£ç é‡æ„,æ²¡æœ‰æ·»åŠ æ–°åŠŸèƒ½æˆ–ä¿®å¤Bug</td></tr><tr><td style="text-align:center">perf</td><td style="text-align:center">ä¼˜åŒ–ç›¸å…³,æ¯”å¦‚æå‡æ€§èƒ½,ä½“éªŒ</td></tr><tr><td style="text-align:center">test</td><td style="text-align:center">æµ‹è¯•ç”¨ä¾‹,åŒ…æ‹¬å•å…ƒæµ‹è¯•,é›†æˆæµ‹è¯•ç­‰</td></tr><tr><td style="text-align:center">chore</td><td style="text-align:center">æ”¹å˜æ„å»ºæµç¨‹,æˆ–è€…å¢åŠ ä¾èµ–åº“,å·¥å…·ç­‰</td></tr><tr><td style="text-align:center">revert</td><td style="text-align:center">å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬</td></tr></tbody></table><ol start="2"><li><em><code>scope</code>ç”¨äºè¯´æ˜ commit å½±å“çš„èŒƒå›´,å¯ä»¥æ˜¯æŒ‡å®šæäº¤æ›´æ”¹ä½ç½®çš„ä»»ä½•å†…å®¹,å¦‚ :</em></li></ol><ul><li>å¯¹ package.json æ–‡ä»¶æ–°å¢ä¾èµ–åº“ï¼Œchore(package.json): æ–°å¢ä¾èµ–åº“</li><li>æˆ–å¯¹ä»£ç è¿›è¡Œé‡æ„ï¼Œrefacto(weChat.vue): é‡æ„å¾®ä¿¡è¿›ä»¶</li></ul><ol start="3"><li><em><code>subject</code>æ˜¯ commit ç›®çš„çš„ç®€çŸ­æè¿°,ä¸è¶…è¿‡50ä¸ªå­—ç¬¦. å¦‚æœæ²¡æœ‰æ›´åˆé€‚çš„èŒƒå›´,å¯ä»¥ç›´æ¥å†™æäº¤å†…å®¹,æ ¼å¼è¦æ±‚å¦‚ä¸‹ :</em></li></ol><ul><li>ä»¥åŠ¨è¯å¼€å¤´,ä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶,æ¯”å¦‚change,è€Œä¸æ˜¯changedæˆ–changes</li><li>ç¬¬ä¸€ä¸ªå­—æ¯å°å†™</li><li>ç»“å°¾ä¸åŠ å¥å·( . )</li></ul><h4 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h4><p><em>Body éƒ¨åˆ†æ˜¯å¯¹æœ¬æ¬¡ commit çš„è¯¦ç»†æè¿°,å¯ä»¥åˆ†æˆå¤šè¡Œ. ä¸‹é¢æ˜¯ä¸€ä¸ªèŒƒä¾‹ :</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">More detailed explanatory text, if necessary.  Wrap it to </span><br><span class="line">about 72 characters or so. </span><br><span class="line"></span><br><span class="line">Further paragraphs come after blank lines.</span><br><span class="line"></span><br><span class="line">- Bullet points are okay, too</span><br><span class="line">- Use a hanging indent</span><br></pre></td></tr></table></figure></p><p><em>æœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹ :</em></p><ul><li>ä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶,æ¯”å¦‚ä½¿ç”¨changeè€Œä¸æ˜¯changedæˆ–changes</li><li>åº”è¯¥è¯´æ˜ä»£ç å˜åŠ¨çš„åŠ¨æœº,ä»¥åŠä¸ä»¥å‰è¡Œä¸ºçš„å¯¹æ¯”</li></ul><h4 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h4><p><em>Footer éƒ¨åˆ†åªç”¨äºä¸¤ç§æƒ…å†µ :</em></p><ol><li><p><em>ä¸å…¼å®¹å˜åŠ¨ : å¦‚æœå½“å‰ä»£ç ä¸ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸å…¼å®¹,åˆ™ Footer éƒ¨åˆ†ä»¥<code>BREAKING CHANGE</code>å¼€å¤´,åé¢æ˜¯å¯¹å˜åŠ¨çš„æè¿°ã€ä»¥åŠå˜åŠ¨ç†ç”±å’Œè¿ç§»æ–¹æ³•,ç¤ºä¾‹å¦‚ä¸‹ :</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">BREAKING CHANGE: isolate scope bindings definition has changed.</span><br><span class="line"></span><br><span class="line">    To migrate the code follow the example below:</span><br><span class="line"></span><br><span class="line">    Before:</span><br><span class="line"></span><br><span class="line">    scope: &#123;</span><br><span class="line">      myAttr: &apos;attribute&apos;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    After:</span><br><span class="line"></span><br><span class="line">    scope: &#123;</span><br><span class="line">      myAttr: &apos;@&apos;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    The removed `inject` wasn&apos;t generaly useful for directives so there should be no code using it.</span><br></pre></td></tr></table></figure></li><li><p><em>å…³é—­ Issue : å¦‚æœå½“å‰ commit é’ˆå¯¹æŸä¸ªissue,é‚£ä¹ˆå¯ä»¥åœ¨ Footer éƒ¨åˆ†å…³é—­è¿™ä¸ª issue :</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Closes #234</span><br></pre></td></tr></table></figure></li></ol><p><em>ä¹Ÿå¯ä»¥ä¸€æ¬¡å…³é—­å¤šä¸ª issue :</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Closes #123, #245, #992</span><br></pre></td></tr></table></figure></p><h4 id="Revert"><a href="#Revert" class="headerlink" title="Revert"></a>Revert</h4><p><em>è¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µ,å¦‚æœå½“å‰ commit ç”¨äºæ’¤é”€ä»¥å‰çš„ commit,åˆ™å¿…é¡»ä»¥<code>revert:</code>å¼€å¤´ï¼Œåé¢è·Ÿç€è¢«æ’¤é”€ Commit çš„ Header,ç¤ºä¾‹å¦‚ä¸‹ :</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">revert: feat(pencil): add &apos;graphiteWidth&apos; option</span><br><span class="line"></span><br><span class="line">This reverts commit 667ecc1654a317a13331b17617d973392f415f02.</span><br></pre></td></tr></table></figure></p><p><em>Bodyéƒ¨åˆ†çš„æ ¼å¼æ˜¯å›ºå®šçš„ï¼Œå¿…é¡»å†™æˆ<code>This reverts commit &amp;lt;hash&gt;</code>,å…¶ä¸­çš„<code>hash</code>æ˜¯è¢«æ’¤é”€ commit çš„<code>SHA</code>æ ‡è¯†ç¬¦ã€‚</em></p><p><em>âœ¨è§„èŒƒå‚è€ƒé“¾æ¥ :</em></p><ul><li><a href="https://github.com/vuejs/vue/commits/dev" target="_blank" rel="noopener">https://github.com/vuejs/vue/commits/dev</a></li><li><a href="https://github.com/angular/angular/commits/master" target="_blank" rel="noopener">https://github.com/angular/angular/commits/master</a></li></ul><p><em>ğŸ™æ–‡ç« å‚è€ƒé“¾æ¥(è·ç›ŠåŒªæµ…,éå¸¸æ„Ÿè°¢) :</em></p><ul><li><a href="https://www.cnblogs.com/wubaiqing/p/10307605.html" target="_blank" rel="noopener">https://www.cnblogs.com/wubaiqing/p/10307605.html</a></li><li><a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Git-Commit-Messageè§„èŒƒ&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Git-Commit-Messageè§„èŒƒ&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Git Commit Messageè§„èŒƒ&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Gi
      
    
    </summary>
    
    
      <category term="GitHub" scheme="http://yoursite.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶</title>
    <link href="http://yoursite.com/2019/08/08/%E4%B8%BAGitHub%E9%87%8F%E8%BA%AB%E5%AE%9A%E5%88%B6%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/"/>
    <id>http://yoursite.com/2019/08/08/ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶/</id>
    <published>2019-08-08T00:29:09.000Z</published>
    <updated>2019-08-08T00:56:47.027Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶"><a href="#åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶" class="headerlink" title="åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶"></a>åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶</h2><h3 id="Octotree"><a href="#Octotree" class="headerlink" title="Octotree"></a>Octotree</h3><p><em>GitHubç°æœ‰çš„ç›®å½•å±‚çº§å½¢å¼,åœ¨æŸ¥çœ‹æ¥è‡ªä¸åŒå±‚çº§æ–‡ä»¶å¤¹çš„æ–‡ä»¶çš„æ—¶å€™æ˜¾å¾—ä¼¼ä¹ä¸æ˜¯å¾ˆæ–¹ä¾¿,ä½“éªŒç›¸å½“ç³Ÿç³•,åªèƒ½é‡å¤åœ°ç‚¹è¿›ä¸€ä¸ªæ–‡ä»¶å¤¹,å†è¿›å…¥å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶å¤¹,å¦‚æ­¤å¾ªç¯. å°¤å…¶æ˜¯åœ¨æ–‡ä»¶ç¹å¤šçš„é¡¹ç›®ä¹‹ä¸­,æ–‡ä»¶å¤¹åµŒå¥—å ªç§°å™©æ¢¦,ä¸€ä¸ªä¸ªç‚¹å‡»å¤ªè´¹æ—¶é—´å’Œç²¾åŠ›. è€Œ<code>octotree</code>è¿™æ¬¾æ’ä»¶åˆ™å¯ä»¥è§£å†³è¿™ä¸ªç—›ç‚¹,ä»–èƒ½å¤Ÿåƒ IDE ä¸€æ ·æä¾›é¡¹ç›®ç›®å½•,å¿«æ·å¯¼èˆª,æ–¹ä¾¿æµè§ˆ !  <a href="https://github.com/ovity/octotree" target="_blank" rel="noopener">https://github.com/ovity/octotree</a></em></p><h3 id="Awesome-Autocomplete-for-GitHub"><a href="#Awesome-Autocomplete-for-GitHub" class="headerlink" title="Awesome Autocomplete for GitHub"></a>Awesome Autocomplete for GitHub</h3><p><em><code>Awesome Autocomplete for GitHub</code>æ˜¯ä¸€æ¬¾GitHubæ™ºèƒ½æœç´¢æ’ä»¶ : æœ‰ç‚¹ç±»ä¼¼è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½,å®æ—¶ç›‘å¬è¾“å…¥çš„æœç´¢å…³é”®å­—,è‡ªåŠ¨åˆ—å‡ºç›¸å…³å†…å®¹. æ­£å¦‚å®˜æ–¹ä»‹ç» : è‡´åŠ›äºæ‰“é€  GitHub ä¸Šæœ€å¥½çš„æœç´¢å¼•æ“,åŠ©ä½ åœ¨æœç´¢ä»“åº“å’Œç”¨æˆ·æ–¹é¢,æ¯”ä»¥å¾€æ›´å¿«äººä¸€æ­¥ !  <a href="https://github.com/algolia/github-awesome-autocomplete" target="_blank" rel="noopener">https://github.com/algolia/github-awesome-autocomplete</a></em></p><h3 id="Isometric-Contributions"><a href="#Isometric-Contributions" class="headerlink" title="Isometric Contributions"></a>Isometric Contributions</h3><p><em><code>Isometric Contributions</code>æ˜¯ä¸€æ¬¾å¯ä»¥å°†å†·å†°å†°çš„æ•°æ®è½¬åŒ–ä¸ºç”ŸåŠ¨å›¾å½¢çš„æ‰©å±•ç¨‹åº : å®ƒå¯ä»¥å°†ä½ æ¯å¤©çš„contributionsæ•°ç›®è½¬åŒ–ä¸ºé¢œè‰²ä¸ä¸€çš„ç«‹ä½“æŸ±çŠ¶å›¾,å¹¶ç»™å‡ºè‡ªå·±çš„ç»Ÿè®¡æ•°æ®. Contributionsæ•°ç›®ç”±å°‘åˆ°å¤šåˆ†åˆ«ä»¥é¢œè‰²é€æ¸å˜é‡çš„ç«‹ä½“æŸ±çŠ¶å›¾æ˜¾ç¤º,å®›å¦‚æ­å»ºä¸€åº§é«˜ä½é”™è½çš„åŸå¸‚ä¸€èˆ¬. è¿™ä¸ªæ’ä»¶å…è®¸ä½ åœ¨æ™®é€šçš„ Github è´¡çŒ®è¡¨ä¸ç­‰è·åƒç´ è‰ºæœ¯ç‰ˆä¹‹é—´åˆ‡æ¢,é™¤äº†â€å›¾å½¢åŒ–â€ä½ çš„æ•°æ®ä¹‹å¤–,å®ƒè¿˜å¯ä»¥å°†ä½ ä¸€å¹´å†…çš„æäº¤çŠ¶å†µ,ä»¥åŠâ€æœ€å¿™â€çš„ä¸€å¤©æäº¤æ•°ç›®ç»Ÿè®¡å‡ºæ¥ !  <a href="https://github.com/jasonlong/isometric-contributions" target="_blank" rel="noopener">https://github.com/jasonlong/isometric-contributions</a></em></p><p><em>æ›´å¤šä¼˜ç§€æ’ä»¶ä»‹ç»å¯å‚è€ƒ : <a href="https://www.cnblogs.com/fang8206/p/7484703.html" target="_blank" rel="noopener">https://www.cnblogs.com/fang8206/p/7484703.html</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶&quot;&gt;&lt;a href=&quot;#åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶&quot; class=&quot;headerlink&quot; title=&quot;åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶&quot;&gt;&lt;/a&gt;åŠ›æ¨å‡ æ¬¾ä¸ºGitHubé‡èº«å®šåˆ¶çš„æµè§ˆå™¨æ’ä»¶&lt;/
      
    
    </summary>
    
    
      <category term="GitHub" scheme="http://yoursite.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹</title>
    <link href="http://yoursite.com/2019/08/07/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84SpringBoot%E6%95%B4%E5%90%88Shiro%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/"/>
    <id>http://yoursite.com/2019/08/07/ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹/</id>
    <published>2019-08-07T04:14:55.000Z</published>
    <updated>2019-08-07T13:08:10.711Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹"><a href="#å­¦ä¹ ç¬”è®°-ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹" class="headerlink" title="å­¦ä¹ ç¬”è®° : ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹"></a>å­¦ä¹ ç¬”è®° : ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹</h2><p><em>å‰äº›æ—¥å­å†™äº†ä¸€ä¸ª<a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/basic%20web%20project%20with%20shiro" target="_blank" rel="noopener">æ•´åˆShiroçš„åŸºæœ¬Webæ¡ˆä¾‹</a>,ç„¶ååˆè¿›é˜¶åœ°å­¦ä¹ äº†SpringBootæ•´åˆShiroçš„åŸºæœ¬çŸ¥è¯†,ç»§è€Œä»Šå¤©æ€»ç»“ä¸€ä¸‹ : å†™ä¸€ä¸ªåŸºæœ¬çš„SpringBootæ•´åˆShiroå¹¶é›†æˆEhCacheçš„ç”¨æˆ·æƒé™ç®¡ç†æ¡ˆä¾‹~ è¯¥æ¡ˆä¾‹çš„ä»£ç ä»“åº“ : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro" target="_blank" rel="noopener">https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro</a></em></p><h3 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h3><p><em>æ•°æ®åº“ERå›¾å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹/shiro-learning-database-er.png" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•°æ®è¡¨ä¸­ç”¨æˆ·åŠå…¶åˆ†é…çš„æƒé™ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤º :</em></p><table><thead><tr><th style="text-align:center">è´¦æˆ·</th><th style="text-align:center">å¯†ç (MD5åŠ å¯†å‰)</th><th style="text-align:center">è§’è‰²</th><th style="text-align:center">æƒé™</th></tr></thead><tbody><tr><td style="text-align:center">admin</td><td style="text-align:center">demo</td><td style="text-align:center">admin</td><td style="text-align:center">*</td></tr><tr><td style="text-align:center">tea</td><td style="text-align:center">demo</td><td style="text-align:center">teacher</td><td style="text-align:center">teaListView:view , stuListView:view , stuListView:add , stuListView:edit</td></tr><tr><td style="text-align:center">stu</td><td style="text-align:center">demo</td><td style="text-align:center">student</td><td style="text-align:center">stuListView:view</td></tr></tbody></table><h3 id="èµ„æºæƒé™è®¾è®¡"><a href="#èµ„æºæƒé™è®¾è®¡" class="headerlink" title="èµ„æºæƒé™è®¾è®¡"></a>èµ„æºæƒé™è®¾è®¡</h3><p><em>springboot-shiro/src/main/java/pers/huangyuhui/ss/shiro/ShiroConfig.java : èµ„æºè¿‡æ»¤åŠå…¶æƒé™çš„é…ç½®ä¿¡æ¯å¦‚ä¸‹</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: é…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: securityManager</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-08-05 7:59 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: org.apache.shiro.spring.web.ShiroFilterFactoryBean</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">shiroFilterFactoryBean</span><span class="params">(SecurityManager securityManager)</span> </span>&#123;</span><br><span class="line">    ShiroFilterFactoryBean shiroFilterFactoryBean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line">    <span class="comment">//è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    shiroFilterFactoryBean.setSecurityManager(securityManager);</span><br><span class="line">    <span class="comment">//è®¾ç½®è‡ªå®šä¹‰è¿‡æ»¤å™¨</span></span><br><span class="line">    shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap());</span><br><span class="line">    <span class="comment">//è®¾ç½®ç”¨æˆ·ç™»å½•é¡µ,é»˜è®¤: http://localhost:8080/login.jsp</span></span><br><span class="line">    shiroFilterFactoryBean.setLoginUrl(<span class="string">"/loginView"</span>);</span><br><span class="line">    <span class="comment">//è®¾ç½®ç”¨æˆ·æœªæˆæƒæ“ä½œæç¤ºé¡µ</span></span><br><span class="line">    shiroFilterFactoryBean.setUnauthorizedUrl(<span class="string">"/unauthorizedView"</span>);</span><br><span class="line">    <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: è®¾ç½®èµ„æºçš„æƒé™æ§åˆ¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-08-05 8:31 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: java.util.Map</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Map&lt;String, String&gt; <span class="title">filterChainDefinitionMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Map&lt;String, String&gt; filterMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">//éœ€èº«ä»½è®¤è¯</span></span><br><span class="line">    filterMap.put(<span class="string">"/stuListView"</span>, <span class="string">"authc"</span>);</span><br><span class="line">    filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"authc"</span>);</span><br><span class="line">    <span class="comment">//æ— éœ€èº«ä»½è®¤è¯:é˜²æ­¢éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯æ“ä½œè¢«'filterMap.put("/**", "authc")'æ‹¦æˆª</span></span><br><span class="line">    filterMap.put(<span class="string">"/login"</span>, <span class="string">"anon"</span>);</span><br><span class="line">    <span class="comment">//æ³¨é”€è¿‡æ»¤å™¨:å…¶å…·ä½“çš„æ³¨é”€é€»è¾‘ä»£ç Shiroå·²ç»æ›¿æˆ‘ä»¬å®ç°äº†å“Ÿ</span></span><br><span class="line">    filterMap.put(<span class="string">"/logout"</span>, <span class="string">"logout"</span>);</span><br><span class="line">    <span class="comment">//è§’è‰²è¿‡æ»¤:éœ€è¦ç”¨æˆ·æ‹¥æœ‰'admin'è§’è‰²</span></span><br><span class="line">    filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"roles[admin]"</span>);</span><br><span class="line">    <span class="comment">//æƒé™è¿‡æ»¤:é™¤èº«ä»½è®¤è¯å¤–,è¿˜éœ€è¦ç”¨æˆ·æ‹¥æœ‰å¯¹stuListViewèµ„æºçš„viewæƒé™</span></span><br><span class="line">    filterMap.put(<span class="string">"/stuListView"</span>, <span class="string">"perms[stuListView:view]"</span>);</span><br><span class="line">    filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"perms[teaListView:view]"</span>);</span><br><span class="line">    <span class="comment">//æ‹¦æˆªéœ€è¦ç™»å½•(ç”¨æˆ·è®¤è¯)æ–¹å¯è®¿é—®çš„èµ„æº(ä¸€èˆ¬å°†/**æ”¾åœ¨æœ€ä¸‹è¾¹,ä¸ç„¶ä¼šå¯¼è‡´æ‰€æœ‰urléƒ½è¢«æ‹¦æˆªå“Ÿ)</span></span><br><span class="line">    filterMap.put(<span class="string">"/**"</span>, <span class="string">"authc"</span>);</span><br><span class="line">    <span class="keyword">return</span> filterMap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></p><h3 id="å‡­è¯åŠ å¯†è®¾è®¡"><a href="#å‡­è¯åŠ å¯†è®¾è®¡" class="headerlink" title="å‡­è¯åŠ å¯†è®¾è®¡"></a>å‡­è¯åŠ å¯†è®¾è®¡</h3><p><em>springboot-shiro/src/main/java/pers/huangyuhui/ss/shiro/ShiroConfig.java : ç”¨æˆ·å‡­è¯åŠ å¯†çš„é…ç½®ä¿¡æ¯å¦‚ä¸‹(ç›å€¼:ç”¨æˆ·å)</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: åˆå§‹åŒ–è‡ªå®šä¹‰Realm</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: credentialsMatcher</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-08-05 7:50 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: pers.huangyuhui.ss.shiro.UserRealm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> UserRealm <span class="title">userRealm</span><span class="params">(HashedCredentialsMatcher hashedCredentialsMatcher)</span> </span>&#123;</span><br><span class="line">    UserRealm userRealm = <span class="keyword">new</span> UserRealm();</span><br><span class="line">    <span class="comment">//è®¾ç½®å‡­è¯åŒ¹é…å™¨</span></span><br><span class="line">    userRealm.setCredentialsMatcher(hashedCredentialsMatcher);</span><br><span class="line">    <span class="keyword">return</span> userRealm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å“ˆå¸Œå¯†ç åŒ¹é…å™¨:æ¯”è¾ƒç”¨æˆ·ç™»å½•æ—¶è¾“å…¥çš„å¯†ç ,è·Ÿæ•°æ®åº“å¯†ç é…åˆç›å€¼saltè§£å¯†åæ˜¯å¦ä¸€è‡´</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2019-08-05 9:01 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: org.apache.shiro.authc.credential.HashedCredentialsMatcher</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> HashedCredentialsMatcher <span class="title">hashedCredentialsMatcher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    HashedCredentialsMatcher hashedCredentialsMatcher = <span class="keyword">new</span> HashedCredentialsMatcher();</span><br><span class="line">    hashedCredentialsMatcher.setHashAlgorithmName(<span class="string">"md5"</span>); <span class="comment">//æ•£åˆ—ç®—æ³•</span></span><br><span class="line">    hashedCredentialsMatcher.setHashIterations(<span class="number">3</span>); <span class="comment">//æ•£åˆ—çš„æ¬¡æ•°</span></span><br><span class="line">    hashedCredentialsMatcher.setStoredCredentialsHexEncoded(<span class="keyword">true</span>); <span class="comment">//é»˜è®¤æ˜¯true:Hexç¼–ç .false:Base64ç¼–ç </span></span><br><span class="line">    <span class="keyword">return</span> hashedCredentialsMatcher;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></p><p><em>springboot-shiro/src/main/java/pers/huangyuhui/ss/utils/SecurityUtils.java : å¯†ç åŠ å¯†é€»è¾‘å¦‚ä¸‹</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot-shiro</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: åŠ å¯†å·¥å…·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/5/2019-9:09 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//admin-pwd [source:demo+salt:admin+hashIterations:3] :  257e3b15d67a9127d230175e43118e40</span></span><br><span class="line">        <span class="comment">//tea-pwd [source:demo+salt:tea+hashIterations:3] : f97ccdcf125073d5f19bd3de0b67eb40</span></span><br><span class="line">        <span class="comment">//stu-pwd [source:demo+salt:stu+hashIterations:3] : e1a1c9a1340d179077086b5dbee621b4</span></span><br><span class="line">        String md5Pwd = <span class="keyword">new</span> SimpleHash(<span class="string">"md5"</span>, <span class="string">"demo"</span>, ByteSource.Util.bytes(<span class="string">"stu"</span>), <span class="number">3</span>).toHex();</span><br><span class="line">        System.out.println(md5Pwd);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Thymeleafæ•´åˆShiroæ ‡ç­¾"><a href="#Thymeleafæ•´åˆShiroæ ‡ç­¾" class="headerlink" title="Thymeleafæ•´åˆShiroæ ‡ç­¾"></a>Thymeleafæ•´åˆShiroæ ‡ç­¾</h3><p><em>springboot-shiro/src/main/java/pers/huangyuhui/ss/shiro/ShiroConfig.java : Thymeleafæ•´åˆShiroæ ‡ç­¾çš„é…ç½®å¦‚ä¸‹</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: é…ç½®ShiroDialect, ç”¨äºthymeleafå’Œshiroæ ‡ç­¾é…åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 6:37 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: at.pollux.thymeleaf.shiro.dialect.ShiroDialect</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroDialect <span class="title">shiroDialect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ShiroDialect();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Shiroé›†æˆEhCacheç¼“å­˜"><a href="#Shiroé›†æˆEhCacheç¼“å­˜" class="headerlink" title="Shiroé›†æˆEhCacheç¼“å­˜"></a>Shiroé›†æˆEhCacheç¼“å­˜</h3><p><em>springboot-shiro/src/main/java/pers/huangyuhui/ss/shiro/ShiroConfig.java : Shiroé›†æˆEhCacheçš„é…ç½®ä¿¡æ¯å¦‚ä¸‹</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: å®‰å…¨äº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: credentialsMatcher</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 7:53 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.web.mgt.DefaultWebSecurityManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SecurityManager <span class="title">securityManager</span><span class="params">(UserRealm userRealm, EhCacheManager ehCacheManager)</span> </span>&#123;</span><br><span class="line">        DefaultWebSecurityManager defaultWebSecurityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line">        <span class="comment">//å…³è”è‡ªå®šä¹‰realm</span></span><br><span class="line">        defaultWebSecurityManager.setRealm(userRealm);</span><br><span class="line">        <span class="comment">//å…³è”ç¼“å­˜ç®¡ç†</span></span><br><span class="line">        defaultWebSecurityManager.setCacheManager(ehCacheManager);</span><br><span class="line">        <span class="keyword">return</span> defaultWebSecurityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: è®¾ç½®ç¼“å­˜ç®¡ç†, ç¼“å­˜ç”¨æˆ·åŠå…¶æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-07 7:51 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.cache.ehcache.EhCacheManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EhCacheManager <span class="title">ehCacheManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ³¨æ„:myEhcacheå¯¹åº”ehcache-shiro.xmlä¸­çš„'&lt;ehcache name="myEhcache"&gt;'</span></span><br><span class="line">        CacheManager cacheManager = CacheManager.getCacheManager(<span class="string">"myEhcache"</span>);</span><br><span class="line">        <span class="keyword">if</span> (cacheManager == <span class="keyword">null</span>) &#123;</span><br><span class="line">            cacheManager = CacheManager.create();</span><br><span class="line">        &#125;</span><br><span class="line">        EhCacheManager ehCacheManager = <span class="keyword">new</span> EhCacheManager();</span><br><span class="line">        ehCacheManager.setCacheManager(cacheManager);</span><br><span class="line">        <span class="keyword">return</span> ehCacheManager;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ¡ˆä¾‹æˆªå±è§£æ"><a href="#æ¡ˆä¾‹æˆªå±è§£æ" class="headerlink" title="æ¡ˆä¾‹æˆªå±è§£æ"></a>æ¡ˆä¾‹æˆªå±è§£æ</h3><p><em>ç”¨æˆ·ç™»å½•é¡µ,è®¿é—®èµ„æºå‰å¿…é¡»å…ˆè¿›è¡Œç”¨æˆ·èº«ä»½è®¤è¯,è¯¦æƒ…å‚è€ƒèµ„æºæ‹¦æˆªå™¨ä¸­çš„é…ç½®ä¿¡æ¯å“Ÿ</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹/springboot-shiro-ç”¨æˆ·ç™»å½•é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>è‹¥è¦è®¿é—®æ•™å¸ˆ / å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µ,éœ€è¦ç”¨æˆ·æ‹¥æœ‰<code>teaListView:view / stuListView:view</code>æƒé™</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹/springboot-shiro-ç”¨æˆ·ä¸»é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç®¡ç†å‘˜( admin )æ‹¥æœ‰è®¿é—®èµ„æºçš„æ‰€æœ‰æƒé™( </em> ),æ‰€ä»¥å¯ä»¥æ“æ§å­¦ç”Ÿä¿¡æ¯é¡µé¢ä¸­çš„ä»»ä½•æ“ä½œ*<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹/springboot-shiro-[admin]-å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç®¡ç†å‘˜( admin )æ‹¥æœ‰è®¿é—®èµ„æºçš„æ‰€æœ‰æƒé™( </em> ),æ‰€ä»¥å¯ä»¥æ“æ§æ•™å¸ˆä¿¡æ¯é¡µé¢ä¸­çš„ä»»ä½•æ“ä½œ*<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹/springboot-shiro-[admin]-æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•™å¸ˆ( tea )æ‹¥æœ‰å­¦ç”Ÿé¡µé¢çš„<code>stuListView:view , stuListView:add , stuListView:edit</code>æƒé™,æ‰€ä»¥åˆ é™¤ä¿¡æ¯æ“ä½œä¸ºä¸å¯è§</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹/springboot-shiro-[tea]-å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•™å¸ˆ( tea )ä»…æ‹¥æœ‰æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µé¢çš„<code>teaListView:view</code>æƒé™,æ‰€ä»¥å¢,åˆ ,æ”¹,æ“ä½œä¸ºä¸å¯è§çŠ¶æ€</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹/springboot-shiro-[tea]-æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>å­¦ç”Ÿ( stu )ä»…æ‹¥æœ‰å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µé¢çš„<code>stuListView:view</code>æƒé™,æ‰€ä»¥å¢,åˆ ,æ”¹,æ“ä½œä¸ºä¸å¯è§çŠ¶æ€</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹/springboot-shiro-[stu]-å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>å­¦ç”Ÿ( stu )æ²¡æœ‰è®¿é—®æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µé¢çš„æƒé™,æ‰€ä»¥è¢«èµ„æºæ‹¦æˆªå™¨æ‰€æ‹¦æˆªç»§è€Œè¿›å…¥æŒ‡å®šçš„â€™unauthorized.htmlâ€™é¡µé¢</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹/springboot-shiro-[stu]-æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ•°æ®åº“è®¾è®¡å‚è€ƒäº†(éå¸¸æ„Ÿè°¢) : <a href="https://www.jianshu.com/p/7716951f4d7f" target="_blank" rel="noopener">https://www.jianshu.com/p/7716951f4d7f</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆ
      
    
    </summary>
    
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
      <category term="Thymeleaf" scheme="http://yoursite.com/tags/Thymeleaf/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
      <category term="EhCache" scheme="http://yoursite.com/tags/EhCache/"/>
    
  </entry>
  
  <entry>
    <title>è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶</title>
    <link href="http://yoursite.com/2019/08/07/%E8%AF%A6%E8%A7%A3Shiro%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/"/>
    <id>http://yoursite.com/2019/08/07/è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶/</id>
    <published>2019-08-07T04:12:16.000Z</published>
    <updated>2019-08-08T03:31:13.837Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶"><a href="#å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶" class="headerlink" title="å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶"></a>å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p><em>Shiroä½œä¸ºä¸€ä¸ªå¼€æºçš„æƒé™æ¡†æ¶,å…¶ç»„ä»¶åŒ–çš„è®¾è®¡æ€æƒ³ä½¿å¾—å¼€å‘è€…å¯ä»¥æ ¹æ®å…·ä½“ä¸šåŠ¡åœºæ™¯çµæ´»åœ°å®ç°æƒé™ç®¡ç†æ–¹æ¡ˆ,æƒé™ç²’åº¦çš„æ§åˆ¶éå¸¸æ–¹ä¾¿,Shiroæ¡†æ¶çš„æ¶æ„å›¾å¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶/Shiro-framework-æ¶æ„å›¾.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ™°åœ°çœ‹åˆ°,<code>CacheManager</code>ä¹Ÿæ˜¯Shiroæ¶æ„ä¸­çš„ä¸»è¦ç»„ä»¶ä¹‹ä¸€,Shiroæ­£æ˜¯é€šè¿‡CacheManagerç»„ä»¶å®ç°æƒé™æ•°æ®ç¼“å­˜.<br><code>å½“æƒé™ä¿¡æ¯å­˜æ”¾åœ¨æ•°æ®åº“ä¸­æ—¶,å¯¹äºæ¯æ¬¡å‰ç«¯çš„è®¿é—®è¯·æ±‚éƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢</code>. ç‰¹åˆ«æ˜¯åœ¨å¤§é‡ä½¿ç”¨shiroçš„jspæ ‡ç­¾çš„åœºæ™¯ä¸‹,å¯¹åº”å‰ç«¯çš„ä¸€ä¸ªé¡µé¢è®¿é—®è¯·æ±‚ä¼šåŒæ—¶å‡ºç°å¾ˆå¤šçš„æƒé™æŸ¥è¯¢æ“ä½œ,è¿™å¯¹äºæƒé™ä¿¡æ¯å˜åŒ–ä¸æ˜¯å¾ˆé¢‘ç¹çš„åœºæ™¯,æ¯æ¬¡å‰ç«¯é¡µé¢è®¿é—®éƒ½è¿›è¡Œå¤§é‡çš„æƒé™æ•°æ®åº“æŸ¥è¯¢æ˜¯éå¸¸ä¸ç»æµçš„! å› æ­¤éå¸¸æœ‰å¿…è¦å¯¹æƒé™æ•°æ®ä½¿ç”¨ç¼“å­˜æ–¹æ¡ˆ~</em></p><h3 id="Shiroæƒé™æ•°æ®çš„ç¼“å­˜æ–¹å¼"><a href="#Shiroæƒé™æ•°æ®çš„ç¼“å­˜æ–¹å¼" class="headerlink" title="Shiroæƒé™æ•°æ®çš„ç¼“å­˜æ–¹å¼"></a>Shiroæƒé™æ•°æ®çš„ç¼“å­˜æ–¹å¼</h3><p><em>å…³äºshiroæƒé™æ•°æ®çš„ç¼“å­˜æ–¹å¼,å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±» :</em> </p><ol><li><em>å°†æƒé™æ•°æ®ç¼“å­˜åˆ°é›†ä¸­å¼å­˜å‚¨ä¸­é—´ä»¶ä¸­,æ¯”å¦‚redisæˆ–è€…memcached</em></li><li><em>å°†æƒé™æ•°æ®ç¼“å­˜åˆ°æœ¬åœ°</em></li></ol><h3 id="å¦‚ä½•åœ¨Shiroä¸­ä½¿ç”¨ç¼“å­˜"><a href="#å¦‚ä½•åœ¨Shiroä¸­ä½¿ç”¨ç¼“å­˜" class="headerlink" title="å¦‚ä½•åœ¨Shiroä¸­ä½¿ç”¨ç¼“å­˜"></a>å¦‚ä½•åœ¨Shiroä¸­ä½¿ç”¨ç¼“å­˜</h3><p><em>æ ¹æ®Shiroå®˜æ–¹çš„è¯´æ³•,è™½ç„¶ç¼“å­˜åœ¨æƒé™æ¡†æ¶ä¸­éå¸¸é‡è¦,ä½†æ˜¯å¦‚æœå®ç°ä¸€å¥—å®Œæ•´çš„ç¼“å­˜æœºåˆ¶ä¼šä½¿å¾—Shiroåç¦»äº†æ ¸å¿ƒçš„åŠŸèƒ½(è®¤è¯å’Œæˆæƒ). å› æ­¤Shiroåªæä¾›äº†ä¸€ä¸ªå¯ä»¥æ”¯æŒå…·ä½“ç¼“å­˜å®ç°(å¦‚ : <code>Hazelcast</code>, <code>Ehcache</code>, <code>OSCache</code>, <code>Terracotta</code>, <code>Coherence</code>, <code>GigaSpaces</code>, <code>JBossCache</code> ç­‰)çš„æŠ½è±¡APIæ¥å£,è¿™æ ·å°±å…è®¸Shiroç”¨æˆ·æ ¹æ®è‡ªå·±çš„éœ€æ±‚çµæ´»åœ°é€‰æ‹©å…·ä½“çš„CacheManager,å½“ç„¶,å…¶å®Shiroä¹Ÿè‡ªå¸¦äº†ä¸€ä¸ªæœ¬åœ°å†…å­˜CacheManager(<code>org.apache.shiro.cache.MemoryConstrainedCacheManager</code>),Shiroçš„ç¼“å­˜ç»„ä»¶ç±»å›¾å¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶/Shiro-ç¼“å­˜ç»„ä»¶ç±»å›¾.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>ä»Shiroç¼“å­˜ç»„ä»¶ç±»å›¾å¯ä»¥çœ‹åˆ°,Shiroæä¾›çš„ç¼“å­˜æŠ½è±¡APIæ¥å£æ­£æ˜¯ : <code>org.apache.shiro.cache.CacheManager</code>,é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•é…ç½®å’Œä½¿ç”¨CacheManagerå‘¢ ? å¦‚ä¸‹æˆ‘ä»¬ä»¥ä½¿ç”¨Shiroæä¾›çš„<code>MemoryConstrainedCacheManager</code>ç»„ä»¶ä¸ºä¾‹è¿›è¡Œè¯´æ˜. æˆ‘ä»¬çŸ¥é“,SecurityManageræ˜¯Shiroçš„æ ¸å¿ƒæ§åˆ¶å™¨,æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…¶ç±»å›¾ :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶/Shiro-SecurityManagerç±»å›¾.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em><code>org.apache.shiro.mgt.CachingSecurityManager</code>æ˜¯Shiroä¸­SecurityManageræ¥å£çš„åŸºç¡€æŠ½è±¡ç±»,æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…¶æºç ç»“æ„(å¦‚ä¸‹æ‰€ç¤º),<code>å‘ç°åœ¨CachingSecurityManagerä¸­å­˜åœ¨ä¸€ä¸ªCacheManagerç±»å‹çš„æˆå‘˜å˜é‡</code></em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">CachingSecurityManager</span> <span class="keyword">implements</span> <span class="title">SecurityManager</span>, <span class="title">Destroyable</span>, <span class="title">CacheManagerAware</span>, <span class="title">EventBusAware</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The CacheManager to use to perform caching operations to enhance performance.  Can be null.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> CacheManager cacheManager;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The EventBus to use to use to publish and receive events of interest during Shiro's lifecycle.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.3</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> EventBus eventBus;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Default no-arg constructor that will automatically attempt to initialize a default cacheManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CachingSecurityManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//use a default event bus:</span></span><br><span class="line">        setEventBus(<span class="keyword">new</span> DefaultEventBus());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>å¦å¤–,æ¥å£<code>org.apache.shiro.realm.Realm</code>å®šä¹‰äº†æƒé™æ•°æ®çš„å­˜å‚¨æ–¹å¼,å…¶ç±»å›¾å¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/07/è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶/Shiro-Realmç±»å›¾.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>æ˜¾ç„¶,<code>org.apache.shiro.realm.CachingRealm</code>æ˜¯Shiroä¸­Realmæ¥å£çš„åŸºç¡€å®ç°ç±»,æˆ‘ä»¬åŒæ ·æ¥çœ‹ä¸€ä¸‹å…¶æºç ç»“æ„(å¦‚ä¸‹æ‰€ç¤º),<code>å‘ç°åŒæ ·åœ¨CachingRealmä¹Ÿå­˜åœ¨ä¸€ä¸ªCacheManagerç±»å‹çš„æˆå‘˜å˜é‡</code></em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">CachingRealm</span> <span class="keyword">implements</span> <span class="title">Realm</span>, <span class="title">Nameable</span>, <span class="title">CacheManagerAware</span>, <span class="title">LogoutAware</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(CachingRealm.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//TODO - complete JavaDoc</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicInteger INSTANCE_COUNT = <span class="keyword">new</span> AtomicInteger();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*--------------------------------------------</span></span><br><span class="line"><span class="comment">    |    I N S T A N C E   V A R I A B L E S    |</span></span><br><span class="line"><span class="comment">    ============================================*/</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> cachingEnabled;</span><br><span class="line">    <span class="keyword">private</span> CacheManager cacheManager;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Default no-argument constructor that defaults</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@link</span> #isCachingEnabled() cachingEnabled&#125; (for general caching) to &#123;<span class="doctag">@code</span> true&#125; and sets a</span></span><br><span class="line"><span class="comment">     * default &#123;<span class="doctag">@link</span> #getName() name&#125; based on the class name.</span></span><br><span class="line"><span class="comment">     * &lt;p/&gt;</span></span><br><span class="line"><span class="comment">     * Note that while in general, caching may be enabled by default, subclasses have control over</span></span><br><span class="line"><span class="comment">     * if specific caching is enabled.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CachingRealm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cachingEnabled = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.name = getClass().getName() + <span class="string">"_"</span> + INSTANCE_COUNT.getAndIncrement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p><em>ä»ä»¥ä¸Šåˆ†ææˆ‘ä»¬çŸ¥é“Shiroæ”¯æŒåœ¨2ä¸ªåœ°æ–¹å®šä¹‰ç¼“å­˜ç®¡ç†å™¨,æ—¢å¯ä»¥åœ¨SecurityManagerä¸­å®šä¹‰,ä¹Ÿå¯ä»¥åœ¨Realmä¸­å®šä¹‰,ä»»é€‰å…¶ä¸€å³å¯. é€šå¸¸æˆ‘ä»¬éƒ½ä¼šè‡ªå®šä¹‰Realmå®ç°,ä¾‹å¦‚å°†æƒé™æ•°æ®å­˜æ”¾åœ¨æ•°æ®åº“ä¸­,é‚£ä¹ˆåœ¨Realmå®ç°ä¸­å®šä¹‰ç¼“å­˜ç®¡ç†å™¨å†åˆé€‚ä¸è¿‡äº†</em></p><p><em>é‚£ä¹ˆæˆ‘ä»¬ä¸ç¦è¦é—®äº† :</em></p><ul><li>ç¬¬ä¸€ : ä¸ºä»€ä¹ˆShiroè¦è®¾è®¡æˆæ—¢å¯ä»¥åœ¨Realm,ä¹Ÿå¯ä»¥åœ¨SecurityManagerä¸­è®¾ç½®ç¼“å­˜ç®¡ç†å™¨å‘¢ ?</li><li>ç¬¬äºŒ : åˆ†åˆ«åœ¨Realmå’ŒSecurityManagerå®šä¹‰çš„ç¼“å­˜ç®¡ç†å™¨,ä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«æˆ–è”ç³»å— ?</li></ul><p><em>æ€€ç€ç§ç§ç–‘é—®è®©æˆ‘ä»¬è¿½è¸ªä¸€ä¸‹<code>org.apache.shiro.mgt.RealmSecurityManae</code>çš„æºç å®ç°,å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">RealmSecurityManager</span> <span class="keyword">extends</span> <span class="title">CachingSecurityManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Sets the internal &#123;<span class="doctag">@link</span> #getCacheManager CacheManager&#125; on any internal configured</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@link</span> #getRealms Realms&#125; that implement the &#123;<span class="doctag">@link</span> org.apache.shiro.cache.CacheManagerAware CacheManagerAware&#125; interface.</span></span><br><span class="line"><span class="comment">     * &lt;p/&gt;</span></span><br><span class="line"><span class="comment">     * This method is called after setting a cacheManager on this securityManager via the</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@link</span> #setCacheManager(org.apache.shiro.cache.CacheManager) setCacheManager&#125; method to allow it to be propagated</span></span><br><span class="line"><span class="comment">     * down to all the internal Realms that would need to use it.</span></span><br><span class="line"><span class="comment">     * &lt;p/&gt;</span></span><br><span class="line"><span class="comment">     * It is also called after setting one or more realms via the &#123;<span class="doctag">@link</span> #setRealm setRealm&#125; or</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@link</span> #setRealms setRealms&#125; methods to allow these newly available realms to be given the cache manager</span></span><br><span class="line"><span class="comment">     * already in use.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">applyCacheManagerToRealms</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        CacheManager cacheManager = getCacheManager();</span><br><span class="line">        Collection&lt;Realm&gt; realms = getRealms();</span><br><span class="line">        <span class="keyword">if</span> (cacheManager != <span class="keyword">null</span> &amp;&amp; realms != <span class="keyword">null</span> &amp;&amp; !realms.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Realm realm : realms) &#123;</span><br><span class="line">                <span class="keyword">if</span> (realm <span class="keyword">instanceof</span> CacheManagerAware) &#123;</span><br><span class="line">                    ((CacheManagerAware) realm).setCacheManager(cacheManager);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>è¿™ä¸‹æç„¶å¤§æ‚Ÿäº†å§ ! <code>ä»æºç å¯ä»¥åˆ†æå‡ºå…¶å®åœ¨SecurityManagerä¸­è®¾ç½®çš„CacheManageréƒ½ä¼šç»™Realmä½¿ç”¨,å³çœŸæ­£ä½¿ç”¨CacheManagerçš„ç»„ä»¶æ˜¯Realm</code></em></p><p><em>ğŸ™æ‘˜è‡ª(è·ç›ŠåŒªæµ…,éå¸¸æ„Ÿè°¢) : <a href="https://www.cnblogs.com/nuccch/p/8044226.html" target="_blank" rel="noopener">https://www.cnblogs.com/nuccch/p/8044226.html</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç¼“å­˜æœºåˆ¶&lt;/h2&gt;&lt;h3 id=&quot;ç®€
      
    
    </summary>
    
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootä¸­Shiroé›†æˆEhCache</title>
    <link href="http://yoursite.com/2019/08/07/SpringBoot%E4%B8%ADShiro%E9%9B%86%E6%88%90EhCache/"/>
    <id>http://yoursite.com/2019/08/07/SpringBootä¸­Shiroé›†æˆEhCache/</id>
    <published>2019-08-07T04:10:32.000Z</published>
    <updated>2019-08-08T06:16:06.176Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache"><a href="#å­¦ä¹ ç¬”è®°-SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache" class="headerlink" title="å­¦ä¹ ç¬”è®° : SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache"></a>å­¦ä¹ ç¬”è®° : SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache</h2><p><em>ç¤ºä¾‹ç¨‹åºæ‘˜è‡ª : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹</a></em></p><h3 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h3><p><em>Shiro-learning/spring boot project with shiro/springboot-shiro/pom.xml</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiro --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Ehcache --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="åˆ›å»ºEhCacheç¼“å­˜é…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºEhCacheç¼“å­˜é…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºEhCacheç¼“å­˜é…ç½®æ–‡ä»¶"></a>åˆ›å»ºEhCacheç¼“å­˜é…ç½®æ–‡ä»¶</h3><p><em>Shiro-learning/spring boot project with shiro/springboot-shiro/src/main/resources/ehcache-shiro.xml</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">"http://ehcache.org/ehcache.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">updateCheck</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">name</span>=<span class="string">"myEhcache"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">"java.io.tmpdir"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æˆæƒä¿¡æ¯ç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"authorizationCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- èº«ä»½ä¿¡æ¯ç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"authenticationCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Sessionç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"activeSessionCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜åŠå°æ—¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"halfHour"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜ä¸€å°æ—¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"hour"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"3600"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"3600"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜ä¸€å¤© --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"oneDay"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"86400"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"86400"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">         name: ç¼“å­˜åç§°ã€‚</span></span><br><span class="line"><span class="comment">         maxElementsInMemory: ç¼“å­˜æœ€å¤§ä¸ªæ•°</span></span><br><span class="line"><span class="comment">         eternal: å¯¹è±¡æ˜¯å¦æ°¸ä¹…æœ‰æ•ˆ,ä¸€ä½†è®¾ç½®äº†,timeoutå°†ä¸èµ·ä½œç”¨</span></span><br><span class="line"><span class="comment">         timeToIdleSeconds: è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰çš„å…è®¸é—²ç½®æ—¶é—´(å•ä½ï¼šç§’). ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨,å¯é€‰å±æ€§,é»˜è®¤å€¼æ˜¯0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">         timeToLiveSeconds: è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰å…è®¸å­˜æ´»æ—¶é—´(å•ä½ï¼šç§’). æœ€å¤§æ—¶é—´ä»‹äºåˆ›å»ºæ—¶é—´å’Œå¤±æ•ˆæ—¶é—´ä¹‹é—´. ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨,é»˜è®¤æ˜¯0,ä¹Ÿå°±æ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">         overflowToDisk: å½“å†…å­˜ä¸­å¯¹è±¡æ•°é‡è¾¾åˆ°maxElementsInMemoryæ—¶,Ehcacheå°†ä¼šå¯¹è±¡å†™åˆ°ç£ç›˜ä¸­</span></span><br><span class="line"><span class="comment">         diskSpoolBufferSizeMB: è¿™ä¸ªå‚æ•°è®¾ç½®DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°,é»˜è®¤æ˜¯30MB. æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">         maxElementsOnDisk: ç¡¬ç›˜æœ€å¤§ç¼“å­˜ä¸ªæ•°</span></span><br><span class="line"><span class="comment">         diskPersistent: æ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ® Whether the disk store persists between restarts of the Virtual Machine. The default value is false.</span></span><br><span class="line"><span class="comment">         diskExpiryThreadIntervalSeconds: ç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”,é»˜è®¤æ˜¯120ç§’</span></span><br><span class="line"><span class="comment">         memoryStoreEvictionPolicy: å½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶,Ehcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜. é»˜è®¤ç­–ç•¥æ˜¯LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨). ä½ å¯ä»¥è®¾ç½®ä¸ºFIFO(å…ˆè¿›å…ˆå‡º)æˆ–æ˜¯LFU(è¾ƒå°‘ä½¿ç”¨)</span></span><br><span class="line"><span class="comment">         clearOnFlush: å†…å­˜æ•°é‡æœ€å¤§æ—¶æ˜¯å¦æ¸…é™¤</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span> <span class="attr">name</span>=<span class="string">"defaultCache"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToIdleSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToLiveSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskPersistent</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">"120"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">"LRU"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="é…ç½®Shiroç¼“å­˜"><a href="#é…ç½®Shiroç¼“å­˜" class="headerlink" title="é…ç½®Shiroç¼“å­˜"></a>é…ç½®Shiroç¼“å­˜</h3><p><em>Shiro-learning/spring boot project with shiro/springboot-shiro/src/main/java/pers/huangyuhui/ss/shiro/ShiroConfig.java</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot-shiro</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: Shiroé…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/5/2019-7:41 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: å®‰å…¨äº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: credentialsMatcher</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 7:53 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.web.mgt.DefaultWebSecurityManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SecurityManager <span class="title">securityManager</span><span class="params">(UserRealm userRealm, EhCacheManager ehCacheManager)</span> </span>&#123;</span><br><span class="line">        DefaultWebSecurityManager defaultWebSecurityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line">        <span class="comment">//å…³è”è‡ªå®šä¹‰realm</span></span><br><span class="line">        defaultWebSecurityManager.setRealm(userRealm);</span><br><span class="line">        <span class="comment">//å…³è”ç¼“å­˜ç®¡ç†</span></span><br><span class="line">        defaultWebSecurityManager.setCacheManager(ehCacheManager);</span><br><span class="line">        <span class="keyword">return</span> defaultWebSecurityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: è®¾ç½®ç¼“å­˜ç®¡ç†å™¨, ç¼“å­˜ç”¨æˆ·åŠå…¶æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-07 7:51 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.cache.ehcache.EhCacheManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EhCacheManager <span class="title">ehCacheManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ³¨æ„:myEhcacheå¯¹åº”ehcache-shiro.xmlä¸­çš„'&lt;ehcache name="myEhcache"&gt;'</span></span><br><span class="line">        CacheManager cacheManager = CacheManager.getCacheManager(<span class="string">"myEhcache"</span>);</span><br><span class="line">        <span class="keyword">if</span> (cacheManager == <span class="keyword">null</span>) &#123;</span><br><span class="line">            cacheManager = CacheManager.create();</span><br><span class="line">        &#125;</span><br><span class="line">        EhCacheManager ehCacheManager = <span class="keyword">new</span> EhCacheManager();</span><br><span class="line">        ehCacheManager.setCacheManager(cacheManager);</span><br><span class="line">        <span class="keyword">return</span> ehCacheManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><p><em>å¦‚æœä½¿ç”¨çš„EhCacheç‰ˆæœ¬è¶…è¿‡äº†2.5.0,é‚£ä¹ˆ<code>&lt;ehcache name=&quot;myEhcache&quot;&gt;</code>çš„é…ç½®å°±æ˜¾å¾—éå¸¸é‡è¦äº†,ä¸ç„¶EhCacheä¼šè‡ªåŠ¨åŠ è½½é»˜è®¤çš„åå­— : <code>_default_</code>,ä¸”EhCache2.5ä»¥ååªå…è®¸åˆ›å»ºå•ä¾‹çš„CacheManager(ç¼“å­˜ç®¡ç†å™¨),æ‰€ä»¥åº”æ³¨æ„é¿å…é‡å¤åŠ è½½CacheManagerå“Ÿ : åˆ›å»ºehCacheManagerçš„æ—¶å…ˆåˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨cacheManager,æ²¡æœ‰çš„æƒ…å†µä¸‹å†è¿›è¡Œåˆ›å»º,åˆ¤æ–­çš„å…³é”®ä¸º<code>ehcache-shiro.xml</code>(ç¼“å­˜é…ç½®æ–‡ä»¶)ä¸­é…ç½®çš„<code>name</code>å±æ€§,å¯é€šè¿‡è¯¥å±æ€§æ¥åˆ¤æ–­cacheManageræ˜¯å¦åŠ è½½äº†,ç¤ºä¾‹ä»£ç å¦‚ä¸‹ :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CacheManager cacheManager = CacheManager.getCacheManager(<span class="string">"myEhcache"</span>);</span><br><span class="line">    <span class="keyword">if</span> (cacheManager == <span class="keyword">null</span>) &#123;</span><br><span class="line">        cacheManager = CacheManager.create();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><em>å€Ÿé‰´(éå¸¸æ„Ÿè°¢) : <a href="https://blog.csdn.net/Maslii/article/details/82380568" target="_blank" rel="noopener">https://blog.csdn.net/Maslii/article/details/82380568</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-SpringBooté¡¹ç›®ä¸­Shiroé›†æˆEhCache&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : SpringBooté¡¹ç›®ä¸­Shiroé›†æˆE
      
    
    </summary>
    
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
      <category term="EhCache" scheme="http://yoursite.com/tags/EhCache/"/>
    
  </entry>
  
  <entry>
    <title>è¯¦è§£Intellij IDEAä¸­çš„DEBUGåŠŸèƒ½</title>
    <link href="http://yoursite.com/2019/08/06/%E8%AF%A6%E8%A7%A3Intellij-IDEA%E4%B8%AD%E7%9A%84DEBUG%E5%8A%9F%E8%83%BD/"/>
    <id>http://yoursite.com/2019/08/06/è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½/</id>
    <published>2019-08-06T07:21:34.000Z</published>
    <updated>2019-08-06T13:36:55.769Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½"><a href="#å­¦ä¹ ç¬”è®°-è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½" class="headerlink" title="å­¦ä¹ ç¬”è®° : è¯¦è§£Intellij IDEAä¸­çš„DEBUGåŠŸèƒ½"></a>å­¦ä¹ ç¬”è®° : è¯¦è§£Intellij IDEAä¸­çš„DEBUGåŠŸèƒ½</h2><p><em><code>Debug</code>ç”¨äºè¿½è¸ªä»£ç çš„æ‰§è¡Œæµç¨‹,å…¶ä¸»è¦ç”¨é€”å¦‚ä¸‹ :</em></p><ol><li><em>è‹¥ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸,å¯é€šè¿‡å¯ç”¨Debugæ¨¡å¼æ¥åˆ†æç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å„ä¸ªå‚æ•°çš„å˜åŒ–,ç»§è€Œå®šä½åˆ°å¼‚å¸¸å‘ç”Ÿçš„ä½ç½®</em></li><li><em>é€šè¿‡å¯ç”¨Debugæ¨¡å¼æ¥è·Ÿè¸ªä»£ç çš„è¿è¡Œæµç¨‹,ç»§è€Œå»å­¦ä¹ ä¸€äº›ç¬¬ä¸‰æ–¹æ¡†æ¶çš„æºç </em></li></ol><h3 id="åŸºæœ¬ç”¨æ³•-amp-å¿«æ·é”®"><a href="#åŸºæœ¬ç”¨æ³•-amp-å¿«æ·é”®" class="headerlink" title="åŸºæœ¬ç”¨æ³•&amp;å¿«æ·é”®"></a>åŸºæœ¬ç”¨æ³•&amp;å¿«æ·é”®</h3><p><em>IDEAç‰ˆæœ¬ : Intellij IDEA 2019.1.3-UItimate Edition</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/06/è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½/IDEA-debug-view-1.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>å¦‚ä¸Šdebugè§†å›¾,ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡è®²è§£ :</em></p><ol><li><em><code>Show Execution Point (Alt + F10)</code> : å¦‚æœä½ çš„å…‰æ ‡åœ¨å…¶å®ƒè¡Œæˆ–å…¶å®ƒé¡µé¢,ç‚¹å‡»è¿™ä¸ªæŒ‰é’®å¯è·³è½¬åˆ°å½“å‰ä»£ç æ‰§è¡Œçš„è¡Œ</em></li><li><em><code>Step Over (F6)</code> : æ­¥è¿‡,ä¸€è¡Œä¸€è¡Œåœ°å¾€ä¸‹èµ°,å¦‚æœè¿™ä¸€è¡Œä¸Šæœ‰æ–¹æ³•,å¹¶ä¸ä¼šè¿›å…¥</em></li><li><em><code>Step Into (F5)</code> : æ­¥å…¥,å¦‚æœå½“å‰è¡Œæœ‰æ–¹æ³•,å¯ä»¥è¿›å…¥æ–¹æ³•å†…éƒ¨,ä¸€èˆ¬ç”¨äºè¿›å…¥è‡ªå®šä¹‰æ–¹æ³•å†…,ä¸ä¼šè¿›å…¥å®˜æ–¹ç±»åº“çš„æ–¹æ³•</em></li><li><em><code>Force Step Into (Alt + Shift + F7)</code> : å¼ºåˆ¶æ­¥å…¥,èƒ½è¿›å…¥ä»»ä½•æ–¹æ³•,æŸ¥çœ‹åº•å±‚æºç çš„æ—¶å€™å¯ä»¥ç”¨è¿™ä¸ªè¿›å…¥å®˜æ–¹ç±»åº“çš„æ–¹æ³•</em></li><li><em><code>Step Out (F7)</code> : æ­¥å‡º,ä»æ­¥å…¥çš„æ–¹æ³•å†…é€€å‡ºåˆ°æ–¹æ³•è°ƒç”¨å¤„,æ­¤æ—¶æ–¹æ³•å·²æ‰§è¡Œå®Œæ¯•,åªæ˜¯è¿˜æ²¡æœ‰å®Œæˆèµ‹å€¼</em></li><li><em><code>Drop Frame (é»˜è®¤æ— )</code> : å›é€€æ–­ç‚¹,åé¢ç« èŠ‚è¯¦ç»†è¯´æ˜</em></li><li><em><code>Run to Cursor (Ctrl + R)</code> : è¿è¡Œåˆ°å…‰æ ‡å¤„,ä½ å¯ä»¥å°†å…‰æ ‡å®šä½åˆ°ä½ éœ€è¦æŸ¥çœ‹çš„é‚£ä¸€è¡Œ,ç„¶åä½¿ç”¨è¿™ä¸ªåŠŸèƒ½,ä»£ç ä¼šè¿è¡Œè‡³å…‰æ ‡è¡Œ,è€Œä¸éœ€è¦æ‰“æ–­ç‚¹å“Ÿ</em></li><li><em><code>Evaluate Expression (Ctrl + U)</code> : è®¡ç®—è¡¨è¾¾å¼,åé¢ç« èŠ‚è¯¦ç»†è¯´æ˜</em></li></ol><p><em>ä»å·¦åˆ°å³ä¾æ¬¡è®²è§£ :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/06/è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½/IDEA-debug-view-2.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>å¦‚ä¸Šdebugè§†å›¾,ä»å·¦åˆ°å³ä¾æ¬¡è®²è§£ :</em></p><ol><li><em><code>Rerun &#39;xxx&#39;(Ctrl + F11)</code> : é‡æ–°è¿è¡Œç¨‹åº,ä¼šå…³é—­æœåŠ¡åé‡æ–°å¯åŠ¨ç¨‹åº</em></li><li><em><code>Update &#39;xxx&#39; application (Ctrl + F10)</code> : æ›´æ–°ç¨‹åº,ä¸€èˆ¬åœ¨ä½ çš„ä»£ç æœ‰æ”¹åŠ¨åå¯æ‰§è¡Œè¿™ä¸ªåŠŸèƒ½. è€Œè¿™ä¸ªåŠŸèƒ½å¯¹åº”çš„æ“ä½œåˆ™æ˜¯åœ¨æœåŠ¡é…ç½®é‡Œ,ä¸€èˆ¬é…åˆçƒ­éƒ¨ç½²æ’ä»¶ä¼šæ›´å¥½ç”¨,å¦‚JRebel,è¿™æ ·å°±ä¸ç”¨æ¯æ¬¡æ›´æ”¹ä»£ç åè¿˜è¦å»é‡æ–°å¯åŠ¨æœåŠ¡å•¦</em></li><li><em><code>Resume Program (F8)</code> : æ¢å¤ç¨‹åº,æ¯”å¦‚ä½ åœ¨ç¬¬20è¡Œå’Œ25è¡Œæœ‰ä¸¤ä¸ªæ–­ç‚¹,å½“å‰è¿è¡Œè‡³ç¬¬20è¡Œæ—¶æŒ‰F9,åˆ™è¿è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹(å³ç¬¬25è¡Œ),å†æŒ‰F9åˆ™è¿è¡Œå®Œæ•´ä¸ªæµç¨‹,å› ä¸ºåé¢å·²ç»æ²¡æœ‰æ–­ç‚¹å’¯</em></li><li><em><code>Pause Program</code> : æš‚åœç¨‹åº,å¯ç”¨Debug</em></li><li><em><code>Stop &#39;xxx&#39; (Ctrl + F2)</code> : è¿ç»­æŒ‰ä¸¤ä¸‹ä¼šå…³é—­ç¨‹åº,æœ‰æ—¶å€™ä½ ä¼šå‘ç°å…³é—­æœåŠ¡å†å¯åŠ¨æ—¶,æŠ¥ç«¯å£è¢«å ç”¨,è¿™æ˜¯å› ä¸ºæ²¡å®Œå…¨å…³é—­æœåŠ¡çš„åŸå› ,è¿™æ—¶å°±éœ€è¦ä½ æŸ¥æ€æŒ‡å®šçš„JVMè¿›ç¨‹å•¦</em></li><li><em><code>View Breakpoints (Ctrl + Shift + F8)</code> : æŸ¥çœ‹æ‰€æœ‰æ–­ç‚¹,åé¢ç« èŠ‚ä¼šæ¶‰åŠåˆ°</em></li><li><em><code>Mute Breakpoints</code> : å“‘çš„æ–­ç‚¹,æ—¢é€‰æ‹©è¿™ä¸ªå,æ‰€æœ‰æ–­ç‚¹å˜ä¸ºç°è‰²,æ–­ç‚¹å¤±æ•ˆ,æŒ‰F9åˆ™å¯ä»¥ç›´æ¥è¿è¡Œå®Œç¨‹åº. å†æ¬¡ç‚¹å‡»,æ–­ç‚¹å˜ä¸ºçº¢è‰²,æœ‰æ•ˆ. å¦‚æœåªæƒ³ä½¿æŸä¸€ä¸ªæ–­ç‚¹å¤±æ•ˆ,åˆ™å¯ä»¥åœ¨æ–­ç‚¹ä¸Šå³é”®,ç„¶åå–æ¶ˆEnabled</em></li></ol><p><em>æ›´å¤šå†…å®¹è¯·å‚è€ƒ(è€ç‰ˆæœ¬å“Ÿ,æ— ç¢å•¦~) : <a href="https://www.cnblogs.com/nihaorz/p/7613967.html" target="_blank" rel="noopener">https://www.cnblogs.com/nihaorz/p/7613967.html</a> .</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-è¯¦è§£Intellij-IDEAä¸­çš„DEBUGåŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : è¯¦è§£Intellij IDEAä¸­çš„DEBUGåŠŸèƒ½&quot;&gt;&lt;
      
    
    </summary>
    
    
      <category term="IDEA" scheme="http://yoursite.com/tags/IDEA/"/>
    
  </entry>
  
  <entry>
    <title>Thymeleafæ•´åˆShiroæ ‡ç­¾</title>
    <link href="http://yoursite.com/2019/08/06/Thymeleaf%E6%95%B4%E5%90%88Shiro%E6%A0%87%E7%AD%BE/"/>
    <id>http://yoursite.com/2019/08/06/Thymeleafæ•´åˆShiroæ ‡ç­¾/</id>
    <published>2019-08-06T07:16:26.000Z</published>
    <updated>2019-08-07T08:46:22.616Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Thymeleafæ•´åˆShiroæ ‡ç­¾"><a href="#å­¦ä¹ ç¬”è®°-Thymeleafæ•´åˆShiroæ ‡ç­¾" class="headerlink" title="å­¦ä¹ ç¬”è®° : Thymeleafæ•´åˆShiroæ ‡ç­¾"></a>å­¦ä¹ ç¬”è®° : Thymeleafæ•´åˆShiroæ ‡ç­¾</h2><p><em>è¯¦æƒ…è¯·å‚è€ƒ : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•çš„SpringBootæ•´åˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹</a></em></p><h3 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h3><p><em>æ·»åŠ ThymeleafåŠå…¶å¯¹Shiroæ‰©å±•çš„ä¾èµ–</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Thymeleaf --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Thymeleafå¯¹shiroçš„æ‰©å±• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.theborakompanioni<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-shiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><em>åœ¨Shiroçš„é…ç½®ç±»ä¸­é…ç½®<code>ShiroDialect</code></em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: é…ç½®ShiroDialect, ç”¨äºthymeleafå’Œshiroæ ‡ç­¾é…åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 6:37 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: at.pollux.thymeleaf.shiro.dialect.ShiroDialect</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroDialect <span class="title">shiroDialect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ShiroDialect();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ·»åŠ HTMLå‘½ä»¤ç©ºé—´"><a href="#æ·»åŠ HTMLå‘½ä»¤ç©ºé—´" class="headerlink" title="æ·»åŠ HTMLå‘½ä»¤ç©ºé—´"></a>æ·»åŠ HTMLå‘½ä»¤ç©ºé—´</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh_CN"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span> <span class="attr">xmlns:shiro</span>=<span class="string">"http://www.pollix.at/thymeleaf/shiro"</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Thymealf-Shiroæ ‡ç­¾"><a href="#Thymealf-Shiroæ ‡ç­¾" class="headerlink" title="Thymealf+Shiroæ ‡ç­¾"></a>Thymealf+Shiroæ ‡ç­¾</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- guestæ ‡ç­¾:ç”¨æˆ·æ²¡æœ‰èº«ä»½éªŒè¯æ—¶æ˜¾ç¤ºç›¸åº”ä¿¡æ¯,å³æ¸¸å®¢è®¿é—®ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:guest</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:guest</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- useræ ‡ç­¾:ç”¨æˆ·å·²ç»èº«ä»½éªŒè¯/è®°ä½æˆ‘ç™»å½•åæ˜¾ç¤ºç›¸åº”çš„ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:user</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:user</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- authenticatedæ ‡ç­¾:ç”¨æˆ·å·²ç»èº«ä»½éªŒè¯é€šè¿‡,å³Subject.loginç™»å½•æˆåŠŸ,ä¸æ˜¯è®°ä½æˆ‘ç™»å½•çš„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:authenticated</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:authenticated</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- notAuthenticatedæ ‡ç­¾:ç”¨æˆ·å·²ç»èº«ä»½éªŒè¯é€šè¿‡,å³æ²¡æœ‰è°ƒç”¨Subject.loginè¿›è¡Œç™»å½•,åŒ…æ‹¬è®°ä½æˆ‘,è‡ªåŠ¨ç™»å½•çš„ä¹Ÿå±äºæœªè¿›è¡Œèº«ä»½éªŒè¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:notAuthenticated</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:notAuthenticated</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- principalæ ‡ç­¾:ç›¸å½“äº((User)Subject.getPrincipals()).getUsername()  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:</span> <span class="attr">principal</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:principal</span> <span class="attr">property</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line">ã€€ã€€</span><br><span class="line"><span class="comment">&lt;!-- lacksPermissionæ ‡ç­¾:å¦‚æœå½“å‰Subjectæ²¡æœ‰æƒé™å°†æ˜¾ç¤ºbodyä½“å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:lacksPermission</span> <span class="attr">name</span>=<span class="string">"org:create"</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:lacksPermission</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- hasRoleæ ‡ç­¾:å¦‚æœå½“å‰Subjectæœ‰è§’è‰²å°†æ˜¾ç¤ºbodyä½“å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:hasRole</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:hasRole</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- hasAnyRolesæ ‡ç­¾:å¦‚æœå½“å‰Subjectæœ‰ä»»æ„ä¸€ä¸ªè§’è‰²ï¼ˆæˆ–çš„å…³ç³»ï¼‰å°†æ˜¾ç¤ºbodyä½“å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:hasAnyRoles</span> <span class="attr">name</span>=<span class="string">"admin,user"</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:hasAnyRoles</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- lacksRoleæ ‡ç­¾:å¦‚æœå½“å‰Subjectæ²¡æœ‰è§’è‰²å°†æ˜¾ç¤ºbodyä½“å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:lacksRole</span> <span class="attr">name</span>=<span class="string">"abc"</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:lacksRole</span>&gt;</span>ã€€</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- hasPermissionæ ‡ç­¾:å¦‚æœå½“å‰Subjectæœ‰æƒé™å°†æ˜¾ç¤ºbodyä½“å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"user:create"</span>&gt;</span><span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br></pre></td></tr></table></figure><p><em>ğŸ™‚å‚è€ƒ(éå¸¸æ„Ÿè°¢) : <a href="https://www.jianshu.com/p/c8b53445cbb0" target="_blank" rel="noopener">https://www.jianshu.com/p/c8b53445cbb0</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Thymeleafæ•´åˆShiroæ ‡ç­¾&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Thymeleafæ•´åˆShiroæ ‡ç­¾&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Thymeleafæ•´åˆShiroæ ‡ç­¾&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Thymelea
      
    
    </summary>
    
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
      <category term="Thymeleaf" scheme="http://yoursite.com/tags/Thymeleaf/"/>
    
  </entry>
  
  <entry>
    <title>SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®</title>
    <link href="http://yoursite.com/2019/08/06/SpringBoot%E9%9B%86%E6%88%90Shiro%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2019/08/06/SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®/</id>
    <published>2019-08-06T07:13:51.000Z</published>
    <updated>2019-08-07T13:02:17.154Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®"><a href="#å­¦ä¹ ç¬”è®°-SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®" class="headerlink" title="å­¦ä¹ ç¬”è®° : SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®"></a>å­¦ä¹ ç¬”è®° : SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®</h2><p><em>Springé›†æˆShiroä¸€èˆ¬é€šè¿‡çš„ xml é…ç½®,æ¯”è¾ƒç¹ç,è€ŒSpring Booté›†æˆShiroç›¸å¯¹ç®€å•,åªéœ€è¦é…ç½®ä¸¤ä¸ªç±» : ShiroConfigurationç±»åŠç»§æ‰¿AuthorizingRealmçš„Realmç±»,å¦‚ä¸‹æ‰€ç¤º :</em></p><ol><li><em><code>ShiroConfig</code> : é¡¾åæ€ä¹‰å°±æ˜¯å¯¹Shiroçš„ä¸€äº›é…ç½®,ç›¸å¯¹äºSpringä¸­çš„xmlé…ç½®. åŒ…æ‹¬ : åŒ…æ‹¬è¿‡æ»¤å™¨(ShiroFilter)ã€å®‰å…¨äº‹åŠ¡ç®¡ç†å™¨(SecurityManager)ã€å¯†ç å‡­è¯åŒ¹é…å™¨(CredentialsMatcher)ã€ç¼“å†²ç®¡ç†å™¨(EhCacheManager)ã€aopæ³¨è§£æ”¯æŒ(authorizationAttributeSourceAdvisor)ã€ç­‰ç­‰</em></li><li><em><code>CustomRealm</code> : è‡ªå®šä¹‰çš„CustomRealmç»§æ‰¿è‡ªAuthorizingRealm,é‡å†™äº†çˆ¶ç±»ä¸­çš„doGetAuthorizationInfo(æˆæƒè®¤è¯)ã€doGetAuthenticationInfo(ç™»é™†è®¤è¯)è¿™ä¸¤ä¸ªæ–¹æ³•</em></li></ol><h3 id="åŸºæœ¬çš„é…ç½®"><a href="#åŸºæœ¬çš„é…ç½®" class="headerlink" title="åŸºæœ¬çš„é…ç½®"></a>åŸºæœ¬çš„é…ç½®</h3><p><em>ä»¥ä¸‹ç¤ºä¾‹ä»£ç æ‘˜è‡ª : <a href="https://github.com/YUbuntu0109/Shiro-learning/tree/master/spring%20boot%20project%20with%20shiro" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•çš„SpringBooté›†æˆShiroçš„æƒé™ç®¡ç†æ¡ˆä¾‹</a></em></p><h4 id="Shiroçš„åŸºæœ¬é…ç½®ä¿¡æ¯"><a href="#Shiroçš„åŸºæœ¬é…ç½®ä¿¡æ¯" class="headerlink" title="Shiroçš„åŸºæœ¬é…ç½®ä¿¡æ¯"></a>Shiroçš„åŸºæœ¬é…ç½®ä¿¡æ¯</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.ss.shiro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> at.pollux.thymeleaf.shiro.dialect.ShiroDialect;</span><br><span class="line"><span class="keyword">import</span> net.sf.ehcache.CacheManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.credential.HashedCredentialsMatcher;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.cache.ehcache.EhCacheManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot-shiro</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: Shiroé…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/5/2019-7:41 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: é…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: securityManager</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 7:59 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.spring.web.ShiroFilterFactoryBean</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">shiroFilterFactoryBean</span><span class="params">(SecurityManager securityManager)</span> </span>&#123;</span><br><span class="line">        ShiroFilterFactoryBean shiroFilterFactoryBean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line">        <span class="comment">//è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        shiroFilterFactoryBean.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//è®¾ç½®è‡ªå®šä¹‰è¿‡æ»¤å™¨</span></span><br><span class="line">        shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap());</span><br><span class="line">        <span class="comment">//è®¾ç½®ç”¨æˆ·ç™»å½•é¡µ,é»˜è®¤: http://localhost:8080/login.jsp</span></span><br><span class="line">        shiroFilterFactoryBean.setLoginUrl(<span class="string">"/loginView"</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®ç”¨æˆ·æœªæˆæƒæ“ä½œæç¤ºé¡µ</span></span><br><span class="line">        shiroFilterFactoryBean.setUnauthorizedUrl(<span class="string">"/unauthorizedView"</span>);</span><br><span class="line">        <span class="keyword">return</span> shiroFilterFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: åˆå§‹åŒ–è‡ªå®šä¹‰Realm</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: credentialsMatcher</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 7:50 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: pers.huangyuhui.ss.shiro.UserRealm</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserRealm <span class="title">userRealm</span><span class="params">(HashedCredentialsMatcher hashedCredentialsMatcher)</span> </span>&#123;</span><br><span class="line">        UserRealm userRealm = <span class="keyword">new</span> UserRealm();</span><br><span class="line">        <span class="comment">//è®¾ç½®å‡­è¯åŒ¹é…å™¨</span></span><br><span class="line">        userRealm.setCredentialsMatcher(hashedCredentialsMatcher);</span><br><span class="line">        <span class="keyword">return</span> userRealm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: å®‰å…¨äº‹åŠ¡ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: credentialsMatcher</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 7:53 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.web.mgt.DefaultWebSecurityManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SecurityManager <span class="title">securityManager</span><span class="params">(UserRealm userRealm, EhCacheManager ehCacheManager)</span> </span>&#123;</span><br><span class="line">        DefaultWebSecurityManager defaultWebSecurityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line">        <span class="comment">//å…³è”è‡ªå®šä¹‰realm</span></span><br><span class="line">        defaultWebSecurityManager.setRealm(userRealm);</span><br><span class="line">        <span class="comment">//å…³è”ç¼“å­˜ç®¡ç†</span></span><br><span class="line">        defaultWebSecurityManager.setCacheManager(ehCacheManager);</span><br><span class="line">        <span class="keyword">return</span> defaultWebSecurityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: å“ˆå¸Œå¯†ç åŒ¹é…å™¨:æ¯”è¾ƒç”¨æˆ·ç™»å½•æ—¶è¾“å…¥çš„å¯†ç ,è·Ÿæ•°æ®åº“å¯†ç é…åˆç›å€¼saltè§£å¯†åæ˜¯å¦ä¸€è‡´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 9:01 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.authc.credential.HashedCredentialsMatcher</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HashedCredentialsMatcher <span class="title">hashedCredentialsMatcher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HashedCredentialsMatcher hashedCredentialsMatcher = <span class="keyword">new</span> HashedCredentialsMatcher();</span><br><span class="line">        hashedCredentialsMatcher.setHashAlgorithmName(<span class="string">"md5"</span>); <span class="comment">//æ•£åˆ—ç®—æ³•</span></span><br><span class="line">        hashedCredentialsMatcher.setHashIterations(<span class="number">3</span>); <span class="comment">//æ•£åˆ—çš„æ¬¡æ•°</span></span><br><span class="line">        hashedCredentialsMatcher.setStoredCredentialsHexEncoded(<span class="keyword">true</span>); <span class="comment">//é»˜è®¤æ˜¯true:Hexç¼–ç .false:Base64ç¼–ç </span></span><br><span class="line">        <span class="keyword">return</span> hashedCredentialsMatcher;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: è®¾ç½®ç¼“å­˜ç®¡ç†, ç¼“å­˜ç”¨æˆ·åŠå…¶æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-07 7:51 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.cache.ehcache.EhCacheManager</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> EhCacheManager <span class="title">ehCacheManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ³¨æ„:myEhcacheå¯¹åº”ehcache-shiro.xmlä¸­çš„'&lt;ehcache name="myEhcache"&gt;'</span></span><br><span class="line">        CacheManager cacheManager = CacheManager.getCacheManager(<span class="string">"myEhcache"</span>);</span><br><span class="line">        <span class="keyword">if</span> (cacheManager == <span class="keyword">null</span>) &#123;</span><br><span class="line">            cacheManager = CacheManager.create();</span><br><span class="line">        &#125;</span><br><span class="line">        EhCacheManager ehCacheManager = <span class="keyword">new</span> EhCacheManager();</span><br><span class="line">        ehCacheManager.setCacheManager(cacheManager);</span><br><span class="line">        <span class="keyword">return</span> ehCacheManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: è®¾ç½®èµ„æºçš„æƒé™æ§åˆ¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 8:31 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.util.Map</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Map&lt;String, String&gt; <span class="title">filterChainDefinitionMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String, String&gt; filterMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">//éœ€èº«ä»½è®¤è¯</span></span><br><span class="line">        filterMap.put(<span class="string">"/stuListView"</span>, <span class="string">"authc"</span>);</span><br><span class="line">        filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"authc"</span>);</span><br><span class="line">        <span class="comment">//æ— éœ€èº«ä»½è®¤è¯:é˜²æ­¢éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯æ“ä½œè¢«'filterMap.put("/**", "authc")'æ‹¦æˆª</span></span><br><span class="line">        filterMap.put(<span class="string">"/login"</span>, <span class="string">"anon"</span>);</span><br><span class="line">        <span class="comment">//æ³¨é”€è¿‡æ»¤å™¨:å…¶å…·ä½“çš„æ³¨é”€é€»è¾‘ä»£ç Shiroå·²ç»æ›¿æˆ‘ä»¬å®ç°äº†å“Ÿ</span></span><br><span class="line">        filterMap.put(<span class="string">"/logout"</span>, <span class="string">"logout"</span>);</span><br><span class="line">        <span class="comment">//è§’è‰²è¿‡æ»¤:éœ€è¦ç”¨æˆ·æ‹¥æœ‰'admin'è§’è‰²</span></span><br><span class="line">        filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"roles[admin]"</span>);</span><br><span class="line">        <span class="comment">//æƒé™è¿‡æ»¤:é™¤èº«ä»½è®¤è¯å¤–,è¿˜éœ€è¦ç”¨æˆ·æ‹¥æœ‰å¯¹stuListViewèµ„æºçš„viewæƒé™</span></span><br><span class="line">        filterMap.put(<span class="string">"/stuListView"</span>, <span class="string">"perms[stuListView:view]"</span>);</span><br><span class="line">        filterMap.put(<span class="string">"/teaListView"</span>, <span class="string">"perms[teaListView:view]"</span>);</span><br><span class="line">        <span class="comment">//æ‹¦æˆªéœ€è¦ç™»å½•(ç”¨æˆ·è®¤è¯)æ–¹å¯è®¿é—®çš„èµ„æº(ä¸€èˆ¬å°†/**æ”¾åœ¨æœ€ä¸‹è¾¹,ä¸ç„¶ä¼šå¯¼è‡´æ‰€æœ‰urléƒ½è¢«æ‹¦æˆªå“Ÿ)</span></span><br><span class="line">        filterMap.put(<span class="string">"/**"</span>, <span class="string">"authc"</span>);</span><br><span class="line">        <span class="keyword">return</span> filterMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: é…ç½®ShiroDialect, ç”¨äºthymeleafå’Œshiroæ ‡ç­¾é…åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-05 6:37 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: at.pollux.thymeleaf.shiro.dialect.ShiroDialect</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroDialect <span class="title">shiroDialect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ShiroDialect();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>ehcache-shiro.xml : EhCacheç¼“å­˜æ¡†æ¶çš„é…ç½®æ–‡ä»¶</em><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">"http://ehcache.org/ehcache.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">updateCheck</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">name</span>=<span class="string">"myEhcache"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">"java.io.tmpdir"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æˆæƒä¿¡æ¯ç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"authorizationCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- èº«ä»½ä¿¡æ¯ç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"authenticationCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Sessionç¼“å­˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"activeSessionCache"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxEntriesLocalHeap</span>=<span class="string">"2000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">statistics</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜åŠå°æ—¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"halfHour"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"1800"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜ä¸€å°æ—¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"hour"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"3600"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"3600"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¼“å­˜ä¸€å¤© --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">"oneDay"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToIdleSeconds</span>=<span class="string">"86400"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">timeToLiveSeconds</span>=<span class="string">"86400"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">diskPersistent</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">         name: ç¼“å­˜åç§°ã€‚</span></span><br><span class="line"><span class="comment">         maxElementsInMemory: ç¼“å­˜æœ€å¤§ä¸ªæ•°</span></span><br><span class="line"><span class="comment">         eternal: å¯¹è±¡æ˜¯å¦æ°¸ä¹…æœ‰æ•ˆ,ä¸€ä½†è®¾ç½®äº†,timeoutå°†ä¸èµ·ä½œç”¨</span></span><br><span class="line"><span class="comment">         timeToIdleSeconds: è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰çš„å…è®¸é—²ç½®æ—¶é—´(å•ä½ï¼šç§’). ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨,å¯é€‰å±æ€§,é»˜è®¤å€¼æ˜¯0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">         timeToLiveSeconds: è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰å…è®¸å­˜æ´»æ—¶é—´(å•ä½ï¼šç§’). æœ€å¤§æ—¶é—´ä»‹äºåˆ›å»ºæ—¶é—´å’Œå¤±æ•ˆæ—¶é—´ä¹‹é—´. ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨,é»˜è®¤æ˜¯0,ä¹Ÿå°±æ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">         overflowToDisk: å½“å†…å­˜ä¸­å¯¹è±¡æ•°é‡è¾¾åˆ°maxElementsInMemoryæ—¶,Ehcacheå°†ä¼šå¯¹è±¡å†™åˆ°ç£ç›˜ä¸­</span></span><br><span class="line"><span class="comment">         diskSpoolBufferSizeMB: è¿™ä¸ªå‚æ•°è®¾ç½®DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°,é»˜è®¤æ˜¯30MB. æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">         maxElementsOnDisk: ç¡¬ç›˜æœ€å¤§ç¼“å­˜ä¸ªæ•°</span></span><br><span class="line"><span class="comment">         diskPersistent: æ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ® Whether the disk store persists between restarts of the Virtual Machine. The default value is false.</span></span><br><span class="line"><span class="comment">         diskExpiryThreadIntervalSeconds: ç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”,é»˜è®¤æ˜¯120ç§’</span></span><br><span class="line"><span class="comment">         memoryStoreEvictionPolicy: å½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶,Ehcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜. é»˜è®¤ç­–ç•¥æ˜¯LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨). ä½ å¯ä»¥è®¾ç½®ä¸ºFIFO(å…ˆè¿›å…ˆå‡º)æˆ–æ˜¯LFU(è¾ƒå°‘ä½¿ç”¨)</span></span><br><span class="line"><span class="comment">         clearOnFlush: å†…å­˜æ•°é‡æœ€å¤§æ—¶æ˜¯å¦æ¸…é™¤</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span> <span class="attr">name</span>=<span class="string">"defaultCache"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsInMemory</span>=<span class="string">"10000"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToIdleSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">timeToLiveSeconds</span>=<span class="string">"600"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">maxElementsOnDisk</span>=<span class="string">"100000"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskPersistent</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">"120"</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">"LRU"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="è‡ªå®šä¹‰Realm"><a href="#è‡ªå®šä¹‰Realm" class="headerlink" title="è‡ªå®šä¹‰Realm"></a>è‡ªå®šä¹‰Realm</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.ss.shiro;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.ByteSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ss.bean.Permission;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ss.bean.Role;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ss.bean.User;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ss.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot-shiro</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: é…ç½®è‡ªå®šä¹‰Realm</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/5/2019-7:45 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: æˆæƒè®¤è¯:æä¾›ç”¨æˆ·ä¿¡æ¯,è¿”å›æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: principalCollection</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-06 6:02 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.authz.AuthorizationInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">"------------&gt; æˆæƒè®¤è¯ ------------&gt;"</span>);</span><br><span class="line">        <span class="comment">//è·å–å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        User u = (User) currentUser.getPrincipal();</span><br><span class="line">        <span class="comment">//ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è§’è‰²åŠæƒé™ä¿¡æ¯</span></span><br><span class="line">        User user = userService.findByName(u.getUsername());</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            SimpleAuthorizationInfo info = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">            <span class="comment">//ç”¨äºå­˜å‚¨ç”¨æˆ·çš„è§’è‰²åŠæƒé™ä¿¡æ¯</span></span><br><span class="line">            Collection&lt;String&gt; rolesCollection = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">            Collection&lt;String&gt; permissionsCollection = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">            Set&lt;Role&gt; roles = user.getRoles(); <span class="comment">//è·å–ç”¨æˆ·Roleçš„Seté›†åˆ</span></span><br><span class="line">            <span class="comment">//é€šè¿‡éå†ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è§’è‰²,æ¥è·å–å…¶å¯¹åº”çš„æƒé™ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">for</span> (Role role : roles) &#123;</span><br><span class="line">                rolesCollection.add(role.getName()); <span class="comment">//å°†æ¯ä¸€ä¸ªroleçš„nameå°è£…åˆ°é›†åˆä¸­</span></span><br><span class="line">                Set&lt;Permission&gt; permissionSet = role.getPermissions(); <span class="comment">//è·å–æ¯ä¸€ä¸ªroleæ‰€å¯¹åº”çš„permissionçš„seté›†åˆ</span></span><br><span class="line">                <span class="comment">//éå†ç”¨æˆ·æ‰€æ‹¥æœ‰çš„æƒé™ä¿¡æ¯</span></span><br><span class="line">                <span class="keyword">for</span> (Permission permission : permissionSet) &#123;</span><br><span class="line">                    permissionsCollection.add(permission.getName()); <span class="comment">//å°†æ¯ä¸€ä¸ªpermissionçš„nameå°è£…åˆ°é›†åˆä¸­</span></span><br><span class="line">                &#125;</span><br><span class="line">                info.addStringPermissions(permissionsCollection); <span class="comment">//ä¸ºç”¨æˆ·æˆæƒ</span></span><br><span class="line">            &#125;</span><br><span class="line">            info.addRoles(rolesCollection); <span class="comment">//ä¸ºç”¨æˆ·æˆäºˆè§’è‰²</span></span><br><span class="line">            System.out.println(<span class="string">"[roles]------------&gt;"</span> + rolesCollection.toString());</span><br><span class="line">            System.out.println(<span class="string">"[permissions]------------&gt;"</span> + permissionsCollection.toString());</span><br><span class="line">            <span class="keyword">return</span> info;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: ç™»å½•è®¤è¯:æä¾›å¸æˆ·ä¿¡æ¯,è¿”å›è®¤è¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: authenticationToken</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-08-06 6:12 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.apache.shiro.authc.AuthenticationInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        System.err.println(<span class="string">"------------&gt; å¼€å§‹è®¤è¯ ------------&gt;"</span>);</span><br><span class="line">        UsernamePasswordToken token = (UsernamePasswordToken) authenticationToken;</span><br><span class="line">        <span class="comment">//ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        User user = userService.findByName(token.getUsername());</span><br><span class="line">        <span class="comment">//éªŒè¯è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>; <span class="comment">//it's will be throw a UnknownAccountException</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//éªŒè¯å¯†ç ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SimpleAuthenticationInfo(user, user.getPassword(), ByteSource.Util.bytes(user.getUsername()), <span class="keyword">this</span>.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : SpringBooté›†æˆShiroçš„åŸºæœ¬é…ç½®&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”
      
    
    </summary>
    
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
      <category term="SpringBoot" scheme="http://yoursite.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Shiroæ•´åˆWeb:ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹</title>
    <link href="http://yoursite.com/2019/08/04/Shiro%E6%95%B4%E5%90%88Web-%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E6%A1%88%E4%BE%8B/"/>
    <id>http://yoursite.com/2019/08/04/Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹/</id>
    <published>2019-08-04T05:15:15.000Z</published>
    <updated>2019-08-04T06:52:11.202Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹"><a href="#å­¦ä¹ ç¬”è®°-Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹" class="headerlink" title="å­¦ä¹ ç¬”è®° : Shiroæ•´åˆWeb : ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹"></a>å­¦ä¹ ç¬”è®° : Shiroæ•´åˆWeb : ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹</h2><p><em>æ€»ç»“å‰é¢<code>Shiro</code>çš„åŸºæœ¬å­¦ä¹ ç¬”è®°,ç»§è€Œå°è¯•æ•´åˆweb,æ¥å†™ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹( Java web ),ç”¨æˆ·æƒé™åˆ’åˆ†å¦‚ä¸‹ :</em></p><ul><li>ç®¡ç†å‘˜(admin) : å…·æœ‰æ“æ§éƒ¨é—¨/å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µçš„æ‰€æœ‰æƒé™</li><li>ç”¨æˆ·(yuhui) : ä»…å…·æœ‰éƒ¨é—¨ä¿¡æ¯çš„<code>view</code>æƒé™</li></ul><h3 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h3><ol><li><p><em>baseWebShiro\pom.xml : Mavenä¾èµ–</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>pers.huangyuhui<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>baseWebShiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>a simple web program for Shiro<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Serlvet --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Shiro core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Shiro web --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- logging --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\resources\shiro.ini : ç”¨æˆ·èº«ä»½åŠæƒé™ä¿¡æ¯</em></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[main]</span></span><br><span class="line"><span class="comment"># é»˜è®¤ç™»å½•é¡µä¸º:/login.jsp</span></span><br><span class="line"><span class="attr">authc.loginUrl</span> = /login</span><br><span class="line"><span class="comment"># ç”¨æˆ·æ²¡æœ‰è®¿é—®æŒ‡å®šèµ„æºçš„è§’è‰²æ—¶æ‰€è·³è½¬çš„é¡µé¢</span></span><br><span class="line"><span class="attr">roles.unauthorizedUrl</span> = /nopermission.jsp</span><br><span class="line"><span class="comment"># ç”¨æˆ·æ²¡æœ‰è®¿é—®æŒ‡å®šèµ„æºçš„æƒé™æ—¶æ‰€è·³è½¬çš„é¡µé¢</span></span><br><span class="line"><span class="attr">perms.unauthorizedUrl</span> = /nopermission.jsp</span><br><span class="line"><span class="comment"># ç™»å‡ºä¹‹åé‡å®šå‘çš„é¡µé¢</span></span><br><span class="line"><span class="attr">logout.redirectUrl</span> = /login</span><br><span class="line"></span><br><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="attr">admin</span> = <span class="number">666</span>,admin</span><br><span class="line"><span class="attr">yuhui</span> = <span class="number">777</span>,deptManager</span><br><span class="line"></span><br><span class="line"><span class="section">[roles ]</span></span><br><span class="line"><span class="attr">admin</span> = employee:*,department:*</span><br><span class="line"><span class="attr">deptManager</span> = department:view</span><br><span class="line"></span><br><span class="line"><span class="section">[urls]</span></span><br><span class="line"><span class="comment"># é™æ€èµ„æºå¯ä»¥åŒ¿åè®¿é—®</span></span><br><span class="line">/static/** = anon</span><br><span class="line"><span class="comment"># è®¿é—®å‘˜å·¥åˆ—è¡¨éœ€è¦èº«ä»½è®¤è¯åŠéœ€è¦ç”¨æˆ·æ‹¥æœ‰'admin'è§’è‰²</span></span><br><span class="line">/employee = authc,roles[admin]</span><br><span class="line"><span class="comment"># è®¿é—®éƒ¨é—¨åˆ—è¡¨éœ€è¦èº«ä»½è®¤è¯åŠéœ€è¦ç”¨æˆ·æ‹¥æœ‰'department:view'çš„æƒé™</span></span><br><span class="line">/department = authc,perms["department:view"]</span><br><span class="line"><span class="comment"># å½“è¯·æ±‚loginOutæ—¶,ä¼šè¢«logoutæ•è·å¹¶æ¸…é™¤session</span></span><br><span class="line">/logout = logout</span><br><span class="line"><span class="comment"># æ‰€æœ‰çš„è¯·æ±‚éƒ½éœ€è¦èº«ä»½è®¤è¯</span></span><br><span class="line">/** = authc</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\WEB-INF\web.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       Shiro 1.2å¼•å…¥äº†Environmnet/WebEnvironmentçš„æ¦‚å¿µ,æ—¢ç”±å®ƒä»¬æ¥å£æä¾›ç›¸åº”çš„SecurityManageråŠå…¶ç›¸åº”çš„ä¾èµ–.</span></span><br><span class="line"><span class="comment">       ShiroFilterä¼šè‡ªåŠ¨æ‰¾åˆ°Environment,ç„¶åè·å–ç›¸åº”çš„ä¾èµ–.</span></span><br><span class="line"><span class="comment">       åº•å±‚å®ç°:è¿”å›åå°„åˆ›å»ºshiroEnvironmentClasså¯¹è±¡,è°ƒç”¨å…¶initæ–¹æ³•,æ—¢é€šè¿‡shiroEnvironmnetClassä¸­çš„initæ–¹æ³•</span></span><br><span class="line"><span class="comment">       åˆ›å»ºSecurityManagerå®ä¾‹,å¹¶å°†å…¶ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒ</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®ShiroFilterç¯å¢ƒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>shiroEnvironmentClass<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>org.apache.shiro.web.env.IniWebEnvironment<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>shiroCConfigLocations<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:shiro.ini<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiroç›‘å¬å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.apache.shiro.web.env.EnvironmentLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiroæ‹¦æˆªå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>shiroFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.apache.shiro.web.servlet.ShiroFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>shiroFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="å‰ç«¯é¡µé¢"><a href="#å‰ç«¯é¡µé¢" class="headerlink" title="å‰ç«¯é¡µé¢"></a>å‰ç«¯é¡µé¢</h3><ol><li><p><em>baseWebShiro\src\main\webapp\static\js\jquery.js : å˜¿å˜¿,ä»£ç é‡ä½ æ‡‚å¾—,è‡ªè¡Œä¸‹è½½å§~</em></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> * jQuery JavaScript Library v1.7.1</span></span><br><span class="line"><span class="comment"> * http://jquery.com/</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Copyright 2011, John Resig</span></span><br><span class="line"><span class="comment"> * Dual licensed under the MIT or GPL Version 2 licenses.</span></span><br><span class="line"><span class="comment"> * http://jquery.org/license</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Includes Sizzle.js</span></span><br><span class="line"><span class="comment"> * http://sizzlejs.com/</span></span><br><span class="line"><span class="comment"> * Copyright 2011, The Dojo Foundation</span></span><br><span class="line"><span class="comment"> * Released under the MIT, BSD, and GPL Licenses.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Date: Mon Nov 21 21:11:03 2011 -0500</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window, undefined</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use the correct document accordingly with window argument (sandbox)</span></span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">document</span> = <span class="built_in">window</span>.document,</span><br><span class="line">        navigator = <span class="built_in">window</span>.navigator,</span><br><span class="line">        location = <span class="built_in">window</span>.location;</span><br><span class="line">    <span class="keyword">var</span> jQuery = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\static\js\main.js : åˆ‡æ¢ç”¨æˆ·ä¸»é¡µä¸­çš„ä¿¡æ¯ç®¡ç†é¡µé¢</em></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">".changePage"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">"#rightMain"</span>).prop(<span class="string">"src"</span>, $(<span class="keyword">this</span>).data(<span class="string">"url"</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\static\style\main_css.css : ç”¨æˆ·ä¸»é¡µæ ·å¼</em></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.top</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">99%</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.userinfo</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center_left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10%</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> black;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.center_content</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">89%</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> black;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\WEB-INF\views\login.jsp : ç”¨æˆ·ç™»å½•é¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        h3 &#123;</span></span><br><span class="line"><span class="undefined">            text-align: center;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#main</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 600px;</span></span><br><span class="line"><span class="undefined">            margin-left: 480px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#main</span> <span class="selector-tag">tr</span> &#123;</span></span><br><span class="line"><span class="undefined">            height: 40px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#main</span> <span class="selector-tag">tr</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 20px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#main</span> <span class="selector-tag">tr</span> <span class="selector-tag">td</span> <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        span &#123;</span></span><br><span class="line"><span class="undefined">            font-size: 13px;</span></span><br><span class="line"><span class="undefined">            color: red;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.buttom</span> &#123;</span></span><br><span class="line"><span class="undefined">            text-align: center;</span></span><br><span class="line"><span class="undefined">            padding-top: 25px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.buttom</span> <span class="selector-class">.login</span> &#123;</span></span><br><span class="line"><span class="undefined">            margin-right: 40px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>ç”¨æˆ·ç™»å½•é¡µ<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/login"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>è´¦å·<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¯†ç <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>$&#123;errorMsg&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buttom"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"login"</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ç™»å½•"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"é‡ç½®"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\WEB-INF\views\main.jsp : ç”¨æˆ·ä¸»é¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥Shiroæ ‡ç­¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"shiro"</span> <span class="attr">uri</span>=<span class="string">"http://shiro.apache.org/tags"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>main<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/static/style/main_css.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/static/js/jquery.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/static/js/main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">"margin-left: 15px"</span>&gt;</span>Shiroæ•´åˆåŸºæœ¬web | ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"userinfo"</span>&gt;</span></span><br><span class="line">        å½“å‰ç™»å½•ç”¨æˆ· : <span class="tag">&lt;<span class="name">shiro:principal</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/logout"</span>&gt;</span>æ³¨é”€<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center_left"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"changePage"</span> <span class="attr">data-url</span>=<span class="string">"/employee"</span>&gt;</span>å‘˜å·¥ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"changePage"</span> <span class="attr">data-url</span>=<span class="string">"/department"</span>&gt;</span>éƒ¨é—¨ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center_content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">name</span>=<span class="string">"right"</span> <span class="attr">id</span>=<span class="string">"rightMain"</span> <span class="attr">src</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/welcome.jsp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">frameborder</span>=<span class="string">"no"</span> <span class="attr">scrolling</span>=<span class="string">"auto"</span> <span class="attr">width</span>=<span class="string">"100%"</span> <span class="attr">height</span>=<span class="string">"100%"</span> <span class="attr">allowtransparency</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\welcome.jsp : ç”¨æˆ·æ¬¢è¿é¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç”¨æˆ·é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span>ï¼ˆã¥ï¿£3ï¿£ï¼‰ã¥â•­â¤ï½ ç”¨æˆ·æ¬¢è¿é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\WEB-INF\views\department\list.jsp : éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥Shiroæ ‡ç­¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">prefix</span>=<span class="string">"shiro"</span> <span class="attr">uri</span>=<span class="string">"http://shiro.apache.org/tags"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>éƒ¨é—¨åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>éƒ¨é—¨åˆ—è¡¨<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å½“ç”¨æˆ·å…·æœ‰departmentæ¨¡å—çš„â€˜addâ€™æƒé™æ—¶æ‰æ˜¾ç¤ºæ­¤æŒ‰é’® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"department:add"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/department?cmd=input"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>éƒ¨é—¨ç¼–å·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>éƒ¨é—¨åç§°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>éƒ¨é—¨äººæ•°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>åˆ›å»ºæ—¶é—´<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>è´Ÿè´£äºº<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>ç ”å‘éƒ¨<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>100<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>2019-8-3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>yubuntu0109<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å½“ç”¨æˆ·å…·æœ‰departmentæ¨¡å—çš„â€˜editâ€™æƒé™æ—¶æ‰æ˜¾ç¤ºæ­¤æŒ‰é’® --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"department:edit"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/department?cmd=input&amp;id=1"</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å½“ç”¨æˆ·å…·æœ‰departmentæ¨¡å—çš„â€˜delâ€™æƒé™æ—¶æ‰æ˜¾ç¤ºæ­¤æŒ‰é’® --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shiro:hasPermission</span> <span class="attr">name</span>=<span class="string">"department:del"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/department?cmd=delete"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shiro:hasPermission</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\WEB-INF\views\employee\list.jsp : å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å‘˜å·¥åˆ—è¡¨<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/employee?cmd=input"</span>&gt;</span>æ–°å¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>ç¼–å·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>é‚®ç®±<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>yubuntu0109<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>3083968068@qq.com<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>21<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/employee?cmd=input&amp;id=1"</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/employee?cmd=delete"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\webapp\nopermission.jsp : æ— è§’è‰²/æƒé™æç¤ºé¡µ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ— è§’è‰²/æƒé™æç¤ºç•Œé¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span>(à²¥_à²¥) æŠ±æ­‰,ä½ æ— æƒé™æ“ä½œè¯¥æ¨¡å— !<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="åç«¯æ§åˆ¶å™¨"><a href="#åç«¯æ§åˆ¶å™¨" class="headerlink" title="åç«¯æ§åˆ¶å™¨"></a>åç«¯æ§åˆ¶å™¨</h3><ol><li><p><em>baseWebShiro\src\main\java\pers\huangyuhui\shiro\web\LoginServlet.java : ç”¨æˆ·ç™»å½•æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.shiro.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"loginServlet"</span>, urlPatterns = <span class="string">"/login"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœç™»å½•å¤±è´¥,åˆ™ä»requestä¸­è·å–è®¤è¯å¼‚å¸¸ä¿¡æ¯,shiroå¼‚å¸¸ç±»çš„å…¨é™å®šåä¸º:shiroLoginFailure</span></span><br><span class="line">        String exceptionClassName = (String) req.getAttribute(<span class="string">"shiroLoginFailure"</span>);</span><br><span class="line">        <span class="comment">//æ ¹æ®Shiroè¿”å›çš„å¼‚å¸¸ç±»,æŠ›å‡ºæŒ‡å®šçš„å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span> (exceptionClassName != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (UnknownAccountException.class.getName().equals(exceptionClassName)) &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"errorMsg"</span>, <span class="string">"è´¦å·ä¸å­˜åœ¨ !"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (IncorrectCredentialsException.class.getName().equals(exceptionClassName)) &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"errorMsg"</span>, <span class="string">"è´¦å·/å¯†ç ä¿¡æ¯é”™è¯¯ !"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"errorMsg"</span>, <span class="string">"å…¶å®ƒå¼‚å¸¸ä¿¡æ¯ ..."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        req.getRequestDispatcher(<span class="string">"/WEB-INF/views/login.jsp"</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\java\pers\huangyuhui\shiro\web\MainAction.java : ç”¨æˆ·ä¸»é¡µé¢æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.shiro.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"mainServlet"</span>, urlPatterns = <span class="string">"/main"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainAction</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        req.getRequestDispatcher(<span class="string">"/WEB-INF/views/main.jsp"</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\java\pers\huangyuhui\shiro\web\DepartmentServlet.java : éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µæ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.shiro.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"departmentServlet"</span>, urlPatterns = <span class="string">"/department"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepartmentServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String cmd = req.getParameter(<span class="string">"cmd"</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"input"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (req.getParameter(<span class="string">"id"</span>) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"name"</span>, <span class="string">"Shiroç ”å‘éƒ¨"</span>);</span><br><span class="line">                req.setAttribute(<span class="string">"cmdType"</span>, <span class="string">"ç¼–è¾‘"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"cmdType"</span>, <span class="string">"æ–°å¢"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            req.getRequestDispatcher(<span class="string">"/WEB-INF/views/department/input.jsp"</span>).forward(req, resp);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"savaOrUpdate"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="comment">// Â·Â·Â·</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"delete"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="comment">// Â·Â·Â·</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            req.getRequestDispatcher(<span class="string">"/WEB-INF/views/department/list.jsp"</span>).forward(req, resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>baseWebShiro\src\main\java\pers\huangyuhui\shiro\web\EmployeeServlet.java : å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µæ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.shiro.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"employeeServlet"</span>, urlPatterns = <span class="string">"/employee"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String cmd = req.getParameter(<span class="string">"cmd"</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"input"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (req.getParameter(<span class="string">"id"</span>) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"name"</span>, <span class="string">"yubuntu0109"</span>);</span><br><span class="line">                req.setAttribute(<span class="string">"age"</span>, <span class="string">"21"</span>);</span><br><span class="line">                req.setAttribute(<span class="string">"email"</span>, <span class="string">"3083968068@qq.com"</span>);</span><br><span class="line">                req.setAttribute(<span class="string">"cmdType"</span>, <span class="string">"ç¼–è¾‘"</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                req.setAttribute(<span class="string">"cmdType"</span>, <span class="string">"æ–°å¢"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            req.getRequestDispatcher(<span class="string">"/WEB-INF/views/employee/input.jsp"</span>).forward(req, resp);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"savaOrUpdate"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"delete"</span>.equals(cmd)) &#123;</span><br><span class="line">            <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            req.getRequestDispatcher(<span class="string">"/WEB-INF/views/employee/list.jsp"</span>).forward(req, resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="æ¡ˆä¾‹æˆªå±"><a href="#æ¡ˆä¾‹æˆªå±" class="headerlink" title="æ¡ˆä¾‹æˆªå±"></a>æ¡ˆä¾‹æˆªå±</h3><p><em>ç”¨æˆ·ç™»å½•é¡µé¢ :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹/Shiroæ•´åˆweb-ç”¨æˆ·ç™»å½•é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç”¨æˆ·ä¸»é¡µé¢ :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹/Shiroæ•´åˆweb-ç”¨æˆ·ä¸»é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç®¡ç†å‘˜(<code>admin</code>)èº«ä»½ç™»å½• : éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µ( è¯¥ç”¨æˆ·æ‹¥æœ‰æ“æ§éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µçš„æ‰€æœ‰æƒé™ )</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹/Shiroæ•´åˆweb-admin-éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>ç®¡ç†å‘˜(<code>admin</code>)èº«ä»½ç™»å½• : å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µ( è¯¥ç”¨æˆ·æ‹¥æœ‰æ“æ§å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µçš„æ‰€æœ‰æƒé™ )</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹/Shiroæ•´åˆweb-admin-å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ™®é€šç”¨æˆ·(<code>yuhui</code>)èº«ä»½ç™»å½• : éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µ( è¯¥ç”¨æˆ·åªå…·æœ‰éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µçš„<code>view</code>æƒé™ )</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹/Shiroæ•´åˆweb-yuhui-éƒ¨é—¨ä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>æ™®é€šç”¨æˆ·(<code>yuhui</code>)èº«ä»½ç™»å½• : å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µ( è¯¥ç”¨æˆ·å¹¶æ²¡æœ‰æ“æ§å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µçš„æƒé™ )</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹/Shiroæ•´åˆweb-yuhui-å‘˜å·¥ä¿¡æ¯ç®¡ç†é¡µ.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Shiroæ•´åˆWeb-ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Shiroæ•´åˆWeb : ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æƒé™æ§åˆ¶æ¡ˆä¾‹&quot;
      
    
    </summary>
    
    
      <category term="Java web" scheme="http://yoursite.com/tags/Java-web/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>Hi Layui ~</title>
    <link href="http://yoursite.com/2019/08/04/Hi-Layui/"/>
    <id>http://yoursite.com/2019/08/04/Hi-Layui/</id>
    <published>2019-08-04T02:16:22.000Z</published>
    <updated>2019-08-04T03:40:57.889Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui"><a href="#å­¦ä¹ ç¬”è®°-æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui" class="headerlink" title="å­¦ä¹ ç¬”è®° : æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui"></a>å­¦ä¹ ç¬”è®° : æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui</h2><p><em>layui çš„å‡ºå‘ç‚¹å¾ˆç®€å• : <code>æ»¡è¶³æœåŠ¡ç«¯ç¨‹åºå‘˜çš„éœ€æ±‚</code>,å› æ­¤å¯ä»¥æ¯«ä¸ä¿ç•™åœ°è¯´,layui å¹¶éé¢å‘äºå‰ç«¯å¼€å‘è€…,æ‰€ä»¥åœ¨ç»„ç»‡å½¢å¼ä¸Šæ¯…ç„¶é‡‡ç”¨äº†å‡ å¹´å‰çš„ä»¥æµè§ˆå™¨ä¸ºå®¿ä¸»çš„ç±» AMD æ¨¡å—ç®¡ç†æ–¹å¼. å¯¹æ¯”EasyUI,Layuiçš„ä½œè€…<code>è´¤å¿ƒ</code>å†™å‡ºäº†å¦‚ä¸‹è¯„è¯­,ä¸€ç›´ç”¨EasyUIå†™å°é¡¹ç›®å‰ç«¯çš„æˆ‘çœ‹åå†…å¿ƒæ³¢æ¶›æ±¹æ¶Œ,ç‰¹ä¹ˆå¤ªç”ŸåŠ¨äº†è¶´ãƒ¾(=ï½¥Ï‰ï½¥=)o</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Layui : ä¸€ä¸ªæ˜¯é‚»å®¶å¥³å­©ï¼Œå°šå¤„èŠ³é¾„ï¼Œç®€è€Œçº¯</span><br><span class="line">EasyUI : ä¸€ä¸ªæ˜¯å½ªæ‚å¦‡å¥³ï¼Œæ˜¨æ—¥é»„èŠ±ï¼Œå¼ºè€Œä¸‘</span><br></pre></td></tr></table></figure></p><h3 id="å®˜æ–¹ç®€ä»‹"><a href="#å®˜æ–¹ç®€ä»‹" class="headerlink" title="å®˜æ–¹ç®€ä»‹"></a>å®˜æ–¹ç®€ä»‹</h3><p><em>å®˜æ–¹ç®€ä»‹ : layui(è°éŸ³:ç±»UI)æ˜¯ä¸€æ¬¾é‡‡ç”¨è‡ªèº«æ¨¡å—è§„èŒƒç¼–å†™çš„å‰ç«¯ UI æ¡†æ¶,éµå¾ªåŸç”Ÿ HTML/CSS/JS çš„ä¹¦å†™ä¸ç»„ç»‡å½¢å¼,é—¨æ§›æä½,æ‹¿æ¥å³ç”¨. å…¶å¤–åœ¨æç®€,å´åˆä¸å¤±é¥±æ»¡çš„å†…åœ¨,ä½“ç§¯è½»ç›ˆ,ç»„ä»¶ä¸°ç›ˆ,ä»æ ¸å¿ƒä»£ç åˆ° API çš„æ¯ä¸€å¤„ç»†èŠ‚éƒ½ç»è¿‡ç²¾å¿ƒé›•ç¢,éå¸¸é€‚åˆç•Œé¢çš„å¿«é€Ÿå¼€å‘. layui é¦–ä¸ªç‰ˆæœ¬å‘å¸ƒäº2016å¹´é‡‘ç§‹,å¥¹åŒºåˆ«äºé‚£äº›åŸºäº MVVM åº•å±‚çš„ UI æ¡†æ¶,å´å¹¶éé€†é“è€Œè¡Œ,è€Œæ˜¯ä¿¡å¥‰è¿”ç’å½’çœŸä¹‹é“. å‡†ç¡®åœ°è¯´,å¥¹æ›´å¤šæ˜¯ä¸ºæœåŠ¡ç«¯ç¨‹åºå‘˜é‡èº«å®šåš,ä½ æ— éœ€æ¶‰è¶³å„ç§å‰ç«¯å·¥å…·çš„å¤æ‚é…ç½®,åªéœ€é¢å¯¹æµè§ˆå™¨æœ¬èº«,è®©ä¸€åˆ‡ä½ æ‰€éœ€è¦çš„å…ƒç´ ä¸äº¤äº’,ä»è¿™é‡Œä¿¡æ‰‹æ‹ˆæ¥~</em></p><h3 id="å…¼å®¹æ€§å’Œé¢å‘åœºæ™¯"><a href="#å…¼å®¹æ€§å’Œé¢å‘åœºæ™¯" class="headerlink" title="å…¼å®¹æ€§å’Œé¢å‘åœºæ™¯"></a>å…¼å®¹æ€§å’Œé¢å‘åœºæ™¯</h3><p><em>layui å…¼å®¹äººç±»æ­£åœ¨ä½¿ç”¨çš„å…¨éƒ¨æµè§ˆå™¨(IE6/7é™¤å¤–),å¯ä½œä¸º PC ç«¯åå°ç³»ç»Ÿä¸å‰å°ç•Œé¢çš„é€Ÿæˆå¼€å‘æ–¹æ¡ˆ</em></p><h3 id="ä¸»è¦æ¨¡å—"><a href="#ä¸»è¦æ¨¡å—" class="headerlink" title="ä¸»è¦æ¨¡å—"></a>ä¸»è¦æ¨¡å—</h3><p><em>layui æä¾›äº†ä¸°å¯Œçš„å†…ç½®æ¨¡å—,ä»–ä»¬çš†å¯é€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼æŒ‰éœ€åŠ è½½,å…¶ä¸­åŒ…æ‹¬ : layerã€layDateã€layPageã€laytplã€tableã€formã€uploadã€elementã€treeã€layeditorã€rateã€carouselã€flowã€utilã€codeç­‰..</em></p><h3 id="ç¬¬ä¸€ä¸ªLayuié¡µé¢"><a href="#ç¬¬ä¸€ä¸ªLayuié¡µé¢" class="headerlink" title="ç¬¬ä¸€ä¸ªLayuié¡µé¢"></a>ç¬¬ä¸€ä¸ªLayuié¡µé¢</h3><p><em>æ¥ä¸‹æ¥é€šè¿‡Layuiçš„è¡¨å•æ¨¡å—,æ¥å¿«é€Ÿå†™åœ°ä¸€ä¸ªç®€æ´çš„ç”¨æˆ·ç™»å½•é¡µé¢ !ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../resources/layui/layui-v2.5.4/layui/layui.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../resources/layui/layui-v2.5.4/layui/css/layui.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>layuiè¡¨å•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">style</span>=<span class="string">"margin-left: 400px;padding-top: 100px;"</span> <span class="attr">class</span>=<span class="string">"layui-form"</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-form-item"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"layui-form-label"</span>&gt;</span>è¾“å…¥æ¡†<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-input-inline"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">style</span>=<span class="string">"width: 300px;"</span> <span class="attr">required</span> <span class="attr">lay-verify</span>=<span class="string">"required"</span> <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥è´¦å·"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">autocomplete</span>=<span class="string">"off"</span> <span class="attr">class</span>=<span class="string">"layui-input"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-form-item"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"layui-form-label"</span>&gt;</span>å¯†ç æ¡†<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-input-inline"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">style</span>=<span class="string">"width: 300px;"</span> <span class="attr">required</span> <span class="attr">lay-verify</span>=<span class="string">"required"</span> <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥å¯†ç "</span></span></span><br><span class="line"><span class="tag"> <span class="attr">autocomplete</span>=<span class="string">"off"</span> <span class="attr">class</span>=<span class="string">"layui-input"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-form-item"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"layui-form-label"</span>&gt;</span>å¤é€‰æ¡†<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-input-block"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"like[student]"</span> <span class="attr">title</span>=<span class="string">"å­¦ç”Ÿ"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"like[teacher]"</span> <span class="attr">title</span>=<span class="string">"æ•™å¸ˆ"</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-form-item"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layui-input-block"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"layui-btn"</span> <span class="attr">lay-submit</span> <span class="attr">lay-filter</span>=<span class="string">"formDemo"</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">class</span>=<span class="string">"layui-btn layui-btn-primary"</span>&gt;</span>é‡ç½®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">//Demo</span></span><br><span class="line"><span class="undefined">layui.use('form', function() &#123;</span></span><br><span class="line"><span class="undefined">var form = layui.form;</span></span><br><span class="line"><span class="undefined">//ç›‘å¬æäº¤</span></span><br><span class="line"><span class="undefined">form.on('submit(formDemo)', function(data) &#123;</span></span><br><span class="line"><span class="undefined">layer.msg(JSON.stringify(data.field));</span></span><br><span class="line"><span class="undefined">return false;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º,æ˜¯ä¸æ˜¯æ„Ÿè§‰ç¬é—´çˆ±ä¸ŠLayuiäº†å‘¢ !</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/04/Hi-Layui/Layui-form.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p><em>âœ¨ Layuiå®˜æ–¹ä½¿ç”¨æ–‡æ¡£ : <a href="https://www.layui.com/doc/" target="_blank" rel="noopener">https://www.layui.com/doc/</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : æ‹¥æŠ±å‰ç«¯æ¡†æ¶Layui&lt;/h2&gt;&lt;p&gt;&lt;em&gt;layui 
      
    
    </summary>
    
    
      <category term="Layui" scheme="http://yoursite.com/tags/Layui/"/>
    
  </entry>
  
  <entry>
    <title>Shiroçš„æ‹¦æˆªå™¨æœºåˆ¶</title>
    <link href="http://yoursite.com/2019/08/03/Shiro%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%E6%9C%BA%E5%88%B6/"/>
    <id>http://yoursite.com/2019/08/03/Shiroçš„æ‹¦æˆªå™¨æœºåˆ¶/</id>
    <published>2019-08-03T00:01:57.000Z</published>
    <updated>2019-08-03T11:57:19.995Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Shiroçš„æ‹¦æˆªæœºåˆ¶"><a href="#å­¦ä¹ ç¬”è®°-Shiroçš„æ‹¦æˆªæœºåˆ¶" class="headerlink" title="å­¦ä¹ ç¬”è®° : Shiroçš„æ‹¦æˆªæœºåˆ¶"></a>å­¦ä¹ ç¬”è®° : Shiroçš„æ‹¦æˆªæœºåˆ¶</h2><h3 id="é»˜è®¤æ‹¦æˆªå™¨"><a href="#é»˜è®¤æ‹¦æˆªå™¨" class="headerlink" title="é»˜è®¤æ‹¦æˆªå™¨"></a>é»˜è®¤æ‹¦æˆªå™¨</h3><p><em>Shiroå†…ç½®äº†å¾ˆå¤šé»˜è®¤çš„æ‹¦æˆªå™¨,æ¯”å¦‚èº«ä»½éªŒè¯ã€æˆæƒç­‰ç›¸å…³çš„.æ›´å¤šé»˜è®¤æ‹¦æˆªå™¨å¯ä»¥å‚è€ƒ <code>org.apache.shiro.web.filter.mgt.DefaultFilter</code>ä¸­çš„æšä¸¾æ‹¦æˆªå™¨,å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Enum representing all of the default Shiro Filter instances available to web applications.  </span></span><br><span class="line"><span class="comment"> * Each filter instance is typically accessible </span></span><br><span class="line"><span class="comment"> * in configuration the &#123;<span class="doctag">@link</span> #name() name&#125; of the enum constant.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> DefaultFilter &#123;</span><br><span class="line"></span><br><span class="line">    anon(AnonymousFilter.class),</span><br><span class="line">    authc(FormAuthenticationFilter.class),</span><br><span class="line">    authcBasic(BasicHttpAuthenticationFilter.class),</span><br><span class="line">    logout(LogoutFilter.class),</span><br><span class="line">    noSessionCreation(NoSessionCreationFilter.class),</span><br><span class="line">    perms(PermissionsAuthorizationFilter.class),</span><br><span class="line">    port(PortFilter.class),</span><br><span class="line">    rest(HttpMethodPermissionFilter.class),</span><br><span class="line">    roles(RolesAuthorizationFilter.class),</span><br><span class="line">    ssl(SslFilter.class),</span><br><span class="line">    user(UserFilter.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Class&lt;? extends Filter&gt; filterClass;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">DefaultFilter</span><span class="params">(Class&lt;? extends Filter&gt; filterClass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.filterClass = filterClass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Filter <span class="title">newInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (Filter) ClassUtils.newInstance(<span class="keyword">this</span>.filterClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Class&lt;? extends Filter&gt; getFilterClass() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.filterClass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Filter&gt; <span class="title">createInstanceMap</span><span class="params">(FilterConfig config)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Filter&gt; filters = <span class="keyword">new</span> LinkedHashMap&lt;String, Filter&gt;(values().length);</span><br><span class="line">        <span class="keyword">for</span> (DefaultFilter defaultFilter : values()) &#123;</span><br><span class="line">            Filter filter = defaultFilter.newInstance();</span><br><span class="line">            <span class="keyword">if</span> (config != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    filter.init(config);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ServletException e) &#123;</span><br><span class="line">                    String msg = <span class="string">"Unable to correctly init default filter instance of type "</span> +</span><br><span class="line">                            filter.getClass().getName();</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(msg, e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            filters.put(defaultFilter.name(), filter);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> filters;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/03/Shiroçš„æ‹¦æˆªå™¨æœºåˆ¶/Shiro-ShiroFilter.jpg" alt title>                </div>                <div class="image-caption"></div>            </figure><table><thead><tr><th style="text-align:center">è¿‡æ»¤å™¨ç®€ç§°</th><th style="text-align:center">å¯¹åº”çš„javaç±»</th></tr></thead><tbody><tr><td style="text-align:center">anon</td><td style="text-align:center">org.apache.shiro.web.filter.authc.AnonymousFilter</td></tr><tr><td style="text-align:center">authc</td><td style="text-align:center">org.apache.shiro.web.filter.authc.FormAuthenticationFilter</td></tr><tr><td style="text-align:center">authcBasic</td><td style="text-align:center">org.apache.shiro.web.filter.authc.BasicHttpAuthenticationFilter</td></tr><tr><td style="text-align:center">roles</td><td style="text-align:center">org.apache.shiro.web.filter.authz.RolesAuthorizationFilter</td></tr><tr><td style="text-align:center">perms</td><td style="text-align:center">org.apache.shiro.web.filter.authz.PermissionsAuthorizationFilter</td></tr><tr><td style="text-align:center">user</td><td style="text-align:center">org.apache.shiro.web.filter.authc.UserFilter</td></tr><tr><td style="text-align:center">logout</td><td style="text-align:center">org.apache.shiro.web.filter.authc.LogoutFilter</td></tr><tr><td style="text-align:center">port</td><td style="text-align:center">org.apache.shiro.web.filter.authz.PortFilter</td></tr><tr><td style="text-align:center">rest</td><td style="text-align:center">org.apache.shiro.web.filter.authz.HttpMethodPermissionFilter</td></tr><tr><td style="text-align:center">ssl</td><td style="text-align:center">org.apache.shiro.web.filter.authz.SslFilter</td></tr></tbody></table><ol><li><code>anon</code> : åŒ¿åæ‹¦æˆªå™¨,å³ä¸éœ€è¦ç™»å½•å³å¯è®¿é—®. ä¸€èˆ¬ç”¨äºé™æ€èµ„æºè¿‡æ»¤,ç¤ºä¾‹â€/static/**=anonâ€</li><li><code>authc</code> : è¡¨ç¤ºéœ€è¦è®¤è¯(ç™»å½•)æ‰èƒ½ä½¿ç”¨,ç¤ºä¾‹â€/**=authcâ€,ä¸»è¦å±æ€§æœ‰ : <ul><li>usernameParam : è¡¨å•æäº¤çš„ç”¨æˆ·åå‚æ•°å(username)</li><li>passwordParam : è¡¨å•æäº¤çš„å¯†ç å‚æ•°å(password)</li><li>rememberMeParam : è¡¨å•æäº¤çš„å¯†ç å‚æ•°å(rememberMe)</li><li>loginUrl : ç™»å½•è¯·æ±‚åœ°å€(/login.jsp)</li><li>successUrl : ç™»å½•æˆåŠŸåçš„é»˜è®¤é‡å®šå‘åœ°å€</li><li>failureKeyAttribute : ç™»å½•å¤±è´¥åé”™è¯¯ä¿¡æ¯å­˜å‚¨key(shiroLoginFailure)</li></ul></li><li><code>authcBasic</code> : Basic HTTPèº«ä»½éªŒè¯æ‹¦æˆªå™¨,ä¸»è¦å±æ€§ : applicationName:å¼¹å‡ºç™»å½•æ¡†æ˜¾ç¤ºçš„ä¿¡æ¯(application)</li><li><code>roles</code> : è§’è‰²æˆæƒæ‹¦æˆªå™¨,éªŒè¯ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰èµ„æºè§’è‰². ç¤ºä¾‹â€/admin/**=roles[admin]â€</li><li><code>perms</code> : æƒé™æˆæƒæ‹¦æˆªå™¨,éªŒè¯ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰èµ„æºæƒé™. ç¤ºä¾‹â€/user/create=perms[â€œuser:createâ€]â€</li><li><code>user</code> : ç”¨æˆ·æ‹¦æˆªå™¨,ç”¨æˆ·å·²ç»èº«ä»½éªŒè¯/è®°ä½æˆ‘çš„ç™»å½•. ç¤ºä¾‹â€/index=userâ€</li><li><code>logout</code> : é€€å‡ºæ‹¦æˆªå™¨,ä¸»è¦å±æ€§ : redirectUrl:é€€å‡ºæˆåŠŸåé‡å®šå‘çš„åœ°å€(/). ç¤ºä¾‹â€/logout=logoutâ€</li><li><code>port</code> : ç«¯å£æ‹¦æˆªå™¨,ä¸»è¦å±æ€§ : port(80):å¯ä»¥é€šè¿‡çš„ç«¯å£. ç¤ºä¾‹â€/test= port[80]â€,å¦‚æœç”¨æˆ·è®¿é—®è¯¥é¡µé¢æ˜¯é80,å°†è‡ªåŠ¨å°†è¯·æ±‚ç«¯å£æ”¹ä¸º80å¹¶é‡å®šå‘åˆ°è¯¥80ç«¯å£,å…¶ä»–è·¯å¾„/å‚æ•°ç­‰ç›¸åŒ</li><li><code>rest</code> : resté£æ ¼æ‹¦æˆªå™¨,è‡ªåŠ¨æ ¹æ®è¯·æ±‚æ–¹æ³•æ„å»ºæƒé™å­—ç¬¦ä¸²(GET=read,POST=create,PUT=update,DELETE=delete,HEAD=read,TRACE=read,OPTIONS=read, MKCOL=create)æ„å»ºæƒé™å­—ç¬¦ä¸². ç¤ºä¾‹â€/users=rest[user]â€,ä¼šè‡ªåŠ¨æ‹¼å‡ºâ€user:read,user:create,user:update,user:deleteâ€æƒé™å­—ç¬¦ä¸²è¿›è¡Œæƒé™åŒ¹é…(æ‰€æœ‰éƒ½å¾—åŒ¹é…:isPermittedAll)</li><li><code>ssl</code> : SSLæ‹¦æˆªå™¨,åªæœ‰è¯·æ±‚åè®®æ˜¯httpsæ‰èƒ½é€šè¿‡. å¦åˆ™è‡ªåŠ¨è·³è½¬ä¼šhttpsç«¯å£(443). å…¶ä»–å’Œportæ‹¦æˆªå™¨ä¸€æ ·</li></ol><ul><li>æ³¨ : anon,authcBasic,auchc,useræ˜¯è®¤è¯è¿‡æ»¤å™¨. perms,roles,ssl,rest,portæ˜¯æˆæƒè¿‡æ»¤å™¨</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Shiroçš„æ‹¦æˆªæœºåˆ¶&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Shiroçš„æ‹¦æˆªæœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Shiroçš„æ‹¦æˆªæœºåˆ¶&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Shiroçš„æ‹¦æˆªæœºåˆ¶&lt;/h2&gt;&lt;h3 id=&quot;é»˜è®¤æ‹¦æˆªå™¨&quot;&gt;&lt;a
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>Shiroä¹‹ç”¨æˆ·æˆæƒ</title>
    <link href="http://yoursite.com/2019/08/02/Shiro%E4%B9%8B%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83/"/>
    <id>http://yoursite.com/2019/08/02/Shiroä¹‹ç”¨æˆ·æˆæƒ/</id>
    <published>2019-08-02T00:28:58.000Z</published>
    <updated>2019-08-03T09:07:53.088Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ"><a href="#å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ" class="headerlink" title="å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ"></a>å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ</h2><p><em>ç®€ä»‹ : æˆæƒ,ä¹Ÿå«è®¿é—®æ§åˆ¶,å³åœ¨åº”ç”¨ä¸­æ§åˆ¶è°èƒ½è®¿é—®å“ªäº›èµ„æº(å¦‚è®¿é—®é¡µé¢/ç¼–è¾‘æ•°æ®/é¡µé¢æ“ä½œç­‰). åœ¨æˆæƒä¸­éœ€äº†è§£çš„å‡ ä¸ªå…³é”®å¯¹è±¡ : ä¸»ä½“(Subject)ã€èµ„æº(Resource)ã€æƒé™(Permission)ã€è§’è‰²(Role),å…¶è§£æå¦‚ä¸‹æ‰€ç¤º :</em></p><ol><li><code>ä¸»ä½“</code> : <em>ä¸»ä½“,å³è®¿é—®åº”ç”¨çš„ç”¨æˆ·,åœ¨Shiroä¸­ä½¿ç”¨Subjectä»£è¡¨è¯¥ç”¨æˆ·. ç”¨æˆ·åªæœ‰æˆæƒåæ‰å…è®¸è®¿é—®ç›¸åº”çš„èµ„æº</em></li><li><code>èµ„æº</code> : <em>åœ¨åº”ç”¨ä¸­ç”¨æˆ·å¯ä»¥è®¿é—®çš„ä»»ä½•èµ„æº,æ¯”å¦‚è®¿é—®JSPé¡µé¢ã€æŸ¥çœ‹/ç¼–è¾‘æŸäº›æ•°æ®ã€è®¿é—®æŸä¸ªä¸šåŠ¡æ–¹æ³•ã€æ‰“å°æ–‡æœ¬ç­‰ç­‰..ç”¨æˆ·éœ€è¦æˆæƒåæ–¹å¯è®¿é—®</em></li><li><code>æƒé™</code> : <em>å®‰å…¨ç­–ç•¥ä¸­çš„åŸå­æˆæƒå•ä½,å¯ç”¨æƒé™æ§åˆ¶ç”¨æˆ·åœ¨åº”ç”¨ä¸­æ˜¯å¦èƒ½è®¿é—®æŸä¸ªèµ„æº,å¦‚è®¿é—®ç”¨æˆ·åˆ—è¡¨é¡µé¢,æŸ¥çœ‹/æ–°å¢/ä¿®æ”¹/åˆ é™¤ç”¨æˆ·æ•°æ®(åŸºæœ¬ä¸ºCRUDå¼æƒé™æ§åˆ¶)..</em></li><li><p><code>è§’è‰²</code> : <em>è§’è‰²ä»£è¡¨äº†æ“ä½œé›†åˆ,å¯ä»¥ç†è§£ä¸ºæƒé™çš„é›†åˆ,ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼šèµ‹äºˆç”¨æˆ·è§’è‰²è€Œä¸æ˜¯æƒé™,å³è¿™æ ·ç”¨æˆ·å¯ä»¥æ‹¥æœ‰ä¸€ç»„æƒé™,ä¸åŒçš„è§’è‰²æ‹¥æœ‰ä¸€ç»„ä¸åŒçš„æƒé™</em></p><ul><li><code>éšå¼è§’è‰²</code> : <em>å³ç›´æ¥é€šè¿‡è§’è‰²æ¥éªŒè¯ç”¨æˆ·æœ‰æ²¡æœ‰æ“ä½œæƒé™,å³ç²’åº¦æ˜¯ä»¥è§’è‰²ä¸ºå•ä½è¿›è¡Œè®¿é—®æ§åˆ¶çš„,ç²’åº¦è¾ƒç²—. è‹¥è¿›è¡Œå˜æ›´å¯èƒ½éœ€è¦å¤šå¤„ä»£ç çš„ä¿®æ”¹</em></li><li><code>æ˜¾ç¤ºè§’è‰²</code> : <em>åœ¨ç¨‹åºä¸­é€šè¿‡æƒé™æ§åˆ¶è°èƒ½è®¿é—®æŸä¸ªèµ„æº,è§’è‰²èšåˆä¸€ç»„æƒé™é›†åˆ. è¿™æ ·è‹¥éœ€è¦å“ªä¸ªè§’è‰²ä¸èƒ½è®¿é—®æŸä¸ªèµ„æº,åªéœ€è¦ä»è§’è‰²ä»£è¡¨çš„æƒé™é›†åˆä¸­ç§»é™¤æŒ‡å®šçš„è®¿é—®æƒé™å³å¯,æ— é¡»ä¿®æ”¹å¤šå¤„ä»£ç </em></li></ul></li></ol><h3 id="æˆæƒæ–¹å¼"><a href="#æˆæƒæ–¹å¼" class="headerlink" title="æˆæƒæ–¹å¼"></a>æˆæƒæ–¹å¼</h3><p><em>Shiro æ”¯æŒä¸‰ç§æ–¹å¼çš„æˆæƒ,å¦‚ä¸‹æ‰€ç¤º :</em></p><ol><li><p><em><code>ç¼–ç¨‹å¼</code> : é€šè¿‡å†™if/elseæˆæƒä»£ç å—å®Œæˆ</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Subject subject = SecurityUtils.getSubject();</span><br><span class="line"><span class="keyword">if</span>(subject.hasRole(<span class="string">"admin"</span>)) &#123;</span><br><span class="line">    <span class="comment">//æœ‰æƒé™</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//æ— æƒé™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em><code>æ³¨è§£å¼</code> : é€šè¿‡åœ¨æ‰§è¡Œçš„Javaæ–¹æ³•ä¸Šæ”¾ç½®ç›¸åº”çš„æ³¨è§£å®Œæˆ</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequiresRoles</span>(<span class="string">"admin"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æœ‰æƒé™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em><code>JSP/GSP æ ‡ç­¾</code> : åœ¨JSP/GSPé¡µé¢é€šè¿‡ç›¸åº”çš„æ ‡ç­¾å®Œæˆ</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shiro:hasRole</span> <span class="attr">name</span>=<span class="string">"admin"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">!â€”</span> æœ‰æƒé™ â€”&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:hasRole</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="æˆæƒæµç¨‹"><a href="#æˆæƒæµç¨‹" class="headerlink" title="æˆæƒæµç¨‹"></a>æˆæƒæµç¨‹</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/02/Shiroä¹‹ç”¨æˆ·æˆæƒ/Shiro-æˆæƒæµç¨‹.png" alt title>                </div>                <div class="image-caption"></div>            </figure><ol><li><em>é¦–å…ˆè°ƒç”¨`Subject.isPermitted</em>/hasRole<em>`æ¥å£,å…¶ä¼šå§”æ‰˜ç»™SecurityManager,è€ŒSecurityManageræ¥ç€ä¼šå§”æ‰˜ç»™Authorizer</em></li><li><em>Authorizeræ˜¯çœŸæ­£çš„æˆæƒè€…,å¦‚æœæˆ‘ä»¬è°ƒç”¨å¦‚isPermitted(â€œuser:createâ€),å…¶é¦–å…ˆä¼šé€šè¿‡PermissionResolveræŠŠå­—ç¬¦ä¸²è½¬æ¢æˆç›¸åº”çš„Permissionå®ä¾‹</em></li><li><em>åœ¨è¿›è¡Œæˆæƒä¹‹å‰,å…¶ä¼šè°ƒç”¨ç›¸åº”çš„Realmè·å–Subjectç›¸åº”çš„è§’è‰²/æƒé™ç”¨äºåŒ¹é…ä¼ å…¥çš„è§’è‰²/æƒé™</em></li><li><em>Authorizerä¼šåˆ¤æ–­Realmçš„è§’è‰²/æƒé™æ˜¯å¦å’Œä¼ å…¥çš„åŒ¹é…,å¦‚æœæœ‰å¤šä¸ªRealm,åˆ™ä¼šå§”æ‰˜ç»™ModularRealmAuthorizerè¿›è¡Œå¾ªç¯åˆ¤æ–­,å¦‚æœåŒ¹é…å¦‚`isPermitted</em>/hasRole<em>`ä¼šè¿”å›true,å¦åˆ™è¿”å›falseä»¥è¡¨ç¤ºæˆæƒå¤±è´¥</em></li></ol><h3 id="iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²"><a href="#iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²" class="headerlink" title="iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²"></a>iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²</h3><p><em>é€šè¿‡åŠ è½½<code>ini</code>é…ç½®æ–‡ä»¶çš„æ–¹å¼,æ¥å®ç°ä¸€ä¸ªç”¨äºæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŒ‡å®šè§’è‰²çš„ç¨‹åº~</em></p><ol><li><p><em>pom.xml : Mavenä¾èµ–</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiroæ ¸å¿ƒåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- slf4jçš„æ¥å£å®ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>per-shiro.ini : ç”¨æˆ·èº«ä»½åŠæƒé™é…ç½®ä¿¡æ¯</em></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æƒé™è¡¨è¾¾å¼çš„å®šä¹‰:é¦–å…ˆæ ¹æ®ç”¨æˆ·åæŸ¥æ‰¾è§’è‰²,å†æ ¹æ®è§’è‰²æŸ¥æ‰¾æƒé™,è§’è‰²æ˜¯æƒé™çš„é›†åˆ</span></span><br><span class="line"></span><br><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="comment">#ç”¨æˆ·hunagyuhuiçš„å¯†ç ä¸ºloveyourself,ä¸”å…·æœ‰studentå’Œprogrammerä¸¤ä¸ªè§’è‰²</span></span><br><span class="line"><span class="attr">huangyuhui</span> = loveyourself,student,programmer</span><br><span class="line"></span><br><span class="line"><span class="section">[roles]</span></span><br><span class="line"><span class="comment">#è§’è‰²studentå¯¹èµ„æº'user'æ‹¥æœ‰create,updateæƒé™</span></span><br><span class="line"><span class="attr">student</span> = user:create,user:update</span><br><span class="line"><span class="comment">#è§’è‰²programmerå¯¹èµ„æº'user'å…·æœ‰insert,deleteæƒé™</span></span><br><span class="line"><span class="attr">programmer</span> = user:read,user:delete</span><br></pre></td></tr></table></figure></li><li><p><em>RolesTest.java : éªŒè¯ç”¨æˆ·è§’è‰²ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.permission;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.UnauthorizedException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RolesTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1:åŠ è½½é…ç½®æ–‡ä»¶,åˆ›å»ºSecurityManagerå·¥å‚å¯¹è±¡</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:per-shiro.ini"</span>);</span><br><span class="line">        <span class="comment">//2:è·å¾—securityManagerå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        <span class="comment">//3:å°†securityMangerå®ä¾‹ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒä¸­,ä¾¿äºè®¿é—®</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//4:åˆ›å»ºå½“å‰ç™»å½•çš„ä¸»ä½“</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//5:ç»‘å®šä¸»ä½“ç™»å½•çš„èº«ä»½/å‡­è¯,æ—¢è´¦æˆ·åŠå¯†ç </span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"huangyuhui"</span>, <span class="string">"loveyourself"</span>);</span><br><span class="line">        <span class="comment">//6:ä¸»ä½“ç™»å½•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            currentUser.login(token);</span><br><span class="line">            System.out.println(<span class="string">"ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :"</span> + currentUser.isAuthenticated());</span><br><span class="line">            <span class="comment">//7:è¿›è¡Œç”¨æˆ·è§’è‰²åˆ¤æ–­</span></span><br><span class="line">            System.out.println(<span class="string">"åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰'student'è§’è‰² : "</span> + currentUser.hasRole(<span class="string">"student"</span>));</span><br><span class="line">            System.out.println(<span class="string">"åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦åŒæ—¶æ‹¥æœ‰'student'ä¸'programmer'è§’è‰² : "</span> + currentUser.hasAllRoles(List.of(<span class="string">"student"</span>, <span class="string">"programmer"</span>)));</span><br><span class="line">            System.out.println(<span class="string">"åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰'student','programmer','singer'è§’è‰² : "</span> + Arrays.toString(currentUser.hasRoles(List.of(<span class="string">"student"</span>, <span class="string">"programmer"</span>, <span class="string">"singer"</span>))));</span><br><span class="line">            <span class="comment">//åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªè§’è‰²,è‹¥æ‹¥æœ‰è¯¥è§’è‰²åˆ™ä¸åšä»»ä½•æ“ä½œ(æ— è¿”å›å€¼),åä¹‹åˆ™æŠ›å‡º:UnauthorizedException</span></span><br><span class="line">            currentUser.checkRole(<span class="string">"singer"</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·è´¦æˆ·é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¯†ç é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnauthorizedException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¹¶ä¸æ‹¥æœ‰'singer'è§’è‰² !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//8:æ³¨é”€ç™»å½•</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :"</span> + !currentUser.isAuthenticated());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :<span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰<span class="string">'student'</span>è§’è‰² : <span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦åŒæ—¶æ‹¥æœ‰<span class="string">'student'</span>ä¸<span class="string">'programmer'</span>è§’è‰² : <span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰<span class="string">'student'</span>,<span class="string">'programmer'</span>,<span class="string">'singer'</span>è§’è‰² : [<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·å¹¶ä¸æ‹¥æœ‰<span class="string">'singer'</span>è§’è‰² !</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :<span class="keyword">true</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™"><a href="#iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™" class="headerlink" title="iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™"></a>iniæ–¹å¼æ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™</h3><p><em>é€šè¿‡åŠ è½½<code>ini</code>é…ç½®æ–‡ä»¶çš„æ–¹å¼,æ¥å®ç°ä¸€ä¸ªç”¨äºæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŒ‡å®šæƒé™çš„ç¨‹åº~</em></p><ol><li><p><em>pom.xml : Mavenä¾èµ–(åŒä¸Š)</em></p></li><li><p><em>per-shiro.ini : ç”¨æˆ·èº«ä»½åŠæƒé™é…ç½®ä¿¡æ¯(åŒä¸Š)</em></p></li><li><p><em>PermissionTest.java : éªŒè¯ç”¨æˆ·æƒé™ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.permission;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.UnauthorizedException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissionsTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1:åŠ è½½é…ç½®æ–‡ä»¶,åˆ›å»ºSecurityManagerå·¥å‚å¯¹è±¡</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:per-shiro.ini"</span>);</span><br><span class="line">        <span class="comment">//2:è·å¾—securityManagerå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        <span class="comment">//3:å°†securityMangerå®ä¾‹ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒä¸­,ä¾¿äºè®¿é—®</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//4:åˆ›å»ºå½“å‰ç™»å½•çš„ä¸»ä½“</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//5:ç»‘å®šä¸»ä½“ç™»å½•çš„èº«ä»½/å‡­è¯,æ—¢è´¦æˆ·åŠå¯†ç </span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"huangyuhui"</span>, <span class="string">"loveyourself"</span>);</span><br><span class="line">        <span class="comment">//6:ä¸»ä½“ç™»å½•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            currentUser.login(token);</span><br><span class="line">            System.out.println(<span class="string">"ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :"</span> + currentUser.isAuthenticated());</span><br><span class="line">            <span class="comment">//7:è¿›è¡Œç”¨æˆ·æƒé™åˆ¤æ–­</span></span><br><span class="line">            System.out.println(<span class="string">"å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº'user'çš„'create'ä¸'read'æƒé™ : "</span> + Arrays.toString(currentUser.isPermitted(<span class="string">"user:create"</span>, <span class="string">"user:read"</span>)));</span><br><span class="line">            System.out.println(<span class="string">"å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº'user'çš„'update'ä¸'delete'æƒé™ : "</span> + Arrays.toString(currentUser.isPermitted(<span class="string">"user:update"</span>, <span class="string">"user:delete"</span>)));</span><br><span class="line">            System.out.println(<span class="string">"å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº'user'çš„'import'ä¸'export'æƒé™ : "</span> + Arrays.toString(currentUser.isPermitted(<span class="string">"user:import"</span>, <span class="string">"user:export"</span>)));</span><br><span class="line">            <span class="comment">//åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªæƒé™,è‹¥æœ‰åˆ™ä¸åšä»»ä½•æ“ä½œ(æ— è¿”å›å€¼),åä¹‹æŠ›å‡º:UnauthorizedException</span></span><br><span class="line">            currentUser.checkPermission(<span class="string">"user:getUserList"</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·è´¦æˆ·é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¯†ç é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnauthorizedException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"å½“å‰ç”¨æˆ·å¹¶æœªæ‹¥æœ‰å¯¹èµ„æº'user'çš„'getUserList'æƒé™ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//8:æ³¨é”€ç™»å½•</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :"</span> + !currentUser.isAuthenticated());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :<span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº<span class="string">'user'</span>çš„<span class="string">'create'</span>ä¸<span class="string">'read'</span>æƒé™ : [<span class="keyword">true</span>, <span class="keyword">true</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº<span class="string">'user'</span>çš„<span class="string">'update'</span>ä¸<span class="string">'delete'</span>æƒé™ : [<span class="keyword">true</span>, <span class="keyword">true</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹èµ„æº<span class="string">'user'</span>çš„<span class="string">'import'</span>ä¸<span class="string">'export'</span>æƒé™ : [<span class="keyword">false</span>, <span class="keyword">false</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">å½“å‰ç”¨æˆ·å¹¶æœªæ‹¥æœ‰å¯¹èµ„æº<span class="string">'user'</span>çš„<span class="string">'getUserList'</span>æƒé™ !</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :<span class="keyword">true</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="è‡ªå®šä¹‰Realmæ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™"><a href="#è‡ªå®šä¹‰Realmæ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™" class="headerlink" title="è‡ªå®šä¹‰Realmæ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™"></a>è‡ªå®šä¹‰Realmæ£€æŸ¥ç”¨æˆ·æ‹¥æœ‰çš„æƒé™</h3><p><em>é€šè¿‡é…ç½®è‡ªå®šä¹‰<code>Realm</code>çš„æ–¹å¼,æ¥å®ç°ä¸€ä¸ªç”¨äºéªŒè¯ç”¨äºè§’è‰²åŠæƒé™çš„ç¨‹åº~</em></p><ol><li><p><em>pom.xml : Mavenä¾èµ–(åŒä¸Š)</em></p></li><li><p><em>per-my-shiro.ini : é…ç½®è‡ªå®šä¹‰Realm</em></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŒ‡å®šè‡ªå®šä¹‰realm</span></span><br><span class="line"><span class="attr">myRealm</span> = pers.huangyuhui.permission.realm.PermissRealm</span><br><span class="line"><span class="comment">#æŒ‡å®šSecurityManagerçš„realmså®ç°</span></span><br><span class="line"><span class="attr">securityManager.realm</span> = <span class="variable">$myRealm</span></span><br></pre></td></tr></table></figure></li><li><p><em>PermissionRealm.java : è‡ªå®šä¹‰Realm,å¹¶é…ç½®ç”¨æˆ·è§’è‰²åŠæƒé™ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.permission.realm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.SimpleAuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: shiro-learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: è‡ªå®šä¹‰Realm, é…ç½®ç”¨æˆ·è§’è‰²åŠæƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/2/2019-10:52 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"permissRealm"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//æˆæƒ:å…¶principalså­˜å‚¨ç€ç”¨æˆ·è®¤è¯çš„å‡­è¯ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principals)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–å½“å‰ç™»å½•çš„ç”¨æˆ·åä¿¡æ¯,æ—¢ç”¨æˆ·å‡­è¯</span></span><br><span class="line">        <span class="comment">//Object username = principals.getPrimaryPrincipal();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¨¡æ‹ŸæŸ¥è¯¢æ•°æ®åº“æ“ä½œ:æŸ¥è¯¢ç”¨æˆ·æ‰€æ‹¥æœ‰çš„çš„è§’è‰²åŠæƒé™ä¿¡æ¯</span></span><br><span class="line">        List&lt;String&gt; roles = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; permiss = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">//å‡è®¾è¯¥ç”¨æˆ·æ‹¥æœ‰'student'ä¸'programmer'è§’è‰²</span></span><br><span class="line">        roles.add(<span class="string">"student"</span>);</span><br><span class="line">        roles.add(<span class="string">"programmer"</span>);</span><br><span class="line">        <span class="comment">//å‡è®¾è¯¥ç”¨æˆ·æ‹¥æœ‰å¯¹èµ„æº'user'çš„'read'ä¸'update'æƒé™</span></span><br><span class="line">        permiss.add(<span class="string">"user:create"</span>);</span><br><span class="line">        permiss.add(<span class="string">"user:update"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°è£…ç”¨æˆ·çš„è§’è‰²ä¸æƒé™ä¿¡æ¯å¹¶è¿”å›</span></span><br><span class="line">        SimpleAuthorizationInfo info = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">        info.addRoles(roles);</span><br><span class="line">        info.addStringPermissions(permiss);</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//è®¤è¯:å…¶tokenå­˜å‚¨ç€ä¼ å…¥çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯(usernamePasswordToken)</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–ç”¨æˆ·çš„è´¦æˆ·ä¿¡æ¯å¹¶éªŒè¯</span></span><br><span class="line">        String username = (String) token.getPrincipal();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">"github"</span>.equals(username)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿç”¨æˆ·å¯†ç ä¿¡æ¯</span></span><br><span class="line">        String password = <span class="string">"yubuntu0109"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//SimpleAuthenticationInfo(Object principal, Object credentials, String realmName)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SimpleAuthenticationInfo(username, password, getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>PermissTest.java : éªŒè¯ç”¨æˆ·è§’è‰²åŠæƒé™ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.permission.realm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.UnauthorizedException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1:åŠ è½½é…ç½®æ–‡ä»¶,åˆ›å»ºSecurityManagerå·¥å‚å¯¹è±¡</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:my-per-shiro.ini"</span>);</span><br><span class="line">        <span class="comment">//2:è·å¾—securityManagerå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        <span class="comment">//3:å°†securityMangerå®ä¾‹ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒä¸­,ä¾¿äºè®¿é—®</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//4:åˆ›å»ºå½“å‰ç™»å½•çš„ä¸»ä½“</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//5:ç»‘å®šä¸»ä½“ç™»å½•çš„èº«ä»½/å‡­è¯,æ—¢è´¦æˆ·åŠå¯†ç </span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"github"</span>, <span class="string">"yubuntu0109"</span>);</span><br><span class="line">        <span class="comment">//6:ä¸»ä½“ç™»å½•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            currentUser.login(token);</span><br><span class="line">            System.out.println(<span class="string">"ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :"</span> + currentUser.isAuthenticated());</span><br><span class="line">            <span class="comment">//7:éªŒè¯ç”¨æˆ·è§’è‰²</span></span><br><span class="line">            System.out.println(<span class="string">"åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰'student','programmer','singer'è§’è‰² : "</span></span><br><span class="line">                    + Arrays.toString(currentUser.hasRoles(List.of(<span class="string">"student"</span>, <span class="string">"programmer"</span>, <span class="string">"singer"</span>))));</span><br><span class="line">            <span class="comment">//8:éªŒè¯ç”¨æˆ·æƒé™</span></span><br><span class="line">            System.out.println(<span class="string">"å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹'user'èµ„æºçš„'create','update','read','delete'æƒé™ : "</span></span><br><span class="line">                    + Arrays.toString(currentUser.isPermitted(<span class="string">"user:create"</span>, <span class="string">"user:update"</span>, <span class="string">"user:read"</span>, <span class="string">"user:delete"</span>)));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·è´¦æˆ·é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¯†ç é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//8:æ³¨é”€ç™»å½•</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line">        System.out.println(<span class="string">"ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :"</span> + !currentUser.isAuthenticated());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :<span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰<span class="string">'student'</span>,<span class="string">'programmer'</span>,<span class="string">'singer'</span>è§’è‰² : [<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰å¯¹<span class="string">'user'</span>èµ„æºçš„<span class="string">'create'</span>,<span class="string">'update'</span>,<span class="string">'read'</span>,<span class="string">'delete'</span>æƒé™ : [<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>]</span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ³¨é”€æˆåŠŸ :<span class="keyword">true</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroçš„ç”¨æˆ·æˆæƒ&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ç®€ä»‹
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>Shiroä¹‹è‡ªå®šä¹‰realmåŠå…¶åŠ å¯†</title>
    <link href="http://yoursite.com/2019/08/01/Shiro%E4%B9%8B%E8%87%AA%E5%AE%9A%E4%B9%89realm%E5%8F%8A%E5%85%B6%E5%8A%A0%E5%AF%86/"/>
    <id>http://yoursite.com/2019/08/01/Shiroä¹‹è‡ªå®šä¹‰realmåŠå…¶åŠ å¯†/</id>
    <published>2019-08-01T10:49:46.000Z</published>
    <updated>2019-08-03T12:16:52.960Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Shiroä¹‹è‡ªå®šä¹‰realmåŠå…¶åŠ å¯†"><a href="#å­¦ä¹ ç¬”è®°-Shiroä¹‹è‡ªå®šä¹‰realmåŠå…¶åŠ å¯†" class="headerlink" title="å­¦ä¹ ç¬”è®° :  Shiroä¹‹è‡ªå®šä¹‰realmåŠå…¶åŠ å¯†"></a>å­¦ä¹ ç¬”è®° :  Shiroä¹‹è‡ªå®šä¹‰realmåŠå…¶åŠ å¯†</h2><h3 id="è‡ªå®šä¹‰Realm"><a href="#è‡ªå®šä¹‰Realm" class="headerlink" title="è‡ªå®šä¹‰Realm"></a>è‡ªå®šä¹‰Realm</h3><p><em><code>Realm</code> : åŸŸ,Shiroä»Realmè·å–å®‰å…¨æ•°æ®(å¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™),å°±æ˜¯è¯´SecurityManagerè¦éªŒè¯ç”¨æˆ·èº«ä»½,é‚£ä¹ˆå®ƒéœ€è¦ä»Realmè·å–ç›¸åº”çš„ç”¨æˆ·è¿›è¡Œæ¯”è¾ƒä»¥ç¡®å®šç”¨æˆ·èº«ä»½æ˜¯å¦åˆæ³•. ä¹Ÿéœ€è¦ä»Realmå¾—åˆ°ç”¨æˆ·ç›¸åº”çš„è§’è‰² / æƒé™è¿›è¡ŒéªŒè¯ç”¨æˆ·æ˜¯å¦èƒ½è¿›è¡Œæ“ä½œ,å¯ä»¥æŠŠRealmçœ‹æˆ DataSource,å³å®‰å…¨æ•°æ®æº. å¦‚æˆ‘ä»¬ä¹‹å‰çš„inié…ç½®æ–¹å¼ä½¿ç”¨çš„æ˜¯<code>org.apache.shiro.realm.text.IniRealm</code>æ¥å£</em></p><p><em>org.apache.shiro.realm.Realmæ¥å£å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›ä¸€ä¸ªå”¯ä¸€çš„Realmåå­—</span></span><br><span class="line"><span class="function">String <span class="title">getName</span><span class="params">()</span></span>; </span><br><span class="line"><span class="comment">//åˆ¤æ–­æ­¤Realmæ˜¯å¦æ”¯æŒæ­¤Token</span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">supports</span><span class="params">(AuthenticationToken token)</span></span>; </span><br><span class="line"><span class="comment">//æ ¹æ®Tokenè·å–è®¤è¯ä¿¡æ¯</span></span><br><span class="line"><span class="function">AuthenticationInfo <span class="title">getAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException</span>;</span><br></pre></td></tr></table></figure></p><p><em>ä¸‹é¢é€šè¿‡è‡ªå®šä¹‰Realmæ¥å®ç°ä¸€ä¸ªç®€å•çš„ç”¨æˆ·èº«ä»½éªŒè¯ç¨‹åº~</em></p><ol><li><p><em>pom.xml : Mavenä¾èµ–</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiroæ ¸å¿ƒåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- slf4jçš„æ¥å£å®ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>my-shiro.ini : å­˜å‚¨ç”¨æˆ·èº«ä»½ä¿¡æ¯(è´¦æˆ·=å¯†ç )</em></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è‡ªå®šä¹‰realm</span></span><br><span class="line"><span class="attr">myRealm</span> = pers.huangyuhui.realm.MyRealm</span><br><span class="line"><span class="comment">#æŒ‡å®šSecurityManagerçš„realmså®ç°</span></span><br><span class="line"><span class="attr">securityManager.realm</span> = <span class="variable">$myRealm</span></span><br></pre></td></tr></table></figure></li><li><p><em>MyRealm.java : è‡ªå®šä¹‰Realm,æ¨¡æ‹Ÿä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.realm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.SimpleAuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: shiro-learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: è‡ªå®šä¹‰Realm</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/1/2019-5:59 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"myRealm"</span>; <span class="comment">//åŒºåˆ†ä¸åŒçš„Realm</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//æˆæƒæ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principals)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//è®¤è¯æ“ä½œ:å…¶tokenå­˜å‚¨ç€ä¼ å…¥çš„ç”¨æˆ·ç™»å½•ä¿¡æ¯(usernamePasswordToken)</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–å¹¶éªŒè¯ç”¨æˆ·è´¦å·ä¿¡æ¯</span></span><br><span class="line">        String username = (String) token.getPrincipal();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">"root"</span>.equals(username)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å‡è®¾ç”¨æˆ·å¯†ç ä¿¡æ¯</span></span><br><span class="line">        String password = <span class="string">"yubuntu0109"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//SimpleAuthenticationInfo(Object principal, Object credentials, String realmName)</span></span><br><span class="line">        SimpleAuthenticationInfo info = <span class="keyword">new</span> SimpleAuthenticationInfo(username, password, getName());</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>LoginByMyRealm.java : éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.realm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Shiroè®¤è¯æµ‹è¯•:éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">loginByMyRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1:åŠ è½½é…ç½®æ–‡ä»¶,åˆ›å»ºSecurityManagerå·¥å‚å¯¹è±¡</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:my-shiro.ini"</span>);</span><br><span class="line">        <span class="comment">//2:è·å¾—securityManagerå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        <span class="comment">//3:å°†securityMangerå®ä¾‹ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒä¸­,ä¾¿äºè®¿é—®</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//4:åˆ›å»ºå½“å‰ç™»å½•çš„ä¸»ä½“</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//5:ç»‘å®šä¸»ä½“ç™»å½•çš„èº«ä»½/å‡­è¯,æ—¢è´¦æˆ·åŠå¯†ç </span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"root"</span>, <span class="string">"yubuntu0109"</span>);</span><br><span class="line">        <span class="comment">//6:ä¸»ä½“ç™»å½•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            currentUser.login(token);</span><br><span class="line">            System.out.println(<span class="string">"ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :"</span> + currentUser.isAuthenticated());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·è´¦æˆ·é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¯†ç é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//8:æ³¨é”€ç™»å½•</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line">        System.out.println(<span class="string">"èº«ä»½èº«ä»½æ˜¯å¦æ³¨é”€æˆåŠŸ :"</span> + !currentUser.isAuthenticated());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :<span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">èº«ä»½èº«ä»½æ˜¯å¦æ³¨é”€æˆåŠŸ :<span class="keyword">true</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="åŠ å¯†Realm"><a href="#åŠ å¯†Realm" class="headerlink" title="åŠ å¯†Realm"></a>åŠ å¯†Realm</h3><p><em>Shiroæä¾›äº†base64å’Œ16è¿›åˆ¶å­—ç¬¦ä¸²ç¼–ç  / è§£ç çš„APIæ”¯æŒ,æ–¹ä¾¿ä¸€äº›ç¼–ç è§£ç æ“ä½œ. Shiroå†…éƒ¨çš„ä¸€äº›æ•°æ®çš„å­˜å‚¨åŠè¡¨ç¤ºéƒ½ä½¿ç”¨äº† base64å’Œ16è¿›åˆ¶å­—ç¬¦ä¸²</em></p><h4 id="æ•£åˆ—ç®—æ³•"><a href="#æ•£åˆ—ç®—æ³•" class="headerlink" title="æ•£åˆ—ç®—æ³•"></a>æ•£åˆ—ç®—æ³•</h4><p><em>æ•£åˆ—ç®—æ³•ä¸€èˆ¬ç”¨äºç”Ÿæˆæ•°æ®çš„æ‘˜è¦ä¿¡æ¯,æ˜¯ä¸€ç§ä¸å¯é€†çš„ç®—æ³•,ä¸€èˆ¬é€‚åˆå­˜å‚¨å¯†ç ä¹‹ç±»çš„æ•°æ®,å¸¸è§çš„æ•£åˆ—ç®—æ³•å¦‚<code>MD5</code>ã€<code>SHA</code>ç­‰. ä¸€èˆ¬è¿›è¡Œæ•£åˆ—æ—¶æœ€å¥½æä¾›ä¸€ä¸ªsalt(ç›),æ¯”å¯†ç â€adminâ€åŠ å¯†åäº§ç”Ÿçš„æ•£åˆ—å€¼æ˜¯â€21232f297a57a5a743894a0e4a801fc3â€,å…¶å¯ä»¥åˆ°ä¸€äº›MD5è§£å¯†ç½‘ç«™å¾ˆå®¹æ˜“çš„é€šè¿‡æ•£åˆ—å€¼å¾—åˆ°å¯†ç â€adminâ€,å³å¦‚æœç›´æ¥å¯¹å¯†ç è¿›è¡Œæ•£åˆ—ç›¸å¯¹æ¥è¯´ç ´è§£æ›´å®¹æ˜“,æ­¤æ—¶æˆ‘ä»¬å¯ä»¥åŠ ä¸€äº›åªæœ‰ç³»ç»ŸçŸ¥é“çš„å¹²æ‰°æ•°æ®,å¦‚åœ¨å¯†ç ä¸­æ··å…¥ç”¨æˆ·IDåŠç”¨æˆ·å(åŠ ç›æ“ä½œ),æ—¢è€Œè¿™æ ·ç”Ÿæˆçš„æ•£åˆ—å€¼ç›¸å¯¹æ¥è¯´æ›´éš¾ç ´è§£å“Ÿ!</em></p><h4 id="åŠ å¯†è‡ªå®šä¹‰Realm"><a href="#åŠ å¯†è‡ªå®šä¹‰Realm" class="headerlink" title="åŠ å¯†è‡ªå®šä¹‰Realm"></a>åŠ å¯†è‡ªå®šä¹‰Realm</h4><p><em>æ¥ä¸‹æ¥é€šè¿‡ä½¿ç”¨MD5åŠ å¯†è‡ªå®šä¹‰Realm,æ¥å®Œæˆä¸€ä¸ªç®€å•çš„ç”¨æˆ·èº«ä»½éªŒè¯ç¨‹åº~</em></p><ol><li><p><em>pom.xml : Mavenä¾èµ–(åŒä¸Š)</em></p></li><li><p><em>en-shiro.ini : å­˜å‚¨ç”¨æˆ·èº«ä»½åŠåŠ å¯†é…ç½®ä¿¡æ¯</em></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[main]</span></span><br><span class="line"><span class="comment">#å®šä¹‰å‡­è¯åŒ¹é…å™¨</span></span><br><span class="line"><span class="attr">credentialsMatcher</span> = org.apache.shiro.authc.credential.HashedCredentialsMatcher</span><br><span class="line"><span class="comment">#æ•£åˆ—ç®—æ³•</span></span><br><span class="line"><span class="attr">credentialsMatcher.hashAlgorithmName</span> = md5</span><br><span class="line"><span class="comment">#æ•£åˆ—æ¬¡æ•°</span></span><br><span class="line"><span class="attr">credentialsMatcher.hashIterations</span> = <span class="number">10</span></span><br><span class="line"><span class="comment">#å°†å‡­è¯åŒ¹é…å™¨è®¾ç½®åˆ°realm</span></span><br><span class="line"><span class="attr">myRealm</span> = pers.huangyuhui.encryption.EncryRealm</span><br><span class="line"><span class="attr">myRealm.credentialsMatcher</span> = <span class="variable">$credentialsMatcher</span></span><br><span class="line"><span class="attr">securityManager.realms</span> = <span class="variable">$myRealm</span></span><br></pre></td></tr></table></figure></li><li><p><em>EncryRealm.java : è‡ªå®šä¹‰Realm,æ¨¡æ‹Ÿä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.encryption;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.SimpleAuthenticationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.ByteSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: shiro-learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: åŠ å¯†Realm</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 8/1/2019-7:58 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncryRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"pwdRealm"</span>; <span class="comment">//åŒºåˆ†ä¸åŒçš„Realm</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//æˆæƒæ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principals)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//è®¤è¯æ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–ç”¨æˆ·è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line">        String username = token.getPrincipal().toString();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">"root"</span>.equals(username)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//MD5åŠ å¯†åçš„ç”¨æˆ·å¯†ç ä¿¡æ¯</span></span><br><span class="line">        String password = <span class="string">"f3005f7acf36cec973498845460b0c33"</span>;<span class="comment">//password + username + 10</span></span><br><span class="line">        <span class="comment">//æŒ‡å®šç›å€¼:ByteSource.Util.bytes(username)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SimpleAuthenticationInfo(username, password, ByteSource.Util.bytes(username), getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>LoginByMyRealm.java : éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.encryption;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Shiroè®¤è¯æµ‹è¯•:éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">loginByMyRealm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1:åŠ è½½é…ç½®æ–‡ä»¶,åˆ›å»ºSecurityManagerå·¥å‚å¯¹è±¡</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:en-shiro.ini"</span>);</span><br><span class="line">        <span class="comment">//2:è·å¾—securityManagerå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        <span class="comment">//3:å°†securityMangerå®ä¾‹ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒä¸­,ä¾¿äºè®¿é—®</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//4:åˆ›å»ºå½“å‰ç™»å½•çš„ä¸»ä½“</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//5:ç»‘å®šä¸»ä½“ç™»å½•çš„èº«ä»½/å‡­è¯,æ—¢è´¦æˆ·åŠå¯†ç </span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"root"</span>, <span class="string">"yubuntu0109"</span>);</span><br><span class="line">        <span class="comment">//6:ä¸»ä½“ç™»å½•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            currentUser.login(token);</span><br><span class="line">            System.out.println(<span class="string">"ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :"</span> + currentUser.isAuthenticated());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·è´¦æˆ·é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¯†ç é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//8:æ³¨é”€ç™»å½•</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line">        System.out.println(<span class="string">"èº«ä»½èº«ä»½æ˜¯å¦æ³¨é”€æˆåŠŸ :"</span> + !currentUser.isAuthenticated());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :<span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">èº«ä»½èº«ä»½æ˜¯å¦æ³¨é”€æˆåŠŸ :<span class="keyword">true</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Shiroä¹‹è‡ªå®šä¹‰realmåŠå…¶åŠ å¯†&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Shiroä¹‹è‡ªå®šä¹‰realmåŠå…¶åŠ å¯†&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° :  Shiroä¹‹è‡ªå®šä¹‰realmåŠå…¶åŠ å¯†&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° :  Shiroä¹‹
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œæµç¨‹</title>
    <link href="http://yoursite.com/2019/08/01/%E8%AF%A6%E8%A7%A3Shiro%E7%99%BB%E5%BD%95%E7%99%BB%E5%87%BA%E7%9A%84%E6%93%8D%E4%BD%9C%E6%B5%81%E7%A8%8B/"/>
    <id>http://yoursite.com/2019/08/01/è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œæµç¨‹/</id>
    <published>2019-08-01T05:48:07.000Z</published>
    <updated>2019-08-03T12:09:28.328Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œæµç¨‹"><a href="#å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œæµç¨‹" class="headerlink" title="å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œæµç¨‹"></a>å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œæµç¨‹</h2><p><em>åœ¨shiroä¸­,ç”¨æˆ·éœ€è¦æä¾›principals(èº«ä»½)å’Œcredentials(è¯æ˜)ç»™shiro,ç»§è€Œæ¥éªŒè¯ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯,æœ€å¸¸è§çš„princpalså’Œ credentialsç»„åˆå°±æ˜¯ç”¨æˆ·å / å¯†ç å•¦~</em></p><ul><li>principals : èº«ä»½,å³ä¸»ä½“çš„æ ‡è¯†å±æ€§,å¦‚ç”¨æˆ·åã€é‚®ç®±ç­‰,éœ€å”¯ä¸€. ä¸€ä¸ªä¸»ä½“å¯ä»¥æœ‰å¤šä¸ªprincipals,ä½†åªæœ‰ä¸€ä¸ªPrimary principals,ä¸€èˆ¬æ˜¯ç”¨æˆ·å / å¯†ç  / æ‰‹æœºå·</li><li>credentials : è¯æ˜ / å‡­è¯,å³åªæœ‰ä¸»ä½“çŸ¥é“çš„å®‰å…¨å€¼,å¦‚å¯†ç  / æ•°å­—è¯ä¹¦ç­‰</li></ul><h3 id="ç™»å½•ç™»å‡ºæ¡ˆä¾‹"><a href="#ç™»å½•ç™»å‡ºæ¡ˆä¾‹" class="headerlink" title="ç™»å½•ç™»å‡ºæ¡ˆä¾‹"></a>ç™»å½•ç™»å‡ºæ¡ˆä¾‹</h3><p><em>æ¥ä¸‹æ¥é€šè¿‡ä¸€ä¸ªæ¨¡æ‹ŸéªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯çš„ç¤ºä¾‹ç¨‹åº,æ¥æ¢ç©¶å¹¶åˆ†æä¸€ä¸‹Shiroçš„éªŒè¯ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„æµç¨‹</em></p><ol><li><p><em>pom.xml : Mavenä¾èµ–</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--Junit å•å…ƒæµ‹è¯• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiroæ ¸å¿ƒåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- slf4jçš„æ¥å£å®ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>shiro.ini : å­˜å‚¨ç”¨æˆ·èº«ä»½ä¿¡æ¯(è´¦æˆ·=å¯†ç )</em></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="attr">root</span>=yubuntu0109</span><br></pre></td></tr></table></figure></li><li><p><em>ShiroTest.java : æ¨¡æ‹ŸéªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯(æŠŠæ–­ç‚¹æ‰“åœ¨<code>currentUser.login(token)</code>)</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Shiroè®¤è¯æµ‹è¯•:éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testLogin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1:åŠ è½½é…ç½®æ–‡ä»¶,åˆ›å»ºSecurityManagerå·¥å‚å¯¹è±¡</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:shiro.ini"</span>);</span><br><span class="line">        <span class="comment">//2:è·å¾—securityManagerå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        <span class="comment">//3:å°†securityMangerå®ä¾‹ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒä¸­,ä¾¿äºè®¿é—®</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//4:åˆ›å»ºå½“å‰ç™»å½•çš„ä¸»ä½“</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//5:ç»‘å®šä¸»ä½“ç™»å½•çš„èº«ä»½/å‡­è¯,æ—¢è´¦æˆ·åŠå¯†ç </span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"root"</span>, <span class="string">"yubuntu0109"</span>);</span><br><span class="line">        <span class="comment">//6:ä¸»ä½“ç™»å½•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            currentUser.login(token);</span><br><span class="line">            System.out.println(<span class="string">"ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :"</span> + currentUser.isAuthenticated());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·è´¦æˆ·ä¿¡æ¯é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"ç”¨æˆ·å¯†ç ä¿¡æ¯é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//8:æ³¨é”€ç™»å½•</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line">        System.out.println(<span class="string">"èº«ä»½èº«ä»½æ˜¯å¦æ³¨é”€æˆåŠŸ :"</span> + !currentUser.isAuthenticated());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :<span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">èº«ä»½èº«ä»½æ˜¯å¦æ³¨é”€æˆåŠŸ :<span class="keyword">true</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="æ¡ˆä¾‹æºç æµç¨‹å›¾"><a href="#æ¡ˆä¾‹æºç æµç¨‹å›¾" class="headerlink" title="æ¡ˆä¾‹æºç æµç¨‹å›¾"></a>æ¡ˆä¾‹æºç æµç¨‹å›¾</h4><p><em>åœ¨åˆ†ææºç ä¹‹å‰,å…ˆçœ‹ä¸€ä¸‹è¯¥æ¡ˆä¾‹çš„æºç æµç¨‹å›¾å§,ä¹Ÿä¾¿äºåé¢å¯¹æºç åˆ†æçš„ç†è§£~</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/08/01/è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œæµç¨‹/Shiro-ç™»å½•ç™»å‡ºæºç æµç¨‹å›¾.png" alt title>                </div>                <div class="image-caption"></div>            </figure></p><ol><li><em>è°ƒç”¨<code>subject.login(AuthenticationToken token)</code>æ–¹æ³•è¿›è¡Œç”¨æˆ·ç™»å½•,å…¶ä¼šè‡ªåŠ¨å§”æ‰˜ç»™<code>securityManager.login(Subject subject, AuthenticationToken token)</code>æ–¹æ³•è¿›è¡Œç™»å½•</em></li><li><em><code>securityManager</code>(å®‰å…¨ç®¡ç†å™¨)é€šè¿‡<code>Authenticator</code>(è®¤è¯å™¨)è¿›è¡Œè®¤è¯</em></li><li><em><code>Authenticator</code>çš„å®ç°ç±»<code>ModularRealmAuthenticator</code>é€šè¿‡è°ƒç”¨<code>realm</code>ä»<code>shiro.ini</code>é…ç½®æ–‡ä»¶ä¸­è·å–ç”¨æˆ·çœŸå®çš„ä¿¡æ¯(è´¦æˆ·å’Œå¯†ç ),è¿™é‡Œçš„Realm(åŸŸ)å¯ä»¥çœ‹æˆDataSource,å³å®‰å…¨æ•°æ®æº</em></li><li><em><code>IniRealm</code>(å¯é€šè¿‡åŠ è½½.iniæ–‡ä»¶ç”Ÿæˆreamlå¯¹è±¡)å…ˆæ ¹æ®<code>token</code>ä¸­çš„è´¦å·å»<code>shiro.ini</code>é…ç½®æ–‡ä»¶ä¸­å»åŒ¹é…è¯¥è´¦å·,å¦‚æœæ‰¾ä¸åˆ°åˆ™<code>ModularRealmAuthenticator</code>è¿”å›null,å¦‚æœæ‰¾åˆ°åˆ™ç»§ç»­åŒ¹é…å¯†ç ,è‹¥åŒ¹é…æˆåŠŸåˆ™è®¤è¯é€šè¿‡,åä¹‹ä¸é€šè¿‡å“Ÿ~</em> </li><li><em>æœ€åå¯ä»¥ä½¿ç”¨<code>Subject.logout()</code>è¿›è¡Œé€€å‡ºæ“ä½œ</em></li></ol><h3 id="æ¡ˆä¾‹æºç æµç¨‹åˆ†æ"><a href="#æ¡ˆä¾‹æºç æµç¨‹åˆ†æ" class="headerlink" title="æ¡ˆä¾‹æºç æµç¨‹åˆ†æ"></a>æ¡ˆä¾‹æºç æµç¨‹åˆ†æ</h3><ol><li><em>è¿è¡Œä¸Šè¿°ç¨‹åº,é¦–å…ˆdebug(Step into)è¿›å…¥<code>currentUser.login(token)</code>å†…éƒ¨,æ—¢DelegatingSubject.java. ä»æºç å¯ä»¥çœ‹å‡º : ä¸Subjectçš„æ‰€æœ‰äº¤äº’éƒ½ä¼šå§”æ‰˜ç»™SecurityManager. å¯ä»¥æŠŠSubjectè®¤ä¸ºæ˜¯ä¸€ä¸ªé—¨é¢,SecurityManageræ‰æ˜¯å®é™…çš„æ‰§è¡Œè€…å“Ÿ~</em><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.clearRunAsIdentitiesInternal();</span><br><span class="line">        Subject subject = <span class="keyword">this</span>.securityManager.login(<span class="keyword">this</span>, token);</span><br><span class="line">        <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></li></ol><p><em>ç»§ç»­(Step into)è¿›å…¥<code>this.securityManager.login(this, token);</code>,æ—¢DefaultSecurityManager.java. æ­¤æ—¶éªŒè¯ç”¨æˆ·èº«ä»½çš„çš„æ“ä½œæ­£å¼å¼€å§‹</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Subject <span class="title">login</span><span class="params">(Subject subject, AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        AuthenticationInfo info;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            info = <span class="keyword">this</span>.authenticate(token);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException var7) &#123;</span><br><span class="line">        <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></p><ol start="2"><li><p><em>ç»§ç»­(Step into)è¿›å…¥<code>this.authenticate(token)</code>,æ—¢AuthenticatingSecurityManager.java. ä»æºç å¯ä»¥çœ‹å‡ºSecurityManagerå°†<code>token</code>å§”æ‰˜ç»™äº†Authenticator(è®¤è¯å™¨)å»æ‰§è¡Œç”¨æˆ·èº«ä»½çš„è®¤è¯æ“ä½œ</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> AuthenticationInfo <span class="title">authenticate</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.authenticator.authenticate(token);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç»§ç»­(Step into)è¿›å…¥<code>this.authenticator.authenticate(token)</code>,æ—¢AbstractAuthenticator.java. ç”±<code>info = this.doAuthenticate(token);</code>è·å–ä¸€ä¸ªAuthenticationInfoå¯¹è±¡</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> AuthenticationInfo <span class="title">authenticate</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (token == <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Method argument (authentication token) cannot be null."</span>);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           log.trace(<span class="string">"Authentication attempt received for token [&#123;&#125;]"</span>, token);</span><br><span class="line"></span><br><span class="line">           AuthenticationInfo info;</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               info = <span class="keyword">this</span>.doAuthenticate(token);</span><br><span class="line">               <span class="keyword">if</span> (info == <span class="keyword">null</span>) &#123;</span><br><span class="line">                   String msg = <span class="string">"No account information found for authentication token ["</span> + token + <span class="string">"] by this Authenticator instance.  Please check that it is configured correctly."</span>;</span><br><span class="line">                   <span class="keyword">throw</span> <span class="keyword">new</span> AuthenticationException(msg);</span><br><span class="line">               &#125;</span><br><span class="line">       <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></li><li><p><em>ç»§ç»­(Step into)è¿›å…¥<code>info = this.doAuthenticate(token)</code>,æ—¢ModularRealmAuthenticator.java. ç„¶åä»ç³»ç»Ÿæ‰€åŠ è½½é…ç½®æ–‡ä»¶æ‰€å¯¹åº”çš„Realmsçš„å€¼ä¸­è·å–(<code>this.getRealms()</code>)ä¸€ä¸ªrealmså¯¹è±¡,è¯¥å¯¹è±¡ä¸­åŒ…å«ä¸€ä¸ª<code>users</code>å±æ€§,å…¶ä¸­åŒ…å«ç€ç”¨æˆ·çš„èº«ä»½åŠå‡­è¯ä¿¡æ¯,ä¾‹å¦‚è´¦å·ä¸ºroot,å¯†ç ä¸ºyubuntu0109çš„ç”¨æˆ·ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doAuthenticate</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">       assertRealmsConfigured();</span><br><span class="line">       Collection&lt;Realm&gt; realms = getRealms();</span><br><span class="line">       <span class="keyword">if</span> (realms.size() == <span class="number">1</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> doSingleRealmAuthentication(realms.iterator().next(), authenticationToken);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> doMultiRealmAuthentication(realms, authenticationToken);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></li></ol><p><em>ç»§ç»­(Step into)è¿›å…¥<code>this.doSingleRealmAuthentication((Realm)realms.iterator().next(), authenticationToken)</code>. å‘ç°å…¶é€šè¿‡<code>realm.getAuthenticationInfo(token)</code>è·å–ä¸€ä¸ªAuthenticationInfoå¯¹è±¡(å…¶ä¸­å­˜å‚¨ç€ä»Realmä¸­è·å–çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯)</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doSingleRealmAuthentication</span><span class="params">(Realm realm, AuthenticationToken token)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!realm.supports(token)) &#123;</span><br><span class="line">            String msg = <span class="string">"Realm ["</span> + realm + <span class="string">"] does not support authentication token ["</span> +</span><br><span class="line">                    token + <span class="string">"].  Please ensure that the appropriate Realm implementation is "</span> +</span><br><span class="line">                    <span class="string">"configured correctly or that the realm accepts AuthenticationTokens of this type."</span>;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedTokenException(msg);</span><br><span class="line">        &#125;</span><br><span class="line">        AuthenticationInfo info = realm.getAuthenticationInfo(token);</span><br><span class="line">        <span class="keyword">if</span> (info == <span class="keyword">null</span>) &#123;</span><br><span class="line">            String msg = <span class="string">"Realm ["</span> + realm + <span class="string">"] was unable to find account data for the "</span> +</span><br><span class="line">                    <span class="string">"submitted AuthenticationToken ["</span> + token + <span class="string">"]."</span>;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UnknownAccountException(msg);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><ol start="5"><li><em>ç»§ç»­(Step into)è¿›å…¥<code>realm.getAuthenticationInfo(token)</code>,æ—¢AuthenticatingRealm.java</em><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> AuthenticationInfo <span class="title">getAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line"></span><br><span class="line">       AuthenticationInfo info = getCachedAuthenticationInfo(token);</span><br><span class="line">       <span class="keyword">if</span> (info == <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="comment">//otherwise not cached, perform the lookup:</span></span><br><span class="line">           info = doGetAuthenticationInfo(token);</span><br><span class="line">           log.debug(<span class="string">"Looked up AuthenticationInfo [&#123;&#125;] from doGetAuthenticationInfo"</span>, info);</span><br><span class="line">           <span class="keyword">if</span> (token != <span class="keyword">null</span> &amp;&amp; info != <span class="keyword">null</span>) &#123;</span><br><span class="line">               cacheAuthenticationInfoIfPossible(token, info);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           log.debug(<span class="string">"Using cached authentication info [&#123;&#125;] to perform credentials matching."</span>, info);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (info != <span class="keyword">null</span>) &#123;</span><br><span class="line">           assertCredentialsMatch(token, info);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           log.debug(<span class="string">"No AuthenticationInfo found for submitted AuthenticationToken [&#123;&#125;].  Returning null."</span>, token);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> info;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></li></ol><p><em>(Step into)è¿›å…¥<code>doGetAuthenticationInfo(token)</code>,æ—¢SimpleAccountRealm.java. é€šè¿‡<code>getUser(upToken.getUsername())</code>è¿›è¡ŒéªŒè¯ç”¨æˆ·è´¦æˆ·ä¿¡æ¯(ç¨åéªŒè¯å¯†ç ä¿¡æ¯),ç„¶åè¿”å›ä¸€ä¸ªSimpleAccountå¯¹è±¡(account,å¦‚root),å…¶ä¸­åŒ…å«äº†å‡­è¯ä¿¡æ¯(credentials,å¦‚yubuntu0109)</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        UsernamePasswordToken upToken = (UsernamePasswordToken) token;</span><br><span class="line">        SimpleAccount account = getUser(upToken.getUsername());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (account != <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (account.isLocked()) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> LockedAccountException(<span class="string">"Account ["</span> + account + <span class="string">"] is locked."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (account.isCredentialsExpired()) &#123;</span><br><span class="line">                String msg = <span class="string">"The credentials for account ["</span> + account + <span class="string">"] are expired"</span>;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ExpiredCredentialsException(msg);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> account;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></p><p><em><code>getUser(String username)</code>çš„æºç å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> SimpleAccount <span class="title">getUser</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        USERS_LOCK.readLock().lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.users.get(username);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            USERS_LOCK.readLock().unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br></pre></td></tr></table></figure></p><p><em>(step out)é€€å‡º<code>doGetAuthenticationInfo(AuthenticationToken token)</code>æ–¹æ³•,ç„¶å(step into)è¿›å…¥<code>assertCredentialsMatch(token, info)</code>æ–¹æ³•,å…¶å±äºAuthenticatingRealm.java. ç»§è€Œæ‰§è¡ŒéªŒè¯ç”¨æˆ·å¯†ç ä¿¡æ¯çš„æ“ä½œ</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">assertCredentialsMatch</span><span class="params">(AuthenticationToken token, AuthenticationInfo info)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        CredentialsMatcher cm = getCredentialsMatcher();</span><br><span class="line">        <span class="keyword">if</span> (cm != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!cm.doCredentialsMatch(token, info)) &#123;</span><br><span class="line">                <span class="comment">//not successful - throw an exception to indicate this:</span></span><br><span class="line">                String msg = <span class="string">"Submitted credentials for token ["</span> + token + <span class="string">"] did not match the expected credentials."</span>;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IncorrectCredentialsException(msg);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AuthenticationException(<span class="string">"A CredentialsMatcher must be configured in order to verify "</span> +</span><br><span class="line">                    <span class="string">"credentials during authentication.  If you do not wish for credentials to be examined, you "</span> +</span><br><span class="line">                    <span class="string">"can configure an "</span> + AllowAllCredentialsMatcher.class.getName() + <span class="string">" instance."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><p><em>(step into)è¿›å…¥<code>cm.doCredentialsMatch(token, info)</code>,å…¶å±äºSimpleCredentialsMatcher.java. è§‚å¯ŸShiroæ˜¯å¦‚ä½•éªŒè¯å¯†ç çš„ : æ¯”è¾ƒAuthenticationToken(<code>token</code>)ä¸AuthenticationInfo(<code>info</code>)ä¸­çš„ç”¨æˆ·å¯†ç æ˜¯å¦ç›¸åŒ</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">doCredentialsMatch</span><span class="params">(AuthenticationToken token, AuthenticationInfo info)</span> </span>&#123;</span><br><span class="line">        Object tokenCredentials = getCredentials(token);</span><br><span class="line">        Object accountCredentials = getCredentials(info);</span><br><span class="line">        <span class="keyword">return</span> equals(tokenCredentials, accountCredentials);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œæµç¨‹&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œæµç¨‹&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œæµç¨‹&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : è¯¦è§£Shiroç™»å½•ç™»å‡ºçš„æ“ä½œ
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>Hi Shiro ~</title>
    <link href="http://yoursite.com/2019/07/31/Hi-Shiro/"/>
    <id>http://yoursite.com/2019/07/31/Hi-Shiro/</id>
    <published>2019-07-31T06:23:55.000Z</published>
    <updated>2019-07-31T23:33:17.595Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-åˆè¯†Shiro"><a href="#å­¦ä¹ ç¬”è®°-åˆè¯†Shiro" class="headerlink" title="å­¦ä¹ ç¬”è®° : åˆè¯†Shiro ~"></a>å­¦ä¹ ç¬”è®° : åˆè¯†Shiro ~</h2><p><em>ç®€ä»‹ : <code>Apache Shiro</code>æ˜¯ä¸€ä¸ªå¼ºå¤§æ˜“ç”¨çš„Javaå®‰å…¨æ¡†æ¶,æä¾›äº†è®¤è¯ã€æˆæƒã€åŠ å¯†å’Œä¼šè¯ç®¡ç†ç­‰åŠŸèƒ½ï¼Œå¯¹äºä»»ä½•ä¸€ä¸ªåº”ç”¨ç¨‹åº,Shiroéƒ½å¯ä»¥æä¾›å…¨é¢çš„å®‰å…¨ç®¡ç†æœåŠ¡</em></p><p><em>æƒé™ç®¡ç†åŒ…æ‹¬ç”¨æˆ·<code>èº«ä»½è®¤è¯</code>å’Œ<code>æˆæƒ</code>ä¸¤ä¸ªéƒ¨åˆ†,ç®€ç§°è®¤è¯æˆæƒ</em></p><ol><li><em>èº«ä»½è®¤è¯ : ä¸ºåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¸ºåˆæ³•ç”¨æˆ·çš„è¿‡ç¨‹,æœ€å¸¸ç”¨çš„èº«ä»½è®¤è¯æ–¹å¼å°±æ˜¯ç³»ç»Ÿé€šè¿‡æ ¸å¯¹ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå£ä»¤,å°†å…¶ä¸ç³»ç»Ÿä¸­å­˜å‚¨çš„è¯¥ç”¨æˆ·ä¿¡æ¯ç›¸å¯¹æ¯”,ç»§è€Œæ¥åˆ¤æ–­ç”¨æˆ·èº«ä»½æ˜¯å¦æ­£ç¡®</em></li><li><em>æˆæƒ : æ—¢è®¿é—®æƒé™,æ§åˆ¶ç”¨æˆ·è®¿é—®èµ„æºçš„æƒé™. ä¸»ä½“(<code>subject</code>)è¿›è¡Œèº«ä»½è®¤è¯åéœ€è¦åˆ†é…æƒé™æ–¹å¯è®¿é—®ç³»ç»Ÿçš„èµ„æº</em></li></ol><h3 id="æ¶æ„è§£æ"><a href="#æ¶æ„è§£æ" class="headerlink" title="æ¶æ„è§£æ"></a>æ¶æ„è§£æ</h3><p><em>Shiroå¯ä»¥éå¸¸å®¹æ˜“çš„å¼€å‘å‡ºè¶³å¤Ÿå¥½çš„åº”ç”¨,å…¶ä¸ä»…å¯ä»¥ç”¨åœ¨JavaSEç¯å¢ƒ,ä¹Ÿå¯ä»¥ç”¨åœ¨JavaEEç¯å¢ƒ. Shiroå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆ : è®¤è¯ã€æˆæƒã€åŠ å¯†ã€ä¼šè¯ç®¡ç†ã€ä¸Webé›†æˆã€ç¼“å­˜ç­‰. å…¶åŸºæœ¬åŠŸèƒ½ç‚¹åŠå…¶è§£æå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/31/Hi-Shiro/shiro-framework-api.png" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><code>Authentication</code> : èº«ä»½è®¤è¯ / ç™»å½•,éªŒè¯ç”¨æˆ·æ˜¯ä¸æ˜¯æ‹¥æœ‰ç›¸åº”çš„èº«ä»½</li><li><code>Authorization</code> : æˆæƒ,å³æƒé™éªŒè¯,éªŒè¯æŸä¸ªå·²è®¤è¯çš„ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªæƒé™. å³åˆ¤æ–­ç”¨æˆ·æ˜¯å¦èƒ½åšäº‹æƒ…,å¸¸è§çš„å¦‚ : éªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªè§’è‰²,æˆ–è€…ç»†ç²’åº¦çš„éªŒè¯æŸä¸ªç”¨æˆ·å¯¹æŸä¸ªèµ„æºæ˜¯å¦å…·æœ‰æŸä¸ªæƒé™</li><li><code>Session Manager</code> : ä¼šè¯ç®¡ç†,å³ç”¨æˆ·ç™»å½•åå°±æ˜¯ä¸€æ¬¡ä¼šè¯,åœ¨æ²¡æœ‰é€€å‡ºä¹‹å‰,å®ƒçš„æ‰€æœ‰ä¿¡æ¯éƒ½åœ¨ä¼šè¯ä¸­. ä¼šè¯å¯ä»¥æ˜¯æ™®é€šJavaSEç¯å¢ƒçš„,ä¹Ÿå¯ä»¥æ˜¯å¦‚Webç¯å¢ƒçš„</li><li><code>Cryptography</code> : åŠ å¯†,ä¿æŠ¤æ•°æ®çš„å®‰å…¨æ€§,å¦‚å¯†ç åŠ å¯†å­˜å‚¨åˆ°æ•°æ®åº“,è€Œä¸æ˜¯æ˜æ–‡å­˜å‚¨</li><li><code>Web Support</code> : Webæ”¯æŒ,å¯ä»¥éå¸¸å®¹æ˜“çš„é›†æˆåˆ°Webç¯å¢ƒä¸­</li><li><code>Caching</code> : ç¼“å­˜,æ¯”å¦‚ç”¨æˆ·ç™»å½•å,å…¶ç”¨æˆ·ä¿¡æ¯ã€æ‹¥æœ‰çš„è§’è‰² / æƒé™ä¸å¿…æ¯æ¬¡å»æŸ¥,è¿™æ ·å¯ä»¥æé«˜æ•ˆç‡</li><li><code>Concurrency</code> : shiroæ”¯æŒå¤šçº¿ç¨‹åº”ç”¨çš„å¹¶å‘éªŒè¯,å³å¦‚åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹,èƒ½æŠŠæƒé™è‡ªåŠ¨ä¼ æ’­è¿‡å»</li><li><code>Testing</code> : æä¾›æµ‹è¯•æ”¯æŒ</li><li><code>Run As</code> : å…è®¸ä¸€ä¸ªç”¨æˆ·å‡è£…ä¸ºå¦ä¸€ä¸ªç”¨æˆ·(åœ¨ä»–ä»¬å…è®¸çš„æƒ…å†µä¸‹)çš„èº«ä»½è¿›è¡Œè®¿é—®</li><li><code>Remember Me</code> : è®°ä½æˆ‘,è¿™ä¸ªæ˜¯éå¸¸å¸¸è§çš„åŠŸèƒ½,å³ä¸€æ¬¡ç™»å½•å,ä¸‹æ¬¡ä¸ç”¨é‡å¤ç™»å½•äº†</li></ul><h4 id="å¤–éƒ¨ç»“æ„"><a href="#å¤–éƒ¨ç»“æ„" class="headerlink" title="å¤–éƒ¨ç»“æ„"></a>å¤–éƒ¨ç»“æ„</h4><p><em>å¤–éƒ¨æ¶æ„å›¾,å³ä»åº”ç”¨ç¨‹åºè§’åº¦çš„æ¥è§‚å¯Ÿå¦‚ä½•ä½¿ç”¨Shiroå®Œæˆå·¥ä½œ :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/31/Hi-Shiro/Shiro-å¤–éƒ¨æ¶æ„å›¾.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p><em>å¯ä»¥çœ‹åˆ°,åº”ç”¨ä»£ç ç›´æ¥äº¤äº’çš„å¯¹è±¡æ˜¯<code>Subject</code>,ä¹Ÿå°±æ˜¯è¯´Shiroçš„å¯¹å¤–APIæ ¸å¿ƒå°±æ˜¯Subject. å…¶æ¯ä¸ªAPIçš„å«ä¹‰å¦‚ä¸‹æ‰€ç¤º :</em></p><ul><li><code>Subject</code> : ä¸»ä½“,ä»£è¡¨äº†å½“å‰â€ç”¨æˆ·â€,è¿™ä¸ªç”¨æˆ·ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå…·ä½“çš„äºº,ä¸å½“å‰åº”ç”¨äº¤äº’çš„ä»»ä½•ä¸œè¥¿éƒ½æ˜¯Subject,å¦‚ç½‘ç»œçˆ¬è™«,æœºå™¨äººç­‰,å³ä¸ºä¸€ä¸ªæŠ½è±¡æ¦‚å¿µ. æ‰€æœ‰Subjectéƒ½ç»‘å®šåˆ°SecurityManager,ä¸Subjectçš„æ‰€æœ‰äº¤äº’éƒ½ä¼šå§”æ‰˜ç»™SecurityManager. å¯ä»¥æŠŠSubjectè®¤ä¸ºæ˜¯ä¸€ä¸ªé—¨é¢,SecurityManageræ‰æ˜¯å®é™…çš„æ‰§è¡Œè€…</li><li><code>SecurityManager</code> : å®‰å…¨ç®¡ç†å™¨,å³æ‰€æœ‰ä¸å®‰å…¨æœ‰å…³çš„æ“ä½œéƒ½ä¼šä¸SecurityManageräº¤äº’,ä¸”å®ƒç®¡ç†ç€æ‰€æœ‰Subject. å¯ä»¥çœ‹å‡ºå®ƒæ˜¯Shiroçš„æ ¸å¿ƒ,å®ƒè´Ÿè´£ä¸åè¾¹ä»‹ç»çš„å…¶ä»–ç»„ä»¶è¿›è¡Œäº¤äº’,å¦‚æœå­¦ä¹ è¿‡SpringMVC,ä½ å¯ä»¥æŠŠå®ƒçœ‹æˆ<code>DispatcherServlet</code>å‰ç«¯æ§åˆ¶å™¨</li><li><code>Realm</code> : åŸŸ,Shiroä»Realmè·å–å®‰å…¨æ•°æ®(å¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™),å°±æ˜¯è¯´SecurityManagerè¦éªŒè¯ç”¨æˆ·èº«ä»½,é‚£ä¹ˆå®ƒéœ€è¦ä»Realmè·å–ç›¸åº”çš„ç”¨æˆ·è¿›è¡Œæ¯”è¾ƒä»¥ç¡®å®šç”¨æˆ·èº«ä»½æ˜¯å¦åˆæ³•,ä¹Ÿéœ€è¦ä»Realmå¾—åˆ°ç”¨æˆ·ç›¸åº”çš„è§’è‰² / æƒé™è¿›è¡ŒéªŒè¯ç”¨æˆ·æ˜¯å¦èƒ½è¿›è¡Œæ“ä½œ. å¯ä»¥æŠŠRealmçœ‹æˆ DataSource,å³å®‰å…¨æ•°æ®æº</li></ul><p><em>ä¹Ÿå°±æ˜¯è¯´,æœ€ç®€å•çš„ä¸€ä¸ªShiroåº”ç”¨å¯ä»¥åŸºæœ¬åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ :</em></p><ol><li><em>åº”ç”¨ä»£ç é€šè¿‡Subjectæ¥è¿›è¡Œè®¤è¯å’Œæˆæƒ,è€ŒSubjectåˆå°†æ‰€æœ‰çš„äº’äº¤éƒ½å§”æ‰˜ç»™äº†SecurityManager</em></li><li><em>æˆ‘ä»¬éœ€è¦ç»™Shiroçš„SecurityManageræ³¨å…¥Realm,ä»è€Œè®©SecurityManagerèƒ½å¾—åˆ°åˆæ³•çš„ç”¨æˆ·åŠå…¶æƒé™è¿›è¡Œåˆ¤æ–­</em></li></ol><p><em>ä»ä»¥ä¸Šä¹Ÿå¯ä»¥çœ‹å‡º,Shiroä¸æä¾›ç»´æŠ¤ç”¨æˆ· / æƒé™,è€Œæ˜¯é€šè¿‡Realmè®©å¼€å‘äººå‘˜è‡ªå·±æ³¨å…¥</em></p><h4 id="å†…éƒ¨ç»“æ„"><a href="#å†…éƒ¨ç»“æ„" class="headerlink" title="å†…éƒ¨ç»“æ„"></a>å†…éƒ¨ç»“æ„</h4><p><em>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä»Shiroå†…éƒ¨æ¥çœ‹ä¸‹Shiroçš„æ¶æ„,å¦‚ä¸‹å›¾æ‰€ç¤º :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/31/Hi-Shiro/Shiro-å†…éƒ¨ç»“æ„å›¾.png" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><code>Subject</code> : ä¸»ä½“,å¯ä»¥çœ‹åˆ°ä¸»ä½“å¯ä»¥æ˜¯ä»»ä½•å¯ä»¥ä¸åº”ç”¨äº¤äº’çš„â€ç”¨æˆ·â€</li><li><code>SecurityManager</code> : ç›¸å½“äºSpringMVCä¸­çš„<code>DispatcherServlet</code>æˆ–Struts2ä¸­çš„FilterDispatcher; æ˜¯Shiroçš„å¿ƒè„. æ‰€æœ‰å…·ä½“çš„äº¤äº’éƒ½é€šè¿‡SecurityManagerè¿›è¡Œæ§åˆ¶,å®ƒç®¡ç†ç€æ‰€æœ‰Subjectã€ä¸”è´Ÿè´£è¿›è¡Œè®¤è¯å’Œæˆæƒã€åŠä¼šè¯ã€ç¼“å­˜çš„ç®¡ç†</li><li><code>Authenticator</code> : è®¤è¯å™¨,è´Ÿè´£ä¸»ä½“è®¤è¯çš„,è¿™æ˜¯ä¸€ä¸ªæ‰©å±•ç‚¹,å¦‚æœç”¨æˆ·è§‰å¾—Shiroé»˜è®¤çš„ä¸å¥½,å¯ä»¥è‡ªå®šä¹‰å®ç°. å…¶éœ€è¦è®¤è¯ç­–ç•¥(Authentication Strategy),å³ä»€ä¹ˆæƒ…å†µä¸‹ç®—ç”¨æˆ·è®¤è¯é€šè¿‡äº†</li><li><code>Authrizer</code> : æˆæƒå™¨,æˆ–è€…è®¿é—®æ§åˆ¶å™¨,ç”¨æ¥å†³å®šä¸»ä½“æ˜¯å¦æœ‰æƒé™è¿›è¡Œç›¸åº”çš„æ“ä½œ,å³æ§åˆ¶ç€ç”¨æˆ·èƒ½è®¿é—®åº”ç”¨ä¸­çš„å“ªäº›åŠŸèƒ½</li><li><code>Realm</code> : å¯ä»¥æœ‰1ä¸ªæˆ–å¤šä¸ªRealm,å¯ä»¥è®¤ä¸ºæ˜¯å®‰å…¨å®ä½“æ•°æ®æº,å³ç”¨äºè·å–å®‰å…¨å®ä½“. å¯ä»¥æ˜¯JDBCå®ç°,ä¹Ÿå¯ä»¥æ˜¯LDAPå®ç°,æˆ–è€…å†…å­˜å®ç°ç­‰,ç”±ç”¨æˆ·æä¾›. æ³¨æ„ : Shiroä¸çŸ¥é“ä½ çš„ç”¨æˆ· / æƒé™å­˜å‚¨åœ¨å“ªåŠä»¥ä½•ç§æ ¼å¼å­˜å‚¨,æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬åœ¨åº”ç”¨ä¸­éƒ½éœ€è¦å®ç°è‡ªå·±çš„Realm</li><li><code>SessionManager</code> : å¦‚æœå†™è¿‡Servletå°±åº”è¯¥çŸ¥é“Sessionçš„æ¦‚å¿µ,Sessionéœ€è¦æœ‰äººå»ç®¡ç†å®ƒçš„ç”Ÿå‘½å‘¨æœŸ,è¿™ä¸ªç»„ä»¶å°±æ˜¯SessionManager,è€ŒShiroå¹¶ä¸ä»…ä»…å¯ä»¥ç”¨åœ¨Webç¯å¢ƒ,ä¹Ÿå¯ä»¥ç”¨åœ¨å¦‚æ™®é€šçš„JavaSEç¯å¢ƒã€EJBç­‰ç¯å¢ƒ. æ‰€ä»¥Shiroå°±æŠ½è±¡äº†ä¸€ä¸ªè‡ªå·±çš„Sessionæ¥ç®¡ç†ä¸»ä½“ä¸åº”ç”¨ä¹‹é—´äº¤äº’çš„æ•°æ®. è¿™æ ·çš„è¯,æ¯”å¦‚æˆ‘ä»¬åœ¨Webç¯å¢ƒç”¨,åˆšå¼€å§‹æ˜¯ä¸€å°WebæœåŠ¡å™¨,æ¥ç€åˆä¸Šäº†å°EJBæœåŠ¡å™¨,è¿™æ—¶æƒ³æŠŠä¸¤å°æœåŠ¡å™¨çš„ä¼šè¯æ•°æ®æ”¾åˆ°ä¸€ä¸ªåœ°æ–¹,è¿™ä¸ªæ—¶å€™å°±å¯ä»¥å®ç°è‡ªå·±çš„åˆ†å¸ƒå¼ä¼šè¯(å¦‚æŠŠæ•°æ®æ”¾åˆ°MemcachedæœåŠ¡å™¨)</li><li><code>SessionDAO</code> : DAOå¤§å®¶éƒ½ç”¨è¿‡,æ•°æ®è®¿é—®å¯¹è±¡,ç”¨äºä¼šè¯çš„CRUD,æ¯”å¦‚æˆ‘ä»¬æƒ³æŠŠSessionä¿å­˜åˆ°æ•°æ®åº“,é‚£ä¹ˆå¯ä»¥å®ç°è‡ªå·±çš„ SessionDAO,é€šè¿‡å¦‚JDBCå†™åˆ°æ•°æ®åº“. æ¯”å¦‚æƒ³æŠŠSessionæ”¾åˆ°Memcachedä¸­,å¯ä»¥å®ç°è‡ªå·±çš„Memcached SessionDAO. å¦å¤–SessionDAOä¸­å¯ä»¥ä½¿ç”¨Cacheè¿›è¡Œç¼“å­˜,ä»¥æé«˜æ€§èƒ½</li><li><code>CacheManager</code> : ç¼“å­˜æ§åˆ¶å™¨,æ¥ç®¡ç†å¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™ç­‰çš„ç¼“å­˜çš„. å› ä¸ºè¿™äº›æ•°æ®åŸºæœ¬ä¸Šå¾ˆå°‘å»æ”¹å˜,æ”¾åˆ°ç¼“å­˜ä¸­åå¯ä»¥æé«˜è®¿é—®çš„æ€§èƒ½</li><li><code>Cryptography</code> : å¯†ç æ¨¡å—,Shiroæé«˜äº†ä¸€äº›å¸¸è§çš„åŠ å¯†ç»„ä»¶ç”¨äºå¦‚å¯†ç åŠ å¯† / è§£å¯†</li></ul><h3 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h3><h4 id="ç¬¬ä¸€ä¸ªShiroç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªShiroç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªShiroç¨‹åº"></a>ç¬¬ä¸€ä¸ªShiroç¨‹åº</h4><p><em>æ¥ä¸‹æ¥é€šè¿‡ä¸€ä¸ªç®€å•çš„ç”¨æˆ·èº«ä»½éªŒè¯ç¨‹åº,æ¥æ„Ÿå—ä¸€ä¸‹Shiroçš„é­…åŠ›å§ !</em></p><ol><li><p><em>pom.xml : Mavenä¾èµ–</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Shiroæ ¸å¿ƒåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- slf4jçš„æ¥å£å®ç° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>log4j.properties : æ—¥å¿—é…ç½®ä¿¡æ¯</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">log4j.rootLogger=INFO, stdout</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m %n</span><br><span class="line"># General Apache libraries</span><br><span class="line">log4j.logger.org.apache=WARN</span><br><span class="line"># Spring</span><br><span class="line">log4j.logger.org.springframework=WARN</span><br><span class="line"># Default Shiro logging</span><br><span class="line">log4j.logger.org.apache.shiro=TRACE</span><br><span class="line"># Disable verbose logging</span><br><span class="line">log4j.logger.org.apache.shiro.util.ThreadContext=WARN</span><br><span class="line">log4j.logger.org.apache.shiro.cache.ehcache.EhCache=WARN</span><br></pre></td></tr></table></figure></li><li><p><em>shiro.ini : å­˜å‚¨ç”¨æˆ·èº«ä»½ä¿¡æ¯(è´¦æˆ·=å¯†ç )</em></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="attr">root</span>=yubuntu0109</span><br></pre></td></tr></table></figure></li><li><p><em>ShiroTest.java : éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Shiroè®¤è¯æµ‹è¯•:éªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testLogin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1:åŠ è½½é…ç½®æ–‡ä»¶,åˆ›å»ºSecurityManagerå·¥å‚å¯¹è±¡</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:shiro.ini"</span>);</span><br><span class="line">        <span class="comment">//2:è·å¾—securityManagerå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line">        <span class="comment">//3:å°†securityMangerå®ä¾‹ç»‘å®šåˆ°å½“å‰è¿è¡Œç¯å¢ƒä¸­,ä¾¿äºè®¿é—®</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line">        <span class="comment">//4:åˆ›å»ºå½“å‰ç™»å½•çš„ä¸»ä½“</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//5:ç»‘å®šä¸»ä½“ç™»å½•çš„èº«ä»½/å‡­è¯,æ—¢è´¦æˆ·åŠå¯†ç </span></span><br><span class="line">        UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"root"</span>, <span class="string">"yubuntu0109"</span>);</span><br><span class="line">        <span class="comment">//6:ä¸»ä½“ç™»å½•</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            currentUser.login(token);</span><br><span class="line">            System.out.println(<span class="string">"ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :"</span> + currentUser.isAuthenticated());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"è´¦æˆ·ä¿¡æ¯é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">"å¯†ç ä¿¡æ¯é”™è¯¯ !"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//8:æ³¨é”€ç™»å½•</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line">        System.out.println(<span class="string">"èº«ä»½èº«ä»½æ˜¯å¦æ³¨é”€æˆåŠŸ :"</span> + !currentUser.isAuthenticated());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Â·Â·Â·Â·Â·</span></span><br><span class="line">ç”¨æˆ·èº«ä»½æ˜¯å¦éªŒè¯æˆåŠŸ :<span class="keyword">true</span></span><br><span class="line"><span class="comment">// Â·Â·Â·Â·Â·</span></span><br><span class="line">èº«ä»½èº«ä»½æ˜¯å¦æ³¨é”€æˆåŠŸ :<span class="keyword">true</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="å®˜æ–¹å…¥é—¨æ¡ˆä¾‹"><a href="#å®˜æ–¹å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="å®˜æ–¹å…¥é—¨æ¡ˆä¾‹"></a>å®˜æ–¹å…¥é—¨æ¡ˆä¾‹</h4><ol><li><p><em>pom.xml : Mavenä¾èµ–(åŒä¸Š)</em></p></li><li><p><em>log4.properties : æ—¥å¿—é…ç½®ä¿¡æ¯(åŒä¸Š)</em></p></li><li><p><em>shiro.ini : å­˜å‚¨å…·æœ‰æŒ‡å®šæƒé™çš„,ä¸åŒèº«ä»½çš„ç”¨æˆ·ä¿¡æ¯</em></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># =============================================================================</span></span><br><span class="line"><span class="comment"># Quickstart INI Realm configuration</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For those that might not understand the references in this file, the</span></span><br><span class="line"><span class="comment"># definitions are all based on the classic Mel Brooks' film "Spaceballs". ;)</span></span><br><span class="line"><span class="comment"># =============================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Users and their assigned roles</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Each line conforms to the format defined in the</span></span><br><span class="line"><span class="comment"># org.apache.shiro.realm.text.TextConfigurationRealm#setUserDefinitions JavaDoc</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="section">[users]</span></span><br><span class="line"><span class="comment"># user 'root' with password 'secret' and the 'admin' role</span></span><br><span class="line"><span class="attr">root</span> = secret, admin</span><br><span class="line"><span class="comment"># user 'guest' with the password 'guest' and the 'guest' role</span></span><br><span class="line"><span class="attr">guest</span> = guest, guest</span><br><span class="line"><span class="comment"># user 'presidentskroob' with password '12345' ("That's the same combination on</span></span><br><span class="line"><span class="comment"># my luggage!!!" ;)), and role 'president'</span></span><br><span class="line"><span class="attr">presidentskroob</span> = <span class="number">12345</span>, president</span><br><span class="line"><span class="comment"># user 'darkhelmet' with password 'ludicrousspeed' and roles 'darklord' and 'schwartz'</span></span><br><span class="line"><span class="attr">darkhelmet</span> = ludicrousspeed, darklord, schwartz</span><br><span class="line"><span class="comment"># user 'lonestarr' with password 'vespa' and roles 'goodguy' and 'schwartz'</span></span><br><span class="line"><span class="attr">lonestarr</span> = vespa, goodguy, schwartz</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Roles with assigned permissions</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># Each line conforms to the format defined in the</span></span><br><span class="line"><span class="comment"># org.apache.shiro.realm.text.TextConfigurationRealm#setRoleDefinitions JavaDoc</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="section">[roles]</span></span><br><span class="line"><span class="comment"># 'admin' role has all permissions, indicated by the wildcard '*'</span></span><br><span class="line"><span class="attr">admin</span> = *</span><br><span class="line"><span class="comment"># The 'schwartz' role can do anything (*) with any lightsaber:</span></span><br><span class="line"><span class="attr">schwartz</span> = lightsaber:*</span><br><span class="line"><span class="comment"># The 'goodguy' role is allowed to 'drive' (action) the winnebago (type) with</span></span><br><span class="line"><span class="comment"># license plate 'eagle5' (instance specific id)</span></span><br><span class="line"><span class="attr">goodguy</span> = winnebago:drive:eagle5</span><br></pre></td></tr></table></figure></li><li><p><em>Quickstart.java : ä¸€ä¸ªç®€å•çš„å…¥é—¨çº§ç¨‹åº,æ•™ä½ å¦‚ä½•ä½¿ç”¨Shiroçš„API</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Simple Quickstart application showing how to use Shiro's API.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 0.9 RC2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Quickstart</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">transient</span> Logger log = LoggerFactory.getLogger(Quickstart.class);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The easiest way to create a Shiro SecurityManager with configured</span></span><br><span class="line">        <span class="comment">// realms, users, roles and permissions is to use the simple INI config.</span></span><br><span class="line">        <span class="comment">// We'll do that by using a factory that can ingest a .ini file and</span></span><br><span class="line">        <span class="comment">// return a SecurityManager instance:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use the shiro.ini file at the root of the classpath</span></span><br><span class="line">        <span class="comment">// (file: and url: prefixes load from files and urls respectively):</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">"classpath:shiro.ini"</span>);</span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// for this simple example quickstart, make the SecurityManager</span></span><br><span class="line">        <span class="comment">// accessible as a JVM singleton.  Most applications wouldn't do this</span></span><br><span class="line">        <span class="comment">// and instead rely on their container configuration or web.xml for</span></span><br><span class="line">        <span class="comment">// webapps.  That is outside the scope of this simple quickstart, so</span></span><br><span class="line">        <span class="comment">// we'll just do the bare minimum so you can continue to get a feel</span></span><br><span class="line">        <span class="comment">// for things.</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Now that a simple Shiro environment is set up, let's see what you can do:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// get the currently executing user:</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do some stuff with a Session (no need for a web or EJB container!!!)</span></span><br><span class="line">        Session session = currentUser.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">"someKey"</span>, <span class="string">"aValue"</span>);</span><br><span class="line">        String value = (String) session.getAttribute(<span class="string">"someKey"</span>);</span><br><span class="line">        <span class="keyword">if</span> (value.equals(<span class="string">"aValue"</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">"Retrieved the correct value! ["</span> + value + <span class="string">"]"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// let's login the current user so we can check against roles and permissions:</span></span><br><span class="line">        <span class="keyword">if</span> (!currentUser.isAuthenticated()) &#123;</span><br><span class="line">            UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">"lonestarr"</span>, <span class="string">"vespa"</span>);</span><br><span class="line">            token.setRememberMe(<span class="keyword">true</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                currentUser.login(token);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnknownAccountException uae) &#123;</span><br><span class="line">                log.info(<span class="string">"There is no user with username of "</span> + token.getPrincipal());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IncorrectCredentialsException ice) &#123;</span><br><span class="line">                log.info(<span class="string">"Password for account "</span> + token.getPrincipal() + <span class="string">" was incorrect!"</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (LockedAccountException lae) &#123;</span><br><span class="line">                log.info(<span class="string">"The account for username "</span> + token.getPrincipal() + <span class="string">" is locked.  "</span> +</span><br><span class="line">                        <span class="string">"Please contact your administrator to unlock it."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ... catch more exceptions here (maybe custom ones specific to your application?</span></span><br><span class="line">            <span class="keyword">catch</span> (AuthenticationException ae) &#123;</span><br><span class="line">                <span class="comment">//unexpected condition?  error?</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//say who they are:</span></span><br><span class="line">        <span class="comment">//print their identifying principal (in this case, a username):</span></span><br><span class="line">        log.info(<span class="string">"User ["</span> + currentUser.getPrincipal() + <span class="string">"] logged in successfully."</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a role:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.hasRole(<span class="string">"schwartz"</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">"May the Schwartz be with you!"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">"Hello, mere mortal."</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a typed permission (not instance-level)</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">"lightsaber:wield"</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">"You may use a lightsaber ring.  Use it wisely."</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">"Sorry, lightsaber rings are for schwartz masters only."</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//a (very powerful) Instance Level permission:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">"winnebago:drive:eagle5"</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">"You are permitted to 'drive' the winnebago with license plate (id) 'eagle5'.  "</span> +</span><br><span class="line">                    <span class="string">"Here are the keys - have fun!"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">"Sorry, you aren't allowed to drive the 'eagle5' winnebago!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//all done - log out!</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line"></span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-åˆè¯†Shiro&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-åˆè¯†Shiro&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : åˆè¯†Shiro ~&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : åˆè¯†Shiro ~&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ç®€ä»‹ : &lt;code&gt;Apache 
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Shiro" scheme="http://yoursite.com/tags/Shiro/"/>
    
  </entry>
  
  <entry>
    <title>How to create a pull request from a fork</title>
    <link href="http://yoursite.com/2019/07/29/How-to-create-a-pull-request-from-a-fork/"/>
    <id>http://yoursite.com/2019/07/29/How-to-create-a-pull-request-from-a-fork/</id>
    <published>2019-07-29T10:03:07.000Z</published>
    <updated>2019-07-29T10:45:49.165Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-å¦‚ä½•åœ¨forkçš„ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªpull-requestè¯·æ±‚"><a href="#å­¦ä¹ ç¬”è®°-å¦‚ä½•åœ¨forkçš„ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªpull-requestè¯·æ±‚" class="headerlink" title="å­¦ä¹ ç¬”è®° : å¦‚ä½•åœ¨forkçš„ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªpull requestè¯·æ±‚"></a>å­¦ä¹ ç¬”è®° : å¦‚ä½•åœ¨<code>fork</code>çš„ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ª<code>pull request</code>è¯·æ±‚</h2><p><em>å¦‚æœä½ åˆ›å»ºäº†ä»“åº“çš„åˆ†å‰å¹¶å¯¹åˆ†å‰è¿›è¡Œäº†æ›´æ”¹,ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ‹‰å–è¯·æ±‚æ¥è¯·æ±‚ä¸Šæ¸¸ä»“åº“æ¥å—ä½ çš„æ›´æ”¹. è‡³äºè¯´å¦‚ä½•æ­£ç¡®ä½¿ç”¨åˆ†æ”¯è¯·å‚é˜…å®˜æ–¹æ–‡æ¡£ : <a href="https://help.github.com/en/articles/working-with-forks" target="_blank" rel="noopener">https://help.github.com/en/articles/working-with-forks</a></em></p><h3 id="è¯¦ç»†æ­¥éª¤"><a href="#è¯¦ç»†æ­¥éª¤" class="headerlink" title="è¯¦ç»†æ­¥éª¤"></a>è¯¦ç»†æ­¥éª¤</h3><ol><li><em>å¯¼èˆªåˆ°ä»å…¶ä¸­åˆ›å»ºåˆ†å‰çš„åŸå§‹ä»“åº“</em></li></ol><ol start="2"><li><em>åœ¨<code>Branch</code>(åˆ†æ”¯)èœå•çš„å³ä¾§,å•å‡»<code>New pull request</code>(æ–°å»ºæ‹‰å–è¯·æ±‚)</em></li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/29/How-to-create-a-pull-request-from-a-fork/pull-request-start-review-button.png" alt title>                </div>                <div class="image-caption"></div>            </figure><ol start="3"><li><em>åœ¨<code>Compare</code>(æ¯”è¾ƒ)é¡µé¢ä¸Š,å•å‡»<code>compare across forks</code>(è·¨åˆ†å‰æ¯”è¾ƒ)</em></li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/29/How-to-create-a-pull-request-from-a-fork/compare-across-forks-link.png" alt title>                </div>                <div class="image-caption"></div>            </figure><ol start="4"><li><em>ç¡®è®¤åŸºæœ¬åˆ†å‰æ˜¯æ‚¨è¦å‘å…¶åˆå¹¶æ›´æ”¹çš„ä»“åº“. ä½¿ç”¨<code>base branch</code>(åŸºæœ¬åˆ†æ”¯)ä¸‹æ‹‰èœå•,é€‰æ‹©è¦å‘å…¶åˆå¹¶æ›´æ”¹çš„ä¸Šæ¸¸ä»“åº“åˆ†æ”¯</em></li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/29/How-to-create-a-pull-request-from-a-fork/choose-base-fork-and-branch.png" alt title>                </div>                <div class="image-caption"></div>            </figure><ol start="5"><li><em>ä½¿ç”¨<code>head fork</code>(å¤´éƒ¨åˆ†å‰)ä¸‹æ‹‰èœå•é€‰æ‹©æ‚¨çš„åˆ†å‰,ç„¶åä½¿ç”¨<code>compare branch</code>(æ¯”è¾ƒåˆ†æ”¯)ä¸‹æ‹‰èœå•é€‰æ‹©è¿›è¡Œäº†æ›´æ”¹çš„åˆ†æ”¯</em></li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/29/How-to-create-a-pull-request-from-a-fork/choose-head-fork-compare-branch.png" alt title>                </div>                <div class="image-caption"></div>            </figure><ol start="6"><li><em>é”®å…¥æ‹‰å–è¯·æ±‚çš„æ ‡é¢˜å’Œè¯´æ˜</em></li></ol><p><img src="/2019/07/29/How-to-create-a-pull-request-from-a-fork/pullrequest-description.png" alt></p><ol start="7"><li><em>å¦‚æœæ‚¨ä¸å¸Œæœ›å¯¹ä¸Šæ¸¸ä»“åº“å…·æœ‰æ¨é€æƒé™çš„ä»»ä½•äººæ›´æ”¹æ‚¨çš„æ‹‰å–è¯·æ±‚,è¯·å–æ¶ˆé€‰ä¸­<code>Allow edits from maintainers</code>(å…è®¸ç»´æŠ¤å‘˜ç¼–è¾‘)</em></li></ol><p><img src="/2019/07/29/How-to-create-a-pull-request-from-a-fork/allow-maintainers-to-make-edits.png" alt></p><ol start="8"><li><em>è¦åˆ›å»ºå¯ä¾›å®¡æŸ¥çš„æ‹‰å–è¯·æ±‚,è¯·å•å‡» Create Pull Request(åˆ›å»ºæ‹‰å–è¯·æ±‚). è¦åˆ›å»ºæ‹‰å–è¯·æ±‚è‰ç¨¿,è¯·ä½¿ç”¨ä¸‹æ‹‰èœå•é€‰æ‹©<code>Create Draft Pull Request</code>(åˆ›å»ºæ‹‰å–è¯·æ±‚è‰ç¨¿),ç„¶åå•å‡»<code>Draft Pull Request</code>(æ‹‰å–è¯·æ±‚è‰ç¨¿)</em></li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/29/How-to-create-a-pull-request-from-a-fork/pullrequest-send.png" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>ğŸ‘ æ‘˜è‡ªGiHubå¸®åŠ©æ–‡æ¡£(æ¨èå°†å…¶ä½œä¸ºGitHubå­¦ä¹ å‚è€ƒ,å†…å®¹çœŸå¿ƒè¶…çº§è¯¦ç»†å“Ÿ ~) : <a href="https://help.github.com/en" target="_blank" rel="noopener">https://help.github.com/en</a></em></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-å¦‚ä½•åœ¨forkçš„ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªpull-requestè¯·æ±‚&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-å¦‚ä½•åœ¨forkçš„ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªpull-requestè¯·æ±‚&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : å¦‚ä½•åœ¨forkçš„ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªpu
      
    
    </summary>
    
    
      <category term="GitHub" scheme="http://yoursite.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>A simple comment component for Vue</title>
    <link href="http://yoursite.com/2019/07/25/A-simple-comment-component-for-Vue/"/>
    <id>http://yoursite.com/2019/07/25/A-simple-comment-component-for-Vue/</id>
    <published>2019-07-25T03:11:04.000Z</published>
    <updated>2019-07-27T02:21:00.831Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¡ˆä¾‹ç¬”è®°-ä¸€ä¸ªç®€å•çš„Vueè¯„è®ºæ¡†ç»„ä»¶"><a href="#æ¡ˆä¾‹ç¬”è®°-ä¸€ä¸ªç®€å•çš„Vueè¯„è®ºæ¡†ç»„ä»¶" class="headerlink" title="æ¡ˆä¾‹ç¬”è®° : ä¸€ä¸ªç®€å•çš„Vueè¯„è®ºæ¡†ç»„ä»¶"></a>æ¡ˆä¾‹ç¬”è®° : ä¸€ä¸ªç®€å•çš„Vueè¯„è®ºæ¡†ç»„ä»¶</h2><p><em>åœ¨å†™å®Œæ¡ˆä¾‹ : <a href="https://github.com/YUbuntu0109/YUbuntu0109.github.io/blob/83b7f5359d1092086a2d13fc6cf2b6c6414d415b/source/_posts/%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8EVue%E7%9A%84%E7%AE%80%E5%8D%95%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E9%A1%B5.md" target="_blank" rel="noopener">ä¸€ä¸ªåŸºäºVue.jsçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ</a>å,å°å“¥åˆåˆæ­¥å­¦ä¹ äº†Vue.jsç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬ç”¨æ³•,æ¥ä¸ºæ­¤å†å†™ä¸€ä¸ªå°æ€»ç»“æ¡ˆä¾‹å§~ è¿™æ˜¯ä¸€ä¸ªç®€å•çš„è¯„è®ºæ¡†ç»„ä»¶ : å‘è¡¨è¯„è®º(å°†å…¶å­˜å‚¨åˆ°<code>Local Storage</code>)~ è¯¥ç¨‹åºå…¶å®ƒç‰ˆæœ¬è§ : <a href="https://github.com/YUbuntu0109/vue-learning" target="_blank" rel="noopener">https://github.com/YUbuntu0109/vue-learning</a></em></p><p><em>(simple component for comment v1.0/comment-component-1.0.html)ç¨‹åºå¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../../resources/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../../resources/bootstrap.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>the comment component v.10<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- use the comment component --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">comm-component</span> @<span class="attr">fun-init</span>=<span class="string">"initComments"</span> @<span class="attr">fun-clear</span>=<span class="string">"clearLocalStorage"</span>&gt;</span><span class="tag">&lt;/<span class="name">comm-component</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- comments --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"list-group"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"list-group-item"</span> <span class="attr">v-for</span>=<span class="string">"comment in comments"</span> <span class="attr">:key</span>=<span class="string">"comment.id"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"badge"</span>&gt;</span>commenter : &#123;&#123;comment.commenter&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">contents : &#123;&#123;comment.content&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- the template of the component --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"commTemplate"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel panel-primary"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-heading"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"panel-title"</span>&gt;</span>A SIMPLE COMMENT COMPONENT FOR VUE<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-body form-inline"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"label label-default"</span> <span class="attr">style</span>=<span class="string">"font-size: 17px;"</span>&gt;</span>commenter<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">style</span>=<span class="string">"width: 180px;"</span> <span class="attr">v-model</span>=<span class="string">"commenter"</span> <span class="attr">v-focus</span> <span class="attr">v-color</span>=<span class="string">"'#777'"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span> <span class="attr">style</span>=<span class="string">"padding-left: 15px;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"label label-default"</span> <span class="attr">style</span>=<span class="string">"font-size: 17px;"</span>&gt;</span>content<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">style</span>=<span class="string">"width: 500px;"</span> <span class="attr">v-model</span>=<span class="string">"content"</span> <span class="attr">v-color</span>=<span class="string">"'#777'"</span> @<span class="attr">keyup.enter</span>=<span class="string">"commit"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">style</span>=<span class="string">"padding-left: 5px;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-success"</span> @<span class="attr">click</span>=<span class="string">"commit"</span>&gt;</span>COMMIT<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-warning"</span> <span class="attr">style</span>=<span class="string">"margin-left: 10px;"</span> @<span class="attr">click</span>=<span class="string">"reset"</span>&gt;</span>RESET<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span> <span class="attr">style</span>=<span class="string">"margin-left: 10px;"</span> @<span class="attr">click</span>=<span class="string">"delAll"</span>&gt;</span>CLEAR STORAGE<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">//declare the comment component</span></span><br><span class="line"><span class="undefined">var commComponent = &#123;</span></span><br><span class="line"><span class="undefined">template: '#commTemplate',</span></span><br><span class="line"><span class="undefined">data() &#123;</span></span><br><span class="line"><span class="undefined">return &#123;</span></span><br><span class="line"><span class="undefined">commenter: '',</span></span><br><span class="line"><span class="undefined">content: ''</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">methods: &#123;</span></span><br><span class="line"><span class="undefined">commit() &#123;</span></span><br><span class="line"><span class="undefined">var comment = &#123;</span></span><br><span class="line"><span class="undefined">id: Date.now(),</span></span><br><span class="line"><span class="undefined">commenter: this.commenter,</span></span><br><span class="line"><span class="undefined">content: this.content</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">var commentList = JSON.parse(localStorage.getItem('cmts') || '[]') //get all of comments from the local storage</span></span><br><span class="line"><span class="undefined">commentList.unshift(comment)</span></span><br><span class="line"><span class="undefined">localStorage.setItem('cmts', JSON.stringify(commentList)) //save the new comment list</span></span><br><span class="line"><span class="undefined">this.$emit('fun-init')</span></span><br><span class="line"><span class="undefined">this.commenter = ''</span></span><br><span class="line"><span class="undefined">this.content = ''</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">reset() &#123;</span></span><br><span class="line"><span class="undefined">this.commenter = ''</span></span><br><span class="line"><span class="undefined">this.content = ''</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">delAll() &#123;</span></span><br><span class="line"><span class="undefined">this.$emit('fun-clear')</span></span><br><span class="line"><span class="undefined">this.$emit('fun-init')</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">//custom directive</span></span><br><span class="line"><span class="undefined">Vue.directive('focus', &#123;</span></span><br><span class="line"><span class="undefined">inserted: function(el) &#123;</span></span><br><span class="line"><span class="undefined">el.focus()</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">Vue.directive('color', &#123;</span></span><br><span class="line"><span class="undefined">bind: function(el, colorStr) &#123;</span></span><br><span class="line"><span class="undefined">el.style.color = colorStr.value</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">idStr: [],</span></span><br><span class="line"><span class="undefined">comments: [&#123;</span></span><br><span class="line"><span class="undefined">id: '',</span></span><br><span class="line"><span class="undefined">commenter: '',</span></span><br><span class="line"><span class="undefined">content: ''</span></span><br><span class="line"><span class="undefined">&#125;]</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">methods: &#123;</span></span><br><span class="line"><span class="undefined">//initializes the list of comments on the page</span></span><br><span class="line"><span class="undefined">initComments() &#123;</span></span><br><span class="line"><span class="undefined">var commentList = JSON.parse(localStorage.getItem('cmts') || '[]')</span></span><br><span class="line"><span class="undefined">this.comments = commentList</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">//delete all of comments from the local storage</span></span><br><span class="line"><span class="undefined">clearLocalStorage() &#123;</span></span><br><span class="line"><span class="undefined">localStorage.clear()</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">components: &#123;</span></span><br><span class="line"><span class="undefined">commComponent</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">created() &#123;</span></span><br><span class="line"><span class="undefined">this.initComments() //(reflush)reload comments</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>ç¨‹åºè¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/25/A-simple-comment-component-for-Vue/a-simple-comment-component-for-vue-v1.0.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ¡ˆä¾‹ç¬”è®°-ä¸€ä¸ªç®€å•çš„Vueè¯„è®ºæ¡†ç»„ä»¶&quot;&gt;&lt;a href=&quot;#æ¡ˆä¾‹ç¬”è®°-ä¸€ä¸ªç®€å•çš„Vueè¯„è®ºæ¡†ç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;æ¡ˆä¾‹ç¬”è®° : ä¸€ä¸ªç®€å•çš„Vueè¯„è®ºæ¡†ç»„ä»¶&quot;&gt;&lt;/a&gt;æ¡ˆä¾‹ç¬”è®° : ä¸€ä¸ªç®€å•çš„Vueè¯„è®ºæ¡†ç»„ä»¶&lt;/h2&gt;&lt;p&gt;&lt;e
      
    
    </summary>
    
    
      <category term="Vue" scheme="http://yoursite.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªåŸºäºVueçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ</title>
    <link href="http://yoursite.com/2019/07/24/%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8EVue%E7%9A%84%E7%AE%80%E5%8D%95%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E9%A1%B5/"/>
    <id>http://yoursite.com/2019/07/24/ä¸€ä¸ªåŸºäºVueçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ/</id>
    <published>2019-07-24T12:02:22.000Z</published>
    <updated>2019-07-27T02:06:07.521Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¡ˆä¾‹ç¬”è®°-ä¸€ä¸ªåŸºäºVue-jsçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ"><a href="#æ¡ˆä¾‹ç¬”è®°-ä¸€ä¸ªåŸºäºVue-jsçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ" class="headerlink" title="æ¡ˆä¾‹ç¬”è®° : ä¸€ä¸ªåŸºäºVue.jsçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ"></a>æ¡ˆä¾‹ç¬”è®° : ä¸€ä¸ªåŸºäºVue.jsçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ</h2><p><em>åˆæ­¥å­¦ä¹ å®Œ<code>Vue.js</code>çš„åŸºæœ¬è¯­æ³•ã€æ•°æ®ç»‘å®šè§†å›¾æœºåˆ¶ã€äº‹ä»¶ç»‘å®šã€è‡ªå®šä¹‰æŒ‡ä»¤ã€è¿‡æ»¤å™¨å,æ¥å°è¯•å†™ä¸€ä¸ªæ€»ç»“æ¡ˆä¾‹å§~ è¯¥æ¡ˆä¾‹çš„ä¸»è¦åŠŸèƒ½æ˜¯ä¸€ä¸ªç®€å•çš„ä¿¡æ¯ç®¡ç† : å¢åŠ ,åˆ é™¤,æŸ¥æ‰¾. è¯¥ç¨‹åºå…¶å®ƒç‰ˆæœ¬è§ : <a href="https://github.com/YUbuntu0109/vue-learning" target="_blank" rel="noopener">https://github.com/YUbuntu0109/vue-learning</a></em></p><p><em>(simple demo program v1.2/demo-1.2.html)ç¨‹åºå¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../simple%20demo%20program%20v1.0/resources/bootstrap.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>a simple demo program v1.2<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel panel-primary"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-heading"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"panel-title"</span>&gt;</span>SIMPLE DEMO PROGRAM FOR VUE<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-body form-inline"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">ID : <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">v-model</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">style</span>=<span class="string">"padding-left: 20px;"</span>&gt;</span></span><br><span class="line">NAME : <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">v-model</span>=<span class="string">"name"</span> @<span class="attr">keyup.enter</span>=<span class="string">"add()"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">style</span>=<span class="string">"margin-left:20px ;"</span> @<span class="attr">click</span>=<span class="string">"add()"</span>&gt;</span>ADD<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">style</span>=<span class="string">"padding-left: 213px;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-info"</span>&gt;</span>SEARCH BY NAME<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">v-model</span>=<span class="string">"keyword"</span> <span class="attr">v-focus</span> <span class="attr">v-color</span>=<span class="string">"'blueviolet'"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table table-bordered table-hover table-striped"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"success"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>NAME<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span> <span class="attr">style</span>=<span class="string">"width: 328px;"</span>&gt;</span>CTIME<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>OPERATION<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">"user in search(keyword)"</span> <span class="attr">v-bind:key</span>=<span class="string">"user.id"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.id&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;user.ctime | dateStrFilter('')&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span> @<span class="attr">click</span>=<span class="string">"del(user.id)"</span>&gt;</span>DELETE<span class="tag">&lt;/<span class="name">buttom</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">Vue.filter('dateStrFilter', function(dateStr, datePattern = "") &#123; //the default is null</span></span><br><span class="line"><span class="undefined">var newDateStr = new Date(dateStr)</span></span><br><span class="line"><span class="undefined">var year = newDateStr.getFullYear()</span></span><br><span class="line"><span class="undefined">var month = (newDateStr.getMonth() + 1).toString().padStart(2, '0') //padStart():complete the length of the string</span></span><br><span class="line"><span class="undefined">var date = newDateStr.getDate().toString().padStart(2, '0')</span></span><br><span class="line"><span class="undefined">var hour = newDateStr.getHours().toString().padStart(2, '0')</span></span><br><span class="line"><span class="undefined">var m = newDateStr.getMinutes().toString().padStart(2, '0')</span></span><br><span class="line"><span class="undefined">var s = newDateStr.getSeconds().toString().padStart(2, '0')</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">if (datePattern.toLowerCase() === 'yyyy-mm-dd') &#123;</span></span><br><span class="line"><span class="undefined">return `$&#123;year&#125;-$&#123;month&#125;-$&#123;date&#125;`</span></span><br><span class="line"><span class="undefined">&#125; else &#123;</span></span><br><span class="line"><span class="undefined">return `$&#123;year&#125;-$&#123;month&#125;-$&#123;date&#125; $&#123;hour&#125;:$&#123;m&#125;:$&#123;s&#125;`</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">Vue.directive('focus', &#123;</span></span><br><span class="line"><span class="undefined">inserted: function(el) &#123;</span></span><br><span class="line"><span class="undefined">el.focus()</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">Vue.directive('color', &#123;</span></span><br><span class="line"><span class="undefined">bind: function(el, colorStr) &#123;</span></span><br><span class="line"><span class="undefined">el.style.color = colorStr.value</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">id: '',</span></span><br><span class="line"><span class="undefined">name: '',</span></span><br><span class="line"><span class="undefined">keyword: '',</span></span><br><span class="line"><span class="undefined">users: [&#123;</span></span><br><span class="line"><span class="undefined">id: 1,</span></span><br><span class="line"><span class="undefined">name: 'YUHUI001',</span></span><br><span class="line"><span class="undefined">ctime: new Date()</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">&#123;</span></span><br><span class="line"><span class="undefined">id: 2,</span></span><br><span class="line"><span class="undefined">name: 'YUHUI002',</span></span><br><span class="line"><span class="undefined">ctime: new Date()</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">&#123;</span></span><br><span class="line"><span class="undefined">id: 3,</span></span><br><span class="line"><span class="undefined">name: 'YUHUI003',</span></span><br><span class="line"><span class="undefined">ctime: new Date()</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">]</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">methods: &#123;</span></span><br><span class="line"><span class="undefined">add() &#123;</span></span><br><span class="line"><span class="undefined">var user = &#123;</span></span><br><span class="line"><span class="undefined">id: this.id,</span></span><br><span class="line"><span class="undefined">name: this.name,</span></span><br><span class="line"><span class="undefined">ctime: new Date()</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">//The elements to add to the end of the array. </span></span><br><span class="line"><span class="undefined">this.users.push(user)</span></span><br><span class="line"><span class="undefined">this.id = this.name = ''</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">del(id) &#123;</span></span><br><span class="line"><span class="undefined">var index = this.users.findIndex(user =&gt; &#123;</span></span><br><span class="line"><span class="undefined">if (user.id == id) &#123;</span></span><br><span class="line"><span class="undefined">return true;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">//The elements to add to the array.</span></span><br><span class="line"><span class="undefined">//If you don't specify any elements, splice simply removes elements from the array. </span></span><br><span class="line"><span class="undefined">this.users.splice(index, 1)</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">search(keyword) &#123;</span></span><br><span class="line"><span class="undefined">var newUsers = []</span></span><br><span class="line"><span class="undefined">this.users.forEach(user =&gt; &#123;</span></span><br><span class="line"><span class="undefined">//If the keyword is null, it returns 0.</span></span><br><span class="line"><span class="undefined">if (user.name.indexOf(keyword) != -1) &#123;</span></span><br><span class="line"><span class="undefined">newUsers.push(user)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">return newUsers;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>ç¨‹åºè¿è¡Œæ•ˆæœç¤ºä¾‹å›¾å¦‚ä¸‹ :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/24/ä¸€ä¸ªåŸºäºVueçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ/a-simple-demo-program-for-vue-v1.2.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ¡ˆä¾‹ç¬”è®°-ä¸€ä¸ªåŸºäºVue-jsçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ&quot;&gt;&lt;a href=&quot;#æ¡ˆä¾‹ç¬”è®°-ä¸€ä¸ªåŸºäºVue-jsçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ&quot; class=&quot;headerlink&quot; title=&quot;æ¡ˆä¾‹ç¬”è®° : ä¸€ä¸ªåŸºäºVue.jsçš„ç®€å•ä¿¡æ¯ç®¡ç†é¡µ&quot;&gt;&lt;/a&gt;æ¡ˆä¾‹ç¬”è®° : ä¸€ä¸ªåŸºäºVue.
      
    
    </summary>
    
    
      <category term="Vue" scheme="http://yoursite.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>Vueç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬ç”¨æ³•</title>
    <link href="http://yoursite.com/2019/07/24/Vue%E7%BB%84%E4%BB%B6%E7%9A%84%E5%AE%9A%E4%B9%89%E5%8F%8A%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/"/>
    <id>http://yoursite.com/2019/07/24/Vueç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬ç”¨æ³•/</id>
    <published>2019-07-24T11:57:46.000Z</published>
    <updated>2019-07-27T04:33:19.726Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Vueç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•"><a href="#å­¦ä¹ ç¬”è®°-Vueç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•" class="headerlink" title="å­¦ä¹ ç¬”è®° : Vueç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•"></a>å­¦ä¹ ç¬”è®° : Vueç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•</h2><p><em>ç»„ä»¶çš„å‡ºç°,æ˜¯ä¸ºäº†æ‹†åˆ†å®ä¾‹çš„ä»£ç é‡çš„,ç»§è€Œèƒ½å¤Ÿè®©æˆ‘ä»¬ä»¥ä¸åŒçš„ç»„ä»¶æ¥åˆ’åˆ†ä¸åŒåŠŸèƒ½æ¨¡å—. ç»„ä»¶æ˜¯å¯å¤ç”¨çš„Vueå®ä¾‹,æ‰€ä»¥å®ƒä»¬ä¸<code>new Vue</code>æ¥æ”¶ç›¸åŒçš„é€‰é¡¹,ä¾‹å¦‚ dataã€computedã€watchã€methodsä»¥åŠç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ ..</em></p><ul><li>ç»„ä»¶åŒ– : ä»ä»£ç é€»è¾‘çš„è§’åº¦è¿›è¡Œåˆ’åˆ†,ä¿è¯æ¯ä¸ªåŠŸèƒ½æ¨¡å—çš„èŒèƒ½å•ä¸€</li><li>æ¨¡å—åŒ– : ä»UIè®¾è®¡çš„è§’åº¦è¿›è¡Œåˆ’åˆ†,ä¿è¯å‰ç«¯æ–¹ä¾¿UIç»„ä»¶çš„é‡ç”¨</li></ul><h3 id="ç»„ä»¶çš„æ³¨å†Œ"><a href="#ç»„ä»¶çš„æ³¨å†Œ" class="headerlink" title="ç»„ä»¶çš„æ³¨å†Œ"></a>ç»„ä»¶çš„æ³¨å†Œ</h3><h4 id="å…¨å±€ç»„ä»¶æ³¨å†Œæ–¹å¼"><a href="#å…¨å±€ç»„ä»¶æ³¨å†Œæ–¹å¼" class="headerlink" title="å…¨å±€ç»„ä»¶æ³¨å†Œæ–¹å¼"></a>å…¨å±€ç»„ä»¶æ³¨å†Œæ–¹å¼</h4><p><em>æ–¹å¼ä¸€ : ä½¿ç”¨<code>Vue.extend</code>,åŠå…¶ç®€åŒ–æ¨¡å¼</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-component</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">simple-my-component1</span>&gt;</span><span class="tag">&lt;/<span class="name">simple-my-component1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">simple-my-component2</span>&gt;</span><span class="tag">&lt;/<span class="name">simple-my-component2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    //æ³¨å†Œç»„ä»¶</span></span><br><span class="line"><span class="undefined">var component = Vue.extend(&#123;</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">h2</span>&gt;</span>Stay hungray,Stay foolish<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">Vue.component('myComponent', component)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">//ç®€åŒ–æ¨¡å¼1</span></span><br><span class="line"><span class="undefined">Vue.component('simpleMyComponent1', Vue.extend(&#123;</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">h3</span>&gt;</span>Stay hungray,Stay foolish<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;));</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    //ç®€åŒ–æ¨¡å¼2</span></span><br><span class="line"><span class="undefined">    Vue.component('simpleMyComponent2', &#123;</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h4</span>&gt;</span>Stay hungray,Stay foolish<span class="tag">&lt;/<span class="name">h4</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>data<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>æ–¹å¼äºŒ : å°†<code>template</code>å®šä¹‰ä¸ºç‹¬ç«‹æ ‡ç­¾,æé«˜ä»£ç å¯è¯»æ€§</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"myTemplate"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Stay hungray,Stay foolish<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">simple-my-component</span>&gt;</span><span class="tag">&lt;/<span class="name">simple-my-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">     //æ³¨å†Œç»„ä»¶</span></span><br><span class="line"><span class="undefined">Vue.component('simpleMyComponent', Vue.extend(&#123;</span></span><br><span class="line"><span class="undefined">template: '#myTemplate'</span></span><br><span class="line"><span class="undefined">&#125;));</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="å±€éƒ¨ç»„ä»¶æ³¨å†Œæ–¹å¼"><a href="#å±€éƒ¨ç»„ä»¶æ³¨å†Œæ–¹å¼" class="headerlink" title="å±€éƒ¨ç»„ä»¶æ³¨å†Œæ–¹å¼"></a>å±€éƒ¨ç»„ä»¶æ³¨å†Œæ–¹å¼</h4><p><em>æ–¹å¼ä¸€ : <code>components</code>é€‰é¡¹ç”¨äºä¸ºç»„ä»¶æ³¨å†Œä»å¤–éƒ¨å¼•å…¥çš„ç»„ä»¶</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"myTemplate"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>this is my component<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-component</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var myComponent = &#123;</span></span><br><span class="line"><span class="undefined">template: '#myTemplate'</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">components: &#123;</span></span><br><span class="line"><span class="undefined">myComponent</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>æ–¹å¼äºŒ</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-title1</span>&gt;</span><span class="tag">&lt;/<span class="name">my-title1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-title2</span>&gt;</span><span class="tag">&lt;/<span class="name">my-title2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">let myTitle1 = &#123;</span></span><br><span class="line"><span class="undefined">name: 'myTitle',</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">h2</span>&gt;</span>Stdy hungry,Stdy foolish<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">let myTitle2 = &#123;</span></span><br><span class="line"><span class="undefined">name: 'myTitle2',</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">h3</span>&gt;</span>Stdy hungry,Stdy foolish<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">components: &#123;</span></span><br><span class="line"><span class="undefined">myTitle1,</span></span><br><span class="line"><span class="undefined">myTitle2</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="Prop"><a href="#Prop" class="headerlink" title="Prop"></a>Prop</h3><p><em>çˆ¶ç»„ä»¶åœ¨å¼•ç”¨å­ç»„ä»¶çš„åŒæ—¶,å¯ä»¥é€šè¿‡å±æ€§ç»‘å®š(v-bind)çš„å½¢å¼æŠŠéœ€è¦ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®,ä»¥<code>å±æ€§ç»‘å®š</code>çš„å½¢å¼,ä¼ é€’åˆ°å­ç»„ä»¶å†…éƒ¨,ä¾›å­ç»„ä»¶ä½¿ç”¨,ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">son-component</span> <span class="attr">v-bind:parentmsg</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">son-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">msg: 'è¿™æ˜¯çˆ¶ç»„ä»¶ä¸­çš„æ•°æ®'</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">components: &#123;</span></span><br><span class="line"><span class="undefined">sonComponent: &#123;</span></span><br><span class="line"><span class="undefined">props: ['parentmsg'], //åªè¯»</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">h3</span>&gt;</span>è¿™æ˜¯å­ç»„ä»¶---&gt;&#123;&#123;parentmsg&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>',</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="è‡ªå®šä¹‰äº‹ä»¶"><a href="#è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="è‡ªå®šä¹‰äº‹ä»¶"></a>è‡ªå®šä¹‰äº‹ä»¶</h3><p><em>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ–¹æ³•,ä½¿ç”¨çš„æ˜¯äº‹ä»¶ç»‘å®šæœºåˆ¶,ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-component</span> @<span class="attr">func</span>=<span class="string">"show"</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var myComponent = &#123;</span></span><br><span class="line"><span class="undefined">template: '#myTemplate',</span></span><br><span class="line"><span class="undefined">methods: &#123;</span></span><br><span class="line"><span class="undefined">getMethods() &#123;</span></span><br><span class="line"><span class="undefined">this.$emit('func', 'ä½ å¥½,æˆ‘æ˜¯å­ç»„ä»¶!')</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">methods: &#123;</span></span><br><span class="line"><span class="undefined">show(data) &#123;</span></span><br><span class="line"><span class="undefined">window.alert('è¿™æ˜¯çˆ¶ç»„ä»¶ä¸­çš„æ–¹æ³•,å­ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®ä¸º:' + data)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">components: &#123;</span></span><br><span class="line"><span class="undefined">myComponent</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="åŠ¨æ€ç»„ä»¶"><a href="#åŠ¨æ€ç»„ä»¶" class="headerlink" title="åŠ¨æ€ç»„ä»¶"></a>åŠ¨æ€ç»„ä»¶</h3><p><em>ç»„ä»¶é—´çš„åˆ‡æ¢,æ–¹å¼ä¸€ : ä½¿ç”¨<code>if-else</code>,ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"flag=true"</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"flag=false"</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">login</span> <span class="attr">v-if</span>=<span class="string">"flag"</span>&gt;</span><span class="tag">&lt;/<span class="name">login</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">regist</span> <span class="attr">v-else</span>=<span class="string">"flag"</span>&gt;</span><span class="tag">&lt;/<span class="name">regist</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">Vue.component('login', &#123;</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">h3</span>&gt;</span>è¿™æ˜¯ç™»å½•ç»„ä»¶<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">Vue.component('regist', &#123;</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">h3</span>&gt;</span>è¿™æ˜¯æ³¨å†Œç»„ä»¶<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">flag: true</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>ç»„ä»¶é—´çš„åˆ‡æ¢,æ–¹å¼äºŒ : ä½¿ç”¨<code>component</code>å…ƒç´ ,ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"componentName='login'"</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"componentName='regist'"</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"componentName='logout'"</span>&gt;</span>æ³¨é”€<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">"componentName"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">Vue.component('login', &#123;</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">h3</span>&gt;</span>è¿™æ˜¯ç™»å½•ç»„ä»¶<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">Vue.component('regist', &#123;</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">h3</span>&gt;</span>è¿™æ˜¯æ³¨å†Œç»„ä»¶<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">Vue.component('logout', &#123;</span></span><br><span class="line"><span class="xml">template: '<span class="tag">&lt;<span class="name">h3</span>&gt;</span>è¿™æ˜¯æ³¨é”€ç»„ä»¶<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">componentName: 'login' //default</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Vueç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Vueç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Vueç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Vueç»„ä»¶çš„å®šä¹‰åŠåŸºæœ¬çš„ä½¿ç”¨
      
    
    </summary>
    
    
      <category term="Vue" scheme="http://yoursite.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>Vue.jsçš„è‡ªå®šä¹‰æŒ‡ä»¤ä¸è¿‡æ»¤å™¨</title>
    <link href="http://yoursite.com/2019/07/23/Vue-js%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%E4%B8%8E%E8%BF%87%E6%BB%A4%E5%99%A8/"/>
    <id>http://yoursite.com/2019/07/23/Vue-jsçš„è‡ªå®šä¹‰æŒ‡ä»¤ä¸è¿‡æ»¤å™¨/</id>
    <published>2019-07-23T07:45:39.000Z</published>
    <updated>2019-07-27T01:43:19.546Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Vueçš„è‡ªå®šä¹‰æŒ‡ä»¤åŠè¿‡æ»¤å™¨çš„ä½¿ç”¨"><a href="#å­¦ä¹ ç¬”è®°-Vueçš„è‡ªå®šä¹‰æŒ‡ä»¤åŠè¿‡æ»¤å™¨çš„ä½¿ç”¨" class="headerlink" title="å­¦ä¹ ç¬”è®° : Vueçš„è‡ªå®šä¹‰æŒ‡ä»¤åŠè¿‡æ»¤å™¨çš„ä½¿ç”¨"></a>å­¦ä¹ ç¬”è®° : Vueçš„è‡ªå®šä¹‰æŒ‡ä»¤åŠè¿‡æ»¤å™¨çš„ä½¿ç”¨</h2><h3 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h3><p><em>å…ˆå‰æˆ‘ä»¬æ¥è§¦è¿‡Vueæä¾›çš„â€™å¼€ç®±å³ç”¨çš„â€™æŒ‡ä»¤,å¦‚<code>v-bind</code>,<code>v-on</code>,<code>v-model</code>ç­‰ . .é™¤äº†è¿™äº›æŒ‡ä»¤å¤–,Vueä¹Ÿå…è®¸æˆ‘ä»¬ä½¿ç”¨ä¸€äº›è‡ªå®šä¹‰çš„æŒ‡ä»¤å“Ÿ~ ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰å¯¹è±¡å¯ä»¥æä¾›å¦‚ä¸‹å‡ ä¸ªé’©å­å‡½æ•° (å‡ä¸ºå¯é€‰) :</em></p><ol><li><em><code>bind</code> : åªè°ƒç”¨ä¸€æ¬¡,æŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨. åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®</em></li><li><em><code>inserted</code> : è¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨(ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨,ä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)</em></li><li><em><code>update</code> : æ‰€åœ¨ç»„ä»¶çš„VNodeæ›´æ–°æ—¶è°ƒç”¨,ä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­VNodeæ›´æ–°ä¹‹å‰. æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜,ä¹Ÿå¯èƒ½æ²¡æœ‰. ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–° (è¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ : <a href="https://cn.vuejs.org/v2/guide/custom-directive.html" target="_blank" rel="noopener">https://cn.vuejs.org/v2/guide/custom-directive.html</a>)</em></li><li><em><code>componentUpdated</code> : æŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„VNodeåŠå…¶å­VNodeå…¨éƒ¨æ›´æ–°åè°ƒç”¨</em></li><li><em><code>unbind</code> : åªè°ƒç”¨ä¸€æ¬¡,æŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨</em></li></ol><h4 id="è‡ªå®šä¹‰å…¨å±€æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰å…¨å±€æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰å…¨å±€æŒ‡ä»¤"></a>è‡ªå®šä¹‰å…¨å±€æŒ‡ä»¤</h4><p><em>è‡ªå®šä¹‰ä¸€ä¸ªå…¨å±€çš„æŒ‡ä»¤,ç”¨äºè‡ªå®šä¹‰å­—ä½“é¢œè‰²,ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-color</span>=<span class="string">"'blueviolet'"</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">Vue.directive('color', &#123;</span></span><br><span class="line"><span class="undefined">bind: function(el, colorStr) &#123;</span></span><br><span class="line"><span class="undefined">el.style.color = colorStr.value</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">    el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">msg: 'hi Vue !'</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>å¤§å¤šæƒ…å†µä¸‹,æˆ‘ä»¬å¯èƒ½åªæƒ³åœ¨<code>bind</code>å’Œ<code>update</code>é’©å­ä¸Šä½œé‡å¤åŠ¨ä½œ,å¹¶ä¸æƒ³å…³å¿ƒå…¶å®ƒçš„é’©å­,é‚£ä¹ˆå°±å¯ä»¥è¿™æ ·ç®€å†™å“Ÿ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-color</span>=<span class="string">"'blueviolet'"</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">Vue.directive('color', function(el, colorStr) &#123;</span></span><br><span class="line"><span class="undefined">el.style.color = colorStr.value</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">    el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">msg: 'hi Vue !'</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="è‡ªå®šä¹‰ç§æœ‰æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰ç§æœ‰æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰ç§æœ‰æŒ‡ä»¤"></a>è‡ªå®šä¹‰ç§æœ‰æŒ‡ä»¤</h4><p><em>è‡ªå®šä¹‰ä¸€ä¸ªç§æœ‰çš„æŒ‡ä»¤,ç”¨äºè‡ªå®šä¹‰å­—ä½“é¢œè‰²,å…¶ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-color</span>=<span class="string">"'blueviolet'"</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">msg: 'hi Vue !'</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">directives: &#123;</span></span><br><span class="line"><span class="undefined">'color': &#123;</span></span><br><span class="line"><span class="undefined">    bind: function(el, colorStr) &#123;</span></span><br><span class="line"><span class="undefined">el.style.color = colorStr.value</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>(åŒä¸Š)å¯ç®€å†™ä¸º :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-color</span>=<span class="string">"'blueviolet'"</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">msg: 'hi Vue !'</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">directives: &#123;</span></span><br><span class="line"><span class="undefined">    'color': function(el, colorStr) &#123;</span></span><br><span class="line"><span class="undefined">    el.style.color = colorStr.value</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h3><p><em>Vue.jså…è®¸ä½ è‡ªå®šä¹‰è¿‡æ»¤å™¨,å¯è¢«ç”¨äºä¸€äº›å¸¸è§çš„æ–‡æœ¬æ ¼å¼åŒ–,è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ : <code>åŒèŠ±æ‹¬å·æ’å€¼</code>å’Œ<code>v-bind</code>è¡¨è¾¾å¼ (åè€…ä» 2.1.0+ å¼€å§‹æ”¯æŒ). è¿‡æ»¤å™¨åº”è¯¥è¢«æ·»åŠ åœ¨JavaScriptè¡¨è¾¾å¼çš„å°¾éƒ¨,ç”±ç®¡é“ç¬¦ : <code>|</code> æŒ‡ç¤º,è¡¨è¾¾å¼çš„å€¼å°†ä½œä¸ºå½¢å‚ä¼ å…¥åˆ°<code>filter</code>ä¸­,ç¤ºä¾‹ä»£ç å¦‚ä¸‹ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;title | titleFilter1&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;title | titleFilter1 | titleFilter2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">title: 'Demo#%Program#%For#%Filter'</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">filters: &#123;</span></span><br><span class="line"><span class="undefined">titleFilter1(value) &#123;</span></span><br><span class="line"><span class="undefined">return value.replace(/#/g, ' ')</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">titleFilter2(value) &#123;</span></span><br><span class="line"><span class="undefined">return value.replace(/%/g, '')</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>é™¤åœ¨ç»„ä»¶ä¸­å®šä¹‰filterå¤–,Vueè¿˜å…è®¸åœ¨å¼€å‘è€…åœ¨å…¨å±€å®šä¹‰filter,ä¸é€‰é¡¹filterä¸åŒçš„æ˜¯,å…¨å±€filterå¯ä»¥åœ¨ä»»ä½•ç»„ä»¶å’Œå®ä¾‹ä¸­èµ·ä½œç”¨å“Ÿ,ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;title | titleFilter1&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;title | titleFilter1 | titleFilter2&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">Vue.filter('titleFilter1', value =&gt; &#123;</span></span><br><span class="line"><span class="undefined">return value.replace(/#/g, ' ')</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">Vue.filter('titleFilter2', value =&gt; &#123;</span></span><br><span class="line"><span class="undefined">return value.replace(/%/g, '')</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">title: 'Demo#%Program#%For#%Filter'</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>ç¨‹åºè¿è¡Œæ•ˆæœå¦‚ä¸‹ :</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/23/Vue-jsçš„è‡ªå®šä¹‰æŒ‡ä»¤ä¸è¿‡æ»¤å™¨/Vue-filter-demo.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h4 id="å…¨å±€è¿‡æ»¤å™¨"><a href="#å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="å…¨å±€è¿‡æ»¤å™¨"></a>å…¨å±€è¿‡æ»¤å™¨</h4><p><em>å®šä¹‰ä¸€ä¸ªå…¨å±€filter,ç”¨äºæ ¼å¼åŒ–æŒ‡å®šå­—ç¬¦,å…¶ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span>&#123;&#123;msg | msgFilter('Keep')&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">Vue.filter('msgFilter', function(msg, filterStr) &#123;</span></span><br><span class="line"><span class="undefined">return msg.replace(/Stay/g, filterStr) //ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å­—ç¬¦</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">msg: 'Stay hungry,Stay foolish ~'</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="ç§æœ‰è¿‡æ»¤å™¨"><a href="#ç§æœ‰è¿‡æ»¤å™¨" class="headerlink" title="ç§æœ‰è¿‡æ»¤å™¨"></a>ç§æœ‰è¿‡æ»¤å™¨</h4><p><em>å®šä¹‰ä¸€ä¸ªé€‰é¡¹filter,ç”¨äºæ ¼å¼åŒ–æŒ‡å®šå­—ç¬¦,å…¶ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span>&#123;&#123;msg | msgFilter('keep')&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">el: '#app',</span></span><br><span class="line"><span class="undefined">data: &#123;</span></span><br><span class="line"><span class="undefined">msg: 'Stay hungry,Stay foolish ~'</span></span><br><span class="line"><span class="undefined">&#125;,</span></span><br><span class="line"><span class="undefined">filters: &#123; </span></span><br><span class="line"><span class="undefined">msgFilter: function(msg, filterStr) &#123;</span></span><br><span class="line"><span class="undefined">return msg.replace(/Stay/g, filterStr)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Vueçš„è‡ªå®šä¹‰æŒ‡ä»¤åŠè¿‡æ»¤å™¨çš„ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Vueçš„è‡ªå®šä¹‰æŒ‡ä»¤åŠè¿‡æ»¤å™¨çš„ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Vueçš„è‡ªå®šä¹‰æŒ‡ä»¤åŠè¿‡æ»¤å™¨çš„ä½¿ç”¨&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Vueçš„è‡ªå®šä¹‰æŒ‡ä»¤åŠè¿‡æ»¤å™¨çš„
      
    
    </summary>
    
    
      <category term="Vue" scheme="http://yoursite.com/tags/Vue/"/>
    
  </entry>
  
</feed>
