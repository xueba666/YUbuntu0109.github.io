<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ¬¢è¿å‚è§‚å°ç°ç°çš„ç½‘ç«™å“Ÿ ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾ ~</title>
  
  <subtitle>My Personal blog website â€”â€” be founded on March 9, 2019</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-07-10T23:40:26.951Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>é»„å®‡è¾‰</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Javaçˆ¬è™«ä¹‹Jsoup</title>
    <link href="http://yoursite.com/2019/07/10/Java%E7%88%AC%E8%99%AB%E4%B9%8BJsoup/"/>
    <id>http://yoursite.com/2019/07/10/Javaçˆ¬è™«ä¹‹Jsoup/</id>
    <published>2019-07-10T10:55:14.000Z</published>
    <updated>2019-07-10T23:40:26.951Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Javaçˆ¬è™«ä¹‹Jsoup-Java-HTML-Parser"><a href="#å­¦ä¹ ç¬”è®°-Javaçˆ¬è™«ä¹‹Jsoup-Java-HTML-Parser" class="headerlink" title="å­¦ä¹ ç¬”è®° : Javaçˆ¬è™«ä¹‹Jsoup(Java HTML Parser)"></a>å­¦ä¹ ç¬”è®° : Javaçˆ¬è™«ä¹‹Jsoup(Java HTML Parser)</h2><p><em>jsoup is a Java library for working with real-world HTML. It provides a very convenient API for extracting and manipulating data, using the best of DOM, CSS, and jquery-like methods.</em></p><p><em>ğŸ‘ jsoup Cookbook : <a href="https://www.open-open.com/jsoup/" target="_blank" rel="noopener">https://www.open-open.com/jsoup/</a></em></p><h3 id="çˆ¬è™«å®ç°"><a href="#çˆ¬è™«å®ç°" class="headerlink" title="çˆ¬è™«å®ç°"></a>çˆ¬è™«å®ç°</h3><p><em>ä½¿ç”¨Jsoupè§£æä¸åŒæ•°æ®çš„æ–¹å¼,ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.crawler.Jsoup_Demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.jsoup.Jsoup;</span><br><span class="line"><span class="keyword">import</span> org.jsoup.nodes.Document;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: crawler_learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å­¦ä¹ ä½¿ç”¨Jsoup</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/8/2019-9:34 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsoupTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        urlTest();</span><br><span class="line">        stringTest();</span><br><span class="line">        fileTest();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 7/8/2019 è§£æURL:è·å–ç½‘é¡µtitleæ ‡ç­¾å†…å®¹</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">urlTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è§£æURLåœ°å€å¹¶è®¾ç½®è¯·æ±‚ä¿¡æ¯,è·å–Documentå¯¹è±¡</span></span><br><span class="line">        Document document = Jsoup.connect(<span class="string">"https://www.bilibili.com/"</span>)</span><br><span class="line">                .timeout(<span class="number">1000</span>)</span><br><span class="line">                .userAgent(<span class="string">"x-x-x-x-x-x"</span>)</span><br><span class="line">                .get();</span><br><span class="line"></span><br><span class="line">        System.out.println(document.title());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 7/9/2019 è§£æå­—ç¬¦ä¸²:è·å–å­—ç¬¦ä¸²ä¸­titleæ ‡ç­¾å†…å®¹</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">stringTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æ–‡ä»¶å·¥å…·ç±»è¯»å–æ–‡ä»¶,è·å–å­—ç¬¦ä¸²</span></span><br><span class="line">        String content = FileUtils.readFileToString(<span class="keyword">new</span> File(<span class="string">"C:/Users/Administrator/Desktop/html.html"</span>), <span class="string">"gbk"</span>);</span><br><span class="line">        <span class="comment">//è§£æå­—ç¬¦ä¸²</span></span><br><span class="line">        Document doc = Jsoup.parse(content);</span><br><span class="line">        System.out.println(doc.getElementsByTag(<span class="string">"title"</span>).first().text());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 7/9/2019 è§£ææ–‡ä»¶:è·å–æ–‡ä»¶ä¸­titleæ ‡ç­¾å†…å®¹</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fileTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//è§£ææ–‡ä»¶</span></span><br><span class="line">        Document doc = Jsoup.parse(<span class="keyword">new</span> File(<span class="string">"C:/Users/Administrator/Desktop/html.html"</span>), <span class="string">"gbk"</span>);</span><br><span class="line">        System.out.println(doc.title());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Jsoup-DOM"><a href="#Jsoup-DOM" class="headerlink" title="Jsoup DOM"></a>Jsoup DOM</h3><p><em>å­¦ä¹ ä½¿ç”¨Jsoup-DOMè·å–å…ƒç´ åŠå…¶ä¸­æ•°æ®,ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.crawler.Jsoup_DOM;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.jsoup.Jsoup;</span><br><span class="line"><span class="keyword">import</span> org.jsoup.nodes.Document;</span><br><span class="line"><span class="keyword">import</span> org.jsoup.nodes.Element;</span><br><span class="line"><span class="keyword">import</span> org.jsoup.select.Elements;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: crawler_learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å­¦ä¹ ä½¿ç”¨Jsoup-DOMè·å–å…ƒç´ åŠå…¶ä¸­æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/9/2019-8:18 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ElementTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">                è§£æurlå¹¶è®¾ç½®è¯·æ±‚ä¿¡æ¯,è·å–Documentå¯¹è±¡</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            Document doc = Jsoup.connect(<span class="string">"https://yubuntu0109.github.io/"</span>)</span><br><span class="line">                    .timeout(<span class="number">5000</span>)</span><br><span class="line">                    .userAgent(<span class="string">"x-x-x-x-x-x"</span>)</span><br><span class="line">                    .get();</span><br><span class="line"></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">                æ ¹æ®Documentå¯¹è±¡è·å–å…ƒç´ </span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="comment">//1:é€šè¿‡idè·å–å…ƒç´ :è·å–åšå®¢å¤´æ ‡é¢˜</span></span><br><span class="line">            Element element = doc.getElementById(<span class="string">"header"</span>);</span><br><span class="line">            System.out.println(element.text());</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2:é€šè¿‡tagè·å–å…ƒç´ :è·å–åšå®¢æ–‡ç« æ ‡é¢˜</span></span><br><span class="line">            Elements elements = doc.getElementsByTag(<span class="string">"h3"</span>);</span><br><span class="line">            <span class="keyword">for</span> (Element e : elements) &#123;</span><br><span class="line">                System.out.println(e.text());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//3:é€šè¿‡classè·å–å…ƒç´ :è·å–åšå®¢æ–‡ç« ç®€ä»‹</span></span><br><span class="line">            Elements elements2 = doc.getElementsByClass(<span class="string">"post-content"</span>);</span><br><span class="line">            <span class="keyword">for</span> (Element e : elements2) &#123;</span><br><span class="line">                System.out.println(e.text() + <span class="string">"\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//4:é€šè¿‡attributeè·å–å…ƒç´ :è·å–åšå®¢æ–‡ç« å‘å¸ƒæ—¶é—´</span></span><br><span class="line">            Elements elements3 = doc.getElementsByAttribute(<span class="string">"datetime"</span>);</span><br><span class="line">            <span class="keyword">for</span> (Element e : elements3) &#123;</span><br><span class="line">                System.out.println(e.text());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//4-2:é€šè¿‡å±æ€§ååŠ å±æ€§å€¼ç­›é€‰å…ƒç´ :è·å–åšå®¢æ–‡ç« æ ‡é¢˜</span></span><br><span class="line">            Elements elements4 = doc.getElementsByAttributeValue(<span class="string">"itemprop"</span>, <span class="string">"name"</span>);</span><br><span class="line">            <span class="keyword">for</span> (Element e : elements4) &#123;</span><br><span class="line">                System.out.println(e.text());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">                è·å–å…ƒç´ ä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            Element e = doc.getElementById(<span class="string">"header"</span>);</span><br><span class="line">            <span class="comment">//1:ä»å…ƒç´ ä¸­è·å–id</span></span><br><span class="line">            System.out.println(e.id());</span><br><span class="line">            <span class="comment">//2:ä»å…ƒç´ ä¸­è·å–æ–‡æœ¬å†…å®¹text</span></span><br><span class="line">            System.out.println(e.text());</span><br><span class="line">            <span class="comment">//3:ä»å…ƒç´ ä¸­è·å–className</span></span><br><span class="line">            System.out.println(e.className());</span><br><span class="line">            <span class="comment">//4:ä»å…ƒç´ ä¸­è·å–å±æ€§çš„å€¼attr</span></span><br><span class="line">            System.out.println(e.attr(<span class="string">"id"</span>));</span><br><span class="line">            <span class="comment">//5:ä»å…ƒç´ ä¸­è·å–æ‰€æœ‰å±æ€§attributes</span></span><br><span class="line">            System.out.println(e.attributes().toString());</span><br><span class="line">            <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Jsoup-Selector"><a href="#Jsoup-Selector" class="headerlink" title="Jsoup Selector"></a>Jsoup Selector</h3><p><em>å­¦ä¹ ä½¿ç”¨Jsoupé€‰æ‹©å™¨,ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹ :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.crawler.Jsoup_Selector;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.jsoup.Jsoup;</span><br><span class="line"><span class="keyword">import</span> org.jsoup.nodes.Document;</span><br><span class="line"><span class="keyword">import</span> org.jsoup.nodes.Element;</span><br><span class="line"><span class="keyword">import</span> org.jsoup.select.Elements;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: crawler_learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å­¦ä¹ ä½¿ç”¨Jsoupé€‰æ‹©å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/9/2019-10:29 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SelectorTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            è§£æurlå¹¶è®¾ç½®è¯·æ±‚ä¿¡æ¯,è·å–Documentå¯¹è±¡</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Document doc = Jsoup.connect(<span class="string">"https://yubuntu0109.github.io/"</span>)</span><br><span class="line">                .timeout(<span class="number">5000</span>)</span><br><span class="line">                .userAgent(<span class="string">"x-x-x-x-x-x"</span>)</span><br><span class="line">                .get();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            Jsoupé€‰æ‹©å™¨çš„ä½¿ç”¨æ–¹å¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//el#id : è·å–åšå®¢å¤´æ ‡é¢˜</span></span><br><span class="line">        System.out.println(doc.select(<span class="string">"header#header"</span>).first().text());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//el.class : è·å–åšå®¢çš„å¯¼èˆªæ ‡ç­¾</span></span><br><span class="line">        Elements elements = doc.select(<span class="string">"ul.nav"</span>);</span><br><span class="line">        <span class="keyword">for</span> (Element e : elements) &#123;</span><br><span class="line">            System.out.println(e.text());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//el[attr] : è·å–åšå®¢æ–‡ç« æ ‡é¢˜</span></span><br><span class="line">        Elements elements2 = doc.select(<span class="string">"h3[itemprop]"</span>);</span><br><span class="line">        <span class="keyword">for</span> (Element e : elements2) &#123;</span><br><span class="line">            System.out.println(e.text());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//.ancestor child : æŸ¥è¯¢æŸä¸ªå…ƒç´ çš„ä¸‹ä¸ªå­å…ƒç´ ,è·å–åšå®¢å¯¼èˆªæ ‡ç­¾</span></span><br><span class="line">        Elements elements3 = doc.select(<span class="string">".nav li"</span>);</span><br><span class="line">        <span class="keyword">for</span> (Element e : elements3) &#123;</span><br><span class="line">            System.out.println(e.text());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//parent &gt; child : æŸ¥è¯¢æŸä¸ªçˆ¶å…ƒç´ ä¸‹çš„ç›´æ¥å­å…ƒç´ ,è·å–åšå®¢æ–‡ç« é“¾æ¥çš„hrefå€¼</span></span><br><span class="line">        Elements elements4 = doc.select(<span class="string">".post-title &gt; a"</span>);</span><br><span class="line">        <span class="keyword">for</span> (Element e : elements4) &#123;</span><br><span class="line">            System.out.println(e.attr(<span class="string">"href"</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//parenet &gt; * : æŸ¥è¯¢æŸä¸ªçˆ¶å…ƒç´ ä¸‹æ‰€æœ‰ç›´æ¥å­å…ƒç´ ,è·å–åšå®¢æ–‡ç« æ ‡é¢˜</span></span><br><span class="line">        Elements elements5 = doc.select(<span class="string">".post-title &gt; *"</span>);</span><br><span class="line">        <span class="keyword">for</span> (Element e : elements5) &#123;</span><br><span class="line">            System.out.println(e.text());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Javaçˆ¬è™«ä¹‹Jsoup-Java-HTML-Parser&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Javaçˆ¬è™«ä¹‹Jsoup-Java-HTML-Parser&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Javaçˆ¬è™«ä¹‹Jsoup(Java
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Jsoup" scheme="http://yoursite.com/tags/Jsoup/"/>
    
  </entry>
  
  <entry>
    <title>Javaçˆ¬è™«ä¹‹HttpClient</title>
    <link href="http://yoursite.com/2019/07/10/Java%E7%88%AC%E8%99%AB%E4%B9%8BHttpClient/"/>
    <id>http://yoursite.com/2019/07/10/Javaçˆ¬è™«ä¹‹HttpClient/</id>
    <published>2019-07-10T10:54:55.000Z</published>
    <updated>2019-07-10T23:34:05.483Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Javaçˆ¬è™«ä¹‹HttpClient"><a href="#å­¦ä¹ ç¬”è®°-Javaçˆ¬è™«ä¹‹HttpClient" class="headerlink" title="å­¦ä¹ ç¬”è®° : Javaçˆ¬è™«ä¹‹HttpClient"></a>å­¦ä¹ ç¬”è®° : Javaçˆ¬è™«ä¹‹HttpClient</h2><p><em>ç®€ä»‹ : <code>HttpClient</code>æ˜¯Apache Jakarta Commonä¸‹çš„å­é¡¹ç›®,ç”¨äºæä¾›é«˜æ•ˆçš„,åŠŸèƒ½ä¸°å¯Œçš„æ”¯æŒHTTPåè®®çš„å®¢æˆ·ç¼–ç¨‹å·¥å…·åŒ…,å…¶ä¸»è¦åŠŸèƒ½å¦‚ä¸‹:</em></p><ol><li><em>å®ç°äº†æ‰€æœ‰HTTPçš„æ–¹æ³• : GET,POST,PUT,HEAD ..</em></li><li><em>æ”¯æŒè‡ªåŠ¨é‡å®šå‘</em></li><li><em>æ”¯æŒHTTPSåè®®</em></li><li><em>æ”¯æŒä»£ç†æœåŠ¡å™¨</em></li></ol><h3 id="å®ç°çˆ¬è™«"><a href="#å®ç°çˆ¬è™«" class="headerlink" title="å®ç°çˆ¬è™«"></a>å®ç°çˆ¬è™«</h3><p><em>ä¼ ç»Ÿå®ç° : çˆ¬å–é™æ€ç½‘é¡µ</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.crawler.HttpClient_Demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: crawler_learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: ä¸‹è½½ç½‘é¡µçš„åŸºæœ¬æ–¹æ³•:ä½¿ç”¨java.net.URL</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/8/2019-11:16 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BasicCrawler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        URL pageURL = <span class="keyword">new</span> URL(<span class="string">"https://yubuntu0109.github.io/"</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ•°æ®æµ</span></span><br><span class="line">        BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(pageURL.openStream(), StandardCharsets.UTF_8));</span><br><span class="line">        <span class="comment">//è·å–ç½‘é¡µå†…å®¹</span></span><br><span class="line">        String line;</span><br><span class="line">        StringBuilder pageBuffer = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            pageBuffer.append(line);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é‡Šæ”¾èµ„æº</span></span><br><span class="line">        reader.close();</span><br><span class="line">        System.out.println(pageBuffer.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>HttpClientå®ç° : çˆ¬å–é™æ€ç½‘é¡µ</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.crawler.HttpClient_Demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: crawler_learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: ä¸‹è½½ç½‘é¡µçš„åŸºæœ¬æ–¹æ³•:ä½¿ç”¨HttpClient</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/2/2019-10:42 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpClientCrawler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŒ‡å®šå¾…çˆ¬å–çš„ç½‘é¡µé“¾æ¥å¹¶è®¾ç½®Headerä¿¡æ¯</span></span><br><span class="line">        HttpGet httpGet = <span class="keyword">new</span> HttpGet(<span class="string">"https://www.bilibili.com/"</span>);</span><br><span class="line">        httpGet.setHeader(<span class="string">"User-Agent"</span>, <span class="string">"xxxxxx"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºHttpClientå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">try</span> (CloseableHttpClient httpClient = HttpClients.createDefault()) &#123;</span><br><span class="line">            <span class="comment">//å‘èµ·è¯·æ±‚,è·å–å“åº”</span></span><br><span class="line">            <span class="keyword">try</span> (CloseableHttpResponse response = httpClient.execute(httpGet)) &#123;</span><br><span class="line">                <span class="comment">//è§£æå“åº”,è·å–æ•°æ®</span></span><br><span class="line">                <span class="keyword">if</span> (response.getStatusLine().getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                    HttpEntity httpEntity = response.getEntity(); <span class="comment">//è·å–å“åº”ä½“</span></span><br><span class="line">                    String content = EntityUtils.toString(httpEntity, <span class="string">"utf-8"</span>);<span class="comment">//è·å–é™æ€é¡µé¢</span></span><br><span class="line"></span><br><span class="line">                    System.out.println(content);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="GETè¯·æ±‚"><a href="#GETè¯·æ±‚" class="headerlink" title="GETè¯·æ±‚"></a>GETè¯·æ±‚</h3><p><em>æ— å‚GETè¯·æ±‚ : çˆ¬å–Bç«™é™æ€ç½‘é¡µ</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.crawler.HttpClient_Get;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: crawler_learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å­¦ä¹ ä½¿ç”¨æ— å‚HttpGet():çˆ¬å–Bç«™é™æ€ç½‘é¡µ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/8/2019-12:26 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æŒ‡å®šå¾…çˆ¬å–ç½‘é¡µçš„é“¾æ¥å¹¶è®¾ç½®Headerä¿¡æ¯</span></span><br><span class="line">        HttpGet httpGet = <span class="keyword">new</span> HttpGet(<span class="string">"https://www.bilibili.com/"</span>);</span><br><span class="line">        httpGet.setHeader(<span class="string">"User-Agent"</span>, <span class="string">"x-x-x-x-x-x"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºHttpClientå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">try</span> (CloseableHttpClient httpClient = HttpClients.createDefault()) &#123;</span><br><span class="line">            <span class="comment">//å‘èµ·è¯·æ±‚,è·å–å“åº”</span></span><br><span class="line">            <span class="keyword">try</span> (CloseableHttpResponse response = httpClient.execute(httpGet)) &#123;</span><br><span class="line">                <span class="comment">//è§£æå“åº”,è·å–æ•°æ®</span></span><br><span class="line">                <span class="keyword">if</span> (response.getStatusLine().getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                    HttpEntity httpEntity = response.getEntity(); <span class="comment">//è·å–å“åº”ä½“</span></span><br><span class="line">                    String content = EntityUtils.toString(httpEntity, <span class="string">"utf-8"</span>);<span class="comment">//è·å–é™æ€é¡µé¢</span></span><br><span class="line">                    System.out.println(content);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>æœ‰å‚GETè¯·æ±‚ : çˆ¬å–Bç«™ä¸­æœç´¢å…³é”®å­—ä¸ºjsoupçš„ç½‘é¡µå†…å®¹</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.crawler.HttpClient_Get;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.utils.URIBuilder;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URISyntaxException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: crawler_learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å­¦ä¹ ä½¿ç”¨æœ‰å‚HttpGet(URI uri):çˆ¬å–Bç«™ä¸­æœç´¢å…³é”®å­—ä¸ºjsoupçš„ç½‘é¡µå†…å®¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/8/2019-1:12 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetParamTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> URISyntaxException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®HttpGetå‚æ•°</span></span><br><span class="line">        URIBuilder uriBuilder = <span class="keyword">new</span> URIBuilder(<span class="string">"https://search.bilibili.com/all"</span>);</span><br><span class="line">        uriBuilder.setParameter(<span class="string">"keyword"</span>, <span class="string">"jsoup"</span>);</span><br><span class="line">        <span class="comment">//æŒ‡å®šå¾…çˆ¬å–çš„ç½‘é¡µé“¾æ¥å¹¶è®¾ç½®Headerä¿¡æ¯</span></span><br><span class="line">        HttpGet httpGet = <span class="keyword">new</span> HttpGet(uriBuilder.build());</span><br><span class="line">        httpGet.setHeader(<span class="string">"User-Agent"</span>, <span class="string">"x-x-x-x-x-x"</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºHttpClientå¯¹è±¡</span></span><br><span class="line">        CloseableHttpClient httpClient = HttpClients.createDefault();</span><br><span class="line">        <span class="comment">//å‘èµ·è¯·æ±‚,è·å–å“åº”</span></span><br><span class="line">        CloseableHttpResponse response = httpClient.execute(httpGet);</span><br><span class="line">        <span class="comment">//è§£æå“åº”,è·å–æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> (response.getStatusLine().getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">            HttpEntity httpEntity = response.getEntity(); <span class="comment">//è·å–å“åº”ä½“</span></span><br><span class="line">            String content = EntityUtils.toString(httpEntity, <span class="string">"utf-8"</span>);<span class="comment">//è·å–é™æ€é¡µé¢</span></span><br><span class="line">            System.out.println(content);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é‡Šæ”¾èµ„æº</span></span><br><span class="line">        response.close();</span><br><span class="line">        httpClient.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="POSTè¯·æ±‚"><a href="#POSTè¯·æ±‚" class="headerlink" title="POSTè¯·æ±‚"></a>POSTè¯·æ±‚</h3><p><em>æ— å‚POSTè¯·æ±‚ : çˆ¬å–CSDNé™æ€ç½‘é¡µ</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.crawler.HttpClient_Post;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: crawler_learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å­¦ä¹ ä½¿ç”¨æ— å‚HttpPost():çˆ¬å–CSDNé™æ€ç½‘é¡µ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/8/2019-12:26 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PostTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŒ‡å®šå¾…çˆ¬å–çš„ç½‘é¡µå¹¶è®¾ç½®Headerä¿¡æ¯</span></span><br><span class="line">        HttpPost httpPost = <span class="keyword">new</span> HttpPost(<span class="string">"https://www.csdn.net/"</span>);</span><br><span class="line">        httpPost.setHeader(<span class="string">"User-Agent"</span>, <span class="string">"x-x-x-x-x-x"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºHttpClientå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">try</span> (CloseableHttpClient httpClient = HttpClients.createDefault()) &#123;</span><br><span class="line">            <span class="comment">//å‘èµ·è¯·æ±‚,è·å–å“åº”</span></span><br><span class="line">            <span class="keyword">try</span> (CloseableHttpResponse response = httpClient.execute(httpPost)) &#123;</span><br><span class="line">                <span class="comment">//è§£æå“åº”,è·å–æ•°æ®</span></span><br><span class="line">                <span class="keyword">if</span> (response.getStatusLine().getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                    HttpEntity httpEntity = response.getEntity(); <span class="comment">//è·å–å“åº”ä½“</span></span><br><span class="line">                    String content = EntityUtils.toString(httpEntity, <span class="string">"utf-8"</span>);<span class="comment">//è·å–é™æ€é¡µé¢</span></span><br><span class="line">                    System.out.println(content);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>æœ‰å‚POSTè¯·æ±‚ : çˆ¬å–Bç«™ä¸­æœç´¢å…³é”®å­—ä¸ºjsoupçš„ç½‘é¡µå†…å®¹(æ³¨:å…¶å¹¶ä¸æ”¯æŒPOST,æ—¢åªåšæ¼”ç¤º)</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.crawler.HttpClient_Post;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.NameValuePair;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.entity.UrlEncodedFormEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.message.BasicNameValuePair;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: crawler_learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å­¦ä¹ ä½¿ç”¨æœ‰å‚HttpPost(String uri):çˆ¬å–Bç«™ä¸­æœç´¢å…³é”®å­—ä¸ºjsoupçš„ç½‘é¡µå†…å®¹(æ³¨:å…¶å¹¶ä¸æ”¯æŒPOST,æ—¢åªåšæ¼”ç¤º)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/8/2019-1:12 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PostParamTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŒ‡å®šå¾…çˆ¬å–çš„ç½‘é¡µé“¾æ¥</span></span><br><span class="line">        HttpPost httpPost = <span class="keyword">new</span> HttpPost(<span class="string">"https://search.bilibili.com/all"</span>);</span><br><span class="line">        <span class="comment">//å°è£…è¡¨å•ä¸­çš„å‚æ•°</span></span><br><span class="line">        List&lt;NameValuePair&gt; params = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        params.add(<span class="keyword">new</span> BasicNameValuePair(<span class="string">"keyword"</span>, <span class="string">"jsoup"</span>));<span class="comment">//è®¾ç½®è¯·æ±‚å‚æ•°</span></span><br><span class="line">        UrlEncodedFormEntity formEntity = <span class="keyword">new</span> UrlEncodedFormEntity(params, <span class="string">"utf-8"</span>);<span class="comment">//åˆ›å»ºè¡¨å•ä¸­çš„Entityå¯¹è±¡</span></span><br><span class="line">        httpPost.setEntity(formEntity);<span class="comment">//å°†è¡¨å•çš„Entityå¯¹è±¡åˆ°Postè¯·æ±‚ä¸­</span></span><br><span class="line">        httpPost.setHeader(<span class="string">"User-Agent"</span>, <span class="string">"x-x-x-x-x-x"</span>);<span class="comment">//è®¾ç½®Headerä¿¡æ¯</span></span><br><span class="line">        <span class="comment">//åˆ›å»ºHttpClientå¯¹è±¡</span></span><br><span class="line">        CloseableHttpClient httpClient = HttpClients.createDefault();</span><br><span class="line">        <span class="comment">//å‘èµ·è¯·æ±‚,è¿”å›å“åº”</span></span><br><span class="line">        CloseableHttpResponse response = httpClient.execute(httpPost);</span><br><span class="line">        <span class="comment">//è§£æå“åº”,è·å–æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> (response.getStatusLine().getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">            HttpEntity httpEntity = response.getEntity(); <span class="comment">//è·å–å“åº”ä½“</span></span><br><span class="line">            String content = EntityUtils.toString(httpEntity, <span class="string">"utf-8"</span>);<span class="comment">//è·å–é™æ€é¡µé¢</span></span><br><span class="line">            System.out.println(content);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é‡Šæ”¾èµ„æº</span></span><br><span class="line">        response.close();</span><br><span class="line">        httpClient.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="HttpClientè¿æ¥æ± "><a href="#HttpClientè¿æ¥æ± " class="headerlink" title="HttpClientè¿æ¥æ± "></a>HttpClientè¿æ¥æ± </h3><p><em>å­¦ä¹ ä½¿ç”¨HttpClientè¿æ¥æ± </em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.crawler.HttpClient_ConnPool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.conn.PoolingHttpClientConnectionManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: crawler_learning</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å­¦ä¹ ä½¿ç”¨HttpClientè¿æ¥æ± </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/8/2019-3:45 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PoolTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¿æ¥æ± ç®¡ç†å™¨</span></span><br><span class="line">        PoolingHttpClientConnectionManager phccm = <span class="keyword">new</span> PoolingHttpClientConnectionManager();</span><br><span class="line">        phccm.setMaxTotal(<span class="number">100</span>);<span class="comment">//æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line">        phccm.setDefaultMaxPerRoute(<span class="number">10</span>);<span class="comment">//æ¯ä¸ªä¸»æœºçš„æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line"></span><br><span class="line">        doGet(phccm);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: çˆ¬å–Bç«™é™æ€ç½‘é¡µ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: phccm</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-07-08 4:15 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(PoolingHttpClientConnectionManager phccm)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æŒ‡å®šå¾…çˆ¬å–ç½‘é¡µçš„url</span></span><br><span class="line">        HttpGet httpGet = <span class="keyword">new</span> HttpGet(<span class="string">"https://www.bilibili.com/"</span>);</span><br><span class="line">        httpGet.setHeader(<span class="string">"User-Agent"</span>, <span class="string">"x-x-x-x-x-x"</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºHttpClientå¯¹è±¡:æ¯æ¬¡ä»è¿æ¥æ± ä¸­è·å–HttpClientå¯¹è±¡</span></span><br><span class="line">        CloseableHttpClient httpClient = HttpClients.custom().setConnectionManager(phccm).build();</span><br><span class="line">        <span class="comment">//å‘èµ·è¯·æ±‚,è·å–å“åº”</span></span><br><span class="line">        <span class="keyword">try</span> (CloseableHttpResponse response = httpClient.execute(httpGet)) &#123;</span><br><span class="line">            <span class="comment">//è§£æå“åº”,è·å–æ•°æ®</span></span><br><span class="line">            <span class="keyword">if</span> (response.getStatusLine().getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                HttpEntity httpEntity = response.getEntity(); <span class="comment">//è·å–å“åº”ä½“</span></span><br><span class="line">                String content = EntityUtils.toString(httpEntity, <span class="string">"utf-8"</span>);<span class="comment">//è·å–é™æ€é¡µé¢</span></span><br><span class="line">                System.out.println(content);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//httpClient.close(); //ç”±PoolingHttpClientConnectionManagerç®¡ç†</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Javaçˆ¬è™«ä¹‹HttpClient&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Javaçˆ¬è™«ä¹‹HttpClient&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Javaçˆ¬è™«ä¹‹HttpClient&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Javaçˆ¬è™«ä¹‹Http
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="HttpClient" scheme="http://yoursite.com/tags/HttpClient/"/>
    
  </entry>
  
  <entry>
    <title>Spring-Bootæ‹¥æŠ±MyBatisåŠRedis ~</title>
    <link href="http://yoursite.com/2019/07/01/Spring-Boot%E6%8B%A5%E6%8A%B1MyBatis%E5%8F%8ARedis/"/>
    <id>http://yoursite.com/2019/07/01/Spring-Bootæ‹¥æŠ±MyBatisåŠRedis/</id>
    <published>2019-07-01T02:26:26.000Z</published>
    <updated>2019-07-02T11:46:51.051Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Spring-Bootæ‹¥æŠ±MyBatisåŠRedis"><a href="#å­¦ä¹ ç¬”è®°-Spring-Bootæ‹¥æŠ±MyBatisåŠRedis" class="headerlink" title="å­¦ä¹ ç¬”è®° : Spring Bootæ‹¥æŠ±MyBatisåŠRedis ~"></a>å­¦ä¹ ç¬”è®° : Spring Bootæ‹¥æŠ±MyBatisåŠRedis ~</h2><h3 id="Spring-Booté›†æˆMyBatis"><a href="#Spring-Booté›†æˆMyBatis" class="headerlink" title="Spring Booté›†æˆMyBatis"></a>Spring Booté›†æˆMyBatis</h3><p><em>ä¸‹é¢é€šè¿‡ä½¿ç”¨<code>Spring Boot</code>å¼€å‘ä¸€ä¸ªåŸºäº<code>SSM</code>çš„æ¡†æ¶çš„åº”ç”¨,å¹¶é€šè¿‡ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢ä¸ºä¾‹,è®°å½•å¦‚ä½•åœ¨Spring Bootä¸­ä½¿ç”¨<code>MyBatis</code> ~</em></p><ol><li><p><em>tb_user.sql : ç”¨æˆ·ä¿¡æ¯æ•°æ®è¡¨</em></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_user</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">id</span>     <span class="built_in">int</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">    <span class="keyword">name</span>   <span class="built_in">varchar</span>(<span class="number">15</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    gender <span class="built_in">char</span>        <span class="literal">null</span>,</span><br><span class="line">    email  <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="literal">null</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p><em>pom.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>pers.huangyuhui<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>springboot_redis<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>11<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Web --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- MyBatis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Redis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- MySQL --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- mvn package --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>SpringbootRedisApplication.java : Spring Bootå¯åŠ¨ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.redis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootRedisApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringbootRedisApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>application.properties : Spring Booté…ç½®æ–‡ä»¶</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#JDBC-Connection Configuration Information</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br><span class="line">spring.datasource.url=jdbc:mysql://localhost:3306/test?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true</span><br><span class="line">spring.datasource.username=xxxxxx</span><br><span class="line">spring.datasource.password=xxxxxx</span><br><span class="line">#Logging Configuration Information</span><br><span class="line">logging.level.pers.huangyuhui.redis=debug</span><br></pre></td></tr></table></figure></li><li><p><em>User.java : ç”¨æˆ·ä¿¡æ¯å®ä½“ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.redis.bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot_redis</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/1/2019-7:08 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getter and setter</span></span><br><span class="line">    Â·Â·Â·Â·Â·Â·</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>UserMapper.java : æ“æ§ç”¨æˆ·æ•°æ®è¡¨ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.redis.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.redis.bean.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot_redis</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: Daoå±‚-æ“æ§ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/1/2019-7:12 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 7/1/2019 æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from tb_user"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">selectAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 7/1/2019 æ ¹æ®idåˆ é™¤æŒ‡å®šç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@Delete</span>(<span class="string">"Delete from tb_user where id = #&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>UserService.java : æ“æ§ç”¨æˆ·ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.redis.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.redis.bean.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot_redis</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: Serviceå±‚-æ“æ§ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/1/2019-7:25 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 7/1/2019 è·å–æˆ–æœ‰ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// <span class="doctag">TODO:</span> 7/1/2019 æ ¹æ®idåˆ é™¤æŒ‡å®šç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>UserServiceImpl.java : UserService.javaçš„å®ç°ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.redis.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.redis.bean.User;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.redis.dao.UserMapper;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.redis.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot_redis</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: UserServiceçš„å®ç°ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/1/2019-7:27 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ³¨å…¥Mapperå¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.selectAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        userMapper.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ol start="9"><li><p><em>UserController.java : ç”¨æˆ·ä¿¡æ¯æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.redis.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.redis.bean.User;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.redis.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springboot_redis</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: ç”¨æˆ·æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 7/1/2019-7:28 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ³¨å…¥ä¸šåŠ¡å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: è·å–æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-07-01 8:16 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.util.List&lt;pers.huangyuhui.redis.bean.User&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/getUserList"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> userService.findAll(); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: åˆ é™¤æŒ‡å®šidçš„å¥½å‹ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-07-01 12:51 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/deleteUser/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(@PathVariable Integer id)</span> </span>&#123; userService.delete(id); &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>userList.html : ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨é¡µé¢ (å°†EasyUIæ¡†æ¶çš„èµ„æºæ–‡ä»¶æ‹·è´åˆ°src/main/resourceä¸‹çš„staticæ–‡ä»¶å¤¹ä¸‹,å¹¶åœ¨staticæ–‡ä»¶å¤¹ä¸­åˆ›å»º<code>userList.html</code>é¡µé¢æ–‡ä»¶)</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨é¡µé¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- CSS --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"easyui/themes/metro/easyui.css"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- JS --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"easyui/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"easyui/jquery.easyui.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"easyui/themes/locale/easyui-lang-zh_CN.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        $(function () &#123;</span></span><br><span class="line"><span class="undefined">            $('#graid').datagrid(&#123;</span></span><br><span class="line"><span class="undefined">                url: 'user/getUserList',</span></span><br><span class="line"><span class="undefined">                fit: true,</span></span><br><span class="line"><span class="undefined">                columns: [[</span></span><br><span class="line"><span class="undefined">                    &#123;field: 'id', title: 'ç¼–å·', width: 100&#125;,</span></span><br><span class="line"><span class="undefined">                    &#123;field: 'name', title: 'å§“å', width: 100&#125;,</span></span><br><span class="line"><span class="undefined">                    &#123;field: 'gender', title: 'æ€§åˆ«', width: 100&#125;,</span></span><br><span class="line"><span class="undefined">                    &#123;field: 'email', title: 'é‚®ç®±', width: 200&#125;</span></span><br><span class="line"><span class="undefined">                ]]</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"graid"</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>å¯åŠ¨Spring Booté¡¹ç›®,åœ¨æµè§ˆå™¨ä¸­è¾“å…¥è®¿é—®åœ°å€ : <code>http://localhost:8080/userList.html</code>å,æ˜¾ç¤ºæ•ˆæœå‚è€ƒä¸‹å›¾ :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/07/01/Spring-Bootæ‹¥æŠ±MyBatisåŠRedis/UserListView.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></li></ol><p><em>ç´§æ¥ç€åˆ·æ–°é¡µé¢ä¸‰æ¬¡,å…¶æ§åˆ¶å°æ‰“å°çš„æ—¥å¿—ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤º,å‘ç°æ¯åˆ·æ–°ä¸€æ¬¡é¡µé¢éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢æ•°æ®åº“æ“ä½œ,<code>ä½†å¦‚æœå°†åˆ—è¡¨æ•°æ®ç¼“å†²åˆ°Rediså,ä¼šå‘ç°æ§åˆ¶å°åªä¼šå‡ºç°ä¸€æ¬¡æŸ¥è¯¢æ•°æ®åº“çš„æ—¥å¿—ä¿¡æ¯å“Ÿ !</code></em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">2019-07-01 11:41:49.868 DEBUG 7844 --- [nio-8080-exec-3] p.h.redis.dao.UserMapper.selectAll       : ==&gt;  Preparing: select * from tb_user </span><br><span class="line">2019-07-01 11:41:49.869 DEBUG 7844 --- [nio-8080-exec-3] p.h.redis.dao.UserMapper.selectAll       : ==&gt; Parameters: </span><br><span class="line">2019-07-01 11:41:49.871 DEBUG 7844 --- [nio-8080-exec-3] p.h.redis.dao.UserMapper.selectAll       : &lt;==      Total: 5</span><br><span class="line"></span><br><span class="line">2019-07-01 11:41:54.250 DEBUG 7844 --- [nio-8080-exec-5] p.h.redis.dao.UserMapper.selectAll       : ==&gt;  Preparing: select * from tb_user </span><br><span class="line">2019-07-01 11:41:54.250 DEBUG 7844 --- [nio-8080-exec-5] p.h.redis.dao.UserMapper.selectAll       : ==&gt; Parameters: </span><br><span class="line">2019-07-01 11:41:54.253 DEBUG 7844 --- [nio-8080-exec-5] p.h.redis.dao.UserMapper.selectAll       : &lt;==      Total: 5</span><br><span class="line"></span><br><span class="line">2019-07-01 11:41:57.251 DEBUG 7844 --- [nio-8080-exec-7] p.h.redis.dao.UserMapper.selectAll       : ==&gt;  Preparing: select * from tb_user </span><br><span class="line">2019-07-01 11:41:57.251 DEBUG 7844 --- [nio-8080-exec-7] p.h.redis.dao.UserMapper.selectAll       : ==&gt; Parameters: </span><br><span class="line">2019-07-01 11:41:57.256 DEBUG 7844 --- [nio-8080-exec-7] p.h.redis.dao.UserMapper.selectAll       : &lt;==      Total: 5</span><br><span class="line"></span><br><span class="line">Process finished with exit code -1</span><br></pre></td></tr></table></figure></p><h3 id="Spring-Booté›†æˆRedis"><a href="#Spring-Booté›†æˆRedis" class="headerlink" title="Spring Booté›†æˆRedis"></a>Spring Booté›†æˆRedis</h3><p><em>Redisæ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„,éµå®ˆBSDåè®®çš„,å†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨,å®ƒæ—¢å¯ä»¥ä½œä¸º<code>æ•°æ®åº“</code>,ä¹Ÿå¯ä»¥ä½œä¸º<code>ç¼“å­˜</code>å’Œ<code>æ¶ˆæ¯ä»£ç†</code>. é€šå¸¸åœ¨ä¼ä¸šä¸­å¸¸å°†å…¶ä½œä¸ºç¼“å­˜ä½¿ç”¨å“Ÿ~ æ¥ä¸‹æ¥åœ¨Spring Booté›†æˆMyBatisç¤ºä¾‹ç¨‹åºåŸºç¡€ä¸Šå°†åˆ—è¡¨æ•°æ®ç¼“å­˜åˆ°Redisä¸­,è¯¦ç»†æ­¥éª¤å¦‚ä¸‹ :</em></p><ol><li><p><em>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ Spring Bootæ”¯æŒRedisçš„ä¾èµ–</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>åœ¨<code>SpringbootRedisApplication.java</code>ä¸­æ·»åŠ <code>@EnableCaching</code>æ³¨è§£æ¥å¼€å¯ç¼“å­˜</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootRedisApplication</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>åœ¨ä¸šåŠ¡é€»è¾‘ç±»<code>UserServiceImpl.java</code>çš„æ–¹æ³•ä¸Šæ·»åŠ <code>@Cacheable</code>æ³¨è§£æ¥æ”¯æŒRedisç¼“å­˜</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Cacheable</span>(value = <span class="string">"UserCatch"</span>, key = <span class="string">"'user.selectAll'"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> userMapper.selectAll();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ä¸ºä¾¿äºæ•°æ®çš„ä¼ è¾“,å°†å®ä½“ç±»<code>User.java</code>å®ç°åºåˆ—åŒ–æ¥å£Serializable</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>åœ¨<code>application.properties</code>ä¸­æŒ‡å®š<code>Redis</code>ç¼“å­˜ä¸»æœºåœ°å€åŠç«¯å£å·. æˆ‘ä½¿ç”¨çš„æ˜¯Windowsçš„Rediså‘è¡Œç‰ˆå“Ÿ,å…¶å­¦ä¹ ç¬”è®° : <a href="https://yubuntu0109.github.io/2019/06/25/Hi-Redis/" target="_blank" rel="noopener">https://yubuntu0109.github.io/2019/06/25/Hi-Redis/</a></em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#Redis Configuration Infromation</span><br><span class="line">spring.redis.host=localhost</span><br><span class="line">spring.redis.port=6379</span><br></pre></td></tr></table></figure></li><li><p><em>å¯åŠ¨RedisæœåŠ¡,å¹¶å¯åŠ¨Spring Booté¡¹ç›®,åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥è®¿é—®åœ°å€ : <code>http://localhost:8080/userList.html</code>å,ä¸æ–­åˆ·æ–°é¡µé¢,å…¶æ§åˆ¶å°æ‰“å°çš„æ—¥å¿—ä¿¡æ¯å¦‚ä¸‹,ç»“è®º : åœ¨æ²¡æœ‰ä½¿ç”¨Redisç¼“å­˜ä¹‹å‰,æ¯åˆ·æ–°ä¸€æ¬¡é¡µé¢,éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢æ•°æ®åº“çš„æ“ä½œ,æ·»åŠ ç¼“å­˜å,ä¼šå‘ç°æ—¥å¿—ä¿¡æ¯ä¸­åªå‡ºç°äº†ä¸€æ¬¡æŸ¥è¯¢è¯­å¥,è¿™ä¹Ÿå°±è¯´æ˜æ‰€é…ç½®çš„Redisç¼“å­˜å·²ç»ç”Ÿæ•ˆå•¦ ~</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">2019-07-01 12:43:06.945  INFO 1984 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &apos;dispatcherServlet&apos;</span><br><span class="line"></span><br><span class="line">2019-07-01 12:43:06.946  INFO 1984 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &apos;dispatcherServlet&apos;</span><br><span class="line"></span><br><span class="line">2019-07-01 12:43:06.951  INFO 1984 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms</span><br><span class="line"></span><br><span class="line">2019-07-01 12:43:07.218  INFO 1984 --- [nio-8080-exec-7] io.lettuce.core.EpollProvider            : Starting without optional epoll library</span><br><span class="line"></span><br><span class="line">2019-07-01 12:43:07.218  INFO 1984 --- [nio-8080-exec-7] io.lettuce.core.KqueueProvider           : Starting without optional kqueue library</span><br><span class="line"></span><br><span class="line">2019-07-01 12:43:07.701  INFO 1984 --- [nio-8080-exec-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...</span><br><span class="line">2019-07-01 12:43:07.791  INFO 1984 --- [nio-8080-exec-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.</span><br><span class="line"></span><br><span class="line">2019-07-01 12:43:07.805 DEBUG 1984 --- [nio-8080-exec-7] p.h.redis.dao.UserMapper.selectAll       : ==&gt;  Preparing: select * from tb_user </span><br><span class="line">2019-07-01 12:43:07.815 DEBUG 1984 --- [nio-8080-exec-7] p.h.redis.dao.UserMapper.selectAll       : ==&gt; Parameters: </span><br><span class="line">2019-07-01 12:43:07.836 DEBUG 1984 --- [nio-8080-exec-7] p.h.redis.dao.UserMapper.selectAll       : &lt;==      Total: 7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Process finished with exit code -1</span><br></pre></td></tr></table></figure></li></ol><h4 id="æ¸…é™¤Redisç¼“å­˜"><a href="#æ¸…é™¤Redisç¼“å­˜" class="headerlink" title="æ¸…é™¤Redisç¼“å­˜"></a>æ¸…é™¤Redisç¼“å­˜</h4><p><em>å½“æ‰§è¡Œæ·»åŠ ,æ›´æ–°å’Œåˆ é™¤æ“ä½œå,æ•°æ®åº“ä¸­çš„æ•°æ®ä¼šå‘ç”Ÿå˜åŒ–,ç»§è€ŒRedisç¼“å­˜ä¸­çš„æ•°æ®åŒæ ·ä¹Ÿéœ€è¦è¿›è¡Œç›¸åº”çš„å˜åŒ–,ä¸ºäº†ä¿è¯Redisç¼“å­˜ä¸­çš„æ•°æ®ä¸æ•°æ®åº“ä¸­çš„ä¸€è‡´,é€šå¸¸éœ€è¦åœ¨æ‰§è¡Œ<code>æ·»åŠ </code>,<code>æ›´æ–°</code>å’Œ<code>åˆ é™¤</code>æ“ä½œä¹‹å‰æ¸…é™¤ç¼“å­˜,ç„¶åå†ä¸‹ä¸€æ¬¡æ‰§è¡ŒæŸ¥è¯¢æ“ä½œæ—¶,å°†æ–°çš„æ•°æ®å­˜å‚¨åˆ°Redisç¼“å­˜ä¸­ .</em></p><p><em>è‹¥è¦å®ç°æ¸…é™¤ç¼“å­˜çš„åŠŸèƒ½,åªéœ€åœ¨ç›¸åº”çš„æ–¹æ³•ä¸­ä½¿ç”¨<code>@CacheEvict</code>æ³¨è§£å³å¯,ä¸‹é¢ä»¥æ¡ˆä¾‹ç¨‹åºä¸­çš„åˆ é™¤ç”¨æˆ·åŠŸèƒ½ä¸ºä¾‹,åœ¨ç”¨æˆ·ä¸šåŠ¡é€»è¾‘ç±»çš„<code>deleteUser()</code>æ–¹æ³•ä¸Šæ·»åŠ <code>@CacheEvict</code>æ³¨è§£ :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@CacheEvict</span>(value = <span class="string">"UserCatch"</span>, key = <span class="string">"'user.selectAll'"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">    userMapper.deleteById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><em>é‡å¯Spring Booté¡¹ç›®,åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥è®¿é—®åœ°å€ : <code>http://localhost:8080/user/deleteUser/5</code>, <code>../6</code> , <code>../7</code>åˆ é™¤idä¸º5,6,7çš„ç”¨æˆ·ä¿¡æ¯åå†æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ä¿¡æ¯ : <code>http://localhost:8080/userList.html</code>,å…¶æ§åˆ¶å°æ‰“å°çš„æ—¥å¿—ä¿¡æ¯å¦‚ä¸‹ :</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">2019-07-01 18:13:45.143 DEBUG 14764 --- [nio-8080-exec-1] p.h.redis.dao.UserMapper.deleteById      : ==&gt;  Preparing: Delete from tb_user where id = ? </span><br><span class="line">2019-07-01 18:13:45.160 DEBUG 14764 --- [nio-8080-exec-1] p.h.redis.dao.UserMapper.deleteById      : ==&gt; Parameters: 5(Integer)</span><br><span class="line">2019-07-01 18:13:45.162 DEBUG 14764 --- [nio-8080-exec-1] p.h.redis.dao.UserMapper.deleteById      : &lt;==    Updates: 1</span><br><span class="line"></span><br><span class="line">2019-07-01 18:13:45.331  INFO 14764 --- [nio-8080-exec-1] io.lettuce.core.EpollProvider            : Starting without optional epoll library</span><br><span class="line">2019-07-01 18:13:45.332  INFO 14764 --- [nio-8080-exec-1] io.lettuce.core.KqueueProvider           : Starting without optional kqueue library</span><br><span class="line"></span><br><span class="line">2019-07-01 18:15:16.033 DEBUG 14764 --- [nio-8080-exec-4] p.h.redis.dao.UserMapper.deleteById      : ==&gt;  Preparing: Delete from tb_user where id = ? </span><br><span class="line">2019-07-01 18:15:16.033 DEBUG 14764 --- [nio-8080-exec-4] p.h.redis.dao.UserMapper.deleteById      : ==&gt; Parameters: 6(Integer)</span><br><span class="line">2019-07-01 18:15:16.034 DEBUG 14764 --- [nio-8080-exec-4] p.h.redis.dao.UserMapper.deleteById      : &lt;==    Updates: 1</span><br><span class="line"></span><br><span class="line">2019-07-01 18:15:31.217 DEBUG 14764 --- [nio-8080-exec-6] p.h.redis.dao.UserMapper.deleteById      : ==&gt;  Preparing: Delete from tb_user where id = ? </span><br><span class="line">2019-07-01 18:15:31.218 DEBUG 14764 --- [nio-8080-exec-6] p.h.redis.dao.UserMapper.deleteById      : ==&gt; Parameters: 7(Integer)</span><br><span class="line">2019-07-01 18:15:31.219 DEBUG 14764 --- [nio-8080-exec-6] p.h.redis.dao.UserMapper.deleteById      : &lt;==    Updates: 1</span><br><span class="line"></span><br><span class="line">2019-07-01 18:15:47.353 DEBUG 14764 --- [nio-8080-exec-4] p.h.redis.dao.UserMapper.selectAll       : ==&gt;  Preparing: Select * from tb_user </span><br><span class="line">2019-07-01 18:15:47.353 DEBUG 14764 --- [nio-8080-exec-4] p.h.redis.dao.UserMapper.selectAll       : ==&gt; Parameters: </span><br><span class="line">2019-07-01 18:15:47.377 DEBUG 14764 --- [nio-8080-exec-4] p.h.redis.dao.UserMapper.selectAll       : &lt;==      Total: 4</span><br><span class="line"></span><br><span class="line">Process finished with exit code -1</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Spring-Bootæ‹¥æŠ±MyBatisåŠRedis&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Spring-Bootæ‹¥æŠ±MyBatisåŠRedis&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Spring Bootæ‹¥æŠ±MyBatisåŠRe
      
    
    </summary>
    
    
      <category term="Redis" scheme="http://yoursite.com/tags/Redis/"/>
    
      <category term="MyBatis" scheme="http://yoursite.com/tags/MyBatis/"/>
    
      <category term="Spring Boot" scheme="http://yoursite.com/tags/Spring-Boot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootä¹‹æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½</title>
    <link href="http://yoursite.com/2019/06/30/Spring-Boot%E4%B9%8B%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
    <id>http://yoursite.com/2019/06/30/Spring-Bootä¹‹æ–‡ä»¶ä¸Šä¼ /</id>
    <published>2019-06-30T13:22:23.000Z</published>
    <updated>2019-07-02T11:31:29.479Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹æ–‡ä»¶ä¸Šä¼ "><a href="#å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="å­¦ä¹ ç¬”è®° : Spring Bootä¹‹æ–‡ä»¶ä¸Šä¼ "></a>å­¦ä¹ ç¬”è®° : Spring Bootä¹‹æ–‡ä»¶ä¸Šä¼ </h2><p><em>å…³é”®å­— : <code>Servlet 3.0</code> ã€ <code>SpringMVC</code> ã€ <code>Spring Boot</code></em></p><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p><em>å‰å¤©ä½¿ç”¨Sprint Bootå¼€å‘äº†ä¸€ä¸ªåŸºäºSSMæ¡†æ¶çš„é¡¹ç›®,ä¸€ä¸ªç®€å•çš„å¥½å‹å¤‡å¿˜å½•,è¯¥é¡¹ç›®åœ°å€ : <a href="https://github.com/YUbuntu0109/SpringBoot-CURD-Memo" target="_blank" rel="noopener">https://github.com/YUbuntu0109/SpringBoot-CURD-Memo</a> ,åœ¨è¯¥é¡¹ç›®ä¸­é™¤äº†åŸºæœ¬çš„CURD,è¿˜æ·»åŠ äº†ä¸Šä¼ ç”¨æˆ·å¤´åƒçš„åŠŸèƒ½å“Ÿ~ ä»¥è‡³äºåœ¨å†™æ­¤åŠŸèƒ½æ—¶å‘ç°äº†Spring Bootåœ¨ä¸Šä¼ æ–‡ä»¶æ—¶ä¸åŒäº<code>Spring MVC</code>çš„ä¸€ä¸ªç»†èŠ‚é—®é¢˜ : <code>å¤´åƒè¢«ä¸Šä¼ åˆ°éé¢„æœŸè·¯å¾„ä¸‹!</code></em></p><ul><li><em>æ³¨ : Spring Bootå¯åŠ¨æ—¶ä¼šåˆ›å»ºä¸€ä¸ª<code>/tmp/tomcat.xxxxxx/work/Tomcat/localhost/ROOT</code>çš„ä¸´æ—¶ç›®å½•ä½œä¸ºæ–‡ä»¶ä¸Šä¼ çš„ä¸´æ—¶ç›®å½•,ä½†æ˜¯è¯¥ç›®å½•ä¼šåœ¨<code>10</code>å¤©ä¹‹åè¢«ç³»ç»Ÿè‡ªåŠ¨æ¸…ç†æ‰ !`</em></li></ul><p><em>ç»§è€Œç¨‹åºæŠ›å‡ºå¦‚ä¸‹å¼‚å¸¸ä¿¡æ¯ :</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java.io.IOException: java.io.FileNotFoundException:</span><br><span class="line">/tmp/tomcat.273391201583741210.8080/work/Tomcat/localhost/ROOT/upload/portrait/myportrait.jpg (No such file or directory)...</span><br></pre></td></tr></table></figure></p><h3 id="å¼‚å¸¸åˆ†æ"><a href="#å¼‚å¸¸åˆ†æ" class="headerlink" title="å¼‚å¸¸åˆ†æ"></a>å¼‚å¸¸åˆ†æ</h3><p><em><code>upload/portrait</code>æ˜¯æˆ‘ç”¨äºå­˜å‚¨å¤´åƒçš„é¡¹ç›®ç›®å½•,è€Œ<code>transferTo(File dest)</code>æ–¹æ³•é¢„æœŸå†™å…¥çš„æ–‡ä»¶è·¯å¾„ä¸º<code>/tmp/tomcat.273391201583741210.8080/work/Tomcat/localhost/ROOT/upload/portrait/</code>,æˆ‘ä»¬å¹¶æ²¡æœ‰åˆ›å»ºè¯¥ç›®å½•,å› æ­¤ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ä¿¡æ¯ !</em></p><h3 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h3><p><em>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ ? ç›¸å¯¹è·¯å¾„-é¢„æœŸè·¯å¾„åº”è¯¥æ˜¯é¡¹ç›®è·¯å¾„<code>/tmp/source/</code>,ä½†æ˜¯æŠ¥é”™ç¡®æ˜¯ä¸€ä¸ªç³»ç»Ÿä¸´æ—¶æ–‡ä»¶è·¯å¾„,ç”±äºæ˜¯å†™å…¥æ–‡ä»¶æ—¶æŠ¥é”™,ç»§è€Œæˆ‘ä»¬æ¥æŸ¥çœ‹ä¸€ä¸‹<code>transferTo(File dest)</code>çš„æºç å§ :</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.apache.catalina.core;</span><br><span class="line"><span class="comment">//......</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Adaptor to allow &#123;<span class="doctag">@link</span> FileItem&#125; objects generated by the package renamed</span></span><br><span class="line"><span class="comment"> * commons-upload to be used by the Servlet 3.0 upload API that expects</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> Part&#125;s.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationPart</span> <span class="keyword">implements</span> <span class="title">Part</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//......</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(fileName);</span><br><span class="line">        <span class="keyword">if</span> (!file.isAbsolute()) &#123;</span><br><span class="line">            file = <span class="keyword">new</span> File(location, fileName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fileItem.write(file);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IOException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>ç”±æºç å¯çŸ¥,åœ¨ä½¿ç”¨<code>Servlet3.0</code>æ”¯æŒçš„ä¸Šä¼ æ–‡ä»¶åŠŸèƒ½æ—¶,è‹¥æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ç»å¯¹è·¯å¾„,<code>transferTo(File dest)</code>æ–¹æ³•ä¼šåœ¨ç›¸å¯¹è·¯å¾„å‰æ·»åŠ ä¸€ä¸ª<code>location</code>è·¯å¾„ ! ç»§è€Œå½±å“äº†SpringMVCçš„<code>MultipartFile</code>çš„ä½¿ç”¨ .</em></p><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><h4 id="ä½¿ç”¨ç»å¯¹è·¯å¾„"><a href="#ä½¿ç”¨ç»å¯¹è·¯å¾„" class="headerlink" title="ä½¿ç”¨ç»å¯¹è·¯å¾„"></a>ä½¿ç”¨ç»å¯¹è·¯å¾„</h4><p><em>é€šè¿‡<code>ResourceUtils.getURL(&quot;classpath:&quot;).getPath()</code>è·å–é¡¹ç›®çš„ç»å¯¹è·¯å¾„,ä¸ºé˜²æ­¢é¡¹ç›®è·¯å¾„ä¸­å«æœ‰ç©ºæ ¼ç­‰ç‰¹æ®Šå­—ç¬¦ç»§è€Œä¹±ç ,å¯ä»¥é€šè¿‡<code>URLDecoder.decode(String s, Charset charset)</code>å¯¹å…¶è¿›è¡Œè§£ç .</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¡¹ç›®ä¸‹å­˜å‚¨å¤´åƒçš„ç›®å½•</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String uploadPath = <span class="string">"/static/upload/friend_portrait/"</span>;</span><br><span class="line"><span class="comment">//æŒ‡å®šå­˜å‚¨å¤´åƒç›®å½•çš„å®Œæ•´è·¯å¾„(é¡¹ç›®å‘å¸ƒè·¯å¾„):è‹¥ä¸ä½¿ç”¨ç»å¯¹è·¯å¾„,åˆ™Spring bootä¼šé»˜è®¤å°†ä¸Šä¼ çš„æ–‡ä»¶å­˜å‚¨åˆ°ä¸´æ—¶ç›®å½•ä¸­</span></span><br><span class="line">String dirPath = URLDecoder.decode(ResourceUtils.getURL(<span class="string">"classpath:"</span>).getPath(), StandardCharsets.UTF_8) + uploadPath;</span><br></pre></td></tr></table></figure></p><p><em>æ³¨ : å½“æˆ‘ä»¬ä½¿ç”¨<code>ClassLoader()</code>çš„<code>getResource()</code>æ–¹æ³•è·å–è·¯å¾„æ—¶,è·å–åˆ°çš„è·¯å¾„æ˜¯å·²è¢«<code>URLEncoder.encode(path,&quot;utf-8&quot;)</code>ç¼–ç äº†çš„,å½“è·¯å¾„ä¸­å­˜åœ¨ä¸­æ–‡å’Œç©ºæ ¼æ—¶,å®ƒä¼šå¯¹è¿™äº›å­—ç¬¦è¿›è¡Œè½¬æ¢,ç»§è€Œå¾—åˆ°çš„å¾€å¾€ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„çœŸå®è·¯å¾„,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è°ƒç”¨<code>URLDecoder.decode(String s, Charset charset)</code>æ–¹æ³•è¿›è¡Œè§£ç ,ä»¥ä¾¿å¾—åˆ°åŸå§‹çš„ä¸­æ–‡åŠç©ºæ ¼è·¯å¾„. å‘é€çš„æ—¶å€™ä½¿ç”¨<code>encode(String s, Charset charset)</code>ç¼–ç ,æ¥æ”¶çš„æ—¶å€™ä½¿ç”¨<code>URLDecoder.decode(String s, Charset charset)</code>è§£ç ,æŒ‰æŒ‡å®šçš„ç¼–ç æ ¼å¼è¿›è¡Œç¼–ç ã€è§£ç ,å¯ä»¥ä¿è¯ä¸ä¼šå‡ºç°ä¹±ç å“Ÿ ~</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨æŒ‡å®šçš„ç¼–ç æœºåˆ¶å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º application/x-www-form-urlencoded æ ¼å¼</span></span><br><span class="line">URLEncoder.encode(String s, Charset charset)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨æŒ‡å®šçš„ç¼–ç æœºåˆ¶å¯¹ application/x-www-form-urlencoded å­—ç¬¦ä¸²è§£ç </span></span><br><span class="line">URLDecoder.decode(String s, Charset charset)</span><br></pre></td></tr></table></figure></p><h4 id="ä¿®æ”¹locationçš„å€¼"><a href="#ä¿®æ”¹locationçš„å€¼" class="headerlink" title="ä¿®æ”¹locationçš„å€¼"></a>ä¿®æ”¹locationçš„å€¼</h4><p><em><code>location</code>å¯ä»¥ç†è§£ä¸ºä¸´æ—¶æ–‡ä»¶ç›®å½•,å¯ä»¥é€šè¿‡é…ç½®<code>location</code>çš„å€¼,ä½¿å…¶æŒ‡å‘æˆ‘ä»¬çš„é¡¹ç›®è·¯å¾„,ç»§è€Œæ¥è§£å†³æ­¤é—®é¢˜. åªéœ€åœ¨Spring Bootå¯åŠ¨ç±»ä¸­æ·»å¦‚ä¸‹ä»£ç  :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="function">MultipartConfigElement <span class="title">multipartConfigElement</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MultipartConfigFactory factory = <span class="keyword">new</span> MultipartConfigFactory();</span><br><span class="line">    factory.setLocation(<span class="string">"/app/pttms/tmp"</span>);</span><br><span class="line">    <span class="keyword">return</span> factory.createMultipartConfig();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ç¤ºä¾‹ç¨‹åº"><a href="#ç¤ºä¾‹ç¨‹åº" class="headerlink" title="ç¤ºä¾‹ç¨‹åº"></a>ç¤ºä¾‹ç¨‹åº</h3><p><em>è¯¥ä¸Šä¼ æ–‡ä»¶çš„ç¤ºä¾‹ç¨‹åºæ‘˜è‡ªæˆ‘çš„Sping Boot-å¥½å‹å¤‡å¿˜å½•å°é¡¹ç›®,ç¨‹åºä¸­ä½¿ç”¨<code>ç»å¯¹è·¯å¾„</code>æ–¹æ¡ˆæ¥è§£å†³ä¸Šè¿°é—®é¢˜,è¯¥ç¨‹åºå…·æœ‰å‚è€ƒä¸å­¦ä¹ ä»·å€¼å“Ÿ~</em></p><ol><li><p><em>FriendController.java : å¥½å‹ä¿¡æ¯æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.haungyuhui.memo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.ResourceUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"><span class="keyword">import</span> pers.haungyuhui.memo.bean.Friend;</span><br><span class="line"><span class="keyword">import</span> pers.haungyuhui.memo.service.FriendService;</span><br><span class="line"><span class="keyword">import</span> pers.haungyuhui.memo.util.UploadFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: memo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: æ§åˆ¶å™¨-ç®¡ç†å¥½å‹ä¿¡æ¯é¡µé¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/28/2019-8:25 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/memo"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//......</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é¡¹ç›®ä¸‹å­˜å‚¨å¤´åƒçš„ç›®å½•,éœ€æ”¾åœ¨é™æ€èµ„æº'static'ç›®å½•ä¸‹å“Ÿ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String uploadPath = <span class="string">"/static/upload/friend_portrait/"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: ä¸Šä¼ å¤´åƒ-åŸç†:å°†å¤´åƒä¸Šä¼ åˆ°é¡¹ç›®å‘å¸ƒç›®å½•ä¸­,é€šè¿‡è¯»å–æ•°æ®åº“ä¸­çš„å¤´åƒè·¯å¾„æ¥æ˜¾ç¤ºå¤´åƒ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: photo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-06-29 4:20 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.util.Map&lt;java.lang.String, java.lang.Object&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/uploadPhoto"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">uploadPhoto</span><span class="params">(MultipartFile photo)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">//æŒ‡å®šå­˜å‚¨å¤´åƒç›®å½•çš„å®Œæ•´è·¯å¾„(é¡¹ç›®å‘å¸ƒè·¯å¾„): è‹¥ä¸ä½¿ç”¨ç»å¯¹è·¯å¾„,åˆ™Spring bootä¼šé»˜è®¤å°†ä¸Šä¼ çš„æ–‡ä»¶å­˜å‚¨åˆ°ä¸´æ—¶ç›®å½•ä¸­</span></span><br><span class="line">        String dirPath = URLDecoder.decode(ResourceUtils.getURL(<span class="string">"classpath:"</span>).getPath(), StandardCharsets.UTF_8) + uploadPath;</span><br><span class="line">        <span class="comment">//è¿”å›å¤´åƒçš„ä¸Šä¼ ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> UploadFile.getUploadResult(photo, dirPath, uploadPath);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>UploadFile.java : ä¸Šä¼ æ–‡ä»¶çš„å·¥å…·ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.haungyuhui.memo.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.filefilter.SuffixFileFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: memo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: ä¸Šä¼ æ–‡ä»¶å·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/29/2019-9:38 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadFile</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é™åˆ¶å¤´åƒå¤§å°æœ€å¤§ä¸º20M</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_SIZE = <span class="number">20971520</span>;</span><br><span class="line">    <span class="comment">//å­˜å‚¨æ–‡ä»¶ä¸Šä¼ å¤±è´¥çš„é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, Object&gt; error_result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">//å­˜å‚¨å¤´åƒçš„ä¸Šä¼ ç»“æœä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, Object&gt; upload_result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">//æŒ‡å®šä¸Šä¼ æ–‡ä»¶çš„ç±»å‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] suffixs = <span class="keyword">new</span> String[]&#123;<span class="string">".png"</span>, <span class="string">".PNG"</span>, <span class="string">".jpg"</span>, <span class="string">".JPG"</span>, <span class="string">".jpeg"</span>, <span class="string">".JPEG"</span>, <span class="string">".gif"</span>, <span class="string">".GIF"</span>, <span class="string">".bmp"</span>, <span class="string">".BMP"</span>&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: æ•ˆéªŒæ‰€ä¸Šä¼ å›¾ç‰‡çš„å¤§å°åŠæ ¼å¼ç­‰ä¿¡æ¯...</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: photo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: path</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-06-29 9:40 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.util.Map&lt;java.lang.String, java.lang.Object&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, Object&gt; <span class="title">uploadPhoto</span><span class="params">(MultipartFile photo, String path)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è‹¥å­˜å‚¨æ–‡ä»¶çš„ç›®å½•è·¯å¾„ä¸å­˜åœ¨,åˆ™åˆ›å»ºè¯¥ç›®å½•</span></span><br><span class="line">        File filePath = <span class="keyword">new</span> File(path);</span><br><span class="line">        <span class="keyword">if</span> (!filePath.exists()) &#123;</span><br><span class="line">            filePath.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é™åˆ¶ä¸Šä¼ æ–‡ä»¶çš„å¤§å°</span></span><br><span class="line">        <span class="keyword">if</span> (photo.getSize() &gt; MAX_SIZE) &#123;</span><br><span class="line">            error_result.put(<span class="string">"success"</span>, <span class="keyword">false</span>);</span><br><span class="line">            error_result.put(<span class="string">"msg"</span>, <span class="string">"ä¸Šä¼ çš„å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡20Må“Ÿ!"</span>);</span><br><span class="line">            <span class="keyword">return</span> error_result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é™åˆ¶ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹</span></span><br><span class="line">        SuffixFileFilter suffixFileFilter = <span class="keyword">new</span> SuffixFileFilter(suffixs);</span><br><span class="line">        <span class="keyword">if</span> (!suffixFileFilter.accept(<span class="keyword">new</span> File(path + photo.getOriginalFilename()))) &#123;</span><br><span class="line">            error_result.put(<span class="string">"success"</span>, <span class="keyword">false</span>);</span><br><span class="line">            error_result.put(<span class="string">"msg"</span>, <span class="string">"ç¦æ­¢ä¸Šä¼ æ­¤ç±»å‹æ–‡ä»¶! è¯·ä¸Šä¼ å›¾ç‰‡å“Ÿ!"</span>);</span><br><span class="line">            <span class="keyword">return</span> error_result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: è·å–å¤´åƒçš„ä¸Šä¼ ç»“æœä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: photo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: dirPaht</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: portraitPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-06-29 9:44 AM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.util.Map&lt;java.lang.String, java.lang.Object&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Object&gt; <span class="title">getUploadResult</span><span class="params">(MultipartFile photo, String dirPath, String uploadPath)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!photo.isEmpty() &amp;&amp; photo.getSize() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//æ•ˆéªŒå›¾ç‰‡-error_result: å­˜å‚¨å¤´åƒä¸Šä¼ å¤±è´¥çš„é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            Map&lt;String, Object&gt; error_result = uploadPhoto(photo, dirPath);</span><br><span class="line">            <span class="keyword">if</span> (error_result != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> error_result;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨UUIDé‡å‘½åå›¾ç‰‡åç§°(uuid__åŸå§‹å›¾ç‰‡åç§°)</span></span><br><span class="line">            String newPhotoName = UUID.randomUUID() + <span class="string">"__"</span> + photo.getOriginalFilename();</span><br><span class="line">            <span class="comment">//å°†ä¸Šä¼ çš„å›¾ç‰‡ä¿å­˜åˆ°ç›®æ ‡ç›®å½•ä¸‹</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                photo.transferTo(<span class="keyword">new</span> File(dirPath + newPhotoName));</span><br><span class="line">                <span class="comment">//å°†å­˜å‚¨å¤´åƒçš„ç›®å½•è·¯å¾„è¿”å›ç»™é¡µé¢</span></span><br><span class="line">                upload_result.put(<span class="string">"success"</span>, <span class="keyword">true</span>);</span><br><span class="line">                upload_result.put(<span class="string">"portrait_path"</span>, uploadPath + newPhotoName);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                upload_result.put(<span class="string">"success"</span>, <span class="keyword">false</span>);</span><br><span class="line">                upload_result.put(<span class="string">"msg"</span>, <span class="string">"ä¸Šä¼ æ–‡ä»¶å¤±è´¥! æœåŠ¡å™¨ç«¯å‘ç”Ÿå¼‚å¸¸!"</span>);</span><br><span class="line">                <span class="keyword">return</span> upload_result;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            upload_result.put(<span class="string">"success"</span>, <span class="keyword">false</span>);</span><br><span class="line">            upload_result.put(<span class="string">"msg"</span>, <span class="string">"å¤´åƒä¸Šä¼ å¤±è´¥! æœªæ‰¾åˆ°æŒ‡å®šå›¾ç‰‡!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> upload_result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹æ–‡ä»¶ä¸Šä¼ &quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹æ–‡ä»¶ä¸Šä¼ &quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Spring Bootä¹‹æ–‡ä»¶ä¸Šä¼ &quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Spring Bootä¹‹æ–‡ä»¶
      
    
    </summary>
    
    
      <category term="Spring Boot" scheme="http://yoursite.com/tags/Spring-Boot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Booté¡¹ç›®:å¥½å‹å¤‡å¿˜å½•</title>
    <link href="http://yoursite.com/2019/06/30/Spring-Boot%E9%A1%B9%E7%9B%AE-%E5%A5%BD%E5%8F%8B%E5%A4%87%E5%BF%98%E5%BD%95/"/>
    <id>http://yoursite.com/2019/06/30/Spring-Booté¡¹ç›®-å¥½å‹å¤‡å¿˜å½•/</id>
    <published>2019-06-30T12:53:09.000Z</published>
    <updated>2019-06-30T13:10:06.140Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-simple-project-for-Spring-Boot"><a href="#A-simple-project-for-Spring-Boot" class="headerlink" title="A simple project for Spring Boot ~"></a>A simple project for Spring Boot ~</h2><ul><li><em>æˆ‘çš„ç¬¬ä¸€ä¸ª<code>Spring Boot</code>å°é¡¹ç›® ï¼ˆã¥ï¿£3ï¿£ï¼‰ã¥â•­â¤ï½</em></li><li><em>èµ¶ç´§æ¥å­¦ä¹ å§ ! æœŸå¾…ä½ çš„<code>issues</code>å“Ÿ(ã£â€¢Ì€Ï‰â€¢Ì)ã£âœâ¾â¾~ è¯¥é¡¹ç›®åœ°å€ : <a href="https://github.com/YUbuntu0109/SpringBoot-CURD-Memo" target="_blank" rel="noopener">https://github.com/YUbuntu0109/SpringBoot-CURD-Memo</a></em></li></ul><h3 id="é¡¹ç›®æ¦‚è¿°"><a href="#é¡¹ç›®æ¦‚è¿°" class="headerlink" title="é¡¹ç›®æ¦‚è¿°"></a>é¡¹ç›®æ¦‚è¿°</h3><p>ğŸ‘<em>ä¸€ä¸ªç®€å•çš„,åŸºäºSpring Bootçš„å¥½å‹å¤‡å¿˜å½•å°é¡¹ç›®,é€šè¿‡æœ¬é¡¹ç›®å¯ä»¥å­¦ä¹ <code>Spring Boot</code>ä¸<code>MyBatis</code>çš„æ•´åˆåŠCURDæ“ä½œçš„åŸºæœ¬æ€è·¯,åŒæ—¶ä¹Ÿå¯ä»¥å¸®åŠ©ä½ å­¦ä¹ <code>Thylemeaf</code>æ¨¡æ¿å¼•æ“ä½¿ç”¨å“Ÿ ! è¯¥é¡¹ç›®çš„ä»£ç æ³¨é‡Šè¯¦ç»†,é€»è¾‘ç»“æ„æ¸…æ™°,éå¸¸å…·æœ‰å‚è€ƒ,å­¦ä¹ ä»·å€¼å“Ÿ ! å¯ä»¥è¯´éå¸¸é€‚åˆåˆå­¦Sping Bootçš„åŒå­¦å•¦(ã£â€¢Ì€Ï‰â€¢Ì)ã£âœâ¾â¾~</em></p><p>ğŸ’—<em>ä¸ºäº†è®©æ›´å¤šåŒå­¦å¿«é€Ÿåœ°ä½“éªŒè¯¥é¡¹ç›®,å·²é€šè¿‡<code>mvn package</code>å°†å…¶æ‰“åŒ…,å¹¶å°†å…¶ä½œä¸º<code>v1.0</code>ä¸Šä¼ åˆ°äº†<code>release</code>ä¸­~</em></p><h3 id="é¡¹ç›®æˆªå›¾"><a href="#é¡¹ç›®æˆªå›¾" class="headerlink" title="é¡¹ç›®æˆªå›¾"></a>é¡¹ç›®æˆªå›¾</h3><ul><li><em>é¡¹ç›®ä¸»é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/06/30/Spring-Booté¡¹ç›®-å¥½å‹å¤‡å¿˜å½•/SpringBoot-CURD-Memo_MainView.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>å¥½å‹ä¿¡æ¯ç®¡ç†é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/06/30/Spring-Booté¡¹ç›®-å¥½å‹å¤‡å¿˜å½•/SpringBoot-CURD-Memo_FriendListView.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/06/30/Spring-Booté¡¹ç›®-å¥½å‹å¤‡å¿˜å½•/SpringBoot-CURD-Memo_FriendListView2.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">â”‚  .gitattributes</span><br><span class="line">â”‚  LICENSE</span><br><span class="line">â”‚  README.md</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€database file</span><br><span class="line">â”‚      memo.sql</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€demonstration_picture</span><br><span class="line">â”‚      SpringBoot-CURD-Memo_FriendListView.PNG</span><br><span class="line">â”‚      SpringBoot-CURD-Memo_FriendListView2.PNG</span><br><span class="line">â”‚      SpringBoot-CURD-Memo_MainView.PNG</span><br><span class="line">â”‚</span><br><span class="line">â””â”€memo</span><br><span class="line">    â”‚  .gitignore</span><br><span class="line">    â”‚  mvnw</span><br><span class="line">    â”‚  mvnw.cmd</span><br><span class="line">    â”‚  pom.xml</span><br><span class="line">    â”‚</span><br><span class="line">    â”‚</span><br><span class="line">    â””â”€src</span><br><span class="line">        â””â”€main</span><br><span class="line">            â”œâ”€java</span><br><span class="line">            â”‚  â””â”€pers</span><br><span class="line">            â”‚      â””â”€haungyuhui</span><br><span class="line">            â”‚          â””â”€memo</span><br><span class="line">            â”‚              â”‚  MemoApplication.java</span><br><span class="line">            â”‚              â”‚</span><br><span class="line">            â”‚              â”œâ”€bean</span><br><span class="line">            â”‚              â”‚      Friend.java</span><br><span class="line">            â”‚              â”‚</span><br><span class="line">            â”‚              â”œâ”€controller</span><br><span class="line">            â”‚              â”‚      StudentController.java</span><br><span class="line">            â”‚              â”‚</span><br><span class="line">            â”‚              â”œâ”€dao</span><br><span class="line">            â”‚              â”‚      FriendMapper.java</span><br><span class="line">            â”‚              â”‚      FriendMapper.xml</span><br><span class="line">            â”‚              â”‚</span><br><span class="line">            â”‚              â”œâ”€service</span><br><span class="line">            â”‚              â”‚  â”‚  FriendService.java</span><br><span class="line">            â”‚              â”‚  â”‚</span><br><span class="line">            â”‚              â”‚  â””â”€impl</span><br><span class="line">            â”‚              â”‚          FriendServiceImpl.java</span><br><span class="line">            â”‚              â”‚</span><br><span class="line">            â”‚              â””â”€util</span><br><span class="line">            â”‚                      UploadFile.java</span><br><span class="line">            â”‚</span><br><span class="line">            â””â”€resources</span><br><span class="line">                â”‚  application.properties</span><br><span class="line">                â”‚</span><br><span class="line">                â”œâ”€static</span><br><span class="line">                â”‚  â”œâ”€easyui</span><br><span class="line">                â”‚  â”‚  â”‚  jquery.easyui.min.js</span><br><span class="line">                â”‚  â”‚  â”‚  jquery.min.js</span><br><span class="line">                â”‚  â”‚  â”‚</span><br><span class="line">                â”‚  â”‚  â”œâ”€css</span><br><span class="line">                â”‚  â”‚  â”‚      default.css</span><br><span class="line">                â”‚  â”‚  â”‚      demo.css</span><br><span class="line">                â”‚  â”‚  â”‚</span><br><span class="line">                â”‚  â”‚  â”œâ”€js</span><br><span class="line">                â”‚  â”‚  â”‚      outlook2.js</span><br><span class="line">                â”‚  â”‚  â”‚      validateExtends.js</span><br><span class="line">                â”‚  â”‚  â”‚</span><br><span class="line">                â”‚  â”‚  â””â”€themes</span><br><span class="line">                â”‚  â”‚      â”‚(ç•¥..)</span><br><span class="line">                â”‚  â”‚        </span><br><span class="line">                â”‚  â”‚      </span><br><span class="line">                â”‚  â”‚      </span><br><span class="line">                â”‚  â””â”€image</span><br><span class="line">                â”‚          default_portrait.png</span><br><span class="line">                â”‚</span><br><span class="line">                â””â”€templates</span><br><span class="line">                        friendList.html</span><br><span class="line">                        intro.html</span><br><span class="line">                        main.html</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-Spring-bootå¯åŠ¨ç±»"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-Spring-bootå¯åŠ¨ç±»" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-Spring bootå¯åŠ¨ç±»"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>Spring bootå¯åŠ¨ç±»</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MemoApplication.java</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“æ–‡ä»¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“æ–‡ä»¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“æ–‡ä»¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>æ•°æ®åº“æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">memo.sql</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-EasyUI-å‰ç«¯æ¡†æ¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-EasyUI-å‰ç«¯æ¡†æ¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-EasyUI å‰ç«¯æ¡†æ¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>EasyUI å‰ç«¯æ¡†æ¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">easyui/</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-é»˜è®¤å¤´åƒ"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-é»˜è®¤å¤´åƒ" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-é»˜è®¤å¤´åƒ"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>é»˜è®¤å¤´åƒ</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">default_portrait.png</span><br></pre></td></tr></table></figure><p><em>ğŸ™‚ Look forward to your contribution ! If you need any help, please contact me ~ QQ : 3083968068</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-simple-project-for-Spring-Boot&quot;&gt;&lt;a href=&quot;#A-simple-project-for-Spring-Boot&quot; class=&quot;headerlink&quot; title=&quot;A simple project for Spring 
      
    
    </summary>
    
    
      <category term="MyBatis" scheme="http://yoursite.com/tags/MyBatis/"/>
    
      <category term="Spring Boot" scheme="http://yoursite.com/tags/Spring-Boot/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
      <category term="jQuery" scheme="http://yoursite.com/tags/jQuery/"/>
    
      <category term="Ajax" scheme="http://yoursite.com/tags/Ajax/"/>
    
      <category term="EasyUI" scheme="http://yoursite.com/tags/EasyUI/"/>
    
      <category term="Thymeleaf" scheme="http://yoursite.com/tags/Thymeleaf/"/>
    
      <category term="Maven" scheme="http://yoursite.com/tags/Maven/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootä¹‹Thymeleaf</title>
    <link href="http://yoursite.com/2019/06/27/Spring-Boot%E4%B9%8BThymeleaf/"/>
    <id>http://yoursite.com/2019/06/27/Spring-Bootä¹‹Thymeleaf/</id>
    <published>2019-06-27T03:34:09.000Z</published>
    <updated>2019-06-27T09:22:01.077Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Thymeleafçš„å¸¸ç”¨è¯­æ³•"><a href="#å­¦ä¹ ç¬”è®°-Thymeleafçš„å¸¸ç”¨è¯­æ³•" class="headerlink" title="å­¦ä¹ ç¬”è®° : Thymeleafçš„å¸¸ç”¨è¯­æ³•"></a>å­¦ä¹ ç¬”è®° : Thymeleafçš„å¸¸ç”¨è¯­æ³•</h2><p><em>ç®€ä»‹ : Thymeleafæ˜¯ä¸€ç§ç”¨äºWebå’Œç‹¬ç«‹ç¯å¢ƒçš„ç°ä»£æœåŠ¡å™¨ç«¯çš„Javaæ¨¡æ¿å¼•æ“. Thymeleafçš„ä¸»è¦ç›®æ ‡æ˜¯å°†ä¼˜é›…çš„è‡ªç„¶æ¨¡æ¿å¸¦åˆ°å¼€å‘å·¥ä½œæµç¨‹ä¸­,å¹¶å°†HTMLåœ¨æµè§ˆå™¨ä¸­æ­£ç¡®æ˜¾ç¤º,å¹¶ä¸”å¯ä»¥ä½œä¸ºé™æ€åŸå‹,è®©å¼€å‘å›¢é˜Ÿèƒ½æ›´å®¹æ˜“åœ°åä½œ. Thymeleafèƒ½å¤Ÿå¤„ç†HTML,XML,JavaScript,CSSç”šè‡³çº¯æ–‡æœ¬ .</em></p><h3 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h3><h4 id="å˜é‡è¡¨è¾¾å¼"><a href="#å˜é‡è¡¨è¾¾å¼" class="headerlink" title="å˜é‡è¡¨è¾¾å¼ ${}"></a>å˜é‡è¡¨è¾¾å¼ <code>${}</code></h4><p><em>ä½¿ç”¨æ–¹æ³• : ç›´æ¥ä½¿ç”¨<code>th:xx = &quot;${}&quot;</code>è·å–å¯¹è±¡å±æ€§</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"userForm"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"id"</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;user.id&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;user.username&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;user.password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"hello"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"$&#123;user.username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="é€‰æ‹©å˜é‡è¡¨è¾¾å¼"><a href="#é€‰æ‹©å˜é‡è¡¨è¾¾å¼" class="headerlink" title="é€‰æ‹©å˜é‡è¡¨è¾¾å¼ *{}"></a>é€‰æ‹©å˜é‡è¡¨è¾¾å¼ <code>*{}</code></h4><p><em>ä½¿ç”¨æ–¹æ³• : é¦–å…ˆé€šè¿‡<code>th:object</code>è·å–å¯¹è±¡,ç„¶åä½¿ç”¨`th:xx = â€œ</em>{}â€`è·å–å¯¹è±¡å±æ€§*<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"userForm"</span> <span class="attr">th:object</span>=<span class="string">"$&#123;user&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"id"</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">th:value</span>=<span class="string">"*&#123;id&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">th:value</span>=<span class="string">"*&#123;username&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">th:value</span>=<span class="string">"*&#123;password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="é“¾æ¥è¡¨è¾¾å¼"><a href="#é“¾æ¥è¡¨è¾¾å¼" class="headerlink" title="é“¾æ¥è¡¨è¾¾å¼ @{}"></a>é“¾æ¥è¡¨è¾¾å¼ <code>@{}</code></h4><p><em>ä½¿ç”¨æ–¹æ³• : é€šè¿‡é“¾æ¥è¡¨è¾¾å¼<code>@{}</code>ç›´æ¥æ‹¿åˆ°åº”ç”¨è·¯å¾„,ç„¶åæ‹¼æ¥é™æ€èµ„æºè·¯å¾„</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è®¿é—®é¡¹ç›®è·¯å¾„ä¸‹çš„userå¹¶ä¼ é€’id,nameç­‰å‚æ•° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;~/user(id=1,name=demo)&#125;"</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">a</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">"@&#123;/webjars/jquery/jquery.js&#125;"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/webjars/bootstrap/css/bootstrap.css&#125;"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="ç‰‡æ®µè¡¨è¾¾å¼"><a href="#ç‰‡æ®µè¡¨è¾¾å¼" class="headerlink" title="ç‰‡æ®µè¡¨è¾¾å¼ ~{}"></a>ç‰‡æ®µè¡¨è¾¾å¼ <code>~{}</code></h4><ol><li><em><code>~{viewName}</code> : è¡¨ç¤ºå¼•å…¥å®Œæ•´é¡µé¢</em></li><li><em><code>~{viewName ::selector}</code> : è¡¨ç¤ºåœ¨æŒ‡å®šé¡µé¢å¯»æ‰¾ç‰‡æ®µ,å…¶ä¸­<code>selector</code>å¯ä¸ºç‰‡æ®µåã€jqueryé€‰æ‹©å™¨ç­‰</em></li><li><em><code>~{::selector}</code> : è¡¨ç¤ºåœ¨å½“å‰é¡µå¯»æ‰¾</em></li></ol><p><em>ä½¿ç”¨æ–¹æ³• : é¦–å…ˆé€šè¿‡<code>th:fragment</code>å®šåˆ¶ç‰‡æ®µ,ç„¶åé€šè¿‡<code>th:replace</code>å¡«å†™ç‰‡æ®µè·¯å¾„å’Œç‰‡æ®µå</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- /views/common/head.html--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">th:fragment</span>=<span class="string">"static"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">"@&#123;/webjars/jquery/3.3.1/jquery.js&#125;"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /views/your.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"~&#123;common/head::static&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><ul><li><em>æ³¨æ„ : ç”±äºé»˜è®¤æ‹¼æ¥çš„è·¯å¾„ä¸º<code>spring.thymeleaf.prefix = classpath:/templates/</code>,æ‰€ä»¥åœ¨ä½¿ç”¨æ›¿æ¢è·¯å¾„<code>th:replace</code>å¼€å¤´è¯·å‹¿æ·»åŠ æ–œæ ,é¿å…éƒ¨ç½²è¿è¡Œçš„æ—¶å€™å‡ºç°è·¯å¾„æŠ¥é”™ !</em></li></ul><h4 id="æ¶ˆæ¯è¡¨è¾¾å¼-amp-35"><a href="#æ¶ˆæ¯è¡¨è¾¾å¼-amp-35" class="headerlink" title="æ¶ˆæ¯è¡¨è¾¾å¼ &amp;#35;{}"></a>æ¶ˆæ¯è¡¨è¾¾å¼ <code>&amp;#35;{}</code></h4><p><em>å³é€šå¸¸çš„å›½é™…åŒ–å±æ€§ : <code>&amp;#35;{msg}</code>,ç”¨äºè·å–å›½é™…åŒ–è¯­è¨€ç¿»è¯‘å€¼</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span> <span class="attr">th:text</span>=<span class="string">"#&#123;user.title&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="å…¶å®ƒè¡¨è¾¾å¼"><a href="#å…¶å®ƒè¡¨è¾¾å¼" class="headerlink" title="å…¶å®ƒè¡¨è¾¾å¼"></a>å…¶å®ƒè¡¨è¾¾å¼</h4><p><em>åœ¨åŸºç¡€è¯­æ³•ä¸­,é»˜è®¤æ”¯æŒå­—ç¬¦ä¸²è¿æ¥ã€æ•°å­¦è¿ç®—ã€å¸ƒå°”é€»è¾‘å’Œä¸‰ç›®è¿ç®—ç­‰..</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;'I am '+(user.name!=null?user.name:'NoBody')&#125;"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="å¸¸ç”¨è¯­æ³•"><a href="#å¸¸ç”¨è¯­æ³•" class="headerlink" title="å¸¸ç”¨è¯­æ³•"></a>å¸¸ç”¨è¯­æ³•</h3><h4 id="è¿­ä»£å¾ªç¯"><a href="#è¿­ä»£å¾ªç¯" class="headerlink" title="è¿­ä»£å¾ªç¯"></a>è¿­ä»£å¾ªç¯</h4><p><em>æƒ³è¦éå†Listé›†åˆå¾ˆç®€å•,é…åˆ<code>th:each</code>å³å¯å¿«é€Ÿå®Œæˆè¿­ä»£</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:each</span>=<span class="string">"user:$&#123;userList&#125;"</span>&gt;</span></span><br><span class="line">    è´¦å·: <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">"$&#123;user.username&#125;"</span>/&gt;</span></span><br><span class="line">    å¯†ç : <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">"$&#123;user.password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>åœ¨é›†åˆçš„è¿­ä»£è¿‡ç¨‹è¿˜å¯ä»¥è·å–çŠ¶æ€å˜é‡,åªéœ€åœ¨å˜é‡åé¢æŒ‡å®šçŠ¶æ€å˜é‡åå³å¯,çŠ¶æ€å˜é‡å¯ç”¨äºè·å–é›†åˆçš„ä¸‹æ ‡/åºå·ã€æ€»æ•°ã€æ˜¯å¦ä¸ºå•æ•°/å¶æ•°è¡Œã€æ˜¯å¦ä¸ºç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ª</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:each</span>=<span class="string">"user,stat:$&#123;userList&#125;"</span> <span class="attr">th:class</span>=<span class="string">"$&#123;stat.even&#125;?'even':'odd'"</span>&gt;</span></span><br><span class="line">    ä¸‹æ ‡: <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">"$&#123;stat.index&#125;"</span>/&gt;</span></span><br><span class="line">    åºå·: <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">"$&#123;stat.count&#125;"</span>/&gt;</span></span><br><span class="line">    è´¦å·: <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">"$&#123;user.username&#125;"</span>/&gt;</span></span><br><span class="line">    å¯†ç : <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">"$&#123;user.password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>å¦‚æœç¼ºçœçŠ¶æ€å˜é‡å,åˆ™è¿­ä»£å™¨ä¼šé»˜è®¤å¸®æˆ‘ä»¬ç”Ÿæˆä»¥å˜é‡åå¼€å¤´çš„çŠ¶æ€å˜é‡ xxStat</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:each</span>=<span class="string">"user:$&#123;userList&#125;"</span> <span class="attr">th:class</span>=<span class="string">"$&#123;userStat.even&#125;?'even':'odd'"</span>&gt;</span></span><br><span class="line">    ä¸‹æ ‡ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">"$&#123;userStat.index&#125;"</span>/&gt;</span></span><br><span class="line">    åºå·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">"$&#123;userStat.count&#125;"</span>/&gt;</span></span><br><span class="line">    è´¦å·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">"$&#123;user.username&#125;"</span>/&gt;</span></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">"$&#123;user.password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h4><h5 id="ifè¯­å¥"><a href="#ifè¯­å¥" class="headerlink" title="ifè¯­å¥"></a>ifè¯­å¥</h5><p><em>å…¶è¯­æ³•ä¸º : <code>th:if</code>,é€šå¸¸ç”¨äºåŠ¨æ€é¡µé¢çš„åˆå§‹åŒ–</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">"$&#123;userList&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>exist...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>å¦‚æœæƒ³å–ååˆ™å¯ä»¥ä½¿ç”¨<code>unless</code></em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:unless</span>=<span class="string">"$&#123;userList&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>not exist...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h5 id="switchè¯­å¥"><a href="#switchè¯­å¥" class="headerlink" title="switchè¯­å¥"></a>switchè¯­å¥</h5><p><em>å…¶è¯­æ³•ä¸­éœ€è¦<code>th:switch</code>ä¸<code>th:case</code>ç»“åˆä½¿ç”¨,é€šå¸¸ç”¨äºåŠ¨æ€é¡µé¢çš„åˆå§‹åŒ–</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:switch</span>=<span class="string">"$&#123;num&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">"1"</span>&gt;</span>num=1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">"2"</span>&gt;</span>num=2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:case</span>=<span class="string">"3"</span>&gt;</span>num=3<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span></span></span><br></pre></td></tr></table></figure></p><h4 id="æ—¥æœŸæ ¼å¼åŒ–"><a href="#æ—¥æœŸæ ¼å¼åŒ–" class="headerlink" title="æ—¥æœŸæ ¼å¼åŒ–"></a>æ—¥æœŸæ ¼å¼åŒ–</h4><p><em>ä½¿ç”¨é»˜è®¤çš„æ—¥æœŸæ ¼å¼(toStringæ–¹æ³•)å¹¶ä¸æ˜¯æˆ‘ä»¬é¢„æœŸçš„æ ¼å¼ : <code>Mon Dec 03 23:16:50 CST 2018</code></em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;user.createTime&#125;"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>æ­¤æ—¶å¯ä»¥é€šè¿‡æ—¶é—´å·¥å…·ç±»<code>&amp;#35;dates</code>æ¥å°†æ—¥æœŸè¿›è¡Œæ ¼å¼åŒ–ä¸º : <code>2018-12-03 23:16:50</code></em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;#dates.format(user.createTime,'yyyy-MM-dd HH:mm:ss')&#125;"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="å†…è”å†™æ³•"><a href="#å†…è”å†™æ³•" class="headerlink" title="å†…è”å†™æ³•"></a>å†…è”å†™æ³•</h4><ol><li><em>å†…è”å†™æ³• : è§£å†³ JSæ— æ³•è·å–æœåŠ¡ç«¯è¿”å›çš„å˜é‡çš„å°´å°¬ ~</em></li><li><em>ä½¿ç”¨æ–¹æ³• : æ ‡å‡†æ ¼å¼ä¸º: <code>[[${xx}]]</code>,å…¶å¯ä»¥è¯»å–æœåŠ¡ç«¯å˜é‡,ä¹Ÿå¯ä»¥è°ƒç”¨å†…ç½®å¯¹è±¡çš„æ–¹æ³•.ä¾‹å¦‚è·å–ç”¨æˆ·å˜é‡å’Œåº”ç”¨è·¯å¾„:</em><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">th:inline</span>=<span class="string">"javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    var user = [[$&#123;user&#125;]];`</span></span><br><span class="line"><span class="undefined">    var APP_PATH = [[$&#123;#request.getContextPath()&#125;]];</span></span><br><span class="line"><span class="undefined">    var LANG_COUNTRY = [[$&#123;#locale.getLanguage()+'_'+#locale.getCountry()&#125;]];</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="å†…ç½®å¯¹è±¡"><a href="#å†…ç½®å¯¹è±¡" class="headerlink" title="å†…ç½®å¯¹è±¡"></a>å†…ç½®å¯¹è±¡</h3><h4 id="ä¸ƒå¤§åŸºç¡€å¯¹è±¡"><a href="#ä¸ƒå¤§åŸºç¡€å¯¹è±¡" class="headerlink" title="ä¸ƒå¤§åŸºç¡€å¯¹è±¡"></a>ä¸ƒå¤§åŸºç¡€å¯¹è±¡</h4><ol><li><em><code>${&amp;#35;ctx}</code> : ä¸Šä¸‹æ–‡å¯¹è±¡,å¯ç”¨äºè·å–å…¶å®ƒå†…ç½®å¯¹è±¡</em></li><li><em><code>${&amp;#35;vars}</code> : ä¸Šä¸‹æ–‡å˜é‡</em></li><li><em><code>${&amp;#35;locale}</code> : ä¸Šä¸‹æ–‡åŒºåŸŸè®¾ç½®</em></li><li><em><code>${&amp;#35;request}</code> : HttpServletRequestå¯¹è±¡</em></li><li><em><code>${&amp;#35;response}</code> : HttpServletResponseå¯¹è±¡</em></li><li><em><code>${&amp;#35;session}</code> : HttpSessionå¯¹è±¡</em></li><li><em><code>${&amp;#35;servletContext}</code> : ServletContextå¯¹è±¡</em></li></ol><h4 id="å¸¸ç”¨çš„å·¥å…·ç±»"><a href="#å¸¸ç”¨çš„å·¥å…·ç±»" class="headerlink" title="å¸¸ç”¨çš„å·¥å…·ç±»"></a>å¸¸ç”¨çš„å·¥å…·ç±»</h4><ol><li><em><code>&amp;#35;strings</code> :å­—ç¬¦ä¸²å·¥å…·ç±»</em></li><li><em><code>&amp;#35;lists</code> : Listå·¥å…·ç±»</em></li><li><em><code>&amp;#35;arrays</code> : æ•°ç»„å·¥å…·ç±»</em></li><li><em><code>&amp;#35;sets</code> : Setå·¥å…·ç±»</em></li><li><em><code>&amp;#35;maps</code> : å¸¸ç”¨Mapæ–¹æ³•</em></li><li><em><code>&amp;#35;objects</code> : ä¸€èˆ¬å¯¹è±¡ç±»,é€šå¸¸ç”¨æ¥åˆ¤æ–­éç©º</em></li><li><em><code>&amp;#35;bools</code> : å¸¸ç”¨çš„å¸ƒå°”æ–¹æ³•</em></li><li><em><code>&amp;#35;execInfo</code> : è·å–é¡µé¢æ¨¡æ¿çš„å¤„ç†ä¿¡æ¯</em></li><li><em><code>&amp;#35;messages</code> : åœ¨å˜é‡è¡¨è¾¾å¼ä¸­è·å–å¤–éƒ¨æ¶ˆæ¯çš„æ–¹æ³•,ä¸ä½¿ç”¨<code>&amp;#35;{...}</code>è¯­æ³•è·å–çš„æ–¹æ³•ç›¸åŒ</em></li><li><em><code>&amp;#35;uris</code> : è½¬ä¹‰éƒ¨åˆ†URL / URIçš„æ–¹æ³•</em></li><li><em><code>&amp;#35;conversions</code> : ç”¨äºæ‰§è¡Œå·²é…ç½®çš„è½¬æ¢æœåŠ¡çš„æ–¹æ³•</em></li><li><em><code>&amp;#35;dates</code> : æ—¶é—´æ“ä½œå’Œæ—¶é—´æ ¼å¼åŒ–ç­‰</em></li><li><em><code>&amp;#35;calendars</code> : ç”¨äºæ›´å¤æ‚æ—¶é—´çš„æ ¼å¼åŒ–</em></li><li><em><code>&amp;#35;numbers</code> : æ ¼å¼åŒ–æ•°å­—å¯¹è±¡çš„æ–¹æ³•</em></li><li><em><code>&amp;#35;aggregates</code> : åœ¨æ•°ç»„æˆ–é›†åˆä¸Šåˆ›å»ºèšåˆçš„æ–¹æ³•</em></li><li><em><code>&amp;#35;ids</code> : å¤„ç†å¯èƒ½é‡å¤çš„idå±æ€§çš„æ–¹æ³•</em></li></ol><ul><li><em>ğŸ™‚thanks a lot : <a href="https://www.jianshu.com/p/908b48b10702" target="_blank" rel="noopener">https://www.jianshu.com/p/908b48b10702</a></em></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Thymeleafçš„å¸¸ç”¨è¯­æ³•&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Thymeleafçš„å¸¸ç”¨è¯­æ³•&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Thymeleafçš„å¸¸ç”¨è¯­æ³•&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Thymeleafçš„å¸¸ç”¨è¯­æ³•&lt;/h2&gt;&lt;
      
    
    </summary>
    
    
      <category term="Spring Boot" scheme="http://yoursite.com/tags/Spring-Boot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootä¹‹æ•´åˆè§†å›¾å±‚æŠ€æœ¯</title>
    <link href="http://yoursite.com/2019/06/26/Spring-Boot%E4%B9%8B%E6%95%B4%E5%90%88%E8%A7%86%E5%9B%BE%E5%B1%82%E6%8A%80%E6%9C%AF/"/>
    <id>http://yoursite.com/2019/06/26/Spring-Bootä¹‹æ•´åˆè§†å›¾å±‚æŠ€æœ¯/</id>
    <published>2019-06-26T14:33:47.000Z</published>
    <updated>2019-06-27T03:07:13.789Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹æ•´åˆè§†å›¾å±‚æŠ€æœ¯"><a href="#å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹æ•´åˆè§†å›¾å±‚æŠ€æœ¯" class="headerlink" title="å­¦ä¹ ç¬”è®° : Spring Bootä¹‹æ•´åˆè§†å›¾å±‚æŠ€æœ¯"></a>å­¦ä¹ ç¬”è®° : Spring Bootä¹‹æ•´åˆè§†å›¾å±‚æŠ€æœ¯</h2><p><em>ç®€ä»‹ : åœ¨ç›®å‰çš„ä¼ä¸šçº§åº”ç”¨å¼€å‘ä¸­,å‰åç«¯åˆ†ç¦»æ˜¯è¶‹åŠ¿,ä½†æ˜¯è§†å›¾æŠ€æœ¯è¿˜æœ‰ä¸€å¸­ä¹‹åœ°. Spring Bootå¯¹è§†å›¾å±‚æŠ€æœ¯æä¾›äº†å¾ˆå¥½çš„æ”¯æŒ,å®˜æ–¹æ¨èä½¿ç”¨çš„æ¨¡æ¿å¼•æ“æ˜¯<code>Thymeleaf</code>,ä¹Ÿæ”¯æŒ<code>FreeMarker</code>å“Ÿ,éœ€è¦æ³¨æ„çš„æ˜¯Spring Bootå®˜æ–¹å¹¶ä¸æ¨èä½¿ç”¨<code>JSP</code>æŠ€æœ¯ !</em></p><h3 id="æ•´åˆThymeleaf"><a href="#æ•´åˆThymeleaf" class="headerlink" title="æ•´åˆThymeleaf"></a>æ•´åˆThymeleaf</h3><p><em><code>Thymeleaf</code>æ˜¯æ–°ä¸€ä»£æ¨¡æ¿å¼•æ“,ç±»ä¼¼äº<code>Velocity</code>,<code>FreeMarker</code>ç­‰ä¼ ç»ŸJavaæ¨¡æ¿å¼•æ“.ä¸å…¶ä¸åŒçš„æ˜¯: Thymeleafæ”¯æŒHTMLåŸå‹,åŒæ—¶Spring Bootä¹Ÿæä¾›äº†Thymeleafè‡ªåŠ¨åŒ–é…ç½®è§£å†³æ–¹æ¡ˆ. æ›´å¤šèµ„æ–™è§ : <a href="https://www.thymeleaf.org/" target="_blank" rel="noopener">https://www.thymeleaf.org/</a></em></p><h4 id="é…ç½®Thymeleaf"><a href="#é…ç½®Thymeleaf" class="headerlink" title="é…ç½®Thymeleaf"></a>é…ç½®Thymeleaf</h4><p><em>Spring Bootä¸ºThymeleafæä¾›äº†è‡ªåŠ¨åŒ–é…ç½®ç±»<code>ThymeleafAutoConfiguration</code>,ç›¸å…³çš„é…ç½®ä¿¡æ¯åœ¨<code>ThymeleafProperties</code>ç±»ä¸­,å…¶éƒ¨åˆ†æºç å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(</span><br><span class="line">    prefix = <span class="string">"spring.thymeleaf"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThymeleafProperties</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_ENCODING;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_PREFIX = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_SUFFIX = <span class="string">".html"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> checkTemplate = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> checkTemplateLocation = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">private</span> String prefix = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line">    <span class="keyword">private</span> String suffix = <span class="string">".html"</span>;</span><br><span class="line">    <span class="keyword">private</span> String mode = <span class="string">"HTML"</span>;</span><br><span class="line"></span><br><span class="line">    Â·Â·Â·Â·Â·Â·</span><br></pre></td></tr></table></figure></p><p><em>å¦‚æœéœ€è¦å¯¹é»˜è®¤çš„Thymeleafé…ç½®å‚æ•°è¿›è¡Œè‡ªå®šä¹‰,é‚£ä¹ˆå¯ä»¥ç›´æ¥åœ¨application.propertiesä¸­è¿›è¡Œé…ç½®å“Ÿ,å¸¸è§é…ç½®å¦‚ä¸‹:</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#æ˜¯å¦å¼€å¯ç¼“å­˜,å¼€å‘æ—¶å¯è®¾ç½®ä¸ºfalse,é»˜è®¤ä¸ºtrue</span><br><span class="line">spring.thymeleaf.cache=true</span><br><span class="line">#æ£€æŸ¥æ¨¡æ¿æ˜¯å¦å­˜åœ¨,é»˜è®¤ä¸ºtrue</span><br><span class="line">spring.thymeleaf.check-template=true</span><br><span class="line">#æ£€æŸ¥æ¨¡æ¿ä½ç½®æ˜¯å¦å­˜åœ¨,é»˜è®¤ä¸ºtrue</span><br><span class="line">spring.thymeleaf.check-template-location=true</span><br><span class="line">#æ¨¡æ¿æ–‡ä»¶ç¼–ç </span><br><span class="line">spring.thymeleaf.encoding=UTF-8</span><br><span class="line">#æ¨¡æ¿æ–‡ä»¶ä½ç½®</span><br><span class="line">spring.thymeleaf.prefix=classpath:/templates/</span><br><span class="line">#Content-Typeé…ç½®</span><br><span class="line">spring.thymeleaf.servlet.content-type=text/html</span><br><span class="line">#æ¨¡æ¿æ–‡ä»¶åç¼€</span><br><span class="line">spring.thymeleaf.suffix=.html</span><br></pre></td></tr></table></figure></p><h4 id="ç¤ºä¾‹ç¨‹åº"><a href="#ç¤ºä¾‹ç¨‹åº" class="headerlink" title="ç¤ºä¾‹ç¨‹åº"></a>ç¤ºä¾‹ç¨‹åº</h4><ol><li><p><em>pom.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>pers.huangyuhui<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>view<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>view<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>11<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>Book.java : å›¾ä¹¦ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.view.bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: view</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: å›¾ä¹¦ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/26/2019-9:24 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Book</span><span class="params">(Integer id, String name, String author)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.author = author;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getter and setter ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>BookDao.java : è·å–å¹¶å­˜å‚¨å›¾ä¹¦ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.view.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.view.bean.Book;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: view</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: æ“æ§å›¾ä¹¦ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/26/2019-9:41 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­˜å‚¨å›¾ä¹¦ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;Book&gt; books = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Book&gt; <span class="title">getBooks</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Book book1 = <span class="keyword">new</span> Book(<span class="number">1</span>, <span class="string">"Spring"</span>, <span class="string">"spring-author"</span>);</span><br><span class="line">        Book book2 = <span class="keyword">new</span> Book(<span class="number">2</span>, <span class="string">"Spring MVC"</span>, <span class="string">"springmvc-author"</span>);</span><br><span class="line">        Book book3 = <span class="keyword">new</span> Book(<span class="number">3</span>, <span class="string">"MyBatis"</span>, <span class="string">"mybatis-author"</span>);</span><br><span class="line">        Book book4 = <span class="keyword">new</span> Book(<span class="number">4</span>, <span class="string">"Spring Boot"</span>, <span class="string">"springboot-author"</span>);</span><br><span class="line">        books.add(book1);</span><br><span class="line">        books.add(book2);</span><br><span class="line">        books.add(book3);</span><br><span class="line">        books.add(book4);</span><br><span class="line">        <span class="keyword">return</span> books;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>BookController.java : æ“æ§å›¾ä¹¦ä¿¡æ¯çš„æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.view.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.view.dao.BookDao;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: view</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: æ“æ§å›¾ä¹¦ä¿¡æ¯çš„æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/26/2019-9:26 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/getBookList"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">books</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        modelAndView.addObject(<span class="string">"books"</span>, BookDao.getBooks());</span><br><span class="line">        modelAndView.setViewName(<span class="string">"bookList"</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>bookList.html : å±•ç¤ºå›¾ä¹¦åˆ—è¡¨ä¿¡æ¯çš„é¡µé¢</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¯¼å…¥Thymeleafçš„åç§°ç©ºé—´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å›¾ä¹¦ä¿¡æ¯åˆ—è¡¨é¡µé¢-Thymeleaf<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å›¾ä¹¦ç¼–å·<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å›¾ä¹¦åç§°<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å›¾ä¹¦ä½œè€…<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"book:$&#123;books&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;book.id&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;book.name&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;book.author&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="æ•´åˆFreeMarker"><a href="#æ•´åˆFreeMarker" class="headerlink" title="æ•´åˆFreeMarker"></a>æ•´åˆFreeMarker</h3><p><em><code>FreeMarker</code>æ˜¯ä¸€ä¸ªéå¸¸å¤è€çš„æ¨¡æ¿å¼•æ“,å¯ä»¥ç”¨åœ¨Webç¯å¢ƒæˆ–è€…éWebç¯å¢ƒä¸­. ä¸<code>Thymeleaf</code>ä¸åŒçš„æ˜¯FreeMarkeréœ€è¦ç»è¿‡è§£ææ‰èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­å±•ç¤ºå‡ºæ¥. æ›´å¤šèµ„æ–™è§ : <a href="https://freemarker.apache.org/" target="_blank" rel="noopener">https://freemarker.apache.org/</a></em></p><h4 id="é…ç½®FreeMarker"><a href="#é…ç½®FreeMarker" class="headerlink" title="é…ç½®FreeMarker"></a>é…ç½®FreeMarker</h4><p><em>Spring Bootå¯¹FreeMarkerä¹Ÿæä¾›äº†é…ç½®ç±»<code>FreeMarkerAutoConfiguration</code>,ç›¸å…³çš„é…ç½®å±æ€§åœ¨<code>FreeMarkerProperties</code>ä¸­,å…¶éƒ¨åˆ†æºç å¦‚ä¸‹æ‰€ç¤º :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(</span><br><span class="line">    prefix = <span class="string">"spring.freemarker"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FreeMarkerProperties</span> <span class="keyword">extends</span> <span class="title">AbstractTemplateViewResolverProperties</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_TEMPLATE_LOADER_PATH = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_PREFIX = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_SUFFIX = <span class="string">".ftl"</span>;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; settings = <span class="keyword">new</span> HashMap();</span><br><span class="line">    <span class="keyword">private</span> String[] templateLoaderPath = <span class="keyword">new</span> String[]&#123;<span class="string">"classpath:/templates/"</span>&#125;;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> preferFileSystemAccess = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    Â·Â·Â·Â·Â·Â·</span><br></pre></td></tr></table></figure></p><p><em>å¦‚æœéœ€è¦å¯¹é»˜è®¤çš„FreeMarkeré…ç½®å‚æ•°è¿›è¡Œè‡ªå®šä¹‰,é‚£ä¹ˆå¯ä»¥ç›´æ¥åœ¨application.propertiesä¸­è¿›è¡Œé…ç½®å“Ÿ,å¸¸è§é…ç½®å¦‚ä¸‹:</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#HttpServletRequestçš„å±æ€§æ˜¯å¦å¯ä»¥è¦†ç›–controllerä¸­modelçš„åŒåé¡¹</span><br><span class="line">spring.freemarker.allow-request-override=false</span><br><span class="line">#HttpSessionçš„å±æ€§æ˜¯å¦å¯ä»¥è¦†ç›–controllerä¸­çš„modelçš„åŒåé¡¹</span><br><span class="line">spring.freemarker.allow-session-override=false</span><br><span class="line">#æ˜¯å¦å¼€å¯ç¼“å­˜</span><br><span class="line">spring.freemarker.cache=false</span><br><span class="line">#æ¨¡æ¿æ–‡ä»¶ç¼–ç </span><br><span class="line">spring.freemarker.charset=UTF-8</span><br><span class="line">#æ˜¯å¦æ£€æŸ¥æ¨¡æ¿ä½ç½®</span><br><span class="line">spring.freemarker.check-template-location=true</span><br><span class="line">#Content-typeçš„å€¼</span><br><span class="line">spring.freemarker.content-type=text/html</span><br><span class="line">#æ˜¯å¦å°†HttpServletRequestä¸­çš„å±æ€§æ·»åŠ åˆ°Modelä¸­</span><br><span class="line">spring.freemarker.expose-request-attributes=false</span><br><span class="line">#æ˜¯å¦å°†HttpSessionä¸­çš„å±æ€§æ·»åŠ åˆ°Modelä¸­</span><br><span class="line">spring.freemarker.expose-session-attributes=false</span><br><span class="line">#æ¨¡æ¿æ–‡ä»¶åç¼€</span><br><span class="line">spring.freemarker.suffix=.ftl</span><br><span class="line">#æ¨¡æ¿æ–‡ä»¶ä½ç½®</span><br><span class="line">spring.freemarker.template-loader-path=classpath:/templates/</span><br></pre></td></tr></table></figure></p><h4 id="ç¤ºä¾‹ç¨‹åº-1"><a href="#ç¤ºä¾‹ç¨‹åº-1" class="headerlink" title="ç¤ºä¾‹ç¨‹åº"></a>ç¤ºä¾‹ç¨‹åº</h4><ol><li><p><em>Book.java,BookDao.java,BookController.javaç¨‹åºä¸Thymeleafç¤ºä¾‹ç¨‹åºç›¸åŒ,æ­¤å¤„ç•¥å†™ â€¦</em></p></li><li><p><em>åœ¨<code>pom.xml</code>ä¸­éœ€æ·»åŠ FreeMarkerä¾èµ–</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>bookList.html : å±•ç¤ºå›¾ä¹¦åˆ—è¡¨çš„é¡µé¢</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å›¾ä¹¦åˆ—è¡¨ä¿¡æ¯é¡µé¢-FreeMarker<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å›¾ä¹¦ç¼–å·<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å›¾ä¹¦åç§°<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å›¾ä¹¦ä½œè€…<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è‹¥modelä¸­çš„booksä¸ä¸ºç©ºå¹¶ä¸”booksä¸­æœ‰æ•°æ®,åˆ™éå†booksé›†åˆ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">#if</span> <span class="attr">books</span> ??&amp;&amp;(<span class="attr">books</span>?<span class="attr">size</span>&gt;</span>0)&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">#list</span> <span class="attr">books</span> <span class="attr">as</span> <span class="attr">book</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.id&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.name&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.author&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">#list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">#if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="æ•´åˆJSP"><a href="#æ•´åˆJSP" class="headerlink" title="æ•´åˆJSP"></a>æ•´åˆJSP</h3><p><em>Spring Bootå®˜æ–¹å¹¶ä¸æ¨èä½¿ç”¨<code>JSP</code>æŠ€æœ¯! ä½†æ˜¯å°å“¥æ˜¯ä¸ªå¿µæ—§çš„å­©çº¸,æ¥å­¦ä¹ ä¸€æ³¢å‘—ğŸ˜ ~</em></p><ol><li><p><em>Book.java,BookDao.java,BookController.javaç¨‹åºä¸Thymeleafç¤ºä¾‹ç¨‹åºç›¸åŒ,æ­¤å¤„ç•¥å†™ â€¦</em></p></li><li><p><em>åœ¨<code>pom.xml</code>ä¸­éœ€æ·»åŠ ä½¿ç”¨JSPæ‰€éœ€çš„ä¾èµ–</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JSTL --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç”¨äºç¼–è¯‘JSP --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em><code>application.properties</code>é…ç½®æ–‡ä»¶ä¸­ç”¨äºè§£æè§†å›¾çš„ä»£ç </em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.mvc.view.prefix=/WEB-INF/jsp/</span><br><span class="line">spring.mvc.view.suffix=.jsp</span><br></pre></td></tr></table></figure></li><li><p><em>bookList.jsp : å±•ç¤ºå›¾ä¹¦åˆ—è¡¨ä¿¡æ¯çš„é¡µé¢</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@taglib</span> <span class="attr">prefix</span>=<span class="string">"c"</span> <span class="attr">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å›¾ä¹¦åˆ—è¡¨ä¿¡æ¯é¡µé¢-JSP<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å›¾ä¹¦ç¼–å·<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å›¾ä¹¦åç§°<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å›¾ä¹¦ä½œè€…<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;books&#125;"</span> <span class="attr">var</span>=<span class="string">"book"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.id&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.name&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.author&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœ(ä»¥ä¸Šä¸‰ä¸ªç¤ºä¾‹ç¨‹åºè¿è¡Œç»“æœå¤§åŒå°å¼‚å“Ÿ)</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/06/26/Spring-Bootä¹‹æ•´åˆè§†å›¾å±‚æŠ€æœ¯/BookInfoView.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹æ•´åˆè§†å›¾å±‚æŠ€æœ¯&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹æ•´åˆè§†å›¾å±‚æŠ€æœ¯&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Spring Bootä¹‹æ•´åˆè§†å›¾å±‚æŠ€æœ¯&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Sprin
      
    
    </summary>
    
    
      <category term="Spring Boot" scheme="http://yoursite.com/tags/Spring-Boot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootä¹‹åŸºæœ¬Webå¼€å‘</title>
    <link href="http://yoursite.com/2019/06/26/Spring-Boot%E4%B9%8B%E5%9F%BA%E6%9C%ACWeb%E5%BC%80%E5%8F%91/"/>
    <id>http://yoursite.com/2019/06/26/Spring-Bootä¹‹åŸºæœ¬Webå¼€å‘/</id>
    <published>2019-06-26T02:11:58.000Z</published>
    <updated>2019-06-26T11:12:39.362Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹åŸºæœ¬Webå¼€å‘"><a href="#å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹åŸºæœ¬Webå¼€å‘" class="headerlink" title="å­¦ä¹ ç¬”è®° : Spring Bootä¹‹åŸºæœ¬Webå¼€å‘"></a>å­¦ä¹ ç¬”è®° : Spring Bootä¹‹åŸºæœ¬Webå¼€å‘</h2><h3 id="ServletComponentScançš„ä½¿ç”¨"><a href="#ServletComponentScançš„ä½¿ç”¨" class="headerlink" title="@ServletComponentScançš„ä½¿ç”¨"></a>@ServletComponentScançš„ä½¿ç”¨</h3><p><em>åœ¨SpringBootApplicationä¸Šä½¿ç”¨<code>@ServletComponentScan</code>æ³¨è§£å,Servletã€Filterã€Listenerå¯ä»¥ç›´æ¥é€šè¿‡ @WebServletã€@WebFilterã€@WebListener æ³¨è§£è‡ªåŠ¨æ³¨å†Œ,æ— éœ€å…¶ä»–ä»£ç å“Ÿ !</em></p><h4 id="å¼€å‘Servlet"><a href="#å¼€å‘Servlet" class="headerlink" title="å¼€å‘Servlet"></a>å¼€å‘Servlet</h4><ol><li><p><em>pom.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.yubuntu0109<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>web-servlet<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>web-servlet<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>11<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>MyServlet.java : è‡ªå®šä¹‰Servlet</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.web.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: web-servlet</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: learn to use the annotation: <span class="doctag">@ServletComponentScan</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/26/2019-9:49 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"MyServlet"</span>, urlPatterns = <span class="string">"/helloServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this's my servlet ~"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>WebServletApplication.java : Spring Bootå¯åŠ¨ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.webservlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.ServletComponentScan;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ServletComponentScan</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebServletApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(WebServletApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœ</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this&apos;s my servlet ~</span><br></pre></td></tr></table></figure></li></ol><h4 id="å¼€å‘Filter"><a href="#å¼€å‘Filter" class="headerlink" title="å¼€å‘Filter"></a>å¼€å‘Filter</h4><ol><li><p><em>MyFilter.java : è‡ªå®šä¹‰è¿‡æ»¤å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.web.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: web-servlet</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: learn to user annotation: <span class="doctag">@ServletComponentScan</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/26/2019-10:30 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebFilter</span>(filterName = <span class="string">"MyFile"</span>, urlPatterns = <span class="string">"/helloServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this's my filetr !"</span>);</span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœ</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">this&apos;s my filetr !</span><br><span class="line">this&apos;s my servlet ~</span><br></pre></td></tr></table></figure></li></ol><h4 id="å¼€å‘Listener"><a href="#å¼€å‘Listener" class="headerlink" title="å¼€å‘Listener"></a>å¼€å‘Listener</h4><ol><li><p><em>MyListener.java : è‡ªå®šä¹‰ç›‘å¬å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.web.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebListener;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: web-servlet</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: learn to user annotation: <span class="doctag">@ServletComponentScan</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/26/2019-10:54 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebListener</span>(value = <span class="string">"MyListenre"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this's contextInitialized ~"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this's contextDestroyed ~"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœ</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">this&apos;s requestInitialized ~</span><br><span class="line">this&apos;s my filetr !</span><br><span class="line">this&apos;s my servlet ~</span><br><span class="line">this&apos;s requestDestroyed ~</span><br></pre></td></tr></table></figure></li></ol><h3 id="ä½¿ç”¨Beanæ³¨è§£æ³¨å†ŒServletç­‰ç»„ä»¶"><a href="#ä½¿ç”¨Beanæ³¨è§£æ³¨å†ŒServletç­‰ç»„ä»¶" class="headerlink" title="ä½¿ç”¨Beanæ³¨è§£æ³¨å†ŒServletç­‰ç»„ä»¶"></a>ä½¿ç”¨Beanæ³¨è§£æ³¨å†ŒServletç­‰ç»„ä»¶</h3><p><em>WebServletApplication.java : Spring Bootå¯åŠ¨ç±»</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.FilterRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.ServletListenerRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.ServletRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.web.filter.MyFilter;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.web.listener.MyListener;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.web.servlet.MyServlet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebServletApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        SpringApplication.run(WebServletApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//ä½¿ç”¨@Beanæ³¨è§£æ³¨å†ŒServlet</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">getServletRegistration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ServletRegistrationBean servletRegistrationBean = <span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> MyServlet());</span><br><span class="line">        servletRegistrationBean.addUrlMappings(<span class="string">"/Bean-helloServlet"</span>);</span><br><span class="line">        <span class="keyword">return</span> servletRegistrationBean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*the result:</span></span><br><span class="line"><span class="comment">        this's my servlet ~</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//ä½¿ç”¨@Beanæ³¨è§£æ³¨å†ŒFilter</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">getFilterRegistrationBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FilterRegistrationBean filterRegistrationBean = <span class="keyword">new</span> FilterRegistrationBean(<span class="keyword">new</span> MyFilter());</span><br><span class="line">        filterRegistrationBean.addUrlPatterns(<span class="string">"/Bean-helloServlet"</span>);</span><br><span class="line">        <span class="keyword">return</span> filterRegistrationBean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*the result:</span></span><br><span class="line"><span class="comment">        this's my filetr !</span></span><br><span class="line"><span class="comment">        this's my servlet ~</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//ä½¿ç”¨@Beanæ³¨è§£æ³¨å†ŒListener</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletListenerRegistrationBean <span class="title">getServletListenerRegistrationBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ServletListenerRegistrationBean(<span class="keyword">new</span> MyListener());</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">/*the result:</span></span><br><span class="line"><span class="comment">        this's contextInitialized ~</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="é™æ€èµ„æºè®¿é—®"><a href="#é™æ€èµ„æºè®¿é—®" class="headerlink" title="é™æ€èµ„æºè®¿é—®"></a>é™æ€èµ„æºè®¿é—®</h3><h4 id="é»˜è®¤ç­–ç•¥"><a href="#é»˜è®¤ç­–ç•¥" class="headerlink" title="é»˜è®¤ç­–ç•¥"></a>é»˜è®¤ç­–ç•¥</h4><p><em>ç®€ä»‹ : Spring Booté»˜è®¤ä¼šè¿‡æ»¤æ‰€æœ‰çš„é™æ€èµ„æº,è€Œé™æ€èµ„æºçš„ä½ç½®ä¸€å…±æœ‰5ä¸ª,å¦‚ä¸‹æ‰€ç¤º. æ³¨æ„: æŒ‰ç…§å®šä¹‰çš„é¡ºåº,5ä¸ªé™æ€èµ„æºä½ç½®çš„ä¼˜å…ˆçº§ä¾æ¬¡é™ä½! ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹,Spring Booté¡¹ç›®ä¸éœ€è¦<code>webapp</code>ç›®å½•,æ‰€ä»¥åœ¨ç¬¬5ä¸ªâ€<code>/</code>â€œå¯ä»¥æš‚æ—¶ä¸è€ƒè™‘å“Ÿ ~</em></p><ol><li><em>classpath:/META-INF/resources/</em></li><li><em>classpath:/resources/</em></li><li><em>classpath:/static/</em></li><li><em>classpath:/pulic/</em></li><li><em>/</em></li></ol><ul><li><em>æ‰© : å¦‚æœä½ ä½¿ç”¨çš„æ˜¯Intellij IDEAå¼€å‘å·¥å…·,è®°å¾—è®¾ç½®<code>ç›®å½•ç±»å‹</code>å“Ÿ !</em></li></ul><h4 id="è‡ªå®šä¹‰ç­–ç•¥"><a href="#è‡ªå®šä¹‰ç­–ç•¥" class="headerlink" title="è‡ªå®šä¹‰ç­–ç•¥"></a>è‡ªå®šä¹‰ç­–ç•¥</h4><p><em>å¦‚æœé»˜è®¤çš„é™æ€èµ„æºè¿‡æ»¤ç­–ç•¥ä¸èƒ½æ»¡è¶³å¼€å‘éœ€æ±‚,ä¹Ÿå¯ä»¥è‡ªå®šä¹‰èµ„æºè¿‡æ»¤ç­–ç•¥,è‡ªå®šä¹‰é™æ€èµ„æºè¿‡æ»¤ç­–ç•¥æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹å¼ :</em></p><ol><li><em>åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰</em></li><li><em>Javaç¼–ç å®šä¹‰</em></li></ol><p><em>ç¬¬ä¸€ç§æ–¹å¼ç¤ºä¾‹ : å¯ä»¥åœ¨<code>application.properties</code>ä¸­ç›´æ¥å®šä¹‰è¿‡æ»¤è§„åˆ™(ç¬¬ä¸€è¡Œ)å’Œé™æ€èµ„æºä½ç½®(ç¬¬äºŒè¡Œ),ç¤ºä¾‹ä»£ç å¦‚ä¸‹ :</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.mvc.static-path-pattern=/static/**</span><br><span class="line">spring.resources.static-locations=classpath:/static/</span><br></pre></td></tr></table></figure></p><h3 id="æ–‡ä»¶çš„ä¸Šä¼ "><a href="#æ–‡ä»¶çš„ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶çš„ä¸Šä¼ "></a>æ–‡ä»¶çš„ä¸Šä¼ </h3><p><em>ç®€ä»‹ : å¤šæ•°æ–‡ä»¶ä¸Šä¼ éƒ½æ˜¯é€šè¿‡è¡¨å•å½¢å¼æäº¤ç»™æœåŠ¡å™¨çš„,å› æ­¤,è¦å®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å°±éœ€è¦æä¾›ä¸€ä¸ªä¸Šä¼ æ–‡ä»¶çš„è¡¨å•,è€Œæ­¤è¡¨å•å¿…é¡»æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶.</em></p><ol><li><em>formè¡¨å•çš„methodçš„å±æ€§è®¾ç½®ä¸ºpost</em></li><li><em>formè¡¨å•çš„enctypeå±æ€§è®¾ç½®ä¸ºmultipart/form-data</em></li><li><em>æä¾›<code>&lt;input type=&quot;file&quot; name=&quot;filename&quot;/&gt;</code>çš„æ–‡ä»¶ä¸Šä¼ è¾“å…¥æ¡†</em></li></ol><p><em>åœ¨Spring Bootä¸­å¯ä»¥æ ¹æ®éœ€è¦åœ¨<code>application.properties</code>ä¸­å¯¹ä¸Šä¼ çš„æ–‡ä»¶è¿›è¡Œè¯¦ç»†çš„é…ç½®,ç¤ºä¾‹ä»£ç å¦‚ä¸‹ :</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring.servlet.multipart.enabled=true</span><br><span class="line">spring.servlet.multipart.file-size-threshold=0</span><br><span class="line">spring.servlet.multipart.location=D://upload//photo</span><br><span class="line">spring.servlet.multipart.max-file-size=5MB</span><br><span class="line">spring.servlet.multipart.max-request-size=10MB</span><br><span class="line">spring.servlet.multipart.resolve-lazily=false</span><br></pre></td></tr></table></figure></p><ol><li><em>ç¬¬ä¸€è¡Œ: è®¾ç½®æ˜¯å¦å¼€å¯æ–‡ä»¶ä¸Šä¼ æ”¯æŒ,é»˜è®¤ä¸ºtrue</em></li><li><em>ç¬¬äºŒè¡Œ: è®¾ç½®æ–‡ä»¶å†™å…¥ç£ç›˜çš„é˜ˆå€¼,é»˜è®¤ä¸º0</em></li><li><em>ç¬¬ä¸‰è¡Œ: æŒ‡å®šä¸Šä¼ æ–‡ä»¶çš„ä¸´æ—¶ä¿å­˜ä½ç½®</em></li><li><em>ç¬¬å››è¡Œ: è®¾ç½®ä¸Šä¼ çš„å•ä¸ªæ–‡ä»¶çš„æœ€å¤§å¤§å°,é»˜è®¤ä¸º1MB</em></li><li><em>ç¬¬äº”è¡Œ: è®¾ç½®å¤šæ–‡ä»¶ä¸Šä¼ æ—¶æ–‡ä»¶çš„æ€»å¤§å°,é»˜è®¤ä¸º10MB</em></li><li><em>ç¬¬å…­è¡Œ: è®¾ç½®æ–‡ä»¶æ˜¯å¦å»¶è¿Ÿè§£æ,é»˜è®¤ä¸ºfalse</em></li></ol><h4 id="ç¤ºä¾‹ç¨‹åº"><a href="#ç¤ºä¾‹ç¨‹åº" class="headerlink" title="ç¤ºä¾‹ç¨‹åº"></a>ç¤ºä¾‹ç¨‹åº</h4><p><em>upload.html : ä¸Šä¼ æ–‡ä»¶é¡µé¢</em><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- éªŒè¯è¡¨å•ä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        function check() &#123;</span></span><br><span class="line"><span class="undefined">            var file = document.getElementById("file").value;</span></span><br><span class="line"><span class="undefined">            if (file.length === 0 || file === "") &#123;</span></span><br><span class="line"><span class="undefined">                alert("è¯·é€‰æ‹©éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶ !");</span></span><br><span class="line"><span class="undefined">                return false;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            return true;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"../fileUpload"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">onsubmit</span>=<span class="string">"return check()"</span>&gt;</span></span><br><span class="line">    è¯·é€‰æ‹©æ–‡ä»¶ <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"file"</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"uploadfile"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ä¸Šä¼ "</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>FileController.java : æ“æ§æ–‡ä»¶çš„æ§åˆ¶å™¨</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.web.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: web-servlet</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: æ“æ§æ–‡ä»¶çš„æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/26/2019-4:34 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: uploadfile</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-06-26 5:00 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.lang.String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/fileUpload"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handleFormUpload</span><span class="params">(MultipartFile uploadfile, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!uploadfile.isEmpty() &amp;&amp; uploadfile.getSize() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//è·å–ä¸Šä¼ æ–‡ä»¶çš„åŸå§‹åç§°</span></span><br><span class="line">            <span class="keyword">final</span> String originFileName = uploadfile.getOriginalFilename();</span><br><span class="line">            <span class="comment">//æŒ‡å®šä¸Šä¼ æ–‡ä»¶çš„ä¿å­˜ç›®å½•</span></span><br><span class="line">            <span class="keyword">final</span> String dirPath = request.getServletContext().getRealPath(<span class="string">"/upload/photo/"</span>);</span><br><span class="line">            <span class="comment">//è‹¥ä¿å­˜æ–‡ä»¶çš„ç›®å½•ä¸å­˜åœ¨,åˆ™åˆ›å»ºè¯¥ç›®å½•</span></span><br><span class="line">            File file = <span class="keyword">new</span> File(dirPath);</span><br><span class="line">            <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">                file.mkdirs();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨UUIDé‡å‘½åæ–‡ä»¶åç§°(uuid__åŸå§‹æ–‡ä»¶åç§°)</span></span><br><span class="line">            <span class="keyword">final</span> String newFileName = UUID.randomUUID() + <span class="string">"__"</span> + originFileName;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//å°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åˆ°ç›®æ ‡ç›®å½•ä¸‹</span></span><br><span class="line">                uploadfile.transferTo(<span class="keyword">new</span> File(dirPath + newFileName));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"success to upload the file !"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"fail to upload the file !"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹åŸºæœ¬Webå¼€å‘&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Spring-Bootä¹‹åŸºæœ¬Webå¼€å‘&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Spring Bootä¹‹åŸºæœ¬Webå¼€å‘&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Sprin
      
    
    </summary>
    
    
      <category term="Spring Boot" scheme="http://yoursite.com/tags/Spring-Boot/"/>
    
  </entry>
  
  <entry>
    <title>Hi Redis ~</title>
    <link href="http://yoursite.com/2019/06/25/Hi-Redis/"/>
    <id>http://yoursite.com/2019/06/25/Hi-Redis/</id>
    <published>2019-06-25T08:13:48.000Z</published>
    <updated>2019-06-25T10:44:06.840Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-æ‹¥æŠ±Redis"><a href="#å­¦ä¹ ç¬”è®°-æ‹¥æŠ±Redis" class="headerlink" title="å­¦ä¹ ç¬”è®° : æ‹¥æŠ±Redis ~"></a>å­¦ä¹ ç¬”è®° : æ‹¥æŠ±Redis ~</h2><p><em>ç®€ä»‹ : <code>Redis</code>(REmote DIctionary Server)æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„åŸºäºå†…å­˜çš„è½»é‡çº§é”®å€¼æ•°æ®åº“(key-value database). ä¸¥æ ¼çš„è¯´ä¸å…¶æŠŠRedisç§°ä¸ºä¸€ç§æ•°æ®åº“,ä¸å¦‚æŠŠå®ƒç§°ä¸ºä¸€ç§æ•°æ®æœåŠ¡å™¨æ›´ä¸ºæ°å½“(<code>https://matt.sh/thinking-in-redis-part-one</code>). RedisåŸç”Ÿåœ°åœ¨å†…å­˜ä¸­å®ç°äº†å¤šç§ç±»å‹çš„æ•°æ®ç»“æ„,å¹¶æä¾›äº†æ“ä½œè¿™äº›æ•°æ®ç»“æ„çš„å¤šç§API. æ›´åŠ é‡è¦çš„æ˜¯,ä½œä¸ºä¸€ä¸ªéœ€è¦é•¿æœŸè¿è¡Œçš„æ•°æ®åº“å­˜å‚¨æœåŠ¡,Redisè¿˜æä¾›äº†é«˜æ€§èƒ½å‘½ä»¤å¤„ç†,é«˜å¯é æ€§/æ‰©å±•æ€§çš„æ¶æ„åŠæ•°æ®æŒä¹…åŒ–ç­‰ç‰¹æ€§ .</em></p><ul><li><em>å¾®è½¯å¼€æºæŠ€æœ¯å°ç»„(Microsoft Open Technologies group)æ›¾ç»ç»´æŠ¤äº†ä¸€ä¸ªWindowsçš„Rediså‘è¡Œç‰ˆ(ğŸ˜…å°å“¥çš„è”æƒ³å°æ–°æ½®ä¸­Ubuntuç³»ç»Ÿå¥½ä¹…æ²¡ç©è¿‡äº†å•Š,è¦ä¸å…ˆåœ¨Windowsç³»ç»Ÿä¸‹å­¦ä¹ Rediså§, (#â†’âŒ’â†’)éƒ½æ˜¯å€Ÿå£,å¤§æ‡’è›‹ ~) : <a href="https://github.com/microsoftarchive/redis/releases" target="_blank" rel="noopener">https://github.com/microsoftarchive/redis/releases</a></em></li></ul><h3 id="Windows-Rediså®‰è£…æ–‡ä»¶è¯´æ˜"><a href="#Windows-Rediså®‰è£…æ–‡ä»¶è¯´æ˜" class="headerlink" title="Windows-Rediså®‰è£…æ–‡ä»¶è¯´æ˜"></a>Windows-Rediså®‰è£…æ–‡ä»¶è¯´æ˜</h3><ol><li><em>redis.windows.conf          â€”redisçš„é…ç½®æ–‡ä»¶:å°†redisä½œä¸ºæ™®é€šè½¯ä»¶ä½¿ç”¨çš„é…ç½®</em></li><li><em>redis.windows-service.conf  â€”redisçš„é…ç½®æ–‡ä»¶:å°†redisä½œä¸ºç³»ç»ŸæœåŠ¡çš„é…ç½®</em></li><li><em>redis-benchmark.exe         â€”æµ‹è¯•å·¥å…·:æµ‹è¯•redisçš„è¯»å†™æ€§èƒ½æƒ…å†µ</em></li><li><em>redis-check-aof.exe         â€”aof ä¿®å¤æ£€æŸ¥æ—¥å¿—</em></li><li><em>redis-cli.exe               â€”rediså®¢æˆ·ç«¯ç¨‹åº</em></li><li><em>redis-server.exe            â€”redisæœåŠ¡å™¨ç¨‹åº</em></li></ol><h3 id="Redisä¸´æ—¶æœåŠ¡"><a href="#Redisä¸´æ—¶æœåŠ¡" class="headerlink" title="Redisä¸´æ—¶æœåŠ¡"></a>Redisä¸´æ—¶æœåŠ¡</h3><ol><li><p><em>è¿›å…¥Rediså®‰è£…åŒ…ç›®å½•,å¯åŠ¨Redisä¸´æ—¶æœåŠ¡çš„å‘½ä»¤ä¸º : <code>redis-server redis.windows.conf</code>  ,é€šè¿‡è¯¥å‘½ä»¤å¯ä»¥åˆ›å»ºRedisä¸´æ—¶æœåŠ¡,æ—¢Servicesåˆ—è¡¨ä¸­ä¸ä¼šå‡ºç°Redisçš„æœåŠ¡ååŠå…¶çŠ¶æ€,å…³é—­ä»æ­¤çª—å£æ—¢å…³é—­RedisæœåŠ¡.</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">E:\MS-Redis\Redis</span><br><span class="line">Î» redis-server.exe redis.windows.conf</span><br><span class="line">                _._</span><br><span class="line">           _.-``__ &apos;&apos;-._</span><br><span class="line">      _.-``    `.  `_.  &apos;&apos;-._           Redis 3.2.100 (00000000/0) 64 bit</span><br><span class="line">  .-`` .-```.  ```\/    _.,_ &apos;&apos;-._</span><br><span class="line"> (    &apos;      ,       .-`  | `,    )     Running in standalone mode</span><br><span class="line"> |`-._`-...-` __...-.``-._|&apos;` _.-&apos;|     Port: 6379</span><br><span class="line"> |    `-._   `._    /     _.-&apos;    |     PID: 3796</span><br><span class="line">  `-._    `-._  `-./  _.-&apos;    _.-&apos;</span><br><span class="line"> |`-._`-._    `-.__.-&apos;    _.-&apos;_.-&apos;|</span><br><span class="line"> |    `-._`-._        _.-&apos;_.-&apos;    |           http://redis.io</span><br><span class="line">  `-._    `-._`-.__.-&apos;_.-&apos;    _.-&apos;</span><br><span class="line"> |`-._`-._    `-.__.-&apos;    _.-&apos;_.-&apos;|</span><br><span class="line"> |    `-._`-._        _.-&apos;_.-&apos;    |</span><br><span class="line">  `-._    `-._`-.__.-&apos;_.-&apos;    _.-&apos;</span><br><span class="line">      `-._    `-.__.-&apos;    _.-&apos;</span><br><span class="line">          `-._        _.-&apos;</span><br><span class="line">              `-.__.-&apos;</span><br><span class="line"></span><br><span class="line">[3796] 25 Jun 17:20:55.403 # Server started, Redis version 3.2.100</span><br><span class="line">[3796] 25 Jun 17:20:55.403 * DB loaded from disk: 0.000 seconds</span><br><span class="line">[3796] 25 Jun 17:20:55.403 * The server is now ready to accept connections on port 6379</span><br></pre></td></tr></table></figure></li><li><p><em>å¯åŠ¨RedisæœåŠ¡åå†å¼€å¯ä¸€ä¸ª<code>cmder</code>çª—å£,è¿è¡Œå®¢æˆ·ç«¯ç¨‹åº</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">E:\MS-Redis\Redis</span><br><span class="line">Î» redis-cli.exe # è¿è¡Œå®¢æˆ·ç«¯ç¨‹åºçš„å‘½ä»¤</span><br><span class="line">127.0.0.1:6379&gt; set firstKey HelloRedis~</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get firstKey</span><br><span class="line">&quot;HelloRedis~&quot;</span><br></pre></td></tr></table></figure></li></ol><h3 id="Redisé»˜è®¤æœåŠ¡å®‰è£…"><a href="#Redisé»˜è®¤æœåŠ¡å®‰è£…" class="headerlink" title="Redisé»˜è®¤æœåŠ¡å®‰è£…"></a>Redisé»˜è®¤æœåŠ¡å®‰è£…</h3><p><em>è¿›å…¥Rediså®‰è£…åŒ…ç›®å½•,æ‰§è¡Œå°†Redisæ³¨å†Œä¸ºæœåŠ¡çš„å‘½ä»¤,æ‰§è¡Œè¯¥å‘½ä»¤åServicesåˆ—è¡¨ä¸­å°†å‡ºç°<code>Redis</code>æœåŠ¡,ä½†æ­¤æ—¶è¯¥æœåŠ¡å¹¶éå¯åŠ¨çŠ¶æ€,éœ€è¦æ‰§è¡ŒRediså¯åŠ¨å‘½ä»¤æ¥å¯åŠ¨æœåŠ¡,å¯åŠ¨æœåŠ¡å,å³å¯è¿è¡Œå®¢æˆ·ç«¯ç¨‹åºå“Ÿ ~</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">E:\MS-Redis\Redis </span><br><span class="line">Î» redis-server --service-install redis.windows.conf # å°†Redisæ³¨å†Œä¸ºæœåŠ¡çš„å‘½ä»¤</span><br><span class="line"></span><br><span class="line">E:\MS-Redis\Redis</span><br><span class="line">Î» redis-server --service-start # å¯åŠ¨æœåŠ¡å‘½ä»¤</span><br><span class="line">[18704] 25 Jun 17:55:33.957 # Redis service successfully started.</span><br><span class="line"></span><br><span class="line">E:\MS-Redis\Redis</span><br><span class="line">Î» redis-cli.exe # è¿è¡Œå®¢æˆ·ç«¯ç¨‹åºçš„å‘½ä»¤</span><br><span class="line">127.0.0.1:6379&gt; set firstKey helloRedis~</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get firstKey</span><br><span class="line">&quot;helloRedis~&quot;</span><br><span class="line">127.0.0.1:6379&gt; exit # é€€å‡º</span><br><span class="line"></span><br><span class="line">E:\MS-Redis\Redis</span><br><span class="line">Î» redis-server --service-stop # åœæ­¢å‘½ä»¤å‘½ä»¤</span><br><span class="line">[7784] 25 Jun 18:09:43.467 # Redis service successfully stopped.</span><br><span class="line"></span><br><span class="line">E:\MS-Redis\Redis</span><br><span class="line">Î» redis-server --service-uninstall # å¸è½½æœåŠ¡å‘½ä»¤</span><br><span class="line">[11968] 25 Jun 18:13:44.417 # Redis service successfully uninstalled.</span><br></pre></td></tr></table></figure></p><ul><li><em>å‚è€ƒä¹¦ç± : Redis 4.x CookBook â€”â€”é»„é¹ç¨‹,ç‹å·¦é Â· è‘—</em></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-æ‹¥æŠ±Redis&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-æ‹¥æŠ±Redis&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : æ‹¥æŠ±Redis ~&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : æ‹¥æŠ±Redis ~&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ç®€ä»‹ : &lt;code&gt;Redis&lt;/
      
    
    </summary>
    
    
      <category term="Redis" scheme="http://yoursite.com/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Hi Spring Boot ~</title>
    <link href="http://yoursite.com/2019/06/23/Hi-Spring-Boot/"/>
    <id>http://yoursite.com/2019/06/23/Hi-Spring-Boot/</id>
    <published>2019-06-23T14:18:06.000Z</published>
    <updated>2019-06-24T14:51:53.363Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-æ‹¥æŠ±Spring-Boot"><a href="#å­¦ä¹ ç¬”è®°-æ‹¥æŠ±Spring-Boot" class="headerlink" title="å­¦ä¹ ç¬”è®° : æ‹¥æŠ±Spring Boot"></a>å­¦ä¹ ç¬”è®° : æ‹¥æŠ±Spring Boot</h2><p><em>ç®€ä»‹ : éšç€æ³¨è§£çš„åŠŸèƒ½å¢å¼º,å°¤å…¶æ˜¯<code>Servlet 3.0</code>è§„èŒƒçš„æå‡º,Webå®¹å™¨å¯ä»¥è„±ç¦»<code>web.xml</code>çš„éƒ¨ç½²,ä½¿å¾—Webå®¹å™¨å®Œå…¨å¯ä»¥åŸºäºæ³¨è§£å¼€å‘,å¯¹äº<code>Spring 3.x</code>å’Œ<code>Spring 4.x</code>çš„ç‰ˆæœ¬æ³¨è§£åŠŸèƒ½è¶Šæ¥è¶Šå¼ºå¤§,å¯¹äº<code>XML</code>çš„ä¾èµ–è¶Šæ¥è¶Šå°‘,åˆ°äº†4.xçš„ç‰ˆæœ¬åç”šè‡³å¯ä»¥å®Œå…¨è„±ç¦»XML,å› æ­¤åœ¨Springä¸­ä½¿ç”¨æ³¨è§£å¼€å‘å æ®äº†ä¸»æµçš„åœ°ä½. äºæ­¤åŒæ—¶,Pivotalå›¢é˜Ÿåœ¨åŸæœ‰SpringåŸºç¡€ä¸Šä¸»è¦é€šè¿‡æ³¨è§£çš„æ–¹å¼ç»§ç»­ç®€åŒ–äº†Springæ¡†æ¶çš„å¼€å‘,ä»–ä»¬åŸºäºSpringæ¡†æ¶å¼€å‘äº†<code>Spring Boot</code>,æ‰€ä»¥Spring Bootå¹¶éæ˜¯ä»£æ›¿Springæ¡†æ¶,è€Œæ˜¯è®©Springæ¡†æ¶æ›´åŠ å®¹æ˜“ä½¿ç”¨å“Ÿ ~</em></p><h3 id="Spring-Bootçš„ä¼˜ç‚¹"><a href="#Spring-Bootçš„ä¼˜ç‚¹" class="headerlink" title="Spring Bootçš„ä¼˜ç‚¹"></a>Spring Bootçš„ä¼˜ç‚¹</h3><ul><li><em>åˆ›å»ºç‹¬ç«‹çš„Springåº”ç”¨ç¨‹åº</em></li><li><em>åµŒå…¥çš„Tomcat,Jettyæˆ–Undertow,æ— é¡»éƒ¨ç½²WARæ–‡ä»¶</em></li><li><em>å…è®¸é€šè¿‡Mavenæ¥æ ¹æ®éœ€è¦è·å–<code>starter</code></em></li><li><em>å°½å¯èƒ½åœ°è‡ªåŠ¨é…ç½®Spring</em></li><li><em>æä¾›ç”Ÿäº§å°±ç»ªå‹åŠŸèƒ½,å¦‚æŒ‡æ ‡,å¥åº·æ£€æŸ¥å’Œå¤–éƒ¨é…ç½®</em></li><li><em>ç»å¯¹æ²¡æœ‰ä»£ç ç”Ÿæˆ,å¯¹XMLæ²¡æœ‰è¦æ±‚é…ç½®</em></li></ul><h3 id="ç¬¬ä¸€ä¸ªSpring-Bootç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªSpring-Bootç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªSpring Bootç¨‹åº"></a>ç¬¬ä¸€ä¸ªSpring Bootç¨‹åº</h3><ol><li><p><em>DemoApplication.java : Spring bootå¯åŠ¨ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>MyController.java : Spring mvcæ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: first-spring-boot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: è‡ªå®šä¹‰æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: é»„å®‡è¾‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/23/2019-9:59 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hi Spring Boot! it's so simple ~"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>å¯åŠ¨é¡¹ç›®çš„æ–¹å¼æœ‰ä¸‰ç§,å¦‚ä¸‹æ‰€ç¤º. å¯åŠ¨æˆåŠŸååœ¨æµè§ˆå™¨ä¸­è¾“å…¥:<code>http://localhost:8080/hello</code>å³å¯çœ‹åˆ°å¦‚ä¸‹å›¾çš„è¿è¡Œç»“æœ.</em></p></li><li><em>ä½¿ç”¨Mavenå‘½ä»¤è¿è¡Œé¡¹ç›® : <code>mvn spring-boot:run</code></em></li><li><em>ç›´æ¥è¿è¡ŒDemoApplication.javaä¸­çš„mainæ–¹æ³•</em></li><li><em>æ‰“åŒ…è¿è¡Œ : å°†Spring bootæ‰“æˆjaråŒ…åä½¿ç”¨<code>mvn package</code>è¿è¡Œ</em></li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/06/23/Hi-Spring-Boot/Hi-Spring-Boot.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="æ¨èä¹¦ç±"><a href="#æ¨èä¹¦ç±" class="headerlink" title="æ¨èä¹¦ç±"></a>æ¨èä¹¦ç±</h3><ul><li><em>æ·±å…¥æµ…å‡ºSpring Boot 2.x â€”â€”æ¨å¼€æŒ¯ Â· è‘—</em></li><li><em>Spring Boot+Vueå…¨æ ˆå¼€å‘å®æˆ˜ â€”â€”ç‹æ¾ Â· è‘—</em></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-æ‹¥æŠ±Spring-Boot&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-æ‹¥æŠ±Spring-Boot&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : æ‹¥æŠ±Spring Boot&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : æ‹¥æŠ±Spring Boot&lt;/h2&gt;&lt;p&gt;&lt;e
      
    
    </summary>
    
    
      <category term="Spring Boot" scheme="http://yoursite.com/tags/Spring-Boot/"/>
    
  </entry>
  
  <entry>
    <title>How to support full Unicode in MySQL databases</title>
    <link href="http://yoursite.com/2019/06/23/How-to-support-full-Unicode-in-MySQL-databases/"/>
    <id>http://yoursite.com/2019/06/23/How-to-support-full-Unicode-in-MySQL-databases/</id>
    <published>2019-06-23T00:28:41.000Z</published>
    <updated>2019-06-23T01:05:01.356Z</updated>
    
    <content type="html"><![CDATA[<h2 id="How-to-support-full-Unicode-in-MySQL-databases-Â·-Mathias-Bynens"><a href="#How-to-support-full-Unicode-in-MySQL-databases-Â·-Mathias-Bynens" class="headerlink" title="How to support full Unicode in MySQL databases Â· Mathias Bynens"></a>How to support full Unicode in MySQL databases Â· Mathias Bynens</h2><p>ğŸ˜‚<em>Alternative title: The things we do to store U+1F4A9 PILE OF POO (ğŸ’©) correctly.</em></p><p><em>Are you using MySQLâ€™s utf8 charset in your databases? In this write-up Iâ€™ll explain why you should switch to utf8mb4 instead, and how to do it.</em></p><h2 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h2><p><em>The UTF-8 encoding can represent every symbol in the Unicode character set, which ranges from U+000000 to U+10FFFF. Thatâ€™s 1,114,112 possible symbols. (Not all of these Unicode code points have been assigned characters yet, but that doesnâ€™t stop UTF-8 from being able to encode them.)</em></p><p><em>UTF-8 is a variable-width encoding; it encodes each symbol using one to four 8-bit bytes. Symbols with lower numerical code point values are encoded using fewer bytes. This way, UTF-8 is optimized for the common case where ASCII characters and other BMP symbols (whose code points range from U+000000 to U+00FFFF) are used â€” while still allowing astral symbols (whose code points range from U+010000 to U+10FFFF) to be stored.</em></p><h2 id="MySQLâ€™s-utf8"><a href="#MySQLâ€™s-utf8" class="headerlink" title="MySQLâ€™s utf8"></a>MySQLâ€™s utf8</h2><p><em>For a long time, I was using MySQLâ€™s utf8 charset for databases, tables, and columns, assuming it mapped to the UTF-8 encoding described above. By using utf8, Iâ€™d be able to store any symbol I want in my database â€” or so I thought.</em></p><p><em>While writing about JavaScriptâ€™s internal character encoding, I noticed that there was no way to insert the U+1D306 TETRAGRAM FOR CENTRE (ğŒ†) symbol into the MySQL database behind this site. The column I was trying to update had the utf8_unicode_ci collation, and the connection charset was set to utf8.</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># just to emphasize that the connection charset is set to `utf8`</span><br><span class="line">mysql&gt; SET NAMES utf8; </span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; UPDATE database_name.table_name SET column_name = &apos;fooğŒ†bar&apos; WHERE id = 9001;</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 1</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT column_name FROM database_name.table_name WHERE id = 9001;</span><br><span class="line">+-------------+</span><br><span class="line">| column_name |</span><br><span class="line">+-------------+</span><br><span class="line">| foo         |</span><br><span class="line">+-------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p><em>The content got truncated at the first astral Unicode symbol, in this case ğŒ† â€” so, attempting to insert fooğŒ†bar actually inserted foo instead, resulting in data loss (and possibly introducing security issues; see below). MySQL returned a warning message, too:</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW WARNINGS;</span><br><span class="line">+---------+------+------------------------------------------------------------------------------+</span><br><span class="line">| Level   | Code | Message                                                                      |</span><br><span class="line">+---------+------+------------------------------------------------------------------------------+</span><br><span class="line">| Warning | 1366 | Incorrect string value: &apos;\xF0\x9D\x8C\x86&apos; for column &apos;column_name&apos; at row 1 |</span><br><span class="line">+---------+------+------------------------------------------------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p><em>Turns out MySQLâ€™s utf8 charset only partially implements proper UTF-8 encoding. It can only store UTF-8-encoded symbols that consist of one to three bytes; encoded symbols that take up four bytes arenâ€™t supported.</em></p><p><em>Since astral symbols (whose code points range from U+010000 to U+10FFFF) each consist of four bytes in UTF-8, you cannot store them using MySQLâ€™s utf8 implementation.</em></p><p><em>This doesnâ€™t just affect the ğŒ† character, but more important symbols like U+01F4A9 PILE OF POO (ğŸ’©) as well. In total, thatâ€™s 1,048,575 possible code points you canâ€™t use. In fact, MySQLâ€™s utf8 only allows you to store 5.88% ((0x00FFFF + 1) / (0x10FFFF + 1)) of all possible Unicode code points. Proper UTF-8 can encode 100% of all Unicode code points.</em></p><p><em>As shown above, <code>this behavior can lead to data loss</code>, but it gets worse â€” it can result in security vulnerabilities.MySQLâ€™s utf8 encoding is awkwardly named, as itâ€™s different from proper UTF-8 encoding. It doesnâ€™t offer full Unicode support, which can lead to data loss or security vulnerabilities.</em></p><h2 id="MySQLâ€™s-utf8mb4"><a href="#MySQLâ€™s-utf8mb4" class="headerlink" title="MySQLâ€™s utf8mb4"></a>MySQLâ€™s utf8mb4</h2><p><em>Luckily, <code>MySQL 5.5.3 (released in early 2010)</code> introduced a new encoding called utf8mb4 which maps to proper UTF-8 and thus fully supports Unicode, including astral symbols.</em></p><p><em>Switching from MySQLâ€™s utf8 to utf8mb4</em></p><h3 id="Step-1-Create-a-backup"><a href="#Step-1-Create-a-backup" class="headerlink" title="Step 1: Create a backup"></a>Step 1: Create a backup</h3><p><em>Create a backup of all the databases on the server you want to upgrade. Safety first!</em></p><h3 id="Step-2-Upgrade-the-MySQL-server"><a href="#Step-2-Upgrade-the-MySQL-server" class="headerlink" title="Step 2: Upgrade the MySQL server"></a>Step 2: Upgrade the MySQL server</h3><p><em>Upgrade the MySQL server to v5.5.3+, or ask your server administrator to do it for you.</em></p><h3 id="Step-3-Modify-databases-tables-and-columns"><a href="#Step-3-Modify-databases-tables-and-columns" class="headerlink" title="Step 3: Modify databases, tables, and columns"></a>Step 3: Modify databases, tables, and columns</h3><p><em>Change the character set and collation properties of the databases, tables, and columns to use utf8mb4 instead of utf8.</em></p><ul><li>For each database :<br><em><code>ALTER DATABASE database_name CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci</code>;</em></li><li>For each table :<br><em><code>ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci</code>;</em></li><li>For each column :<br><em><code>ALTER TABLE table_name CHANGE column_name column_name VARCHAR(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci</code>;</em></li><li>(Donâ€™t blindly copy-paste this! The exact statement depends on the column type, maximum length, and other properties. The above line is just an example for a <code>VARCHAR</code> column.)<br>Since utf8mb4 is fully backwards compatible with utf8, no mojibake or other forms of data loss should occur. (But you have a backup, right?)</li></ul><h3 id="Step-4-Check-the-maximum-length-of-columns-and-index-keys"><a href="#Step-4-Check-the-maximum-length-of-columns-and-index-keys" class="headerlink" title="Step 4: Check the maximum length of columns and index keys"></a>Step 4: Check the maximum length of columns and index keys</h3><p><em>This is probably the most tedious part of the whole upgrading process.</em></p><p><em>When converting from utf8 to utf8mb4, the maximum length of a column or index key is unchanged in terms of bytes. Therefore, it is smaller in terms of characters, because the maximum length of a character is now four bytes instead of three.</em></p><p><em>For example, a TINYTEXT column can hold up to 255 bytes, which correlates to 85 three-byte or 63 four-byte characters. Letâ€™s say you have a TINYTEXT column that uses utf8 but must be able to contain more than 63 characters. Given this requirement, you canâ€™t convert this column to utf8mb4 unless you also change the data type to a longer type such as TEXT â€” because if youâ€™d try to fill it with four-byte characters, youâ€™d only be able to enter 63 characters, but not more.</em></p><p><em>The same goes for index keys. The InnoDB storage engine has a maximum index length of 767 bytes, so for utf8 or utf8mb4 columns, you can index a maximum of 255 or 191 characters, respectively. If you currently have utf8 columns with indexes longer than 191 characters,you will need to index a smaller number of characters when using utf8mb4. (Because of this, I had to change some indexed VARCHAR(255) columns to VARCHAR(191).)</em></p><p><em>Section 10.1.11 of the <code>MySQL 5.5</code> Reference Manual has some more information on this.</em></p><h3 id="Step-5-Modify-connection-client-and-server-character-sets"><a href="#Step-5-Modify-connection-client-and-server-character-sets" class="headerlink" title="Step 5: Modify connection, client, and server character sets"></a>Step 5: Modify connection, client, and server character sets</h3><p><em>In your application code, set the connection character set to utf8mb4. This can be done by simply replacing any variants of SET NAMES utf8 with SET NAMES utf8mb4. If your old SET NAMES statement specified the collation, make sure to change that as well, e.g. <code>SET NAMES utf8 COLLATE utf8_unicode_ci becomes SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci.</code></em></p><p><em>Make sure to set the client and server character set as well. I have the following in my MySQL configuration file (<code>/etc/my.cnf</code>):</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set = utf8mb4</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set = utf8mb4</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">character-set-client-handshake = FALSE</span><br><span class="line">character-set-server = utf8mb4</span><br><span class="line">collation-server = utf8mb4_unicode_ci</span><br></pre></td></tr></table></figure></p><p><em>You can easily confirm these settings work correctly:</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW VARIABLES WHERE Variable_name LIKE &apos;character\_set\_%&apos; OR Variable_name LIKE &apos;collation%&apos;;</span><br><span class="line">+--------------------------+--------------------+</span><br><span class="line">| Variable_name            | Value              |</span><br><span class="line">+--------------------------+--------------------+</span><br><span class="line">| character_set_client     | utf8mb4            |</span><br><span class="line">| character_set_connection | utf8mb4            |</span><br><span class="line">| character_set_database   | utf8mb4            |</span><br><span class="line">| character_set_filesystem | binary             |</span><br><span class="line">| character_set_results    | utf8mb4            |</span><br><span class="line">| character_set_server     | utf8mb4            |</span><br><span class="line">| character_set_system     | utf8               |</span><br><span class="line">| collation_connection     | utf8mb4_unicode_ci |</span><br><span class="line">| collation_database       | utf8mb4_unicode_ci |</span><br><span class="line">| collation_server         | utf8mb4_unicode_ci |</span><br><span class="line">+--------------------------+--------------------+</span><br><span class="line">10 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p><p>As you can see, all the relevant options are set to utf8mb4, except for character_set_filesystem which should be binary unless youâ€™re on a file system that supports multi-byte UTF-8-encoded characters in file names, and character_set_system which is always utf8 and canâ€™t be overridden.</p><ul><li><em><code>Note: The default character set and collation can be configured at some other levels as well.</code></em></li></ul><h3 id="Step-6-Repair-and-optimize-all-tables"><a href="#Step-6-Repair-and-optimize-all-tables" class="headerlink" title="Step 6: Repair and optimize all tables"></a>Step 6: Repair and optimize all tables</h3><p><em>After upgrading the MySQL server and making the necessary changes explained above, make sure to repair and optimize all databases and tables. I didnâ€™t do this right away after upgrading (I didnâ€™t think it was necessary, as everything seemed to work fine at first glance), and ran into some weird bugs where UPDATE statements didnâ€™t have any effect, even though no errors were thrown.</em></p><p><em>You could run the following MySQL queries for each table you want to repair and optimize:</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># For each table</span><br><span class="line">REPAIR TABLE table_name;</span><br><span class="line">OPTIMIZE TABLE table_name;</span><br></pre></td></tr></table></figure></p><p><em>Luckily, this can easily be done in one go using the command-line mysqlcheck utility:</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysqlcheck -u root -p --auto-repair --optimize --all-databases</span><br></pre></td></tr></table></figure></p><p><em>This will prompt for the root userâ€™s password, after which all tables in all databases will be repaired and optimized.</em></p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p><em><code>Never use utf8 in MySQL â€” always use utf8mb4 instead.</code> Updating your databases and code might take some time, but itâ€™s definitely worth the effort. Why would you arbitrarily limit the set of symbols that can be used in your database? Why would you lose data every time a user enters an astral symbol as part of a comment or message or whatever it is you store in your database? Thereâ€™s no reason not to strive for full Unicode support everywhere. Do the right thing, and use utf8mb4. ğŸ» ãƒ¾(ï¿£â–½ï¿£)Bye~Bye~</em></p><ul><li><em>ğŸ™‚expressing thanks : <a href="https://mathiasbynens.be/notes/mysql-utf8mb4#utf8-to-utf8mb4" target="_blank" rel="noopener">https://mathiasbynens.be/notes/mysql-utf8mb4#utf8-to-utf8mb4</a></em></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;How-to-support-full-Unicode-in-MySQL-databases-Â·-Mathias-Bynens&quot;&gt;&lt;a href=&quot;#How-to-support-full-Unicode-in-MySQL-databases-Â·-Mathias-
      
    
    </summary>
    
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>SSMé¡¹ç›®:å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ</title>
    <link href="http://yoursite.com/2019/06/22/SSM%E9%A1%B9%E7%9B%AE-%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <id>http://yoursite.com/2019/06/22/SSMé¡¹ç›®-å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ/</id>
    <published>2019-06-22T13:48:14.000Z</published>
    <updated>2019-06-30T12:57:17.846Z</updated>
    
    <content type="html"><![CDATA[<h2 id="a-simple-student-management-system-created-by-SSM-framework"><a href="#a-simple-student-management-system-created-by-SSM-framework" class="headerlink" title="a simple student management system , created by SSM framework ~"></a>a simple student management system , created by SSM framework ~</h2><ul><li><em>æˆ‘çš„ç¬¬äºŒä¸ª<code>SSM</code>å°é¡¹ç›® ï¼ˆã¥ï¿£3ï¿£ï¼‰ã¥â•­â¤ï½</em></li><li><em>èµ¶ç´§æ¥å­¦ä¹ å§ ! æœŸå¾…ä½ çš„<code>issues</code>å“Ÿ(ã£â€¢Ì€Ï‰â€¢Ì)ã£âœâ¾â¾~ è¯¥é¡¹ç›®åœ°å€ : <a href="https://github.com/YUbuntu0109/SSM-SMS" target="_blank" rel="noopener">https://github.com/YUbuntu0109/SSM-SMS</a></em></li></ul><h3 id="é¡¹ç›®æ¦‚è¿°"><a href="#é¡¹ç›®æ¦‚è¿°" class="headerlink" title="é¡¹ç›®æ¦‚è¿°"></a>é¡¹ç›®æ¦‚è¿°</h3><p><em>ä¸€ä¸ªåŸºäºSSMçš„å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ : ä»£ç æ³¨é‡Šè¯¦ç»†,é€»è¾‘ç»“æ„æ¸…æ™°,éå¸¸å…·æœ‰å‚è€ƒ,å­¦ä¹ ä»·å€¼å“Ÿ !æ•°æ®åº“ä¸­é»˜è®¤çš„ç®¡ç†å‘˜èº«ä»½ä¿¡æ¯ : è´¦æˆ·å : <code>é»„å®‡è¾‰</code> , å¯†ç  <code>demo0109</code></em></p><h3 id="ç”¨æˆ·æƒé™ä»‹ç»"><a href="#ç”¨æˆ·æƒé™ä»‹ç»" class="headerlink" title="ç”¨æˆ·æƒé™ä»‹ç»"></a>ç”¨æˆ·æƒé™ä»‹ç»</h3><ul><li><em>ç®¡ç†å‘˜ : å…·æœ‰æ‰€æœ‰ç®¡ç†æ¨¡å—çš„æ“æ§æƒé™</em></li><li><em>æ•™å¸ˆ : ä»…å…·æœ‰å­¦ç”Ÿä¿¡æ¯ç®¡ç†æ¨¡å—çš„æ‰€æœ‰æƒé™,ä¸”åœ¨æ•™å¸ˆä¿¡æ¯ç®¡ç†æ¨¡å—ä¸­åªå…·æœ‰æŸ¥è¯¢åŠæ·»åŠ ä¿¡æ¯çš„æƒé™</em></li><li><em>å­¦ç”Ÿ : ä»…å…·æœ‰å­¦ç”Ÿä¿¡æ¯ç®¡ç†æ¨¡å—çš„æŸ¥è¯¢åŠæ·»åŠ ä¿¡æ¯çš„æƒé™</em></li></ul><h3 id="é¡¹ç›®æˆªå›¾-ç®¡ç†å‘˜èº«ä»½ç™»å½•"><a href="#é¡¹ç›®æˆªå›¾-ç®¡ç†å‘˜èº«ä»½ç™»å½•" class="headerlink" title="é¡¹ç›®æˆªå›¾ (ç®¡ç†å‘˜èº«ä»½ç™»å½•)"></a>é¡¹ç›®æˆªå›¾ (<code>ç®¡ç†å‘˜èº«ä»½ç™»å½•</code>)</h3><ul><li><em>ç”¨æˆ·ç™»å½•é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SMS-Login-view.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>ç³»ç»Ÿä¸»é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SSM-Main-view.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>ç®¡ç†å‘˜ä¿¡æ¯ç®¡ç†é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SSM-AdminInfo-view.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SMS-StudentInfo-view.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>æ•™å¸ˆä¿¡æ¯ç®¡ç†é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SMS-TeacherInfo-view.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>å¹´çº§ä¿¡æ¯ç®¡ç†é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SMS-GradeInfo-view.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>ç­çº§ä¿¡æ¯ç®¡ç†é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SMS-ClassInfo-view.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>ä¸ªäººä¿¡æ¯ç®¡ç†é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SMS-ModifyPwd-view.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="é¡¹ç›®æˆªå›¾-æ•™å¸ˆèº«ä»½ç™»å½•"><a href="#é¡¹ç›®æˆªå›¾-æ•™å¸ˆèº«ä»½ç™»å½•" class="headerlink" title="é¡¹ç›®æˆªå›¾ (æ•™å¸ˆèº«ä»½ç™»å½•)"></a>é¡¹ç›®æˆªå›¾ (<code>æ•™å¸ˆèº«ä»½ç™»å½•</code>)</h3><ul><li><em>æ•™å¸ˆä»…å…·æœ‰å­¦ç”Ÿä¿¡æ¯ç®¡ç†æ¨¡å—çš„æ‰€æœ‰æƒé™,ä¸”åœ¨æ•™å¸ˆä¿¡æ¯ç®¡ç†æ¨¡å—ä¸­åªå…·æœ‰æŸ¥è¯¢åŠæ·»åŠ ä¿¡æ¯çš„æƒé™</em><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SMS-Teacher-permission.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></li></ul><h3 id="é¡¹ç›®æˆªå›¾-å­¦ç”Ÿèº«ä»½ç™»å½•"><a href="#é¡¹ç›®æˆªå›¾-å­¦ç”Ÿèº«ä»½ç™»å½•" class="headerlink" title="é¡¹ç›®æˆªå›¾ (å­¦ç”Ÿèº«ä»½ç™»å½•)"></a>é¡¹ç›®æˆªå›¾ (<code>å­¦ç”Ÿèº«ä»½ç™»å½•</code>)</h3><ul><li><em>å­¦ç”Ÿä»…å…·æœ‰å­¦ç”Ÿä¿¡æ¯ç®¡ç†æ¨¡å—çš„æŸ¥è¯¢åŠæ·»åŠ ä¿¡æ¯çš„æƒé™</em><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SMS-Student-permission.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure></li></ul><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">â”‚  .gitattributes</span><br><span class="line">â”‚  LICENSE</span><br><span class="line">â”‚  README.md</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€database file</span><br><span class="line">â”‚      ssm_sms.sql</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€demonstration_picture</span><br><span class="line">â”‚      SMS-ClassInfo-view.PNG</span><br><span class="line">â”‚      SMS-GradeInfo-view.PNG</span><br><span class="line">â”‚      SMS-Login-view.PNG</span><br><span class="line">â”‚      SMS-ModifyPwd-view.PNG</span><br><span class="line">â”‚      SMS-Student-permission.PNG</span><br><span class="line">â”‚      SMS-StudentInfo-view.PNG</span><br><span class="line">â”‚      SMS-Teacher-permission.PNG</span><br><span class="line">â”‚      SMS-TeacherInfo-view.PNG</span><br><span class="line">â”‚      SSM-AdminInfo-view.PNG</span><br><span class="line">â”‚      SSM-Main-view.PNG</span><br><span class="line">â”‚</span><br><span class="line">â””â”€sms</span><br><span class="line">    â”‚  pom.xml</span><br><span class="line">    â”‚</span><br><span class="line">    â”œâ”€.idea</span><br><span class="line">    â”‚  â”‚(ç•¥..)</span><br><span class="line">    â”‚  </span><br><span class="line">    â”‚</span><br><span class="line">    â””â”€src</span><br><span class="line">        â””â”€main</span><br><span class="line">            â”œâ”€java</span><br><span class="line">            â”‚  â””â”€pers</span><br><span class="line">            â”‚      â””â”€huangyuhui</span><br><span class="line">            â”‚          â””â”€sms</span><br><span class="line">            â”‚              â”œâ”€bean</span><br><span class="line">            â”‚              â”‚      Admin.java</span><br><span class="line">            â”‚              â”‚      Clazz.java</span><br><span class="line">            â”‚              â”‚      Grade.java</span><br><span class="line">            â”‚              â”‚      LoginForm.java</span><br><span class="line">            â”‚              â”‚      Student.java</span><br><span class="line">            â”‚              â”‚      Teacher.java</span><br><span class="line">            â”‚              â”‚</span><br><span class="line">            â”‚              â”œâ”€controller</span><br><span class="line">            â”‚              â”‚      AdminController.java</span><br><span class="line">            â”‚              â”‚      ClazzController.java</span><br><span class="line">            â”‚              â”‚      CommonController.java</span><br><span class="line">            â”‚              â”‚      GradeController.java</span><br><span class="line">            â”‚              â”‚      StudentController.java</span><br><span class="line">            â”‚              â”‚      SystemController.java</span><br><span class="line">            â”‚              â”‚      TeacherController.java</span><br><span class="line">            â”‚              â”‚</span><br><span class="line">            â”‚              â”œâ”€dao</span><br><span class="line">            â”‚              â”‚      AdminMapper.java</span><br><span class="line">            â”‚              â”‚      ClazzMapper.java</span><br><span class="line">            â”‚              â”‚      GradeMapper.java</span><br><span class="line">            â”‚              â”‚      StudentMapper.java</span><br><span class="line">            â”‚              â”‚      TeacherMapper.java</span><br><span class="line">            â”‚              â”‚</span><br><span class="line">            â”‚              â”œâ”€interceptor</span><br><span class="line">            â”‚              â”‚      LoginInterceptor.java</span><br><span class="line">            â”‚              â”‚</span><br><span class="line">            â”‚              â”œâ”€service</span><br><span class="line">            â”‚              â”‚  â”‚  AdminService.java</span><br><span class="line">            â”‚              â”‚  â”‚  ClazzService.java</span><br><span class="line">            â”‚              â”‚  â”‚  GradeService.java</span><br><span class="line">            â”‚              â”‚  â”‚  StudentService.java</span><br><span class="line">            â”‚              â”‚  â”‚  TeacherService.java</span><br><span class="line">            â”‚              â”‚  â”‚</span><br><span class="line">            â”‚              â”‚  â””â”€impl</span><br><span class="line">            â”‚              â”‚          AdminServiceImpl.java</span><br><span class="line">            â”‚              â”‚          ClazzServiceImpl.java</span><br><span class="line">            â”‚              â”‚          GradeServiceImpl.java</span><br><span class="line">            â”‚              â”‚          StudentServiceImpl.java</span><br><span class="line">            â”‚              â”‚          TeacherServiceImpl.java</span><br><span class="line">            â”‚              â”‚</span><br><span class="line">            â”‚              â””â”€util</span><br><span class="line">            â”‚                      CreateVerifiCodeImage.java</span><br><span class="line">            â”‚                      UploadFile.java</span><br><span class="line">            â”‚</span><br><span class="line">            â”œâ”€resource</span><br><span class="line">            â”‚  â”œâ”€database-conf</span><br><span class="line">            â”‚  â”‚      c3p0.properties</span><br><span class="line">            â”‚  â”‚</span><br><span class="line">            â”‚  â”œâ”€mapper</span><br><span class="line">            â”‚  â”‚      AdminMapper.xml</span><br><span class="line">            â”‚  â”‚      ClazzMapper.xml</span><br><span class="line">            â”‚  â”‚      GradeMapper.xml</span><br><span class="line">            â”‚  â”‚      StudentMapper.xml</span><br><span class="line">            â”‚  â”‚      TeacherMapper.xml</span><br><span class="line">            â”‚  â”‚</span><br><span class="line">            â”‚  â”œâ”€mybatis-conf</span><br><span class="line">            â”‚  â”‚      mybatis-config.xml</span><br><span class="line">            â”‚  â”‚</span><br><span class="line">            â”‚  â””â”€spring-conf</span><br><span class="line">            â”‚          applicationContext.xml</span><br><span class="line">            â”‚          springmvc-config.xml</span><br><span class="line">            â”‚</span><br><span class="line">            â””â”€webapp</span><br><span class="line">                â”‚  index.jsp</span><br><span class="line">                â”‚</span><br><span class="line">                â”œâ”€image</span><br><span class="line">                â”‚  â””â”€portrait</span><br><span class="line">                â”‚          default_admin_portrait.png</span><br><span class="line">                â”‚          default_student_portrait.png</span><br><span class="line">                â”‚          default_teacher_portrait.png</span><br><span class="line">                â”‚</span><br><span class="line">                â”œâ”€static</span><br><span class="line">                â”‚  â”œâ”€easyui</span><br><span class="line">                â”‚  â”‚  â”‚  </span><br><span class="line">                â”‚  â”‚  â”œâ”€css     </span><br><span class="line">                â”‚  â”‚  â”‚</span><br><span class="line">                â”‚  â”‚  â”œâ”€js    </span><br><span class="line">                â”‚  â”‚  â”‚</span><br><span class="line">                â”‚  â”‚  â””â”€themes</span><br><span class="line">                â”‚  â”‚     </span><br><span class="line">                â”‚  â”‚</span><br><span class="line">                â”‚  â””â”€h-ui</span><br><span class="line">                â”‚      â”‚(ç•¥..)</span><br><span class="line">                â”‚        </span><br><span class="line">                â”‚            </span><br><span class="line">                â”‚</span><br><span class="line">                â””â”€WEB-INF</span><br><span class="line">                    â”‚  web.xml</span><br><span class="line">                    â”‚</span><br><span class="line">                    â””â”€view</span><br><span class="line">                        â”œâ”€admin</span><br><span class="line">                        â”‚      adminList.jsp</span><br><span class="line">                        â”‚</span><br><span class="line">                        â”œâ”€clazz</span><br><span class="line">                        â”‚      clazzList.jsp</span><br><span class="line">                        â”‚</span><br><span class="line">                        â”œâ”€common</span><br><span class="line">                        â”‚      settings.jsp</span><br><span class="line">                        â”‚</span><br><span class="line">                        â”œâ”€error</span><br><span class="line">                        â”‚      404.jsp</span><br><span class="line">                        â”‚      500.jsp</span><br><span class="line">                        â”‚</span><br><span class="line">                        â”œâ”€grade</span><br><span class="line">                        â”‚      gradeList.jsp</span><br><span class="line">                        â”‚</span><br><span class="line">                        â”œâ”€student</span><br><span class="line">                        â”‚      studentList.jsp</span><br><span class="line">                        â”‚</span><br><span class="line">                        â”œâ”€system</span><br><span class="line">                        â”‚      intro.jsp</span><br><span class="line">                        â”‚      login.jsp</span><br><span class="line">                        â”‚      main.jsp</span><br><span class="line">                        â”‚</span><br><span class="line">                        â””â”€teacher</span><br><span class="line">                                teacherList.jsp</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“æ–‡ä»¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“æ–‡ä»¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“æ–‡ä»¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>æ•°æ®åº“æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssm_sms.sql</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“é…ç½®ä¿¡æ¯"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“é…ç½®ä¿¡æ¯" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“é…ç½®ä¿¡æ¯"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>æ•°æ®åº“é…ç½®ä¿¡æ¯</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c3p0.properties</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-H-ui-å‰ç«¯æ¡†æ¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-H-ui-å‰ç«¯æ¡†æ¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-H-ui å‰ç«¯æ¡†æ¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>H-ui å‰ç«¯æ¡†æ¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h-ui/</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-EasyUI-å‰ç«¯æ¡†æ¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-EasyUI-å‰ç«¯æ¡†æ¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-EasyUI å‰ç«¯æ¡†æ¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>EasyUI å‰ç«¯æ¡†æ¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">easyui/</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-Spring-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-Spring-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-Spring æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>Spring æ ¸å¿ƒé…ç½®æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">applicationContext.xml</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-Spring-MVC-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-Spring-MVC-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-Spring MVC æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>Spring MVC æ ¸å¿ƒé…ç½®æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">springmvc-config.xml</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-MyBatis-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-MyBatis-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-MyBatis æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>MyBatis æ ¸å¿ƒé…ç½®æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mybatis-config.xml</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-Mapper-æ¥å£æ˜ å°„æ–‡ä»¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-Mapper-æ¥å£æ˜ å°„æ–‡ä»¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-Mapper æ¥å£æ˜ å°„æ–‡ä»¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>Mapper æ¥å£æ˜ å°„æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mapper/</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-ç”¨æˆ·é»˜è®¤å¤´åƒ"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-ç”¨æˆ·é»˜è®¤å¤´åƒ" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-ç”¨æˆ·é»˜è®¤å¤´åƒ"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>ç”¨æˆ·é»˜è®¤å¤´åƒ</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">portrait/</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®åº“ERå›¾"><a href="#æ•°æ®åº“ERå›¾" class="headerlink" title="æ•°æ®åº“ERå›¾"></a>æ•°æ®åº“ERå›¾</h4><p>:sweat_smile: <em>æ•°æ®åº“è®¾è®¡å¾…ä¼˜åŒ– : æ•°æ®è¡¨ä¹‹é—´çš„å¹¶æ²¡æœ‰è®¾ç½®çº¦æŸå…³ç³»å“Ÿ,å¥½å°´å°¬å‘¢Â·Â·Â·</em><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SMS-Database-ER.png" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h4 id="JaråŒ…ä¾èµ–å…³ç³»å›¾"><a href="#JaråŒ…ä¾èµ–å…³ç³»å›¾" class="headerlink" title="JaråŒ…ä¾èµ–å…³ç³»å›¾"></a>JaråŒ…ä¾èµ–å…³ç³»å›¾</h4><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-SMS/master/demonstration_picture/SMS-Jar-dependency.png" alt title>                </div>                <div class="image-caption"></div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;a-simple-student-management-system-created-by-SSM-framework&quot;&gt;&lt;a href=&quot;#a-simple-student-management-system-created-by-SSM-framework&quot; 
      
    
    </summary>
    
    
      <category term="JSP" scheme="http://yoursite.com/tags/JSP/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
      <category term="jQuery" scheme="http://yoursite.com/tags/jQuery/"/>
    
      <category term="Ajax" scheme="http://yoursite.com/tags/Ajax/"/>
    
      <category term="EasyUI" scheme="http://yoursite.com/tags/EasyUI/"/>
    
      <category term="SSM" scheme="http://yoursite.com/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>SSMæ•´åˆé¡¹ç›®:ç®€æ˜“åŒå­¦å½•</title>
    <link href="http://yoursite.com/2019/06/12/SSM%E6%95%B4%E5%90%88%E9%A1%B9%E7%9B%AE-%E7%AE%80%E6%98%93%E5%90%8C%E5%AD%A6%E5%BD%95/"/>
    <id>http://yoursite.com/2019/06/12/SSMæ•´åˆé¡¹ç›®-ç®€æ˜“åŒå­¦å½•/</id>
    <published>2019-06-12T11:06:17.000Z</published>
    <updated>2019-06-12T11:37:57.027Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-Simple-Alumnn-Book"><a href="#A-Simple-Alumnn-Book" class="headerlink" title="A Simple Alumnn Book"></a>A Simple Alumnn Book</h2><ul><li><em>æˆ‘çš„ç¬¬ä¸€ä¸ª<code>SSM</code>å°é¡¹ç›® ï¼ˆã¥ï¿£3ï¿£ï¼‰ã¥â•­â¤ï½</em></li><li><em>èµ¶ç´§æ¥å­¦ä¹ å§ ! æœŸå¾…ä½ çš„<code>issues</code>å“Ÿ(ã£â€¢Ì€Ï‰â€¢Ì)ã£âœâ¾â¾~ è¯¥é¡¹ç›®åœ°å€ : <a href="https://github.com/YUbuntu0109/SSM-CURD-Alumni" target="_blank" rel="noopener">https://github.com/YUbuntu0109/SSM-CURD-Alumni</a></em></li></ul><h3 id="é¡¹ç›®æ¦‚è¿°"><a href="#é¡¹ç›®æ¦‚è¿°" class="headerlink" title="é¡¹ç›®æ¦‚è¿°"></a>é¡¹ç›®æ¦‚è¿°</h3><ul><li><em>ä¸€ä¸ªç®€å•çš„,åŸºäºSSMçš„åŒå­¦å½•å°é¡¹ç›®,é€šè¿‡æœ¬é¡¹ç›®å¯ä»¥å­¦ä¹ SSMçš„æ•´åˆåŠCURDæ“ä½œçš„åŸºæœ¬æ€è·¯,åŒæ—¶ä¹Ÿå¯ä»¥å¸®åŠ©ä½ å­¦ä¹ Intellij IEADå¼€å‘åˆ©å™¨çš„ä½¿ç”¨å“Ÿ,å¯ä»¥è¯´éå¸¸é€‚åˆåˆå­¦SSMçš„åŒå­¦å•¦~</em></li></ul><p><em>ä»£ç æ³¨é‡Šéå¸¸è¯¦ç»†,æ€è·¯ä¹Ÿå¾ˆæ¸…æ™° :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> <span class="meta">@Autowired</span> <span class="comment">//æ³¨å…¥ä¸šåŠ¡å¯¹è±¡</span></span><br><span class="line"> <span class="keyword">private</span> FriendService friendService;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//å­˜å‚¨é¢„è¿”å›ç»™é¡µé¢çš„å¯¹è±¡æ•°æ®</span></span><br><span class="line"> <span class="keyword">private</span> Map&lt;String, Object&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@description</span>: åˆ†é¡µæŸ¥è¯¢: è·å–æ‰€æœ‰å¥½å‹ä¿¡æ¯,åˆ†é¡µåè¿”å›ç»™é¡µé¢</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span>: page å½“å‰é¡µæ•°</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span>: rows æ¯é¡µè¡Œæ•°</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@date</span>: 2019-06-06 10:10 AM</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span>: java.util.List&lt;pers.huangyuhui.ssm.crud.bean.Friend&gt;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="meta">@RequestMapping</span>(<span class="string">"/getFriendList"</span>)</span><br><span class="line"> <span class="meta">@ResponseBody</span> <span class="comment">//å°†Mapè½¬åŒ–ä¸ºJSONæ•°æ®</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getFriendlist</span><span class="params">(Integer page, Integer rows)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//è®¾ç½®æ¯é¡µçš„è®°å½•æ•°</span></span><br><span class="line">     PageHelper.startPage(page, rows);</span><br><span class="line">     <span class="comment">//è·å–æ‰€æœ‰å¥½å‹ä¿¡æ¯</span></span><br><span class="line">     List&lt;Friend&gt; list = friendService.selectAll();</span><br><span class="line">     <span class="comment">//å°è£…æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">     PageInfo&lt;Friend&gt; pageInfo = <span class="keyword">new</span> PageInfo&lt;&gt;(list);</span><br><span class="line">     <span class="comment">//è·å–æ€»è®°å½•æ•°</span></span><br><span class="line">     <span class="keyword">long</span> total = pageInfo.getTotal();</span><br><span class="line">     <span class="comment">//è·å–å½“å‰é¡µæ•°æ®åˆ—è¡¨</span></span><br><span class="line">     List&lt;Friend&gt; friendList = pageInfo.getList();</span><br><span class="line">     <span class="comment">//å­˜å‚¨å¯¹è±¡æ•°æ®</span></span><br><span class="line">     result.put(<span class="string">"total"</span>, total);</span><br><span class="line">     result.put(<span class="string">"rows"</span>, friendList);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> result;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p><h3 id="é¡¹ç›®æˆªå›¾"><a href="#é¡¹ç›®æˆªå›¾" class="headerlink" title="é¡¹ç›®æˆªå›¾"></a>é¡¹ç›®æˆªå›¾</h3><ul><li><em>æ¬¢è¿é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-CURD-Alumni/master/demonstration_picture/SSM-CURD-Alumni01.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>å¥½å‹åˆ—è¡¨</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-CURD-Alumni/master/demonstration_picture/SSM-CURD-Alumni02.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="IDEAæˆªå›¾"><a href="#IDEAæˆªå›¾" class="headerlink" title="IDEAæˆªå›¾"></a>IDEAæˆªå›¾</h3><ul><li><em>ç›®å½•ç»“æ„</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-CURD-Alumni/master/demonstration_picture/Intellij-IDEA-Project-Alumni.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>ç›®å½•ç±»å‹(<code>é‡ç‚¹å‘¦:IDEAå¯ä¸åŒä¸Eclipse !</code>)</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-CURD-Alumni/master/demonstration_picture/Intellij-IDEA-Folder-Alumni.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em><code>Jar</code>åŒ…ä¾èµ–å…³ç³»</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/SSM-CURD-Alumni/master/demonstration_picture/SSM-CRUD-Alumni-Jar.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">â””â”€SSM-CURD-Alumni</span><br><span class="line">    â”‚  LICENSE</span><br><span class="line">    â”‚  README.md</span><br><span class="line">    â”‚</span><br><span class="line">    â”œâ”€database</span><br><span class="line">    â”‚      ssm.sql</span><br><span class="line">    â”‚</span><br><span class="line">    â”œâ”€demonstration_picture</span><br><span class="line">    â”‚      Intellij-IDEA-Folder-Alumni.PNG</span><br><span class="line">    â”‚      Intellij-IDEA-Project-Alumni.PNG</span><br><span class="line">    â”‚      SSM-CRUD-Alumni-Jar.png</span><br><span class="line">    â”‚      SSM-CURD-Alumni01.PNG</span><br><span class="line">    â”‚      SSM-CURD-Alumni02.PNG</span><br><span class="line">    â”‚</span><br><span class="line">    â””â”€ssm_crud2</span><br><span class="line">        â”‚  pom.xml</span><br><span class="line">        â”‚  ssm_crud_alumni.iml</span><br><span class="line">        â”‚</span><br><span class="line">        â”œâ”€.idea</span><br><span class="line">        â”‚  â”‚(ç•¥..)  </span><br><span class="line">        â”‚    </span><br><span class="line">        â”‚</span><br><span class="line">        â””â”€src</span><br><span class="line">            â””â”€main</span><br><span class="line">                â”œâ”€java</span><br><span class="line">                â”‚  â””â”€pers</span><br><span class="line">                â”‚      â””â”€huangyuhui</span><br><span class="line">                â”‚          â””â”€ssm</span><br><span class="line">                â”‚              â””â”€crud</span><br><span class="line">                â”‚                  â”œâ”€bean</span><br><span class="line">                â”‚                  â”‚      Friend.java</span><br><span class="line">                â”‚                  â”‚</span><br><span class="line">                â”‚                  â”œâ”€controller</span><br><span class="line">                â”‚                  â”‚      FriendController.java</span><br><span class="line">                â”‚                  â”‚</span><br><span class="line">                â”‚                  â”œâ”€dao</span><br><span class="line">                â”‚                  â”‚      FriendMapper.java</span><br><span class="line">                â”‚                  â”‚</span><br><span class="line">                â”‚                  â””â”€service</span><br><span class="line">                â”‚                      â”‚  FriendService.java</span><br><span class="line">                â”‚                      â”‚</span><br><span class="line">                â”‚                      â””â”€impl</span><br><span class="line">                â”‚                         FriendServiceImpl.java</span><br><span class="line">                â”‚</span><br><span class="line">                â”œâ”€resource</span><br><span class="line">                â”‚  â”œâ”€database-conf</span><br><span class="line">                â”‚  â”‚      c3p0.properties</span><br><span class="line">                â”‚  â”‚</span><br><span class="line">                â”‚  â”œâ”€mapper</span><br><span class="line">                â”‚  â”‚      FriendMapper.xml</span><br><span class="line">                â”‚  â”‚</span><br><span class="line">                â”‚  â”œâ”€mybatis-conf</span><br><span class="line">                â”‚  â”‚      mybatis-config.xml</span><br><span class="line">                â”‚  â”‚</span><br><span class="line">                â”‚  â””â”€spring-conf</span><br><span class="line">                â”‚          applicationContext.xml</span><br><span class="line">                â”‚          springmvc-config.xml</span><br><span class="line">                â”‚</span><br><span class="line">                â””â”€webapp</span><br><span class="line">                    â”‚  friendInfo.jsp</span><br><span class="line">                    â”‚  index.jsp</span><br><span class="line">                    â”‚</span><br><span class="line">                    â”œâ”€static</span><br><span class="line">                    â”‚  â””â”€easyui</span><br><span class="line">                    â”‚      â”‚(ç•¥..)</span><br><span class="line">                    â”‚      </span><br><span class="line">                    â”‚</span><br><span class="line">                    â””â”€WEB-INF</span><br><span class="line">                            web.xml</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®ç»“æ„è¯´æ˜-æ•°æ®åº“æ–‡ä»¶"><a href="#é¡¹ç›®ç»“æ„è¯´æ˜-æ•°æ®åº“æ–‡ä»¶" class="headerlink" title="é¡¹ç›®ç»“æ„è¯´æ˜-æ•°æ®åº“æ–‡ä»¶"></a>é¡¹ç›®ç»“æ„è¯´æ˜-<code>æ•°æ®åº“æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">database/ssm.sql</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®ç»“æ„è¯´æ˜-æ•°æ®åº“é…ç½®ä¿¡æ¯"><a href="#é¡¹ç›®ç»“æ„è¯´æ˜-æ•°æ®åº“é…ç½®ä¿¡æ¯" class="headerlink" title="é¡¹ç›®ç»“æ„è¯´æ˜-æ•°æ®åº“é…ç½®ä¿¡æ¯"></a>é¡¹ç›®ç»“æ„è¯´æ˜-<code>æ•°æ®åº“é…ç½®ä¿¡æ¯</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssm_crud2/src/main/resource/database-conf/c3p0.properties</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®ç»“æ„è¯´æ˜-EasyUI-Framework"><a href="#é¡¹ç›®ç»“æ„è¯´æ˜-EasyUI-Framework" class="headerlink" title="é¡¹ç›®ç»“æ„è¯´æ˜-EasyUI Framework"></a>é¡¹ç›®ç»“æ„è¯´æ˜-<code>EasyUI Framework</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssm_crud2/src/main/webapp/static/easyui/</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®ç»“æ„è¯´æ˜-Spring-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#é¡¹ç›®ç»“æ„è¯´æ˜-Spring-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="é¡¹ç›®ç»“æ„è¯´æ˜-Spring æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>é¡¹ç›®ç»“æ„è¯´æ˜-<code>Spring æ ¸å¿ƒé…ç½®æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssm_crud2/src/main/resource/spring-conf/applicationContext.xml</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®ç»“æ„è¯´æ˜-Spring-MVC-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#é¡¹ç›®ç»“æ„è¯´æ˜-Spring-MVC-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="é¡¹ç›®ç»“æ„è¯´æ˜-Spring MVC æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>é¡¹ç›®ç»“æ„è¯´æ˜-<code>Spring MVC æ ¸å¿ƒé…ç½®æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssm_crud2/src/main/resource/spring-conf/springmvc-config.xml</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®ç»“æ„è¯´æ˜-MyBatis-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#é¡¹ç›®ç»“æ„è¯´æ˜-MyBatis-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="é¡¹ç›®ç»“æ„è¯´æ˜-MyBatis æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>é¡¹ç›®ç»“æ„è¯´æ˜-<code>MyBatis æ ¸å¿ƒé…ç½®æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssm_crud2/src/main/resource/mybatis-conf/mybatis-config.xml</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®ç»“æ„è¯´æ˜-Mapper-æ¥å£æ˜ å°„æ–‡ä»¶"><a href="#é¡¹ç›®ç»“æ„è¯´æ˜-Mapper-æ¥å£æ˜ å°„æ–‡ä»¶" class="headerlink" title="é¡¹ç›®ç»“æ„è¯´æ˜-Mapper æ¥å£æ˜ å°„æ–‡ä»¶"></a>é¡¹ç›®ç»“æ„è¯´æ˜-<code>Mapper æ¥å£æ˜ å°„æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssm_crud2/src/main/resource/mapper/FriendMapper.xml</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;A-Simple-Alumnn-Book&quot;&gt;&lt;a href=&quot;#A-Simple-Alumnn-Book&quot; class=&quot;headerlink&quot; title=&quot;A Simple Alumnn Book&quot;&gt;&lt;/a&gt;A Simple Alumnn Book&lt;/h2&gt;&lt;
      
    
    </summary>
    
    
      <category term="JSP" scheme="http://yoursite.com/tags/JSP/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
      <category term="jQuery" scheme="http://yoursite.com/tags/jQuery/"/>
    
      <category term="Ajax" scheme="http://yoursite.com/tags/Ajax/"/>
    
      <category term="EasyUI" scheme="http://yoursite.com/tags/EasyUI/"/>
    
      <category term="SSM" scheme="http://yoursite.com/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>Java webé¡¹ç›®:å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ</title>
    <link href="http://yoursite.com/2019/06/12/Java-web%E9%A1%B9%E7%9B%AE-%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <id>http://yoursite.com/2019/06/12/Java-webé¡¹ç›®-å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ/</id>
    <published>2019-06-12T11:04:40.000Z</published>
    <updated>2019-06-12T11:37:37.006Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Student-Information-Management-System"><a href="#Student-Information-Management-System" class="headerlink" title="Student Information Management System"></a>Student Information Management System</h2><ul><li><em>æˆ‘çš„ç¬¬ä¸€ä¸ª<code>Java web</code>é¡¹ç›® ï¼ˆã¥ï¿£3ï¿£ï¼‰ã¥â•­â¤ï½</em></li><li><em>èµ¶ç´§æ¥å­¦ä¹ å§ ! æœŸå¾…ä½ çš„<code>issues</code>å“Ÿ(ã£â€¢Ì€Ï‰â€¢Ì)ã£âœâ¾â¾~ è¯¥é¡¹ç›®åœ°å€, : <a href="https://github.com/YUbuntu0109/Student-Information-Management-System" target="_blank" rel="noopener">https://github.com/YUbuntu0109/Student-Information-Management-System</a></em></li></ul><h3 id="é¡¹ç›®æ¦‚è¿°"><a href="#é¡¹ç›®æ¦‚è¿°" class="headerlink" title="é¡¹ç›®æ¦‚è¿°"></a>é¡¹ç›®æ¦‚è¿°</h3><h4 id="é¡¹ç›®é˜¶æ®µä»‹ç»"><a href="#é¡¹ç›®é˜¶æ®µä»‹ç»" class="headerlink" title="é¡¹ç›®é˜¶æ®µä»‹ç»"></a>é¡¹ç›®é˜¶æ®µä»‹ç»</h4><ul><li><em>ç¬¬ä¸€é˜¶æ®µï¼š+ä¿¡æ¯ç®¡ç†åŠŸèƒ½ :white_check_mark:</em></li><li><em>ç¬¬äºŒé˜¶æ®µï¼š+æˆç»©ç®¡ç†åŠŸèƒ½ :x:</em></li></ul><h4 id="ç”¨æˆ·æƒé™ä»‹ç»"><a href="#ç”¨æˆ·æƒé™ä»‹ç»" class="headerlink" title="ç”¨æˆ·æƒé™ä»‹ç»"></a>ç”¨æˆ·æƒé™ä»‹ç»</h4><ul><li><em>ç®¡ç†å‘˜ : å…·æœ‰æ‰€æœ‰ç®¡ç†æ¨¡å—çš„æƒé™</em></li><li><em>æ•™å¸ˆ : å…·æœ‰å­¦ç”Ÿç®¡ç†ä¿¡æ¯æ¨¡å—çš„æ‰€æœ‰æƒé™,ä½†åœ¨æ•™å¸ˆä¿¡æ¯ç®¡ç†æ¨¡å—ä¸­åªå…·æœ‰æŸ¥è¯¢å¹¶ä¿®æ”¹ä¸ªäººä¿¡æ¯çš„æƒé™</em></li><li><em>å­¦ç”Ÿ : åªå…·æœ‰æŸ¥è¯¢å¹¶ä¿®æ”¹ä¸ªäººä¿¡æ¯çš„æƒé™</em></li></ul><p><em>è®¾ç½®æƒé™çš„æ ¸å¿ƒç¤ºä¾‹ä»£ç å¦‚ä¸‹ :</em><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨æˆ·æƒé™è®¾ç½®: å¦‚æœå½“å‰ç”¨æˆ·ç±»å‹ä¸ºæ•™å¸ˆ,åˆ™å°†å…¶æƒé™è®¾ç½®ä¸ºä»…èƒ½æŸ¥è¯¢ä¸ªäººä¿¡æ¯</span></span><br><span class="line"><span class="keyword">if</span> (userType == <span class="number">3</span>) &#123;</span><br><span class="line">    TeacherInfo currentTeacherInfo = (TeacherInfo) request.getSession().getAttribute(<span class="string">"userInfo"</span>);</span><br><span class="line">teacherInfo.setId(currentTeacherInfo.getId());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–åˆ†é¡µåçš„æ•™å¸ˆåˆ—è¡¨ä¿¡æ¯</span></span><br><span class="line">List&lt;TeacherInfo&gt; teacherList = teacherDao.getTeacherList(teacherInfo, <span class="keyword">new</span> Paging(currentPage, pageSize));</span><br></pre></td></tr></table></figure></p><h3 id="ç³»ç»Ÿæˆªå›¾"><a href="#ç³»ç»Ÿæˆªå›¾" class="headerlink" title="ç³»ç»Ÿæˆªå›¾"></a>ç³»ç»Ÿæˆªå›¾</h3><ul><li><em>ç™»å½•é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/Student-Information-Management-System/master/demonstration_picture/Student_Information_Management_System01-LoginInterface.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>ç³»ç»Ÿä¸»é¡µ</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/Student-Information-Management-System/master/demonstration_picture/Student_Information_Management_System01-MainInterface.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><ul><li><em>å­¦ç”Ÿä¿¡æ¯ç®¡ç†é¡µé¢</em></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/Student-Information-Management-System/master/demonstration_picture/Student_Information_Management_System01-StudentInfoInterface.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">â”‚</span><br><span class="line">â””â”€student_information_management_system</span><br><span class="line">    â”‚       </span><br><span class="line">    â”‚</span><br><span class="line">    â”œâ”€build</span><br><span class="line">    â”‚  â””â”€classes</span><br><span class="line">    â”‚      â”‚  databaseConfig.properties</span><br><span class="line">    â”‚                                                                                       </span><br><span class="line">    â”‚</span><br><span class="line">    â”œâ”€database</span><br><span class="line">    â”‚      SMS.sql</span><br><span class="line">    â”‚</span><br><span class="line">    â”œâ”€src</span><br><span class="line">    â”‚  â”‚  databaseConfig.properties</span><br><span class="line">    â”‚  â”‚</span><br><span class="line">    â”‚  â””â”€pers</span><br><span class="line">    â”‚      â””â”€huangyuhui</span><br><span class="line">    â”‚          â””â”€sms</span><br><span class="line">    â”‚              â”œâ”€dao</span><br><span class="line">    â”‚              â”‚      AdminDao.java</span><br><span class="line">    â”‚              â”‚      BasicDao.java</span><br><span class="line">    â”‚              â”‚      ClazzDao.java</span><br><span class="line">    â”‚              â”‚      StudentDao.java</span><br><span class="line">    â”‚              â”‚      TeacherDao.java</span><br><span class="line">    â”‚              â”‚</span><br><span class="line">    â”‚              â”œâ”€filter</span><br><span class="line">    â”‚              â”‚      LoginFilter.java</span><br><span class="line">    â”‚              â”‚</span><br><span class="line">    â”‚              â”œâ”€model</span><br><span class="line">    â”‚              â”‚      AdminInfo.java</span><br><span class="line">    â”‚              â”‚      ClazzInfo.java</span><br><span class="line">    â”‚              â”‚      Paging.java</span><br><span class="line">    â”‚              â”‚      StudentInfo.java</span><br><span class="line">    â”‚              â”‚      TeacherInfo.java</span><br><span class="line">    â”‚              â”‚</span><br><span class="line">    â”‚              â”œâ”€servlet</span><br><span class="line">    â”‚              â”‚      ClazzManagementServlet.java</span><br><span class="line">    â”‚              â”‚      LoginServlet.java</span><br><span class="line">    â”‚              â”‚      OutVerifiCodeServlet.java</span><br><span class="line">    â”‚              â”‚      PersonalManagementServlet.java</span><br><span class="line">    â”‚              â”‚      PhotoServlet.java</span><br><span class="line">    â”‚              â”‚      StuManagementServlet.java</span><br><span class="line">    â”‚              â”‚      SysMainInterfaceServlet.java</span><br><span class="line">    â”‚              â”‚      TeacherManagementServlet.java</span><br><span class="line">    â”‚              â”‚</span><br><span class="line">    â”‚              â””â”€util</span><br><span class="line">    â”‚                      CreateVerifiCodeImage.java</span><br><span class="line">    â”‚                      DbConfig.java</span><br><span class="line">    â”‚                      DbUtil.java</span><br><span class="line">    â”‚                      StringUtil.java</span><br><span class="line">    â”‚</span><br><span class="line">    â””â”€WebContent</span><br><span class="line">        â”‚  index.jsp</span><br><span class="line">        â”‚  refresh.jsp</span><br><span class="line">        â”‚</span><br><span class="line">        â”œâ”€easyui</span><br><span class="line">        â”‚  â”‚</span><br><span class="line">        â”‚  â”œâ”€css       </span><br><span class="line">        â”‚  â”‚</span><br><span class="line">        â”‚  â”œâ”€js</span><br><span class="line">        â”‚  â”‚     </span><br><span class="line">        â”‚  â””â”€themes</span><br><span class="line">        â”‚      </span><br><span class="line">        â”‚</span><br><span class="line">        â”œâ”€h-ui</span><br><span class="line">        â”‚  â”‚</span><br><span class="line">        â”‚  â”œâ”€css</span><br><span class="line">        â”‚  â”‚      </span><br><span class="line">        â”‚  â”œâ”€images</span><br><span class="line">        â”‚  â”‚</span><br><span class="line">        â”‚  â”œâ”€js</span><br><span class="line">        â”‚  â”‚       </span><br><span class="line">        â”‚  â”œâ”€lib</span><br><span class="line">        â”‚  â”‚</span><br><span class="line">        â”‚  â””â”€skin</span><br><span class="line">        â”‚     </span><br><span class="line">        â”‚</span><br><span class="line">        â”œâ”€META-INF</span><br><span class="line">        â”‚      MANIFEST.MF</span><br><span class="line">        â”‚</span><br><span class="line">        â”œâ”€resource</span><br><span class="line">        â”‚  â””â”€image</span><br><span class="line">        â”‚          default_portrait.jpg</span><br><span class="line">        â”‚</span><br><span class="line">        â””â”€WEB-INF</span><br><span class="line">            â”‚  web.xml</span><br><span class="line">            â”‚</span><br><span class="line">            â”œâ”€lib</span><br><span class="line">            â”‚      commons-beanutils-1.8.3.jar</span><br><span class="line">            â”‚      commons-collections-3.2.1.jar</span><br><span class="line">            â”‚      commons-fileupload-1.2.1.jar</span><br><span class="line">            â”‚      commons-io-1.4.jar</span><br><span class="line">            â”‚      commons-lang-2.5.jar</span><br><span class="line">            â”‚      commons-logging-1.1.1.jar</span><br><span class="line">            â”‚      ezmorph-1.0.6.jar</span><br><span class="line">            â”‚      FilelLoad.jar</span><br><span class="line">            â”‚      json-lib-2.3-jdk15.jar</span><br><span class="line">            â”‚      jsonplugin-0.34.jar</span><br><span class="line">            â”‚      jstl.jar</span><br><span class="line">            â”‚      mysql-connector-java-8.0.11.jar</span><br><span class="line">            â”‚      standard.jar</span><br><span class="line">            â”‚</span><br><span class="line">            â””â”€view</span><br><span class="line">                â”‚  login.jsp</span><br><span class="line">                â”‚</span><br><span class="line">                â”œâ”€class</span><br><span class="line">                â”‚      classList.jsp</span><br><span class="line">                â”‚</span><br><span class="line">                â”œâ”€error</span><br><span class="line">                â”‚      404.jsp</span><br><span class="line">                â”‚      500.jsp</span><br><span class="line">                â”‚</span><br><span class="line">                â”œâ”€management</span><br><span class="line">                â”‚      personalView.jsp</span><br><span class="line">                â”‚</span><br><span class="line">                â”œâ”€student</span><br><span class="line">                â”‚      studentList.jsp</span><br><span class="line">                â”‚</span><br><span class="line">                â”œâ”€system</span><br><span class="line">                â”‚      main.jsp</span><br><span class="line">                â”‚      welcome.jsp</span><br><span class="line">                â”‚</span><br><span class="line">                â””â”€teacher</span><br><span class="line">                        teacherList.jsp</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“æ–‡ä»¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“æ–‡ä»¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“æ–‡ä»¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>æ•°æ®åº“æ–‡ä»¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMS.sql</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“é…ç½®ä¿¡æ¯"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“é…ç½®ä¿¡æ¯" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-æ•°æ®åº“é…ç½®ä¿¡æ¯"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>æ•°æ®åº“é…ç½®ä¿¡æ¯</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">databaseConfig.properties</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-H-ui-å‰ç«¯æ¡†æ¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-H-ui-å‰ç«¯æ¡†æ¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-H-ui å‰ç«¯æ¡†æ¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>H-ui å‰ç«¯æ¡†æ¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h-ui/</span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®æ–‡ä»¶è¯´æ˜-EasyUI-å‰ç«¯æ¡†æ¶"><a href="#é¡¹ç›®æ–‡ä»¶è¯´æ˜-EasyUI-å‰ç«¯æ¡†æ¶" class="headerlink" title="é¡¹ç›®æ–‡ä»¶è¯´æ˜-EasyUI å‰ç«¯æ¡†æ¶"></a>é¡¹ç›®æ–‡ä»¶è¯´æ˜-<code>EasyUI å‰ç«¯æ¡†æ¶</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">easyui/</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“ERå›¾"><a href="#æ•°æ®åº“ERå›¾" class="headerlink" title="æ•°æ®åº“ERå›¾"></a>æ•°æ®åº“ERå›¾</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://raw.githubusercontent.com/YUbuntu0109/Student-Information-Management-System/master/demonstration_picture/sms_er.png" alt title>                </div>                <div class="image-caption"></div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Student-Information-Management-System&quot;&gt;&lt;a href=&quot;#Student-Information-Management-System&quot; class=&quot;headerlink&quot; title=&quot;Student Informatio
      
    
    </summary>
    
    
      <category term="JSP" scheme="http://yoursite.com/tags/JSP/"/>
    
      <category term="Servlet" scheme="http://yoursite.com/tags/Servlet/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
      <category term="jQuery" scheme="http://yoursite.com/tags/jQuery/"/>
    
      <category term="Ajax" scheme="http://yoursite.com/tags/Ajax/"/>
    
      <category term="EasyUI" scheme="http://yoursite.com/tags/EasyUI/"/>
    
  </entry>
  
  <entry>
    <title>DBUtils</title>
    <link href="http://yoursite.com/2019/05/30/DBUtils/"/>
    <id>http://yoursite.com/2019/05/30/DBUtils/</id>
    <published>2019-05-30T09:28:41.000Z</published>
    <updated>2019-06-08T07:21:43.087Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-DBUtilså·¥å…·"><a href="#å­¦ä¹ ç¬”è®°-DBUtilså·¥å…·" class="headerlink" title="å­¦ä¹ ç¬”è®° : DBUtilså·¥å…·"></a>å­¦ä¹ ç¬”è®° : DBUtilså·¥å…·</h2><p><em>ç®€ä»‹ : ä¸ºäº†æ›´åŠ ç®€å•åœ°ä½¿ç”¨<code>JDBC</code>,Apacheç»„ç»‡æä¾›äº†ä¸€ä¸ªå·¥å…·ç±»åº“<code>commons-dbutils</code>,å®ƒæ˜¯æ“ä½œæ•°æ®åº“çš„ä¸€ä¸ªç»„ä»¶,å®ç°äº†å¯¹JDBCçš„ç®€å•å°è£…,å¯ä»¥åœ¨ä¸å½±å“æ€§èƒ½çš„æƒ…å†µä¸‹æå¤§åœ°ç®€åŒ–JDBCçš„ç¼–ç å·¥ä½œé‡.</em></p><h3 id="API-ä»‹ç»"><a href="#API-ä»‹ç»" class="headerlink" title="API ä»‹ç»"></a>API ä»‹ç»</h3><p><em>ç®€ä»‹ : <code>commons-dbutils</code>çš„æ ¸å¿ƒæ˜¯ä¸¤ä¸ªç±»ä¸º<code>DbUtils</code>,<code>QueryRunner</code>,å’Œä¸€ä¸ªæ¥å£<code>ResultSetHandler</code></em>.</p><ol><li><em><code>org.apache.commons.dbutils.DbUtils</code> : è¯¥ç±»ä¸»è¦ä¸ºå¦‚ä½•å…³é—­æ•°æ®åº“è¿æ¥,è£…è½½JDBCé©±åŠ¨ç¨‹åºä¹‹ç±»çš„å¸¸è§„å·¥ä½œæä¾›é™æ€æ–¹æ³•.</em></li><li><em><code>org.apache.commons.dbutils.QueryRunner</code> : è¯¥ç±»ç®€åŒ–äº†æ‰§è¡ŒSQLè¯­å¥çš„ä»£ç ,å®ƒä¸<code>ResultSetHandler</code>ç»„åˆåœ¨ä¸€èµ·å°±èƒ½å®Œæˆå¤§éƒ¨åˆ†çš„æ•°æ®åº“æ“ä½œ,å¤§å¤§å‡å°‘ç¼–ç é‡.</em></li><li><em><code>org.apache.commons.dbutils.ResultSetHandler</code> : è¯¥æ¥å£ç”¨äºå¤„ç†ResultSetç»“æœé›†,å®ƒå¯ä»¥å°†ç»“æœé›†ä¸­çš„æ•°æ®è½¬æ¢ä¸ºä¸åŒçš„å½¢å¼.</em></li></ol><h3 id="CURE-æ¡ˆä¾‹"><a href="#CURE-æ¡ˆä¾‹" class="headerlink" title="CURE æ¡ˆä¾‹"></a>CURE æ¡ˆä¾‹</h3><ol><li><p><em>æ•°æ®è¡¨ä¿¡æ¯</em></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- auto-generated definition by Intellij IDEA</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">    <span class="keyword">id</span>       <span class="built_in">int</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">    <span class="keyword">name</span>     <span class="built_in">varchar</span>(<span class="number">15</span>) <span class="literal">null</span>,</span><br><span class="line">    <span class="keyword">password</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="literal">null</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li><p><em>C3P0é…ç½®æ–‡ä»¶</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é»˜è®¤é…ç½®: åœ¨æ²¡æœ‰æŒ‡å®šé…ç½®æ—¶é»˜è®¤ä½¿ç”¨è¯¥é…ç½®åˆ›å»ºc3p0æ•°æ®æºå¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">default-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span>xxxxxx<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span>xxxxxx<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span>&gt;</span></span><br><span class="line">            jdbc:mysql://LOCALHOST/test?useSSL=false&amp;amp;serverTimezone=UTC&amp;amp;allowPublicKeyRetrieval=true</span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"checkoutTimeout"</span>&gt;</span>30000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialPoolSize"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdleTime"</span>&gt;</span>600<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minPoolSize"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxStatements"</span>&gt;</span>200<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">default-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªå®šä¹‰é…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">"yu"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span>xxxxxx<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span>xxxxxx<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span>&gt;</span></span><br><span class="line">            jdbc:mysql://LOCALHOST/test?useSSL=false&amp;amp;serverTimezone=UTC&amp;amp;allowPublicKeyRetrieval=true</span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initiaPoolSize"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span>&gt;</span>15<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>æ•°æ®æºå·¥å…·ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.dbutils.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: dbutils</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span>: pers.huangyuhui.dbutils.utils</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: åˆ›å»ºæ•°æ®æº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 5/31/2019-7:00 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C3P0Utils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºæ•°æ®æº</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        dataSource = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">"yu"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ•°æ®æº</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DataSource <span class="title">getDataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>Java Bean : å­˜å‚¨ç”¨æˆ·ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.dbutils.bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: dbutils</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span>: pers.huangyuhui.dbutils.bean</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 5/31/2019-7:13 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", password='"</span> + password + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>DAOå±‚ : å°è£…æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.dbutils.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.QueryRunner;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.dbutils.bean.User;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.dbutils.utils.C3P0Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: dbutils</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span>: pers.huangyuhui.dbutils</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 5/31/2019-7:07 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtilsDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ•°æ®æº</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource = C3P0Utils.getDataSource();</span><br><span class="line">    <span class="comment">//åˆ›å»ºqueryRunnerå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> QueryRunner queryRunner = <span class="keyword">new</span> QueryRunner(dataSource);</span><br><span class="line">    <span class="comment">//sql</span></span><br><span class="line">    <span class="keyword">private</span> String SQL_SELECT = <span class="string">"select id,name,password from user where id = ?"</span>;</span><br><span class="line">    <span class="keyword">private</span> String SQL_UPDATE = <span class="string">"update user set name=?,password=? where id=?"</span>;</span><br><span class="line">    <span class="keyword">private</span> String SQL_INSERT = <span class="string">"insert into user(name,password) values(?,?)"</span>;</span><br><span class="line">    <span class="keyword">private</span> String SQL_SELECTALL = <span class="string">"select id,name,password from user"</span>;</span><br><span class="line">    <span class="keyword">private</span> String SQL_DELETE = <span class="string">"delete from user where id=?"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 6/8/2019 æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List <span class="title">selectAll</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line">        List&lt;User&gt; list = queryRunner.query(SQL_SELECTALL, <span class="keyword">new</span> BeanListHandler&lt;User&gt;(User.class));</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 6/8/2019 æŸ¥è¯¢å•ä¸ªç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">select</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        User user = queryRunner.query(SQL_SELECT, <span class="keyword">new</span> BeanHandler&lt;&gt;(User.class), <span class="keyword">new</span> Object[]&#123;id&#125;);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 6/8/2019 æ·»åŠ ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">insert</span><span class="params">(User user)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æ·»åŠ æˆåŠŸ</span></span><br><span class="line">        <span class="keyword">int</span> num = queryRunner.update(SQL_INSERT, <span class="keyword">new</span> Object[]&#123;user.getName(), user.getPassword()&#125;);</span><br><span class="line">        <span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 6/8/2019 ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(User user)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num = queryRunner.update(SQL_UPDATE, <span class="keyword">new</span> Object[]&#123;user.getName(), user.getPassword(), user.getId()&#125;);</span><br><span class="line">        <span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 6/8/2019 åˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num = queryRunner.update(SQL_DELETE, id);</span><br><span class="line">        <span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>æµ‹è¯•ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.dbutils.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.BeforeClass;</span><br><span class="line"><span class="keyword">import</span> org.junit.Ignore;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.dbutils.bean.User;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.dbutils.dao.DBUtilsDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: dbutils</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: æµ‹è¯•æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 5/31/2019-7:45 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtilsDaoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> User user;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DBUtilsDao dbUtilsDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeClass</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        user = <span class="keyword">new</span> User();</span><br><span class="line">        dbUtilsDao = <span class="keyword">new</span> DBUtilsDao();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 6/8/2019 æµ‹è¯•æ·»åŠ ç”¨æˆ·æ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        user.setName(<span class="string">"YUbuntu0109"</span>);</span><br><span class="line">        user.setPassword(<span class="string">"MyPassword"</span>);</span><br><span class="line">        <span class="keyword">if</span> (dbUtilsDao.insert(user)) &#123;</span><br><span class="line">            System.out.println(<span class="string">"success to insert a user information !"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"fail to insert a new user information !"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 6/8/2019 æµ‹è¯•ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯æ“ä½œ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        user.setId(<span class="number">1</span>);</span><br><span class="line">        user.setName(<span class="string">"YUbuntu0109-1"</span>);</span><br><span class="line">        user.setPassword(<span class="string">"MyPassword-1"</span>);</span><br><span class="line">        <span class="keyword">if</span> (dbUtilsDao.update(user)) &#123;</span><br><span class="line">            System.out.println(<span class="string">"success to update the user information !"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"fail to update the user information !"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 6/8/2019 æµ‹è¯•åˆ é™¤ç”¨æˆ·æ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (dbUtilsDao.delete(<span class="number">1</span>)) &#123;</span><br><span class="line">            System.out.println(<span class="string">"success to delete the user information !"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"fail to delete the user information !"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 6/8/2019 æµ‹è¯•æŸ¥è¯¢å•ä¸ªç”¨æˆ·ä¿¡æ¯æ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        System.out.println(dbUtilsDao.select(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 6/8/2019 æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯æ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectAllTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        List users = dbUtilsDao.selectAll();</span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-DBUtilså·¥å…·&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-DBUtilså·¥å…·&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : DBUtilså·¥å…·&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : DBUtilså·¥å…·&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ç®€ä»‹ : ä¸ºäº†æ›´åŠ ç®€å•åœ°ä½¿ç”¨
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="JDBC" scheme="http://yoursite.com/tags/JDBC/"/>
    
  </entry>
  
  <entry>
    <title>Spring MVCä¹‹JSONæ•°æ®äº¤äº’</title>
    <link href="http://yoursite.com/2019/05/28/Spring-MVC%E4%B9%8BJSON%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%E5%92%8CRESTful%E6%94%AF%E6%8C%81/"/>
    <id>http://yoursite.com/2019/05/28/Spring-MVCä¹‹JSONæ•°æ®äº¤äº’å’ŒRESTfulæ”¯æŒ/</id>
    <published>2019-05-28T13:03:53.000Z</published>
    <updated>2019-06-08T10:02:12.251Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹JSONæ•°æ®äº¤äº’"><a href="#å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹JSONæ•°æ®äº¤äº’" class="headerlink" title="å­¦ä¹ ç¬”è®° : Spring MVCä¹‹JSONæ•°æ®äº¤äº’"></a>å­¦ä¹ ç¬”è®° : <code>Spring MVC</code>ä¹‹JSONæ•°æ®äº¤äº’</h2><h3 id="JSON-æ•°æ®äº¤äº’"><a href="#JSON-æ•°æ®äº¤äº’" class="headerlink" title="JSON æ•°æ®äº¤äº’"></a>JSON æ•°æ®äº¤äº’</h3><p><em>ç®€ä»‹ : <code>JSON</code>(JavaScript Object Notation,JSå¯¹è±¡æ ‡è®°) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼. å®ƒåŸºäºJavaScriptçš„ä¸€ä¸ªå­é›†,ä½¿ç”¨äº†C,C++,C#,Java,JavaScript,Perl,Pythonç­‰å…¶å®ƒè¯­è¨€çš„çº¦å®š,é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„<code>æ–‡æœ¬æ ¼å¼æ¥å­˜å‚¨å’Œè¡¨ç¤ºæ•°æ®</code>. è¿™äº›ç‰¹æ€§ä½¿JSONç§°ä¸ºç†æ€§çš„æ•°æ®äº¤äº’è¯­è¨€ !</em></p><h4 id="JSON-æ•°æ®è½¬æ¢"><a href="#JSON-æ•°æ®è½¬æ¢" class="headerlink" title="JSON æ•°æ®è½¬æ¢"></a>JSON æ•°æ®è½¬æ¢</h4><p><em>ç®€ä»‹ : ä¸ºäº†å®ç°æµè§ˆå™¨ä¸æ§åˆ¶å™¨<code>Controller</code>ä¹‹é—´çš„æ•°æ®äº¤äº’,Springæä¾›äº†ä¸€ä¸ª<code>HttpMessageConverter&lt;T&gt;</code>æ¥å£æ¥å®Œæˆæ­¤é¡¹å·¥ä½œ. è¯¥æ¥å£ä¸»è¦ç”¨äºå°†è¯·æ±‚æ¶ˆæ¯ä¸­çš„æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ª<code>T</code>çš„å¯¹è±¡,<code>å¹¶å°†ç±»å‹ä¸ºTçš„å¯¹è±¡ç»‘å®šåˆ°è¯·æ±‚æ–¹æ³•çš„å‚æ•°ä¸­,æˆ–è€…å°†å¯¹è±¡è½¬æ¢ä¸ºå“åº”æ¶ˆæ¯ä¼ é€’ç»™æµè§ˆå™¨æ˜¾ç¤º.</code> Springä¸º<code>HttpMessageConverter&lt;T&gt;</code>æ¥å£æä¾›äº†å¾ˆå¤šå®ç°ç±»,è¿™äº›å®ç°ç±»å¯ä»¥å¯¹ä¸åŒçš„ç±»å‹çš„æ•°æ®è¿›è¡Œä¿¡æ¯è½¬æ¢,å…¶ä¸­<code>MappingJackson2HttpMessageConverter</code>æ˜¯Spring MVCé»˜è®¤å¤„ç†JSONæ ¼å¼è¯·æ±‚å“åº”çš„å®ç°ç±». è¯¥å®ç°ç±»åˆ©ç”¨<code>Jackson</code>å¼€æºåŒ…è¯»å†™JSONæ•°æ®,<code>å°†Javaå¯¹è±¡è½¬æ¢ä¸ºJSONå¯¹è±¡å’ŒXMLæ–‡æ¡£,åŒæ—¶ä¹Ÿå¯ä»¥å°†JSONå¯¹è±¡å’ŒXMLæ–‡æ¡£è½¬æ¢ä¸ºJavaå¯¹è±¡ !</code></em></p><h4 id="ç¤ºä¾‹ç¨‹åº"><a href="#ç¤ºä¾‹ç¨‹åº" class="headerlink" title="ç¤ºä¾‹ç¨‹åº"></a>ç¤ºä¾‹ç¨‹åº</h4><ol><li><p><em>web.xml : å¯¹Spring mvcçš„å‰ç«¯æ§åˆ¶å™¨ç­‰ä¿¡æ¯è¿›è¡Œé…ç½®</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Spring MVCå‰ç«¯æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring_mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šSpring MVCé…ç½®æ–‡ä»¶çš„è·¯å¾„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-config.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æœåŠ¡å™¨å¯åŠ¨åç«‹å³åŠ è½½Spring MVCé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring_mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>springmvc-config.xml : Spring mvcé…ç½®æ–‡ä»¶</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰Springç»„ä»¶æ‰«æå™¨,æŒ‡å®šéœ€è¦æ‰«æçš„åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"pers.huangyuhui.springmvc.controller"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    é…ç½®æ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">    è¯¥é…ç½®ä¼šè‡ªåŠ¨æ³¨å†ŒRequestMappingHandlerMappingå’ŒRequestMappingHandlerAdapterä¸¤ä¸ªBean,</span></span><br><span class="line"><span class="comment">    å¹¶æä¾›å¯¹è¯»å†™XMLå’Œè¯»å†™JSONç­‰åŠŸèƒ½çš„æ”¯æŒ.</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®é™æ€èµ„æºçš„è®¿é—®è·¯å¾„,æ­¤é…ç½®ä¸­çš„æ–‡ä»¶å°†ä¸è¢«å‰ç«¯æ§åˆ¶å™¨æ‰€æ‹¦æˆª(è¯¥ç›®å½•å­˜æ”¾jquery-1.12.4.js) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/js/"</span> <span class="attr">location</span>=<span class="string">"/js/**"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/view/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>User.java : ç”¨æˆ·ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.springmvc.bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springmvc_json</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span>: pers.huangyuhui.springmvc.bean</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: User information</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 5/31/2019-1:44 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"username='"</span> + username + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", password='"</span> + password + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>index.jsp : ç”¨äºæµ‹è¯•JSONäº¤äº’çš„é¡µé¢</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%--</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Created</span> <span class="attr">by</span> <span class="attr">IntelliJ</span> <span class="attr">IDEA.</span></span></span><br><span class="line"><span class="tag">  <span class="attr">User:</span> <span class="attr">Administrator</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Date:</span> <span class="attr">5</span>/<span class="attr">31</span>/<span class="attr">2019</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Time:</span> <span class="attr">1:46</span> <span class="attr">PM</span></span></span><br><span class="line"><span class="tag">  <span class="attr">To</span> <span class="attr">change</span> <span class="attr">this</span> <span class="attr">template</span> <span class="attr">use</span> <span class="attr">File</span> | <span class="attr">Settings</span> | <span class="attr">File</span> <span class="attr">Templates.</span></span></span><br><span class="line"><span class="tag"><span class="attr">--</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Spring MVC<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-1.12.4.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        function testJson() &#123;</span></span><br><span class="line"><span class="undefined">            //ç”¨æˆ·è¡¨å•ä¿¡æ¯</span></span><br><span class="line"><span class="undefined">            var username = $("#username").val();</span></span><br><span class="line"><span class="undefined">            var password = $("#password").val();</span></span><br><span class="line"><span class="undefined">            $.ajax(&#123;</span></span><br><span class="line"><span class="undefined">                url: "$&#123;pageContext.request.contextPath&#125;/testJson",</span></span><br><span class="line"><span class="undefined">                type: "post",</span></span><br><span class="line"><span class="undefined">                //data:å‘é€çš„æ•°æ®</span></span><br><span class="line"><span class="undefined">                data: JSON.stringify(&#123;username: username, password: password&#125;),</span></span><br><span class="line"><span class="undefined">                //å®šä¹‰å‘é€è¯·æ±‚çš„æ•°æ®æ ¼å¼ä¸ºJSONå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="undefined">                contentType: "application/json;charset=UTF-8",</span></span><br><span class="line"><span class="undefined">                //å®šä¹‰å›è°ƒå“åº”çš„æ•°æ®æ ¼å¼ä¸ºJSONå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="undefined">                dataType: "json",</span></span><br><span class="line"><span class="undefined">                //æˆåŠŸå“åº”çš„ç»“æœ</span></span><br><span class="line"><span class="undefined">                success: function (data) &#123;</span></span><br><span class="line"><span class="undefined">                    if (data != null) &#123;</span></span><br><span class="line"><span class="undefined">                        alert("ä½ è¾“å…¥çš„ç”¨æˆ·å:" + username + "\nå¯†ç :" + password);</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·å <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">id</span>=<span class="string">"username"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¯†ç <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"Test"</span> <span class="attr">onclick</span>=<span class="string">"testJson()"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>UserController.java : æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.springmvc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.springmvc.bean.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: springmvc_json</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span>: pers.huangyuhui.springmvc.controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: Controller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 5/31/2019-1:39 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: æ¥æ”¶é¡µé¢è¯·æ±‚çš„JSONæ•°æ®, å¹¶è¿”å›JSONæ ¼å¼ç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-06-08 5:34 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: pers.huangyuhui.springmvc.bean.User</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//@ResponseBody ç”¨äºç›´æ¥è¿”å›retrunå¯¹è±¡(å°†Javaå¯¹è±¡è½¬æ¢ä¸ºJSONæ ¼å¼çš„å“åº”æ•°æ®)</span></span><br><span class="line">    <span class="comment">//@RequestBody ç”¨äºå°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®ç»‘å®šåˆ°æ–¹æ³•çš„å½¢å‚ä¸Š(å°†JSONæ ¼å¼çš„è¯·æ±‚æ•°æ®è½¬æ¢ä¸ºJavaå¯¹è±¡)</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/testJson"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">testJson</span><span class="params">(@RequestBody User user)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è¾“å‡ºæ¥æ”¶çš„JSONæ ¼å¼æ•°æ®</span></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="comment">//è¿”å›JSONæ ¼å¼çš„å“åº”</span></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç”±ç¨‹åºè¿è¡Œçš„ç»“æœ(ç•¥..)å¯çŸ¥,<code>JSON</code>æ ¼å¼çš„è¯·æ±‚æ•°æ®æˆåŠŸè½¬æ¢ä¸ºæ–¹æ³•ä¸­çš„Javaå¯¹è±¡,<code>Java</code>å¯¹è±¡ä¹ŸæˆåŠŸåœ°è½¬æ¢ä¸ºäº†JSONæ ¼å¼çš„å“åº”æ•°æ®.</em></p></li></ol><h3 id="RESTful"><a href="#RESTful" class="headerlink" title="RESTful"></a>RESTful</h3><p><em>(ã£â€¢Ì€Ï‰â€¢Ì)ã£âœâ¾â¾ ç•¥å†™â€¦(ä¼šå•ç‹¬å†™ä¸€ä¸ªå…³äº<code>RESTful</code>é£æ ¼çš„ç¼–ç¨‹ç¬”è®°å“Ÿ ~)</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹JSONæ•°æ®äº¤äº’&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹JSONæ•°æ®äº¤äº’&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Spring MVCä¹‹JSONæ•°æ®äº¤äº’&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : &lt;code
      
    
    </summary>
    
    
      <category term="Spring MVC" scheme="http://yoursite.com/tags/Spring-MVC/"/>
    
  </entry>
  
  <entry>
    <title>Spring MVCä¹‹æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½</title>
    <link href="http://yoursite.com/2019/05/28/Spring-MVC%E4%B9%8B%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8E%E4%B8%8B%E8%BD%BD/"/>
    <id>http://yoursite.com/2019/05/28/Spring-MVCä¹‹æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½/</id>
    <published>2019-05-28T13:01:46.000Z</published>
    <updated>2019-06-17T01:24:10.956Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹æ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½"><a href="#å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹æ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½" class="headerlink" title="å­¦ä¹ ç¬”è®° : Spring MVCä¹‹æ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½"></a>å­¦ä¹ ç¬”è®° : <code>Spring MVC</code>ä¹‹æ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½</h2><h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h3><p><em>ç®€ä»‹ : å¤šæ•°æ–‡ä»¶ä¸Šä¼ éƒ½æ˜¯é€šè¿‡è¡¨å•å½¢å¼æäº¤ç»™æœåŠ¡å™¨çš„,å› æ­¤,è¦å®ç°æ–‡ä»¶é•¿ä¼ åŠŸèƒ½å,å°±éœ€è¦æä¾›ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çš„è¡¨å•,è€Œè¡¨å•å¿…é¡»æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶.</em></p><ul><li><em>formè¡¨å•çš„methodçš„å±æ€§è®¾ç½®ä¸º<code>post</code></em></li><li><em>formè¡¨å•çš„enctypeå±æ€§è®¾ç½®ä¸º<code>multipart/form-data</code></em></li><li><em>æä¾›<code>&lt;input type=&quot;file&quot; name=&quot;filename&quot;/&gt;</code>çš„æ–‡ä»¶ä¸Šä¼ è¾“å…¥æ¡†</em></li></ul><p><em>å½“å®¢æˆ·ç«¯formè¡¨å•çš„<code>enctype</code>å±æ€§ä¸º<code>multipart/form-data</code>æ—¶,æµè§ˆå™¨å°±ä¼šé‡‡ç”¨äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®,æœåŠ¡å™¨ç«¯å°±ä¼šå¯¹æ–‡ä»¶ä¸Šä¼ çš„è¯·æ±‚è¿›è¡Œè§£æå¤„ç†. Spring MVCä¸ºæ–‡ä»¶ä¸Šä¼ æä¾›äº†æ”¯æŒ,è¿™ç§æ”¯æŒæ˜¯é€šè¿‡<code>MultipartResolver</code>(å¤šéƒ¨ä»¶è§£æå™¨)å¯¹è±¡å®ç°çš„. MultipartResolveræ˜¯ä¸€ä¸ªæ¥å£å¯¹è±¡,éœ€è¦é€šè¿‡å®ƒçš„å®ç°ç±»<code>CommonsMultipartResolver</code>æ¥å®Œæˆæ–‡ä»¶çš„ä¸Šä¼ å·¥ä½œ,åœ¨éœ€è¦åœ¨spring mvcé…ç½®æ–‡ä»¶ä¸­å®šä¹‰MultipartResolveræ¥å£çš„Beanå³å¯,å…¶é…ç½®æ–¹å¼å¦‚ä¸‹ :</em></p><ul><li><p><em>springmvc-config.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨:MultipartResolver --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½®è¯·æ±‚ç¼–ç æ ¼å¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultEncoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½®å…è®¸ä¸Šä¼ æ–‡ä»¶çš„æœ€å¤§å€¼(10MB),å•ä½ä¸ºå­—èŠ‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"20971520"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>æ³¨æ„: å› ä¸º<code>MultipartResolver</code>æ¥å£çš„å®ç°ç±»<code>CommonsMultipartResolver</code>å†…éƒ¨æ˜¯å¼•ç”¨<code>multipartResolver</code>å­—ç¬¦ä¸²è·å–è¯¥å®ç°ç±»å¯¹è±¡å¹¶å®Œæˆæ–‡ä»¶è§£æçš„,æ‰€ä»¥åœ¨é…ç½®<code>CommonsMultipartResolver</code>æ—¶å¿…é¡»æŒ‡å®šè¯¥Beançš„idä¸ºmultipartResolver</em></p></li></ul><h4 id="æ–‡ä»¶ä¸Šä¼ æ¡ˆä¾‹"><a href="#æ–‡ä»¶ä¸Šä¼ æ¡ˆä¾‹" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ æ¡ˆä¾‹"></a>æ–‡ä»¶ä¸Šä¼ æ¡ˆä¾‹</h4><ol><li><p><em>web.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Spring MVCå‰ç«¯æ§åˆ¶å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring_mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šSpring MVCæ ¸å¿ƒé…ç½®æ–‡ä»¶è·¯å¾„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-config.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä½¿æœåŠ¡å™¨å¯åŠ¨åç«‹å³åŠ è½½Spring MVCæ ¸å¿ƒé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring_mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>Springmvc-config.xml : Spring MVCæ ¸å¿ƒé…ç½®æ–‡ä»¶</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰ç»„ä»¶æ‰«æå™¨,æŒ‡å®šéœ€è¦æ‰«æçš„åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"pers.huangyuhui.file.controller"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"viewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/view/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨:MultipartResolver --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®è¯·æ±‚ç¼–ç æ ¼å¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultEncoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è®¾ç½®å…è®¸ä¸Šä¼ æ–‡ä»¶çš„æœ€å¤§å€¼(10MB),å•ä½ä¸ºå­—èŠ‚ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"20971520"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>upload.jsp : æ–‡ä»¶ä¸Šä¼ é¡µé¢</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%--</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Created</span> <span class="attr">by</span> <span class="attr">IntelliJ</span> <span class="attr">IDEA.</span></span></span><br><span class="line"><span class="tag">  <span class="attr">User:</span> <span class="attr">Administrator</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Date:</span> <span class="attr">6</span>/<span class="attr">1</span>/<span class="attr">2019</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Time:</span> <span class="attr">4:01</span> <span class="attr">PM</span></span></span><br><span class="line"><span class="tag"><span class="attr">--</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>upload file<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- éªŒè¯è¡¨å•ä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        function check() &#123;</span></span><br><span class="line"><span class="undefined">            var name = document.getElementById("name").value;</span></span><br><span class="line"><span class="undefined">            var file = document.getElementById("file").value;</span></span><br><span class="line"><span class="undefined">            if (name === "") &#123;</span></span><br><span class="line"><span class="undefined">                alert("è¯·å¡«å†™ä¸Šä¼ äºº !");</span></span><br><span class="line"><span class="undefined">                return false;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            if (file.length === 0 || file === "") &#123;</span></span><br><span class="line"><span class="undefined">                alert("è¯·é€‰æ‹©ä¸Šä¼ æ–‡ä»¶ !");</span></span><br><span class="line"><span class="undefined">                return false;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            return true;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/fileUpload"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">onsubmit</span>=<span class="string">"return check()"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ä¸Šä¼ äºº <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"name"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">multiple</span>=<span class="string">"multiple"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    è¯·é€‰æ‹©æ–‡ä»¶ <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"file"</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"uploadfile"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ä¸Šä¼ "</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>FileController.java : æ–‡ä»¶ä¸Šä¼ æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.file.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: file</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: æ–‡ä»¶æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/1/2019-5:17 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: upload the specified file</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: name ä¸Šä¼ äººå§“å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: uploadfile ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-06-08 6:20 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.lang.String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/fileUpload"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handleFormUpload</span><span class="params">(String name, List&lt;MultipartFile&gt; uploadfile, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (!uploadfile.isEmpty() &amp;&amp; uploadfile.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//éå†æ–‡ä»¶</span></span><br><span class="line">            <span class="keyword">for</span> (MultipartFile files : uploadfile) &#123;</span><br><span class="line">                <span class="comment">//è·å–ä¸Šä¼ æ–‡ä»¶çš„åŸå§‹åç§°</span></span><br><span class="line">                String originFileName = files.getOriginalFilename();</span><br><span class="line">                <span class="comment">//è®¾ç½®ä¸Šä¼ æ–‡ä»¶çš„ä¿å­˜åœ°å€ç›®å½•</span></span><br><span class="line">                String dirPath = request.getServletContext().getRealPath(<span class="string">"/upload/"</span>);</span><br><span class="line">                System.out.println(dirPath);</span><br><span class="line">                <span class="comment">//å¦‚æœä¿å­˜æ–‡ä»¶çš„åœ°å€ä¸å­˜åœ¨,åˆ™åˆ›å»ºè¯¥ç›®å½•</span></span><br><span class="line">                File file = <span class="keyword">new</span> File(dirPath);</span><br><span class="line">                <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">                    file.mkdirs();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//ä½¿ç”¨UUIDé‡æ–°å‘½åä¸Šä¼ çš„æ–‡ä»¶åç§°(ä¸Šä¼ äºº_uuid_åŸå§‹æ–‡ä»¶åç§°)</span></span><br><span class="line">                String newFileName = name + <span class="string">"_"</span> + UUID.randomUUID() + <span class="string">"_"</span> + originFileName;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//ä½¿ç”¨MultipartFileæ¥å£çš„æ–¹æ³•å°†æ–‡ä»¶ä¸Šä¼ ä¿å­˜åˆ°ç›®æ ‡ç›®å½•ä¸‹</span></span><br><span class="line">                    files.transferTo(<span class="keyword">new</span> File(dirPath + newFileName));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><ul><li><em>æ³¨æ„: <code>upload</code>æ–‡ä»¶å¤¹æ˜¯åœ¨é¡¹ç›®çš„å‘å¸ƒè·¯å¾„ä¸­,è€Œéåˆ›å»ºçš„é¡¹ç›®æ‰€åœ¨è·¯å¾„å“Ÿ !</em></li></ul><h3 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½</h3><p><em>ç®€ä»‹ : Spring MVCæä¾›äº†ä¸€ä¸ª<code>ResponseEntity</code>ç±»å‹çš„å¯¹è±¡,ä½¿ç”¨å®ƒå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®šä¹‰è¿”å›çš„<code>HttpHeaders</code>ä¸<code>HttpStatus</code>å¯¹è±¡,é€šè¿‡å¯¹è¿™ä¸¤ä¸ªå¯¹è±¡çš„è®¾ç½®,æ—¢å¯å®Œæˆä¸‹è½½æ–‡ä»¶æ—¶æ‰€éœ€å¯¹çš„é…ç½®ä¿¡æ¯.</em></p><ol><li><p><em>download.jsp : æ–‡ä»¶ä¸‹è½½é¡µé¢</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%--</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Created</span> <span class="attr">by</span> <span class="attr">IntelliJ</span> <span class="attr">IDEA.</span></span></span><br><span class="line"><span class="tag">  <span class="attr">User:</span> <span class="attr">Administrator</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Date:</span> <span class="attr">6</span>/<span class="attr">1</span>/<span class="attr">2019</span></span></span><br><span class="line"><span class="tag">  <span class="attr">Time:</span> <span class="attr">7:18</span> <span class="attr">PM</span></span></span><br><span class="line"><span class="tag"><span class="attr">--</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">import</span>=<span class="string">"java.net.URLEncoder"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">import</span>=<span class="string">"java.nio.charset.StandardCharsets"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡ä»¶ä¸‹è½½<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/fileDownload?filename=&lt;%=URLEncoder.encode("</span>é»„å®‡è¾‰å¥½å¯è€<span class="attr">.jpg</span>",<span class="attr">StandardCharsets.UTF_8</span>)%&gt;</span>"&gt;</span><br><span class="line">    ç‚¹å‡»ä¸‹è½½å›¾ç‰‡å“Ÿ!<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>FileController.java : æ–‡ä»¶ä¸‹è½½æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.file.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span>: file</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: æ–‡ä»¶æ“ä½œæ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 6/1/2019-5:17 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span>: 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@website</span>: https://yubuntu0109.github.io/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: download the specified file</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: filename</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-06-08 6:23 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: org.springframework.http.ResponseEntity&lt;byte [ ]&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/fileDownload"</span>)</span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; fileDownload(HttpServletRequest request, String filename) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŒ‡å®šè¦ä¸‹è½½çš„æ–‡ä»¶çš„æ‰€åœ¨è·¯å¾„</span></span><br><span class="line">        String path = request.getServletContext().getRealPath(<span class="string">"/upload/"</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¯¥æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(path + File.separator + filename);</span><br><span class="line">        <span class="comment">//å¯¹æ–‡ä»¶åè¿›è¡Œç¼–ç ,é˜²æ­¢ä¸­æ–‡æ–‡ä»¶ä¹±ç </span></span><br><span class="line">        filename = <span class="keyword">this</span>.getFileName(request, filename);</span><br><span class="line">        <span class="comment">//è®¾ç½®å“åº”å¤´</span></span><br><span class="line">        HttpHeaders httpHeaders = <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">        <span class="comment">//é€šçŸ¥æµè§ˆå™¨ä»¥ä¸‹è½½çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">        httpHeaders.setContentDispositionFormData(<span class="string">"attachment"</span>, filename);</span><br><span class="line">        <span class="comment">//å®šä¹‰ä»¥æµçš„å½¢å¼ä¸‹è½½è¿”å›æ–‡ä»¶æ•°æ®</span></span><br><span class="line">        <span class="comment">//MediaType.APPLICATION_OCTET_STREAMçš„å€¼ä¸ºapplication/octet-stream,æ—¢è¡¨ç¤ºä»¥äºŒè¿›åˆ¶æµçš„å½¢å¼ä¸‹è½½æ•°æ®</span></span><br><span class="line">        httpHeaders.setContentType(MediaType.APPLICATION_OCTET_STREAM);</span><br><span class="line">        <span class="comment">//ä½¿ç”¨Spring MVCæ¡†æ¶çš„ResponseEntityå¯¹è±¡å°è£…è¿”å›çš„ä¸‹è½½æ•°æ®</span></span><br><span class="line">        <span class="comment">//HttpStatusç±»å‹ä»£è¡¨Httpåè®®ä¸­çš„çŠ¶æ€,HttpStatus.OKè¡¨ç¤º200,æ—¢æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt;(FileUtils.readFileToByteArray(file), httpHeaders, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: æ ¹æ®æµè§ˆå™¨çš„ä¸åŒè¿›è¡Œç¼–ç è®¾ç½®, è¿”å›ç¼–ç åçš„æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: filename</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2019-06-08 6:24 PM</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: java.lang.String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFileName</span><span class="params">(HttpServletRequest request, String filename)</span> <span class="keyword">throws</span> UnsupportedEncodingException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//IEä¸åŒç‰ˆæœ¬çš„User-Agentä¸­å‡ºç°çš„å…³é”®å­—</span></span><br><span class="line">        String[] IEBrowserkeyWords = &#123;<span class="string">"MSIE"</span>, <span class="string">"Trident"</span>, <span class="string">"Edge"</span>&#125;;</span><br><span class="line">        <span class="comment">//è·å–è¯·æ±‚å¤´ä»£ç†ä¿¡æ¯</span></span><br><span class="line">        String userAgent = request.getHeader(<span class="string">"User-Agent"</span>);</span><br><span class="line">        <span class="keyword">for</span> (String keyWork : IEBrowserkeyWords) &#123;</span><br><span class="line">            <span class="keyword">if</span> (userAgent.contains(keyWork)) &#123;</span><br><span class="line">                <span class="comment">//IEå†…æ ¸æµè§ˆå™¨,ç»Ÿä¸€è®¾ç½®ä¸ºUTF-8ç¼–ç æ˜¾ç¤º</span></span><br><span class="line">                <span class="keyword">return</span> URLEncoder.encode(filename, StandardCharsets.UTF_8.name());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç«ç‹ç­‰å…¶å®ƒæµè§ˆå™¨ç»Ÿä¸€è®¾ç½®ä¸ºISO-8859-1ç¼–ç æ˜¾ç¤º</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(filename.getBytes(StandardCharsets.UTF_8.name()), StandardCharsets.ISO_8859_1.name());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹æ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹æ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Spring MVCä¹‹æ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : &lt;code
      
    
    </summary>
    
    
      <category term="Spring MVC" scheme="http://yoursite.com/tags/Spring-MVC/"/>
    
  </entry>
  
  <entry>
    <title>Database Connection Pool</title>
    <link href="http://yoursite.com/2019/05/28/Database-Connection-Pool/"/>
    <id>http://yoursite.com/2019/05/28/Database-Connection-Pool/</id>
    <published>2019-05-28T12:57:13.000Z</published>
    <updated>2019-05-30T08:40:06.917Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-æ•°æ®åº“è¿æ¥æ± "><a href="#å­¦ä¹ ç¬”è®°-æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="å­¦ä¹ ç¬”è®° : æ•°æ®åº“è¿æ¥æ± "></a>å­¦ä¹ ç¬”è®° : æ•°æ®åº“è¿æ¥æ± </h2><p><em>ç®€ä»‹ : åœ¨JDBCç¼–ç¨‹ä¸­,æ¯æ¬¡åˆ›å»ºå’Œæ–­å¼€<code>Connection</code>å¯¹è±¡éƒ½ä¼šæ¶ˆè€—ä¸€å®šçš„æ—¶é—´å’ŒIOèµ„æº.ä¸ºäº†é¿å…é¢‘ç¹åœ°åˆ›å»ºæ•°æ®åº“è¿æ¥,å·¥ç¨‹å¸ˆä»¬æå‡ºäº†<code>æ•°æ®åº“è¿æ¥æ± </code>æŠ€æœ¯,å…¶è´Ÿè´£åˆ†é…,ç®¡ç†å’Œé‡Šæ”¾æ•°æ®åº“è¿æ¥,å®ƒå…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ç°æœ‰çš„æ•°æ®åº“è¿æ¥,è€Œä¸æ˜¯é‡æ–°å»ºç«‹è¿æ¥ !</em></p><h3 id="DataSource-æ¥å£"><a href="#DataSource-æ¥å£" class="headerlink" title="DataSource æ¥å£"></a>DataSource æ¥å£</h3><p><em>ç®€ä»‹ : ä¸ºäº†è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡(Connection),JDBCæä¾›äº†<code>javax.sql.DataSource</code>æ¥å£,å®ƒè´Ÿè´£ä¸æ•°æ®åº“å»ºç«‹è¿æ¥,å¹¶å®šä¹‰äº†è¿”å›å€¼ä¸ºConnectionå¯¹è±¡çš„æ–¹æ³•. äººä»¬ä¹ æƒ¯æ€§åœ°æŠŠå®ç°äº†è¯¥æ¥å£çš„ç±»ç§°ä¸º<code>æ•°æ®æº</code>,åœ¨æ•°æ®æºä¸­å­˜å‚¨äº†æ‰€æœ‰å»ºç«‹æ•°æ®åº“è¿æ¥çš„ä¿¡æ¯.</em></p><ul><li><em><code>æ•°æ®æºä¸­åŒ…å«æ•°æ®åº“åº“è¿æ¥æ± ,å¦‚æœæ•°æ®æ˜¯æ°´,æ•°æ®åº“å°±æ˜¯æ°´åº“,æ•°æ®æºå°±æ˜¯è¿æ¥æ°´åº“çš„ç®¡é“,ç»ˆç«¯ç”¨æˆ·çœ‹åˆ°çš„æ•°æ®é›†æ˜¯ç®¡é“é‡Œæµå‡ºæ¥çš„æ°´.</code></em></li></ul><h3 id="DBCP-æ•°æ®æº"><a href="#DBCP-æ•°æ®æº" class="headerlink" title="DBCP æ•°æ®æº"></a>DBCP æ•°æ®æº</h3><p><em>ç®€ä»‹ : <code>DBCP</code>æ˜¯æ•°æ®åº“è¿æ¥æ± (DataBase Connection Pool)çš„ç®€ç§°,æ˜¯Apacheç»„ç»‡ä¸‹çš„å¼€æºè¿æ¥æ± å®ç°.å…¶jaråŒ…ä¸­åŒ…å«ä¸¤ä¸ªæ ¸å¿ƒçš„ç±»,åˆ†åˆ«æ˜¯<code>BasicDataSourceFactory</code>å’Œ<code>BasicDataSource</code>.</em></p><ol><li><em>BasicDataSource : ä¸ºDataSourceçš„å®ç°ç±»,ä¸»è¦åŒ…å«è®¾ç½®æ•°æ®æºå¯¹è±¡çš„æ–¹æ³•.</em></li><li><em>BasicDataSourceFactory : ä¸ºåˆ›å»ºBasicDataSourceå¯¹è±¡çš„å·¥å‚ç±»,å®ƒä¸»è¦åŒ…å«ä¸€ä¸ªè¿”å›å€¼ä¸ºBasicDataSourceå¯¹è±¡çš„æ–¹æ³•<code>createDataSource()</code>,è¯¥æ–¹æ³•é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯ç”Ÿæˆæ•°æ®æºå¯¹è±¡å¹¶è¿”å›ç»™è°ƒç”¨è€….</em></li></ol><h4 id="ä½¿ç”¨BasicDataSourceç±»åˆ›å»ºæ•°æ®æºå¯¹è±¡"><a href="#ä½¿ç”¨BasicDataSourceç±»åˆ›å»ºæ•°æ®æºå¯¹è±¡" class="headerlink" title="ä½¿ç”¨BasicDataSourceç±»åˆ›å»ºæ•°æ®æºå¯¹è±¡"></a>ä½¿ç”¨BasicDataSourceç±»åˆ›å»ºæ•°æ®æºå¯¹è±¡</h4><ol><li><p><em>ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.dbcp.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DatabaseMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp2.BasicDataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: DBCPTest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: é€šè¿‡BasicDataSourceç±»ç›´æ¥åˆ›å»ºæ•°æ®æºå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 29, 2019 9:25:36 PM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBCPTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line"><span class="comment">// è·å–DBCPæ•°æ®æºå®ç°ç±»å¯¹è±¡</span></span><br><span class="line">BasicDataSource basicDataSource = <span class="keyword">new</span> BasicDataSource();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®è¿æ¥æ•°æ®åº“éœ€è¦çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">basicDataSource.setDriverClassName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">basicDataSource.setUrl(<span class="string">"jdbc:mysql://localhost/MyBatis?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true"</span>);</span><br><span class="line">basicDataSource.setUsername(<span class="string">"xxxxxx"</span>);</span><br><span class="line">basicDataSource.setPassword(<span class="string">"xxxxxx"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®è¿æ¥æ± çš„å‚æ•°</span></span><br><span class="line">basicDataSource.setInitialSize(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">dataSource = basicDataSource;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"><span class="comment">// è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡</span></span><br><span class="line">Connection connection = dataSource.getConnection();</span><br><span class="line"><span class="comment">// è·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯</span></span><br><span class="line">DatabaseMetaData databaseMetaData = connection.getMetaData();</span><br><span class="line"><span class="comment">// æ‰“å°æ•°æ®åº“è¿æ¥ä¿¡æ¯</span></span><br><span class="line">System.out.println(<span class="string">"URL: "</span> + databaseMetaData.getURL() + <span class="string">"\nUser name: "</span> + databaseMetaData.getUserName()</span><br><span class="line">+ <span class="string">"\nDirver name: "</span> + databaseMetaData.getDriverName() + <span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">URL : jdbc:mysql://localhost/MyBatis?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true</span><br><span class="line">User name : xxxxxx@localhost</span><br><span class="line">Dirver name : MySQL Connector/J</span><br></pre></td></tr></table></figure></li></ol><h4 id="é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶åˆ›å»ºæ•°æ®æºå¯¹è±¡"><a href="#é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶åˆ›å»ºæ•°æ®æºå¯¹è±¡" class="headerlink" title="é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶åˆ›å»ºæ•°æ®æºå¯¹è±¡"></a>é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶åˆ›å»ºæ•°æ®æºå¯¹è±¡</h4><ol><li><em>db.properties : æ•°æ®æºæ–‡ä»¶</em><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#database configuration information</span><br><span class="line">driverClassName=com.mysql.cj.jdbc.Driver</span><br><span class="line">url=jdbc:mysql://LOCALHOST/MyBatis?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true</span><br><span class="line">username=xxxxxx</span><br><span class="line">password=xxxxxx</span><br><span class="line">#DBCP configuration information</span><br><span class="line">initialSize=5</span><br><span class="line">maxIdle=10</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p><em>DBCPTest2.java : æµ‹è¯•ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.dbcp.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DatabaseMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp2.BasicDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: DBCPTest2</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶åˆ›å»ºæ•°æ®æºå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 29, 2019 9:45:15 PM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBCPTest2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> DataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line"><span class="comment">// æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡ç±»åŠ è½½å™¨æ‰¾åˆ°æ–‡ä»¶è·¯å¾„å¹¶è¯»å–é…ç½®æ–‡ä»¶</span></span><br><span class="line">InputStream inputStream = <span class="keyword">new</span> DBCPTest2().getClass().getClassLoader().getResourceAsStream(<span class="string">"db.properties"</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">// æŠŠæ–‡ä»¶ä»¥è¾“å…¥æµçš„å½¢å¼åŠ è½½åˆ°é…ç½®å¯¹è±¡ä¸­</span></span><br><span class="line">properties.load(inputStream);</span><br><span class="line"><span class="comment">// åˆ›å»ºæ•°æ®æºå¯¹è±¡</span></span><br><span class="line">dataSource = BasicDataSourceFactory.createDataSource(properties);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"><span class="comment">// è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡</span></span><br><span class="line">Connection connection = dataSource.getConnection();</span><br><span class="line"><span class="comment">// è·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯</span></span><br><span class="line">DatabaseMetaData databaseMetaData = connection.getMetaData();</span><br><span class="line"><span class="comment">// æ‰“å°æ•°æ®åº“è¿æ¥ä¿¡æ¯</span></span><br><span class="line">System.out.println(<span class="string">"URL: "</span> + databaseMetaData.getURL() + <span class="string">"\nUser name: "</span> + databaseMetaData.getUserName()</span><br><span class="line">+ <span class="string">"\nDirver name: "</span> + databaseMetaData.getDriverName() + <span class="string">"\nDriver version: "</span></span><br><span class="line">+ databaseMetaData.getDriverVersion());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">URL : jdbc:mysql://LOCALHOST/MyBatis?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true</span><br><span class="line">User name : xxxxxx@localhost</span><br><span class="line">Dirver name : MySQL Connector/J</span><br><span class="line">Driver version : mysql-connector-java-8.0.11 (Revision: 6d4eaa273bc181b4cf1c8ad0821a2227f116fedf)</span><br></pre></td></tr></table></figure></li></ol><h3 id="C3P0-æ•°æ®æº"><a href="#C3P0-æ•°æ®æº" class="headerlink" title="C3P0 æ•°æ®æº"></a>C3P0 æ•°æ®æº</h3><p><em>ç®€ä»‹ : <code>C3P0</code>å®ç°äº†DataSourceæ•°æ®æºæ¥å£,æ”¯æŒJDBC2,JDBC3çš„æ ‡å‡†è§„èŒƒ,æ˜“äºæ‰©å±•å¹¶ä¸”æ€§èƒ½ä¼˜è¶Š,è‘—åçš„å¼€æºæ¡†æ¶<code>Hibernate</code>å’Œ<code>Spring</code>ä½¿ç”¨çš„éƒ½æ˜¯è¯¥æ•°æ®æº. C3P0ä¸­DataSourceæ¥å£çš„å®ç°ç±»ä¸º<code>ComboPooledDataSource</code>,å®ƒæ˜¯C3P0çš„æ ¸å¿ƒç±».</em></p><h4 id="ä½¿ç”¨ComboPooledDataSourceç±»åˆ›å»ºæ•°æ®åº“æºå¯¹è±¡"><a href="#ä½¿ç”¨ComboPooledDataSourceç±»åˆ›å»ºæ•°æ®åº“æºå¯¹è±¡" class="headerlink" title="ä½¿ç”¨ComboPooledDataSourceç±»åˆ›å»ºæ•°æ®åº“æºå¯¹è±¡"></a>ä½¿ç”¨ComboPooledDataSourceç±»åˆ›å»ºæ•°æ®åº“æºå¯¹è±¡</h4><ol><li><p><em>ç¤ºä¾‹ç¨‹åºå¦‚ä¸‹</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.c3p0.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.beans.PropertyVetoException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DatabaseMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: ComboPooledDataSourceTest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: é€šè¿‡ComboPooledDataSourceç±»ç›´æ¥åˆ›å»ºæ•°æ®æºå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 29, 2019 10:04:46 PM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ComboPooledDataSourceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–c3p0æ•°æ®æº</span></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">ComboPooledDataSource comboPooledDataSource = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">comboPooledDataSource.setDriverClass(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (PropertyVetoException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">comboPooledDataSource.setJdbcUrl(</span><br><span class="line"><span class="string">"jdbc:mysql://localhost/MyBatis?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true"</span>);</span><br><span class="line">comboPooledDataSource.setUser(<span class="string">"xxxxxx"</span>);</span><br><span class="line">comboPooledDataSource.setPassword(<span class="string">"xxxxxx"</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è¿æ¥æ± çš„å‚æ•°</span></span><br><span class="line">comboPooledDataSource.setInitialPoolSize(<span class="number">5</span>);</span><br><span class="line">comboPooledDataSource.setMaxPoolSize(<span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">dataSource = comboPooledDataSource;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡</span></span><br><span class="line">Connection connection = dataSource.getConnection();</span><br><span class="line"><span class="comment">// è·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯</span></span><br><span class="line">DatabaseMetaData databaseMetaData = connection.getMetaData();</span><br><span class="line"><span class="comment">// è¾“å‡ºæ•°æ®åº“è¿æ¥ä¿¡æ¯</span></span><br><span class="line">System.out.println(<span class="string">"URL: "</span> + databaseMetaData.getURL() + <span class="string">"\nUser name: "</span> + databaseMetaData.getUserName()</span><br><span class="line">+ <span class="string">"\nDirver name: "</span> + databaseMetaData.getDriverName() + <span class="string">"\nDriver version: "</span></span><br><span class="line">+ databaseMetaData.getDriverVersion());</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">URL : jdbc:mysql://localhost/MyBatis?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true</span><br><span class="line">User name : xxxxxx@localhost</span><br><span class="line">Dirver name : MySQL Connector/J</span><br><span class="line">Driver version : mysql-connector-java-8.0.11 (Revision: 6d4eaa273bc181b4cf1c8ad0821a2227f116fedf)</span><br></pre></td></tr></table></figure></li></ol><h4 id="é€šè¿‡é…ç½®æ–‡ä»¶åˆ›å»ºæ•°æ®æºå¯¹è±¡"><a href="#é€šè¿‡é…ç½®æ–‡ä»¶åˆ›å»ºæ•°æ®æºå¯¹è±¡" class="headerlink" title="é€šè¿‡é…ç½®æ–‡ä»¶åˆ›å»ºæ•°æ®æºå¯¹è±¡"></a>é€šè¿‡é…ç½®æ–‡ä»¶åˆ›å»ºæ•°æ®æºå¯¹è±¡</h4><ol><li><p><em>c3p0-config.xml : æ•°æ®æºé…ç½®æ–‡ä»¶</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é»˜è®¤é…ç½®:åœ¨æ²¡æœ‰æŒ‡å®šé…ç½®æ—¶é»˜è®¤ä½¿ç”¨è¯¥é…ç½®åˆ›å»ºc3p0æ•°æ®æºå¯¹è±¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">default-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span>GoodTime<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span>&gt;</span></span><br><span class="line">jdbc:mysql://LOCALHOST/MyBatis?useSSL=false&amp;amp;serverTimezone=UTC&amp;amp;allowPublicKeyRetrieval=true</span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"checkoutTimeout"</span>&gt;</span>30000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialPoolSize"</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdleTime"</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minPoolSize"</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxStatements"</span>&gt;</span>200<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">default-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è‡ªå®šä¹‰é…ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">"yu"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span>GoodTime<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span>&gt;</span></span><br><span class="line">jdbc:mysql://LOCALHOST/MyBatis?useSSL=false&amp;amp;serverTimezone=UTC&amp;amp;allowPublicKeyRetrieval=true</span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initiaPoolSize"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span>&gt;</span>15<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>ComboPooledDataSourceTest2.java : æµ‹è¯•ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.c3p0.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DatabaseMetaData;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ComboPooledDataSourceTest2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> DataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–C3P0æ•°æ®æº</span></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line"><span class="comment">// ä½¿ç”¨c3p0-config.xmlé…ç½®æ–‡ä»¶ä¸­çš„named-configèŠ‚ç‚¹ä¸­nameå±æ€§çš„å€¼</span></span><br><span class="line">ComboPooledDataSource comboPooledDataSource = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">"yu"</span>);</span><br><span class="line">dataSource = comboPooledDataSource;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ•°æ®åº“å¯¹è±¡</span></span><br><span class="line">Connection connection = dataSource.getConnection();</span><br><span class="line"><span class="comment">// è·å–æ•°æ®åº“è¿æ¥ä¿¡æ¯</span></span><br><span class="line">DatabaseMetaData databaseMetaData = connection.getMetaData();</span><br><span class="line"><span class="comment">// è¾“å‡ºæ•°æ®åº“é…ç½®ä¿¡æ¯</span></span><br><span class="line">System.out.println(<span class="string">"URL: "</span> + databaseMetaData.getURL() + <span class="string">"\nUser name: "</span> + databaseMetaData.getUserName()</span><br><span class="line">+ <span class="string">"\nDirver name: "</span> + databaseMetaData.getDriverName() + <span class="string">"\nDriver version: "</span></span><br><span class="line">+ databaseMetaData.getDriverVersion());</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>ç¨‹åºè¿è¡Œç»“æœ</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">URL : jdbc:mysql://LOCALHOST/MyBatis?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true</span><br><span class="line">User name : xxxxxx@localhost</span><br><span class="line">Dirver name : MySQL Connector/J</span><br><span class="line">Driver version : mysql-connector-java-8.0.11 (Revision: 6d4eaa273bc181b4cf1c8ad0821a2227f116fedf)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-æ•°æ®åº“è¿æ¥æ± &quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-æ•°æ®åº“è¿æ¥æ± &quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : æ•°æ®åº“è¿æ¥æ± &quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : æ•°æ®åº“è¿æ¥æ± &lt;/h2&gt;&lt;p&gt;&lt;em&gt;ç®€ä»‹ : åœ¨JDBCç¼–ç¨‹ä¸­,æ¯æ¬¡åˆ›å»ºå’Œæ–­å¼€&lt;code
      
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="JDBC" scheme="http://yoursite.com/tags/JDBC/"/>
    
  </entry>
  
  <entry>
    <title>SSMæ¡†æ¶æ•´åˆ</title>
    <link href="http://yoursite.com/2019/05/23/SSM%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88/"/>
    <id>http://yoursite.com/2019/05/23/SSMæ¡†æ¶æ•´åˆ/</id>
    <published>2019-05-23T14:05:49.000Z</published>
    <updated>2019-05-29T11:36:51.320Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-SSMæ•´åˆ"><a href="#å­¦ä¹ ç¬”è®°-SSMæ•´åˆ" class="headerlink" title="å­¦ä¹ ç¬”è®° : SSMæ•´åˆ"></a>å­¦ä¹ ç¬”è®° : SSMæ•´åˆ</h2><h3 id="æ•´åˆç¯å¢ƒæ­å»º"><a href="#æ•´åˆç¯å¢ƒæ­å»º" class="headerlink" title="æ•´åˆç¯å¢ƒæ­å»º"></a>æ•´åˆç¯å¢ƒæ­å»º</h3><p><em>ç®€ä»‹ : ç”±äºSpring MVCæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ¨¡å—,æ‰€ä»¥Spring MVCä¸Springä¹‹é—´ä¸å­˜åœ¨æ•´åˆé—®é¢˜,å› æ­¤SSMæ•´åˆä¸»è¦åªæ¶‰åŠSpringä¸MyBatisçš„æ•´åˆ.ä¸‹é¢é€šè¿‡å®¢æˆ·idæŸ¥è¯¢æ•°æ®è¡¨ä¸­æŒ‡å®šçš„å®¢æˆ·ä¿¡æ¯çš„ç®€å•æ¡ˆä¾‹æ¥æ¼”ç¤ºSSMæ•´åˆæ€è·¯ ~</em></p><h3 id="ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–å†™é…ç½®æ–‡ä»¶"></a>ç¼–å†™é…ç½®æ–‡ä»¶</h3><ol><li><p><em>db.properties : æ•°æ®åº“é…ç½®æ–‡ä»¶</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line">#database configuration information</span><br><span class="line">#</span><br><span class="line">jdbc.driver=com.mysql.cj.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql:xxxxxx?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true</span><br><span class="line">jdbc.username=xxxxxx</span><br><span class="line">jdbc.password=xxxxxx</span><br><span class="line">#</span><br><span class="line">#DBCP configuration</span><br><span class="line">#</span><br><span class="line">jdbc.maxTotal=30    #æœ€å¤§è¿æ¥æ•°</span><br><span class="line">jdbc.maxIdle=10     #æœ€å¤§ç©ºé—²è¿æ¥æ•°</span><br><span class="line">jdbc.initialSize=5  #åˆå§‹åŒ–è¿æ¥æ•°</span><br></pre></td></tr></table></figure></li><li><p><em>applicationContext.xml : Springæ ¸å¿ƒé…ç½®æ–‡ä»¶</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è¯»å–db.properties --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:db.properties"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æ•°æ®æº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.apache.commons.dbcp2.BasicDataSource"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•°æ®åº“é©±åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¿æ¥æ•°æ®åº“çš„url --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¿æ¥æ•°æ®åº“çš„å¯†ç  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æœ€å¤§è¿æ¥æ•° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxTotal"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.maxTotal&#125;"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æœ€å¤§ç©ºé—²æ•° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdle"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.maxIdle&#125;"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åˆå§‹åŒ–è¿æ¥æ•° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialSize"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.initialSize&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨,ä¾èµ–äºæ•°æ®æº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯äº‹åŠ¡æ³¨è§£ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®MyBatiså·¥å‚: æ„å»ºSqlSessionFactory --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šæ•°æ®æºå’Œé…ç½®æ–‡ä»¶: ä½¿å¾—Spring IOCå®¹å™¨åœ¨åˆå§‹åŒ–idä¸ºsqlSessionFactoryçš„Beanæ—¶è§£æMyBatisçš„é…ç½®æ–‡ä»¶,å¹¶ä¸æ•°æ®æºä¸€åŒä¿å­˜åˆ°Springçš„Beanä¸­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ³¨å…¥æ•°æ®æº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šMyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä½ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:mybatis-config.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®mapperæ‰«æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"pers.huangyuhui.ssm.dao"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ‰«æService --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"pers.huangyuhui.ssm.service"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>mybatis-config.xml : MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®åˆ«å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é€šè¿‡æ‰«æåŒ…çš„å½¢å¼å®šä¹‰åˆ«å: mybatisä¼šå°†æ‰€æœ‰è¯¥åŒ…ä¸­çš„POJOç±»ä»¥é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"pers.huangyuhui.ssm.po"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®Mapper --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨Mapperæ¥å£åŠ¨æ€ä»£ç†å¼€å‘æ—¶,å¦‚æœå®Œå…¨éµå¾ªäº†ç¼–å†™è§„èŒƒ,é‚£ä¹ˆè¯¥é…ç½®æ–‡ä»¶ä¸­æ— éœ€ä»¥ä¸‹æ˜ å°„æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;mapper resource="pers/huangyuhui/ssm/dao/CustomerDao.xml"/&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>web.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag"><span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">display-name</span>&gt;</span>ssm_01<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®åŠ è½½Springæ–‡ä»¶çš„ç›‘å¬å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¼–ç è¿‡æ»¤å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.action<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®Spring MVCå‰ç«¯æ ¸å¿ƒè¿‡æ»¤å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring_mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-config.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æœåŠ¡å™¨å¯åŠ¨åç«‹å³åŠ è½½Spring MVCé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring_mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ‹¦æˆªé™¤äº†jspå¤–çš„æ‰€æœ‰è¯·æ±‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">Spring-context.jaråŒ…ä¸­æä¾›äº†é€šè¿‡JMXæ¥å®æ—¶æŸ¥çœ‹Springæ”¾åœ¨applicationContexté‡Œçš„beanåˆ—è¡¨åŠŸèƒ½,</span></span><br><span class="line"><span class="comment">å…¶ä¼šåœ¨é¡¹ç›®é…ç½®æ–‡ä»¶é‡Œæ‰¾ä¸€ä¸ªå«`spring.liveBeansView.mbeanDomain`çš„ç¯å¢ƒå˜é‡,å¦‚æœæ²¡æ‰¾åˆ°,</span></span><br><span class="line"><span class="comment">å°±ä¼šæŠ›å‡ºå¼‚å¸¸:[spring.liveBeansView.mbeanDomain] threw NamingException ...</span></span><br><span class="line"><span class="comment">è§£å†³æ–¹æ¡ˆ: åœ¨é¡¹ç›®ä¸­çš„web.xmlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>spring.profiles.active<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>dev<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>spring.profiles.default<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>dev<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>spring.liveBeansView.mbeanDomain<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>dev<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="æ•´åˆåº”ç”¨æµ‹è¯•"><a href="#æ•´åˆåº”ç”¨æµ‹è¯•" class="headerlink" title="æ•´åˆåº”ç”¨æµ‹è¯•"></a>æ•´åˆåº”ç”¨æµ‹è¯•</h3><p><em>ä¸Šè¿°å·²ç»äº†SSMæ¡†æ¶æ•´åˆç¯å¢ƒçš„æ­å»ºå·¥ä½œ,æ¥ä¸‹æ¥å¼€å§‹æ•´åˆå¼€å‘å·¥ä½œ ~</em></p><ol><li><p><em>t_customer.sql : å®¢æˆ·ä¿¡æ¯è¡¨</em></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_customer (</span><br><span class="line"></span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">20</span>) PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">job <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">phone <span class="built_in">VARCHAR</span>(<span class="number">12</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li><p><em>Customer.java : æŒä¹…åŒ–ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.ssm.po;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: Customer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: å®¢æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 25, 2019 11:07:37 AM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> String job;</span><br><span class="line"><span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getJob</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> job;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJob</span><span class="params">(String job)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.job = job;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> phone;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPhone</span><span class="params">(String phone)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.phone = phone;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"Customer [id="</span> + id + <span class="string">", name="</span> + name + <span class="string">", job="</span> + job + <span class="string">", phone="</span> + phone + <span class="string">"]"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>CustomerDao.java : Daoå±‚</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.ssm.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ssm.po.Customer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: CustomerDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 25, 2019 11:09:22 AM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CustomerDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Title</span>: findCustomerById</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æ ¹æ®å®¢æˆ·idæŸ¥æ‰¾å®¢æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: Customer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Customer <span class="title">findCustomerById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>CustomerDao.xml : æ¥å£å¯¹åº”çš„æ˜ å°„æ–‡ä»¶</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"pers.huangyuhui.ssm.dao.CustomerDao"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ ¹æ®å®¢æˆ·idæŸ¥æ‰¾å®¢æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findCustomerById"</span> <span class="attr">parameterType</span>=<span class="string">"Integer"</span> <span class="attr">resultType</span>=<span class="string">"customer"</span>&gt;</span></span><br><span class="line">select id,name,job,phone from t_customer where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>CustomerService.java : Serviceå±‚</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.ssm.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ssm.po.Customer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: CustomerService</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 25, 2019 11:15:26 AM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CustomerService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Title</span>: findCustomerById</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: é€šè¿‡idæŸ¥æ‰¾å®¢æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: Customer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Customer <span class="title">findCustomerById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>CustomerServiceImpl.java : CustomerServiceçš„å®ç°ç±»</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.ssm.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ssm.dao.CustomerDao;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ssm.po.Customer;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ssm.service.CustomerService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: CustomerServiceImpl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: CustomerServiceçš„å®ç°ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 25, 2019 11:17:12 AM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span> <span class="comment">// æ ‡è¯†ä¸ºä¸šåŠ¡å±‚çš„å®ç°ç±»</span></span><br><span class="line"><span class="meta">@Transactional</span> <span class="comment">// å°†ç±»ä¸­æ‰€æœ‰æ–¹æ³•éƒ½çº³å…¥Springçš„äº‹ç‰©ç®¡ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerServiceImpl</span> <span class="keyword">implements</span> <span class="title">CustomerService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span> <span class="comment">// å°†CustomerDaoæ¥å£å¯¹è±¡æ³¨å…¥åˆ°æœ¬ç±»</span></span><br><span class="line"><span class="keyword">private</span> CustomerDao customerDao;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="comment">// æŸ¥è¯¢å®¢æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Customer <span class="title">findCustomerById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.customerDao.findCustomerById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>CustomerController.java : æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.ssm.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ssm.po.Customer;</span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.ssm.service.CustomerService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: CustomerController</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: ç”¨äºå¤„ç†é¡µé¢è¯·æ±‚çš„æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 25, 2019 11:21:39 AM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">// æ ‡è¯†ä¸ºæ§åˆ¶å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span> <span class="comment">// å°†CustomerServiceæ¥å£å¯¹è±¡æ³¨å…¥åˆ°æœ¬ç±»</span></span><br><span class="line"><span class="keyword">private</span> CustomerService customerService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Title</span>: findCustomerById</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: é€šè¿‡idæŸ¥è¯¢å®¢æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: model</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/findCustomerById"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">findCustomerById</span><span class="params">(Integer id, Model model)</span> </span>&#123;</span><br><span class="line">Customer customer = customerService.findCustomerById(id);</span><br><span class="line">model.addAttribute(<span class="string">"customer"</span>, customer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›å®¢æˆ·ä¿¡æ¯å±•ç¤ºé¡µé¢</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">"customerInfo"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>WebContent/WEB-INF/<code>view/customerInfo.jsp</code> : å±•ç¤ºå®¢æˆ·ä¿¡æ¯é¡µé¢</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>SSMæ•´åˆæ¡ˆä¾‹<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span>å®¢æˆ·ä¿¡æ¯<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">border</span>=<span class="string">"1"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>ç¼–å·<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>èŒä¸š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>ç”µè¯<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;customer.id &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;customer.name &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;customer.job &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;customer.phone &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>log4j.properties : æ—¥å¿—æ–‡ä»¶</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#Global configuration</span><br><span class="line">log4j.rootLogger=DEBUG,stdout</span><br><span class="line">#Log configuration</span><br><span class="line">log4j.logger.pers.huangyuhui.ssm.controller=TRACE</span><br><span class="line">#Console configuration</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.layout.ConversionPattern=%5p [%t] - %m%n</span><br></pre></td></tr></table></figure></li><li><p><em>å°†é¡¹ç›®å‘å¸ƒåˆ°Tomcatå¹¶å¯åŠ¨,åœ¨æµè§ˆå™¨ä¸­è®¿é—®åœ°å€: <code>http://localhost:8080/ssm_01/findCustomerById?id=1</code>,å…¶é¡µé¢æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º.</em></p></li></ol><p><img src="/2019/05/23/SSMæ¡†æ¶æ•´åˆ/SSMæ•´åˆæ¡ˆä¾‹.PNG" alt=" "><br><em>ç”±å›¾å¯çŸ¥,é€šè¿‡æµè§ˆå™¨æˆåŠŸæŸ¥å‡ºäº†<code>t_customer</code>è¡¨ä¸­idä¸º1çš„å®¢æˆ·ä¿¡æ¯.ç»§è€Œè¯æ˜<code>SSM</code>æ¡†æ¶æ•´åˆæˆåŠŸ!ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾</em></p><ol start="10"><li><em>Consoleè¾“å‡ºçš„ä¸»è¦æ—¥å¿—ä¿¡æ¯å¦‚ä¸‹ :</em><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">DispatcherServlet with name &apos;spring_mvc&apos; processing GET request for [/ssm_01/findCustomerById]</span><br><span class="line"></span><br><span class="line">Looking up handler method for path /findCustomerById</span><br><span class="line"></span><br><span class="line">Returning handler method [public java.lang.String pers.huangyuhui.ssm.controller.CustomerController.findCustomerById(java.lang.Integer,org.springframework.ui.Model)]</span><br><span class="line"></span><br><span class="line">Returning cached instance of singleton bean &apos;customerController&apos;</span><br><span class="line"></span><br><span class="line">Last-Modified value for [/ssm_01/findCustomerById] is: -1</span><br><span class="line"></span><br><span class="line">Creating new transaction with name [pers.huangyuhui.ssm.service.impl.CustomerServiceImpl.findCustomerById]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; &apos;&apos;</span><br><span class="line"></span><br><span class="line">Acquired Connection [636338281, URL=jdbc:mysql://LOCALHOST/mybatis_spring?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true, UserName=root@localhost, MySQL Connector/J] for JDBC transaction</span><br><span class="line"></span><br><span class="line">Switching JDBC Connection [636338281, URL=jdbc:mysql://LOCALHOST/mybatis_spring?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true, UserName=root@localhost, MySQL Connector/J] to manual commit</span><br><span class="line"></span><br><span class="line">Creating a new SqlSession</span><br><span class="line"></span><br><span class="line">Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61b17833]</span><br><span class="line"></span><br><span class="line">JDBC Connection [636338281, URL=jdbc:mysql://LOCALHOST/mybatis_spring?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true, UserName=root@localhost, MySQL Connector/J] will be managed by Spring</span><br><span class="line"></span><br><span class="line">==&gt;  Preparing: select id,name,job,phone from t_customer where id = ? </span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line"></span><br><span class="line">Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61b17833]</span><br><span class="line"></span><br><span class="line">Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61b17833]</span><br><span class="line">Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61b17833]</span><br><span class="line">Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61b17833]</span><br><span class="line"></span><br><span class="line">Initiating transaction commit</span><br><span class="line"></span><br><span class="line">Committing JDBC transaction on Connection [636338281, URL=jdbc:mysql://LOCALHOST/mybatis_spring?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true, UserName=root@localhost, MySQL Connector/J]</span><br><span class="line"></span><br><span class="line">Releasing JDBC Connection [636338281, URL=jdbc:mysql://LOCALHOST/mybatis_spring?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true, UserName=root@localhost, MySQL Connector/J] after transaction</span><br><span class="line"></span><br><span class="line">Returning JDBC Connection to DataSource</span><br><span class="line"></span><br><span class="line">Invoking afterPropertiesSet() on bean with name &apos;customerInfo&apos;</span><br><span class="line"></span><br><span class="line">Rendering view [org.springframework.web.servlet.view.InternalResourceView: name &apos;customerInfo&apos;; URL [/WEB-INF/view/customerInfo.jsp]] in DispatcherServlet with name &apos;spring_mvc&apos;</span><br><span class="line"></span><br><span class="line">Added model object &apos;customer&apos; of type [pers.huangyuhui.ssm.po.Customer] to request in view with name &apos;customerInfo&apos;</span><br><span class="line"></span><br><span class="line">Added model object &apos;org.springframework.validation.BindingResult.customer&apos; of type [org.springframework.validation.BeanPropertyBindingResult] to request in view with name &apos;customerInfo&apos;</span><br><span class="line"></span><br><span class="line">Forwarding to resource [/WEB-INF/view/customerInfo.jsp] in InternalResourceView &apos;customerInfo&apos;</span><br><span class="line"></span><br><span class="line">Successfully completed request</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-SSMæ•´åˆ&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-SSMæ•´åˆ&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : SSMæ•´åˆ&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : SSMæ•´åˆ&lt;/h2&gt;&lt;h3 id=&quot;æ•´åˆç¯å¢ƒæ­å»º&quot;&gt;&lt;a href=&quot;#æ•´åˆç¯å¢ƒæ­å»º&quot; cla
      
    
    </summary>
    
    
      <category term="MyBatis" scheme="http://yoursite.com/tags/MyBatis/"/>
    
      <category term="Spring" scheme="http://yoursite.com/tags/Spring/"/>
    
      <category term="Spring MVC" scheme="http://yoursite.com/tags/Spring-MVC/"/>
    
  </entry>
  
  <entry>
    <title>Spring MVCä¹‹æ‹¦æˆªå™¨</title>
    <link href="http://yoursite.com/2019/05/23/Spring-MVC%E4%B9%8B%E6%8B%A6%E6%88%AA%E5%99%A8/"/>
    <id>http://yoursite.com/2019/05/23/Spring-MVCä¹‹æ‹¦æˆªå™¨/</id>
    <published>2019-05-23T14:05:26.000Z</published>
    <updated>2019-05-29T08:49:25.483Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹æ‹¦æˆªå™¨"><a href="#å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹æ‹¦æˆªå™¨" class="headerlink" title="å­¦ä¹ ç¬”è®° : Spring MVCä¹‹æ‹¦æˆªå™¨"></a>å­¦ä¹ ç¬”è®° : Spring MVCä¹‹æ‹¦æˆªå™¨</h2><p><em>ç®€ä»‹ : Spring MVCä¸­çš„æ‹¦æˆªå™¨(<code>Interceptor</code>)ç±»ä¼¼äºServletä¸­çš„è¿‡æ»¤å™¨(<code>Filter</code>),ä¸»è¦ç”¨äºæ‹¦æˆªç”¨æˆ·è¯·æ±‚å¹¶åšç›¸åº”çš„å¤„ç†,ä¾‹å¦‚é€šè¿‡æ‹¦æˆªå™¨å¯ä»¥è¿›è¡Œæƒé™éªŒè¯,è®°å½•è¯·æ±‚ä¿¡æ¯çš„æ—¥å¿—,åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•ç­‰..è¦ä½¿ç”¨Spring MVCä¸­çš„æ‹¦æˆªå™¨,å°±éœ€è¦å¯¹æ‹¦æˆªå™¨ç±»è¿›è¡Œå®šä¹‰å’Œé…ç½®,é€šå¸¸æ‹¦æˆªå™¨ç±»å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å®šä¹‰,å¦‚ä¸‹æ‰€ç¤º :</em></p><ol><li>å®ç°<code>HandlerInterceptor</code>æ¥å£,æˆ–ç»§æ‰¿HandlerInterceptoræ¥å£çš„å®ç°ç±»,å¦‚<code>HandlerInterceptorAdapter</code>.</li><li>å®ç°<code>WebRequestInterceptor</code>æ¥å£,æˆ–ç»§æ‰¿WebRequestInterceptoræ¥å£çš„å®ç°ç±».</li></ol><h3 id="æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹"><a href="#æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹"></a>æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹</h3><h4 id="å•ä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹"><a href="#å•ä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="å•ä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹"></a>å•ä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹</h4><ol><li><p><em>web.xml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag"><span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"4.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">display-name</span>&gt;</span>springmvc_filter<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è®¾ç½®å‰ç«¯è¿‡æ»¤å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring_mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åˆå§‹åŒ–æ—¶åŠ è½½é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-config.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å®¹å™¨å¯åŠ¨æ—¶ç«‹å³åŠ è½½Servlet --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring_mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>CustomInterceptor.java : è‡ªå®šä¹‰æ‹¦æˆªå™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.springmvc.filter.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: CustomInterceptor</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 23, 2019 9:23:19 PM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"------ this is preHandle1 ------"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler,</span></span></span><br><span class="line"><span class="function"><span class="params">ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"------ this is postHandle1 ------"</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"------ this is afterCompletion1 ------"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>springmvc-config.xml : Spring MVCé…ç½®æ–‡ä»¶</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æŒ‡å®šéœ€è¦æ‰«æçš„åŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"pers.huangyuhui.springmvc.filter.controller"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å®šä¹‰è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"viewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è®¾ç½®å‰ç¼€ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/view/"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è®¾ç½®åç¼€ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"pers.huangyuhui.springmvc.filter.interceptor.CustomInterceptor"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>MyController.java : æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.springmvc.filter.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: MyController</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 23, 2019 9:20:31 PM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/myFilter"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Title</span>: singleFilter</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æµ‹è¯•å•ä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/singleFilter"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">singleFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"test my filter ~"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>æ–°å»º<code>WebContent/WEB-INF/view/index.jsp</code>(ä»…æµ‹è¯•)</em></p></li><li><p><em>å°†é¡¹ç›®å‘å¸ƒåˆ°TomcatæœåŠ¡å™¨å¹¶å¯åŠ¨,åœ¨æµè§ˆå™¨ä¸­è®¿é—®åœ°å€: <code>http://localhost:8080/springmvc_filter/myFilter/singleFilter</code> å³å¯å¾—åˆ°ç¨‹åºè¿è¡Œç»“æœ,å¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">------ this is preHandle1 ------</span><br><span class="line">test my filter ~</span><br><span class="line">------ this is postHandle1 ------</span><br><span class="line">------ this is afterCompletion1 ------</span><br></pre></td></tr></table></figure></li></ol><h4 id="å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹"><a href="#å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹"></a>å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹</h4><ol><li><p><em>web.xml(åŒä¸Š..)</em></p></li><li><p><em>CustomInterceptor.java : ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰æ‹¦æˆªå™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.springmvc.filter.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: CustomInterceptor</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: è‡ªå®šä¹‰æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 23, 2019 9:23:19 PM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"------ this is preHandle1 ------"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler,</span></span></span><br><span class="line"><span class="function"><span class="params">ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"------ this is postHandle1 ------"</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"------ this is afterCompletion1 ------"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>CustomInterceptor2.java : ç¬¬äºŒä¸ªè‡ªå®šä¹‰æ‹¦æˆªå™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.springmvc.filter.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: CustomInterceptor2</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: è‡ªå®šä¹‰æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 29, 2019 3:46:30 PM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomInterceptor2</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"------ this is preHandle2 ------"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler,</span></span></span><br><span class="line"><span class="function"><span class="params">ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"------ this is postHandle2 ------"</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"------ this is afterCompletion2------"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>springmvc-config.xml : Spring MVCé…ç½®æ–‡ä»¶</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æŒ‡å®šéœ€è¦æ‰«æçš„åŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"pers.huangyuhui.springmvc.filter.controller"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å®šä¹‰è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"viewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è®¾ç½®å‰ç¼€ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/view/"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è®¾ç½®åç¼€ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æ‹¦æˆªå™¨1 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ‹¦æˆªæ‰€æœ‰è·¯å¾„ä¸‹çš„è¯·æ±‚  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ‹¦æˆªæŒ‡å®šè·¯å¾„çš„è¯·æ±‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"pers.huangyuhui.springmvc.filter.interceptor.CustomInterceptor"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æ‹¦æˆªå™¨2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"pers.huangyuhui.springmvc.filter.interceptor.CustomInterceptor2"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>MyController.java : æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.springmvc.filter.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: MyController</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 23, 2019 9:20:31 PM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/myFilter"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Title</span>: doubleFilter</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æµ‹è¯•å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/doubleFilter"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">doubleFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"test my filter ~"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>æ–°å»º<code>WebContent/WEB-INF/view/index.jsp</code>(ä»…æµ‹è¯•)</em></p></li><li><p><em>å°†é¡¹ç›®å‘å¸ƒåˆ°TomcatæœåŠ¡å™¨å¹¶å¯åŠ¨,åœ¨æµè§ˆå™¨ä¸­è®¿é—®åœ°å€: <code>http://localhost:8080/springmvc_filter/myFilter/doubleFilter</code> å³å¯å¾—åˆ°ç¨‹åºè¿è¡Œç»“æœ,å¦‚ä¸‹æ‰€ç¤º :</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">------ this is preHandle1 ------</span><br><span class="line">------ this is preHandle2 ------</span><br><span class="line">test my filter ~</span><br><span class="line">------ this is postHandle2 ------</span><br><span class="line">------ this is postHandle1 ------</span><br><span class="line">------ this is afterCompletion2------</span><br><span class="line">------ this is afterCompletion1 ------</span><br></pre></td></tr></table></figure></li></ol><h3 id="åº”ç”¨æ¡ˆä¾‹"><a href="#åº”ç”¨æ¡ˆä¾‹" class="headerlink" title="åº”ç”¨æ¡ˆä¾‹"></a>åº”ç”¨æ¡ˆä¾‹</h3><p><em>ç®€ä»‹ : é€šè¿‡æ‹¦æˆªå™¨æ¥å®Œæˆä¸€ä¸ªç”¨æˆ·ç™»å½•æƒé™éªŒè¯æ¡ˆä¾‹.åœ¨æœ¬æ¡ˆä¾‹ä¸­,è¦æ±‚å¦‚ä¸‹ :</em></p><ul><li><em>åªæœ‰ç™»å½•åçš„ç”¨æˆ·æ‰èƒ½è®¿é—®ç³»ç»Ÿä¸»é¡µé¢,å¦‚æœæ²¡æœ‰ç™»å½•ç³»ç»Ÿè€Œç›´æ¥è®¿é—®ä¸»é¡µé¢,åˆ™å…¶è¯·æ±‚ä¼šè¢«æ‹¦æˆªå™¨æ‰€æ‹¦æˆª,å¹¶è½¬å‘åˆ°ç™»å½•é¡µé¢,åŒæ—¶åœ¨ç™»å½•é¡µé¢æå‡ºæç¤ºä¿¡æ¯.</em></li><li><em>å¦‚æœç”¨æˆ·åæˆ–å¯†ç é”™è¯¯,ä¼šåœ¨ç™»å½•é¡µé¢ç»™å‡ºç›¸åº”çš„æç¤ºä¿¡æ¯.</em> </li><li><em>å½“å·²ç™»å½•çš„ç”¨æˆ·åœ¨ç³»ç»Ÿä¸»é¡µä¸­å•å‡»â€é€€å‡ºâ€æŒ‰é’®æ—¶,ç³»ç»Ÿå°†ä¼šé€€å›åˆ°ç™»å½•é¡µé¢.</em></li></ul><ol><li><p><em>web.xml : ç•¥..</em></p></li><li><p><em>User.java : ç”¨æˆ·ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.springmvc.filter.bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: User</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 24, 2019 8:43:49 AM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> password;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.password = password;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>login.jsp : ç”¨æˆ·ç™»å½•é¡µé¢</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>åº”ç”¨æ¡ˆä¾‹-å®ç°ç”¨æˆ·ç™»å½•æƒé™éªŒè¯<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span>ç”¨æˆ·ç™»å½•é¡µé¢  ($&#123;msg &#125;)<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath &#125;/login"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>ç”¨æˆ·å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">height</span>=<span class="string">"50px"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>å¯†ç <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"margin-left:33px"</span> <span class="attr">type</span>=<span class="string">"submit"</span>  <span class="attr">value</span>=<span class="string">"ç™»å½•"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span>  <span class="attr">value</span>=<span class="string">"é‡ç½®"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>main.jsp : ç³»ç»Ÿä¸»é¡µé¢</em></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">language</span>=<span class="string">"java"</span> <span class="attr">contentType</span>=<span class="string">"text/html; charset=UTF-8"</span> <span class="attr">pageEncoding</span>=<span class="string">"UTF-8"</span>%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>åº”ç”¨æ¡ˆä¾‹-å®ç°ç”¨æˆ·ç™»å½•æƒé™éªŒè¯<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span>ç”¨æˆ·ä¸»é¡µé¢<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>å½“å‰ç”¨æˆ· $&#123;USER_SESSION.name &#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"$&#123;pageContext.request.contextPath &#125;/logout"</span>&gt;</span>é€€å‡º<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><em>UserController.java : æ§åˆ¶å™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.springmvc.filter.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.springmvc.filter.bean.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: UserController</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 24, 2019 8:45:24 AM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Title</span>: toLogin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: è·³è½¬åˆ°ç”¨æˆ·ç™»å½•é¡µé¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: null</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// @RequestMapping(value = "/login", method = RequestMethod.GET)</span></span><br><span class="line"><span class="meta">@GetMapping</span>(value = <span class="string">"/login"</span>) <span class="comment">// ç»„åˆæ³¨è§£</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toLogin</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Title</span>: login</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: ç”¨æˆ·ç™»å½•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: user</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: model</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: session</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// @RequestMapping(value = "/login", method = RequestMethod.POST)</span></span><br><span class="line"><span class="meta">@PostMapping</span>(value = <span class="string">"/login"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(User user, Model model, HttpSession session)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ç”¨æˆ·ååŠå¯†ç </span></span><br><span class="line">String username = user.getName();</span><br><span class="line">String password = user.getPassword();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤„æ¨¡æ‹Ÿä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·åå’Œå¯†ç åè¿›è¡Œåˆ¤æ–­</span></span><br><span class="line"><span class="keyword">if</span> ((username != <span class="keyword">null</span> &amp;&amp; username.equals(<span class="string">"YUbuntu0109"</span>)) &amp;&amp; (password != <span class="keyword">null</span> &amp;&amp; password.equals(<span class="string">"demo"</span>))) &#123;</span><br><span class="line"><span class="comment">// å°†ç”¨æˆ·å¯¹è±¡æ·»åŠ åˆ°Sessoin</span></span><br><span class="line">session.setAttribute(<span class="string">"USER_SESSION"</span>, user);</span><br><span class="line"><span class="comment">// é‡å®šå‘åˆ°ä¸»é¡µé¢</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">"redirect:main"</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">model.addAttribute(<span class="string">"msg"</span>, <span class="string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯,è¯·é‡æ–°ç™»å½•å“Ÿ !"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Title</span>: toMain</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: è·³è½¬åˆ°ç”¨æˆ·ä¸»é¡µ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: null</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/main"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toMain</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"main"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Title</span>: logout</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: é€€å‡ºç™»å½•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>: session</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>: String</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/logout"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">logout</span><span class="params">(HttpSession session)</span> </span>&#123;</span><br><span class="line"><span class="comment">// æ¸…é™¤Session</span></span><br><span class="line">session.invalidate();</span><br><span class="line"><span class="comment">// é‡å®šå‘åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">"redirect:login"</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>LoginInterceptor.java : è‡ªå®šä¹‰æ‹¦æˆªå™¨</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pers.huangyuhui.springmvc.filter.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pers.huangyuhui.springmvc.filter.bean.User;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: MyInterceptor</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: ç”¨æˆ·ç™»å½•æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: HuangYuhui</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: May 24, 2019 8:59:20 AM</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–è¯·æ±‚çš„URL</span></span><br><span class="line">String url = request.getRequestURI();</span><br><span class="line"><span class="comment">// é™¤äº†login.jspå¯ä»¥å…¬å¼€è®¿é—®å¤–,å…¶å®ƒURLéƒ½è¿›è¡Œæ‹¦æˆªæ§åˆ¶</span></span><br><span class="line"><span class="keyword">if</span> (url.indexOf(<span class="string">"/login"</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–Session</span></span><br><span class="line">HttpSession session = request.getSession();</span><br><span class="line">User user = (User) session.getAttribute(<span class="string">"USER_SESSION"</span>);</span><br><span class="line"><span class="comment">// åˆ¤æ–­Sessionä¸­æ˜¯å¦æœ‰ç”¨æˆ·æ•°æ®</span></span><br><span class="line"><span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹ä¸ç¬¦åˆæ¡ä»¶çš„ç»™å‡ºæç¤ºä¿¡æ¯å¹¶è½¬å‘åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line">request.setAttribute(<span class="string">"msg"</span>, <span class="string">"ä½ å°šæœªç™»å½•,è¯·å…ˆç™»å½•å“Ÿ !"</span>);</span><br><span class="line">request.getRequestDispatcher(<span class="string">"/WEB-INF/view/login.jsp"</span>).forward(request, response);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler,</span></span></span><br><span class="line"><span class="function"><span class="params">ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"this is postHandle"</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span></span></span><br><span class="line"><span class="function"><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"this is afterCompletion"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><em>å°†é¡¹ç›®å‘å¸ƒåˆ°TomcatæœåŠ¡å™¨å¹¶å¯åŠ¨,åœ¨æµè§ˆå™¨ä¸­è®¿é—®åœ°å€: <code>http://localhost:8080/springmvc_filter/main</code> å…¶é¡µé¢å¦‚ä¸‹:</em></p></li></ol><p><img src="/2019/05/23/Spring-MVCä¹‹æ‹¦æˆªå™¨/SpringMVC_Filter-login.PNG" alt=" "></p><p><em>ç™»å½•æˆåŠŸå,å…¶é¡µé¢å¦‚ä¸‹ :</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/2019/05/23/Spring-MVCä¹‹æ‹¦æˆªå™¨/SpringMVC_Filter-main.PNG" alt title>                </div>                <div class="image-caption"></div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹æ‹¦æˆªå™¨&quot;&gt;&lt;a href=&quot;#å­¦ä¹ ç¬”è®°-Spring-MVCä¹‹æ‹¦æˆªå™¨&quot; class=&quot;headerlink&quot; title=&quot;å­¦ä¹ ç¬”è®° : Spring MVCä¹‹æ‹¦æˆªå™¨&quot;&gt;&lt;/a&gt;å­¦ä¹ ç¬”è®° : Spring MVCä¹‹æ‹¦æˆªå™¨&lt;/h2&gt;&lt;
      
    
    </summary>
    
    
      <category term="Spring MVC" scheme="http://yoursite.com/tags/Spring-MVC/"/>
    
  </entry>
  
</feed>
